<!DOCTYPE html>
<!--
  The AI Startup Game
  ====================
  ¬© 2025 Ammon Salter, Stefano Baruffaldi, Federico Bignone
  
  Lead Author: Ammon Salter
  Contributors: Stefano Baruffaldi, Federico Bignone
  AI Assistants: Claude (Anthropic), Gemini (Google), ChatGPT (Horizon Labs)
  
  Citation: Salter, A., Baruffaldi, S., & Bignone, F. (2025). The AI Startup Game. 
    https://github.com/ammonsalter-del/AIventure-Game
  
  Licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 
  International License (CC BY-NC-SA 4.0).
  
  You are free to:
    - Share: copy and redistribute the material in any medium or format
    - Adapt: remix, transform, and build upon the material
  
  Under the following terms:
    - Attribution: You must give appropriate credit to the creators
    - NonCommercial: You may not use the material for commercial purposes
    - ShareAlike: If you remix or transform, you must distribute under the same license
  
  Full license: https://creativecommons.org/licenses/by-nc-sa/4.0/
  
  This game was developed as part of the ESRC-funded project:
  "Profiting from Science: the development and valuation of Artificial Intelligence 
  new ventures and engagement with the science base"
  Grant Reference: ES/X003949/1
  Principal Investigator: Ammon Salter
  Co-Investigator: Stefano Baruffaldi
  Lead Researcher: Federico Bignone
  
  Contributors: Paola Criscuolo, Linus Dahlander, Christos Kolympiris, Orietta Marsili, Rossella Salandra, Giacomo Salter, Suki Salter
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The AI Startup Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Google Analytics 4 -->
  <!-- To set up: 
       1. Go to https://analytics.google.com
       2. Create account and property
       3. Replace G-XXXXXXXXXX below with your Measurement ID 
  -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
    
    // Custom game event tracking
    function trackGameEvent(eventName, eventData = {}) {
      gtag('event', eventName, eventData);
    }
  </script>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    
    /* Hiring cards - large and readable */
    .hire-card {
      transition: all 0.2s ease;
      cursor: pointer;
    }
    .hire-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    }
    .hire-card.selected {
      border-color: #22c55e !important;
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%) !important;
    }
    
    /* Executive portraits */
    .exec-portrait {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
    }
    .exec-portrait img, .exec-portrait svg { width: 100%; height: 100%; object-fit: cover; }
    
    .exec-portrait-lg {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
    }
    .exec-portrait-lg img, .exec-portrait-lg svg { width: 100%; height: 100%; object-fit: cover; }
    
    /* Mood indicators */
    .mood-ring {
      position: absolute;
      inset: -3px;
      border-radius: 50%;
      border: 3px solid transparent;
    }
    .mood-happy .mood-ring { border-color: #22c55e; box-shadow: 0 0 12px #22c55e40; }
    .mood-neutral .mood-ring { border-color: #64748b; }
    .mood-frustrated .mood-ring { border-color: #f59e0b; box-shadow: 0 0 12px #f59e0b40; }
    .mood-upset .mood-ring { border-color: #ef4444; box-shadow: 0 0 12px #ef444440; }
    
    /* Decision cards - the main event */
    .decision-card {
      transition: all 0.2s ease;
      cursor: pointer;
    }
    .decision-card:hover {
      background-color: #f8fafc;
      border-color: #94a3b8;
    }
    .decision-card.selected {
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border-color: #10b981;
      box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    /* News ticker */
    .news-ticker {
      background: linear-gradient(90deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
      overflow: hidden;
      white-space: nowrap;
    }
    .news-ticker-content {
      display: inline-block;
      animation: ticker 40s linear infinite;
    }
    @keyframes ticker {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    
    /* Market badges */
    .market-positive { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
    .market-negative { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
    .market-neutral { background: #f1f5f9; color: #475569; border: 1px solid #cbd5e1; }
    
    /* Shock modal */
    .shock-overlay { animation: fadeIn 0.3s ease; }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes float-up {
      0% { transform: translateY(0) translateX(-50%); opacity: 1; }
      100% { transform: translateY(-50px) translateX(-50%); opacity: 0; }
    }
    
    /* Stat pills */
    .stat-pill {
      display: inline-flex;
      align-items: center;
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 11px;
      font-weight: 500;
    }
    
    /* Conference mini-game */
    .conf-delegate {
      position: absolute;
      bottom: 48px;
      transition: transform 0.1s ease;
      cursor: pointer;
      pointer-events: auto;
    }
    .conf-delegate:hover {
      transform: scale(1.15);
    }
    .conf-delegate.interested {
      animation: delegateBounce 0.3s ease infinite;
    }
    .conf-delegate.disgusted {
      animation: delegateShake 0.3s ease;
    }
    .conf-delegate.converting {
      animation: delegateJump 0.4s ease;
    }
    .conf-delegate.leaving-angry {
      animation: delegateStorm 0.5s ease forwards;
    }
    @keyframes delegateBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }
    @keyframes delegateShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      75% { transform: translateX(3px); }
    }
    @keyframes delegateJump {
      0% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-15px) scale(1.2); }
      100% { transform: translateY(0) scale(1); opacity: 0; }
    }
    @keyframes delegateStorm {
      0% { transform: translateX(0); }
      100% { transform: translateX(100px); opacity: 0; }
    }
    @keyframes delegateWalk {
      0%, 100% { transform: translateY(0) rotate(-2deg); }
      50% { transform: translateY(-2px) rotate(2deg); }
    }
    .conf-delegate.walking {
      animation: delegateWalk 0.25s ease infinite;
    }
    .conf-action-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .conf-action-btn:active:not(:disabled) {
      transform: scale(0.95);
    }
    .conf-effect {
      position: absolute;
      pointer-events: none;
      animation: effectPop 0.5s ease forwards;
    }
    @keyframes effectPop {
      0% { transform: translateY(0) scale(0.5); opacity: 1; }
      100% { transform: translateY(-30px) scale(1.1); opacity: 0; }
    }
    .conf-wave {
      position: absolute;
      border-radius: 50%;
      border: 3px solid #3b82f6;
      animation: waveExpand 0.6s ease forwards;
    }
    @keyframes waveExpand {
      0% { transform: scale(0.5); opacity: 1; }
      100% { transform: scale(2.5); opacity: 0; }
    }
    .conf-rival-action {
      animation: rivalPulse 0.5s ease;
    }
    @keyframes rivalPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); filter: brightness(1.2); }
    }
    
    /* Pitch mini-game styles */
    .pitch-action-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }
    .pitch-action-btn:active:not(:disabled) {
      transform: scale(0.95);
    }
    .pitch-effect {
      position: absolute;
      pointer-events: none;
      animation: pitchEffectPop 0.6s ease forwards;
      font-size: 20px;
      font-weight: bold;
    }
    @keyframes pitchEffectPop {
      0% { transform: translateY(0) scale(0.5); opacity: 1; }
      100% { transform: translateY(-40px) scale(1.2); opacity: 0; }
    }
    .pitch-investor {
      transition: all 0.3s ease;
    }
    .pitch-investor.interested {
      transform: scale(1.1);
    }
    .pitch-investor.bored {
      opacity: 0.6;
    }
    .pitch-investor.excited {
      animation: investorExcited 0.5s ease infinite;
    }
    @keyframes investorExcited {
      0%, 100% { transform: scale(1.1); }
      50% { transform: scale(1.15); }
    }
    .pitch-presenter-action {
      animation: presenterAction 0.3s ease;
    }
    @keyframes presenterAction {
      0%, 100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.2); }
    }
    .pitch-attention-pulse {
      animation: attentionPulse 0.3s ease;
    }
    @keyframes attentionPulse {
      0%, 100% { transform: scaleX(1); }
      50% { transform: scaleX(1.02); }
    }
    
    /* Mini-game intro transition */
    .minigame-intro-overlay {
      animation: introFadeIn 0.4s ease;
    }
    @keyframes introFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .minigame-intro-card {
      animation: introSlideUp 0.5s ease;
    }
    @keyframes introSlideUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .minigame-intro-icon {
      animation: introPulse 2s ease-in-out infinite;
    }
    @keyframes introPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    .minigame-intro-glow {
      animation: introGlow 1.5s ease-in-out infinite alternate;
    }
    @keyframes introGlow {
      from { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
      to { box-shadow: 0 0 40px rgba(59, 130, 246, 0.6); }
    }
    .minigame-start-btn {
      transition: all 0.2s ease;
    }
    .minigame-start-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
    }
    .minigame-start-btn:active {
      transform: scale(0.98);
    }
    
    /* Investor confrontation modal */
    .confrontation-overlay {
      animation: confrontFadeIn 0.3s ease;
    }
    @keyframes confrontFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .confrontation-card {
      animation: confrontSlideDown 0.4s ease;
    }
    @keyframes confrontSlideDown {
      from { transform: translateY(-30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .confrontation-shake {
      animation: confrontShake 0.5s ease;
    }
    @keyframes confrontShake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-8px); }
      40% { transform: translateX(8px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
    }
    .investor-angry {
      animation: angryPulse 1s ease-in-out infinite;
    }
    @keyframes angryPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
      50% { box-shadow: 0 0 20px 5px rgba(239, 68, 68, 0.4); }
    }
    
    /* Decision feedback transition */
    .feedback-overlay {
      animation: feedbackFadeIn 0.4s ease;
    }
    @keyframes feedbackFadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .feedback-card {
      animation: feedbackSlideIn 0.5s ease;
    }
    @keyframes feedbackSlideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .feedback-item {
      animation: feedbackItemIn 0.3s ease backwards;
    }
    .feedback-item:nth-child(1) { animation-delay: 0.1s; }
    .feedback-item:nth-child(2) { animation-delay: 0.25s; }
    .feedback-item:nth-child(3) { animation-delay: 0.4s; }
    .feedback-item:nth-child(4) { animation-delay: 0.55s; }
    @keyframes feedbackItemIn {
      from { transform: translateX(-20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    .feedback-exceeded {
      background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
      border-left: 4px solid #10b981;
    }
    .feedback-met {
      background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
      border-left: 4px solid #3b82f6;
    }
    .feedback-below {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-left: 4px solid #f59e0b;
    }
    .feedback-failed {
      background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
      border-left: 4px solid #ef4444;
    }
    .feedback-pass {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      border-left: 4px solid #94a3b8;
    }
    .milestone-contribution-bar {
      transition: width 0.8s ease-out;
    }
    @keyframes progressPulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
      50% { box-shadow: 0 0 15px 3px rgba(16, 185, 129, 0.4); }
    }
    .progress-positive {
      animation: progressPulse 1s ease-in-out 2;
    }
  </style>
</head>
<body class="bg-slate-100 min-h-screen">

<!-- COMPACT HEADER -->
<header class="bg-slate-900 text-white py-2 px-4 shadow-lg">
  <div class="max-w-7xl mx-auto flex items-center justify-between">
    <div class="flex items-center gap-4">
      <h1 class="text-lg font-bold">The AI Startup Game</h1>
      <div class="flex items-center gap-2">
        <!-- Founder Portrait -->
        <div id="founderPortraitHeader" class="w-8 h-8 rounded-full overflow-hidden border-2 border-slate-600 hidden"></div>
        <div id="companyLogo" class="w-6 h-6 hidden"></div>
        <div class="flex flex-col">
          <span id="companyDisplay" class="text-slate-400 text-sm">-</span>
          <span id="founderNameHeader" class="text-slate-500 text-[10px] hidden"></span>
        </div>
        <span id="locationDisplay" class="text-slate-500 text-xs hidden">üìç -</span>
      </div>
    </div>
    <div class="flex items-center gap-6 text-sm">
      <div id="extremeModeIndicator" class="hidden">
        <span class="px-2 py-1 bg-rose-600 text-white text-xs font-bold rounded-full animate-pulse">üî• EXTREME</span>
      </div>
      <div class="text-center group relative cursor-help" onclick="game.showHelp('quarter')">
        <div class="text-slate-400 text-[10px] uppercase">Quarter</div>
        <div id="turnDisplay" class="font-mono font-bold">Q1</div>
        <div class="hidden group-hover:block absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-50">
          Game progresses in quarters. Make decisions, spend AP, burn cash. Complete 3 milestones to win!
        </div>
      </div>
      <div class="text-center group relative cursor-help" onclick="game.showHelp('cash')">
        <div class="text-slate-400 text-[10px] uppercase">Cash</div>
        <div id="headerCash" class="font-mono font-bold text-emerald-400">¬£0k</div>
        <div class="hidden group-hover:block absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-50">
          Your available cash. Decreases by burn rate each quarter. Zero = game over! üíÄ
        </div>
      </div>
      <div class="text-center group relative cursor-help" onclick="game.showHelp('runway')">
        <div class="text-slate-400 text-[10px] uppercase">Runway</div>
        <div id="headerRunway" class="font-mono font-bold text-amber-400">0q</div>
        <div class="hidden group-hover:block absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-50">
          Quarters until cash runs out (Cash √∑ Burn). Keep above 2! Raise funding or cut costs to extend.
        </div>
      </div>
      <div class="text-center group relative cursor-help" onclick="game.showHelp('valuation')">
        <div class="text-slate-400 text-[10px] uppercase">Valuation</div>
        <div id="headerVal" class="font-mono font-bold text-sky-400">¬£0k</div>
        <div class="hidden group-hover:block absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-50">
          Your company's worth. Higher = better funding terms & exit options. Grows with milestones & metrics.
        </div>
      </div>
      <div class="text-center group relative cursor-help" onclick="game.showHelp('milestones')">
        <div class="text-slate-400 text-[10px] uppercase">Milestones</div>
        <div id="headerMilestones" class="font-mono font-bold">0/3</div>
        <div class="hidden group-hover:block absolute top-full left-1/2 -translate-x-1/2 mt-2 w-48 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-50">
          Complete 3 milestones to win! Each has requirements & a deadline. Miss a deadline = game over! üéØ
        </div>
      </div>
      <button onclick="game.showHelpModal()" class="p-2 hover:bg-slate-700 rounded-lg transition-colors" title="Help & Guide">
        <span>‚ùì</span>
      </button>
      <button id="soundToggle" onclick="toggleSound()" class="p-2 hover:bg-slate-700 rounded-lg transition-colors" title="Toggle Sound">
        <span id="soundIcon">üîä</span>
      </button>
    </div>
  </div>
</header>

<!-- NEWS TICKER -->
<div class="news-ticker py-1 text-xs text-slate-400">
  <div class="news-ticker-content">
    <span id="newsContent">UK tech sector shows steady growth ‚Ä¢ AI adoption continues ‚Ä¢ London retains European hub status ‚Ä¢ </span>
  </div>
</div>

<!-- MAIN GAME LAYOUT - Decisions are CENTER and LARGE -->
<main class="max-w-7xl mx-auto p-4">
  
  <!-- MILESTONE TRACKER - Top priority, always visible -->
  <div id="milestoneTracker" class="bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl shadow-sm p-4 border-2 border-amber-300 mb-4">
    <div class="flex items-center justify-between mb-2">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 rounded-full bg-amber-500 flex items-center justify-center text-white text-xl">üéØ</div>
        <div>
          <div class="text-xs text-amber-600 font-medium uppercase tracking-wide">Current Milestone</div>
          <div id="milestoneLabel2" class="font-bold text-slate-800">None set</div>
        </div>
      </div>
      <div class="text-right">
        <div class="text-2xl font-mono font-bold text-amber-600"><span id="milestoneProgress2">0</span>%</div>
        <div id="milestoneDeadline2" class="text-xs text-slate-500">-</div>
      </div>
    </div>
    <div class="h-4 bg-white rounded-full overflow-hidden border border-amber-200 shadow-inner">
      <div id="milestoneBar2" class="h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full transition-all duration-500" style="width: 0%"></div>
    </div>
    <div id="milestoneHint" class="mt-2 text-xs text-amber-700 hidden">
      üí° Focus on: <span id="milestoneFocusAreas"></span>
    </div>
  </div>

  <div class="grid lg:grid-cols-[1fr_300px] gap-4">
    
    <!-- LEFT: THE BOARDROOM (Main focus) -->
    <div class="space-y-4">
      
      <!-- AP TRACKER - Redesigned -->
      <div id="apTrackerContainer" class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <div class="flex items-center justify-between mb-3">
          <div class="flex items-center gap-2">
            <h2 class="font-bold text-slate-800">Action Points</h2>
            <button onclick="game.showHelp('ap')" class="w-5 h-5 rounded-full bg-slate-200 hover:bg-slate-300 text-slate-500 text-xs flex items-center justify-center" title="How AP works">?</button>
          </div>
          <div class="text-xs text-slate-500">üí° Unused AP banks (max 2)</div>
        </div>
        
        <!-- Main display - three boxes -->
        <div id="apDisplayArea" class="bg-slate-100 rounded-lg p-3">
          <div class="grid grid-cols-3 gap-2 mb-3">
            <!-- Spent -->
            <div id="apSpentBox" class="bg-slate-200 rounded-lg p-2 text-center">
              <div id="apSpentNum" class="text-2xl font-bold text-slate-400">0</div>
              <div class="text-[10px] text-slate-500 font-medium uppercase tracking-wide">Spent</div>
            </div>
            <!-- Remaining - highlighted -->
            <div id="apLeftBox" class="bg-emerald-500 rounded-lg p-2 text-center shadow-md">
              <div id="apLeftNum" class="text-2xl font-bold text-white">5</div>
              <div id="apLeftLabel" class="text-[10px] text-emerald-100 font-medium uppercase tracking-wide">Left</div>
            </div>
            <!-- Banked -->
            <div id="apBankedBox" class="bg-slate-100 rounded-lg p-2 text-center border border-dashed border-slate-300">
              <div id="apBankedNum" class="text-2xl font-bold text-slate-300">0</div>
              <div class="text-[10px] text-slate-400 font-medium uppercase tracking-wide">Banked</div>
            </div>
          </div>
          
          <!-- Visual bar -->
          <div class="h-2 bg-slate-200 rounded-full overflow-hidden flex" id="apProgressBar">
            <div id="apBarSpent" class="bg-slate-400 h-full transition-all" style="width: 0%"></div>
            <div id="apBarBase" class="bg-emerald-500 h-full transition-all" style="width: 100%"></div>
            <div id="apBarBanked" class="bg-amber-400 h-full transition-all" style="width: 0%"></div>
            <div id="apBarOver" class="bg-red-500 h-full transition-all" style="width: 0%"></div>
          </div>
          <div class="flex justify-between text-[10px] text-slate-400 mt-1">
            <span id="apBaseDisplay">Base: 5 AP</span>
            <span>Est: <span id="estCost" class="font-medium">¬£0k</span></span>
            <span>Total: <span id="apTotalDisplay">5</span> AP</span>
          </div>
        </div>
        
        <div id="apWarning" class="mt-2 text-sm text-red-600 font-medium text-center hidden">
          ‚ö† Over budget! Remove some choices.
        </div>
        
        <!-- TEAM CAPACITY SECTION -->
        <div class="mt-4 pt-4 border-t border-slate-200">
          <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-2">
              <span class="font-bold text-slate-800">Team Capacity</span>
              <button onclick="game.toggleStaffInfo()" class="w-5 h-5 rounded-full bg-slate-200 hover:bg-slate-300 text-slate-500 text-xs flex items-center justify-center" title="How staffing works">?</button>
            </div>
            <div id="staffAPBonusDisplay" class="px-2 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-700">+0 AP</div>
          </div>
          
          <!-- Visual Staff Display -->
          <div class="bg-gradient-to-br from-slate-50 to-slate-100 rounded-xl p-3 mb-3 border border-slate-200">
            <div id="staffIconsRow" class="flex flex-wrap gap-1 justify-center mb-2 min-h-[28px]">
              <!-- Staff icons rendered by JS -->
            </div>
            <div class="flex items-center justify-between">
              <div class="text-center">
                <div id="staffCount" class="text-2xl font-bold text-slate-800">0</div>
                <div class="text-[10px] text-slate-500 uppercase tracking-wide">Staff</div>
              </div>
              <div class="text-slate-300 text-lg">‚Üí</div>
              <div class="text-center">
                <div id="staffAPValue" class="text-2xl font-bold text-indigo-600">+0</div>
                <div class="text-[10px] text-slate-500 uppercase tracking-wide">AP Bonus</div>
              </div>
              <div class="text-slate-300 text-lg">‚Üí</div>
              <div class="text-center">
                <div id="staffBurnImpact" class="text-lg font-bold text-rose-600">¬£0k</div>
                <div class="text-[10px] text-slate-500 uppercase tracking-wide">Burn/Q</div>
              </div>
            </div>
            
            <!-- Progress to next tier -->
            <div class="mt-3 pt-2 border-t border-slate-200">
              <div class="flex justify-between text-[10px] text-slate-500 mb-1">
                <span id="staffTierCurrent">Lean team</span>
                <span id="staffTierNext">2 more ‚Üí +1 AP</span>
              </div>
              <div class="h-1.5 bg-slate-200 rounded-full overflow-hidden">
                <div id="staffProgressBar" class="h-full bg-gradient-to-r from-indigo-400 to-purple-500 transition-all rounded-full" style="width: 0%"></div>
              </div>
            </div>
          </div>
          
          <!-- Staff Info Panel (hidden by default) -->
          <div id="staffInfoPanel" class="hidden mb-3 p-3 bg-slate-50 rounded-lg border border-slate-200 text-xs">
            <div class="font-bold text-slate-800 mb-3">üìä How Staffing Works</div>
            
            <!-- AP Bonus Tiers -->
            <div class="mb-3">
              <div class="font-medium text-slate-700 mb-1">Staff ‚Üí Action Points</div>
              <div class="text-slate-600 mb-2">More staff = more capacity to execute each quarter.</div>
              <div class="grid grid-cols-4 gap-1 text-center">
                <div class="bg-slate-200 rounded p-1"><div class="font-bold">1-2</div><div class="text-slate-500">+0 AP</div></div>
                <div class="bg-blue-100 rounded p-1"><div class="font-bold">3-5</div><div class="text-blue-700">+1 AP</div></div>
                <div class="bg-blue-200 rounded p-1"><div class="font-bold">6-8</div><div class="text-blue-700">+2 AP</div></div>
                <div class="bg-blue-300 rounded p-1"><div class="font-bold">9+</div><div class="text-blue-800">+3 AP</div></div>
              </div>
            </div>
            
            <div id="staffUnlockNotice" class="mb-3 text-amber-700 bg-amber-50 p-2 rounded border border-amber-200">
              üîí Staff AP bonus unlocks after completing your first milestone.
            </div>
            
            <!-- Hiring vs Firing comparison -->
            <div class="grid grid-cols-2 gap-2">
              <div class="bg-emerald-50 rounded p-2 border border-emerald-200">
                <div class="font-medium text-emerald-800 mb-1">‚ûï Hiring</div>
                <div class="space-y-0.5 text-emerald-700">
                  <div>‚Ä¢ ¬£50k recruitment cost</div>
                  <div>‚Ä¢ +¬£25k/quarter burn</div>
                  <div>‚Ä¢ ‚àí1 AP this quarter</div>
                  <div class="text-emerald-600 italic">Invest now, gain capacity next Q</div>
                </div>
              </div>
              <div class="bg-rose-50 rounded p-2 border border-rose-200">
                <div class="font-medium text-rose-800 mb-1">‚ûñ Layoffs</div>
                <div class="space-y-0.5 text-rose-700">
                  <div>‚Ä¢ ¬£40k severance cost</div>
                  <div>‚Ä¢ ‚àí¬£25k/quarter burn</div>
                  <div>‚Ä¢ ‚àí1 AP this quarter</div>
                  <div>‚Ä¢ ‚àí1 morale all depts</div>
                  <div class="text-rose-600 italic">Painful but extends runway</div>
                </div>
              </div>
            </div>
            
            <!-- Strategic tips -->
            <div class="mt-3 pt-2 border-t border-slate-200 text-slate-500">
              <span class="font-medium">üí° Tip:</span> Hire before a big push, layoff when cash is tight. Both cause short-term disruption.
            </div>
          </div>
          
          <!-- Hire/Fire Action Buttons - More prominent -->
          <div class="grid grid-cols-2 gap-2">
            <button id="hireBtn" onclick="game.showHireStaffModal()" class="group relative overflow-hidden rounded-lg border-2 border-emerald-300 bg-gradient-to-b from-white to-emerald-50 hover:from-emerald-50 hover:to-emerald-100 transition-all p-2">
              <div class="flex items-center justify-center gap-2">
                <span class="w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center text-sm font-bold group-hover:scale-110 transition-transform">+</span>
                <div class="text-left">
                  <div class="font-semibold text-emerald-800 text-sm">Hire</div>
                  <div class="text-[10px] text-emerald-600">¬£50k ¬∑ +¬£25k burn</div>
                </div>
              </div>
            </button>
            <button id="fireBtn" onclick="game.showFireStaffModal()" class="group relative overflow-hidden rounded-lg border-2 border-rose-300 bg-gradient-to-b from-white to-rose-50 hover:from-rose-50 hover:to-rose-100 transition-all p-2">
              <div class="flex items-center justify-center gap-2">
                <span class="w-6 h-6 rounded-full bg-rose-500 text-white flex items-center justify-center text-sm font-bold group-hover:scale-110 transition-transform">‚àí</span>
                <div class="text-left">
                  <div class="font-semibold text-rose-800 text-sm">Layoff</div>
                  <div class="text-[10px] text-rose-600">¬£40k ¬∑ ‚àí¬£25k burn</div>
                </div>
              </div>
            </button>
          </div>
          
          <!-- Disruption warning (hiring integration or layoff reorganization) -->
          <div id="integrationNotice" class="hidden mt-2 text-xs text-amber-700 bg-amber-50 px-3 py-2 rounded-lg border border-amber-200">
            ‚è≥ <span id="disruptionText">Team disruption this quarter</span> <span class="font-medium">(‚àí<span id="disruptionPenalty">1</span> AP)</span>. Normal capacity next Q.
          </div>
        </div>
      </div>
      
      <!-- EXECUTIVE ROW -->
      <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <div class="flex gap-2 justify-center flex-wrap" id="execRow">
          <!-- Rendered by JS -->
        </div>
      </div>
      
      <!-- INVESTOR ADVICE PANEL - Shows what your investors recommend this quarter -->
      <div id="investorAdvicePanel" class="hidden bg-gradient-to-r from-violet-50 to-amber-50 rounded-xl shadow-sm border border-violet-200 p-4">
        <div id="investorAdviceContent">
          <!-- Fully populated by JS including header -->
        </div>
      </div>
      
      <!-- DECISION AREA - The main event (advisor opinions now integrated) -->
      <div id="decisionArea" class="bg-white rounded-xl shadow-lg border border-slate-200 min-h-[400px] overflow-hidden">
        <!-- Rendered by JS -->
      </div>
      
      <!-- Investor conflict warning (shown when applicable) -->
      <div id="conflictWarning" class="hidden bg-amber-100 rounded-xl p-3 border border-amber-300 text-sm text-amber-800">
        ‚ö† <strong>Your investors disagree on this one.</strong> Whatever you choose, someone will be disappointed.
      </div>
      
      <!-- FUNDING CARD - Prominent raise funding prompt with stats and runway bar -->
      <div id="fundingCard" class="bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl shadow-lg overflow-hidden">
        <div class="flex items-stretch">
          <!-- Left stat: Cash -->
          <div id="fundingStatLeft" class="bg-white/20 px-4 py-3 flex flex-col items-center justify-center min-w-[80px]">
            <div class="text-xs text-white/80 uppercase tracking-wide">Cash</div>
            <div id="fundingCardCash" class="font-bold text-xl text-white">¬£420k</div>
          </div>
          
          <!-- Center: Main content with runway visualization -->
          <div class="flex-1 p-4">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-3">
                <div id="fundingCardIcon" class="text-2xl">üí∞</div>
                <div class="text-white">
                  <div id="fundingCardTitle" class="font-bold">Ready to Raise?</div>
                  <div id="fundingCardText" class="text-white/80 text-sm">Investors are interested in your progress.</div>
                </div>
              </div>
              <button id="raiseBtnCard" class="px-5 py-2.5 bg-white text-emerald-700 font-bold rounded-xl shadow-md hover:shadow-lg hover:bg-emerald-50 transition-all">
                Raise Funding ‚Üí
              </button>
            </div>
            <!-- Runway visualization bar -->
            <div class="flex items-center gap-2 mt-3">
              <span class="text-white/80 text-xs uppercase tracking-wide">Runway:</span>
              <div id="runwayBarContainer" class="flex gap-1 flex-1">
                <!-- 8 quarter segments rendered by JS -->
              </div>
              <span id="fundingCardRunway" class="text-white font-bold text-sm">6 QTR</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- COMMIT BAR -->
      <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <div class="flex items-center justify-center">
          <button id="commitBtn" disabled class="px-6 py-3 bg-slate-700 hover:bg-slate-800 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-bold rounded-xl text-sm uppercase tracking-wide transition-all">
            Commit Quarter ‚Üí
          </button>
        </div>
      </div>
    </div>
    
    <!-- RIGHT SIDEBAR: Stats & Info -->
    <aside class="space-y-3">
      
      <!-- Company Health -->
      <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <h3 class="font-bold text-slate-800 text-sm mb-3">Company Health</h3>
        <div class="space-y-3">
          <div>
            <div class="flex justify-between text-xs mb-1">
              <span class="text-emerald-700 font-medium">üî¨ Research</span>
              <span id="sciScore" class="font-mono">10</span>
            </div>
            <div class="h-2 bg-slate-100 rounded-full overflow-hidden">
              <div id="sciBar" class="h-full bg-emerald-500 rounded-full transition-all" style="width: 10%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between text-xs mb-1">
              <span class="text-sky-700 font-medium">üíª Product</span>
              <span id="devScore" class="font-mono">10</span>
            </div>
            <div class="h-2 bg-slate-100 rounded-full overflow-hidden">
              <div id="devBar" class="h-full bg-sky-500 rounded-full transition-all" style="width: 10%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between text-xs mb-1">
              <span class="text-fuchsia-700 font-medium">üì£ Sales</span>
              <span id="mktScore" class="font-mono">10</span>
            </div>
            <div class="h-2 bg-slate-100 rounded-full overflow-hidden">
              <div id="mktBar" class="h-full bg-fuchsia-500 rounded-full transition-all" style="width: 10%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between text-xs mb-1">
              <span class="text-amber-700 font-medium">üë• People</span>
              <span id="hrScore" class="font-mono">50</span>
            </div>
            <div class="h-2 bg-slate-100 rounded-full overflow-hidden">
              <div id="hrBar" class="h-full bg-amber-500 rounded-full transition-all" style="width: 50%"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Milestone (hidden - using top tracker instead) -->
      <div class="hidden bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <h3 class="font-bold text-slate-800 text-sm mb-2">Current Milestone</h3>
        <p id="milestoneLabel" class="text-xs text-slate-600 mb-2">None set</p>
        <div class="h-3 bg-slate-100 rounded-full overflow-hidden mb-1">
          <div id="milestoneBar" class="h-full bg-amber-500 rounded-full transition-all" style="width: 0%"></div>
        </div>
        <div class="flex justify-between text-[10px] text-slate-400">
          <span id="milestoneProgress">0%</span>
          <span id="milestoneDeadline">-</span>
        </div>
      </div>
      
      <!-- Market -->
      <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <div class="flex items-center justify-between mb-2">
          <h3 class="font-bold text-slate-800 text-sm">Market</h3>
          <span id="marketBadge" class="stat-pill market-neutral">Stable</span>
        </div>
        <p id="marketDesc" class="text-xs text-slate-500">Business as usual.</p>
      </div>
      
      <!-- Competition -->
      <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <div class="flex items-center justify-between mb-3">
          <h3 class="font-bold text-slate-800 text-sm">üèÅ Competition</h3>
          <span class="text-xs text-slate-500">Your Rank: <span id="playerRank" class="font-bold text-emerald-600">#1</span></span>
        </div>
        <div id="rivalsList" class="space-y-2"></div>
        <div id="rivalNews" class="mt-3 pt-2 border-t border-slate-100 text-[10px] text-slate-500 italic hidden"></div>
      </div>
      
      <!-- Financials -->
      <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <h3 class="font-bold text-slate-800 text-sm mb-2">Financials</h3>
        <div class="grid grid-cols-2 gap-2 text-xs">
          <div><span class="text-slate-500">Burn:</span> <span id="burnDisplay" class="font-mono">¬£0k/q</span></div>
          <div><span class="text-slate-500">Equity:</span> <span id="equityDisplay" class="font-mono">100%</span></div>
          <div><span class="text-slate-500">Staff:</span> <span id="staffDisplay" class="font-mono">0</span></div>
          <div><span class="text-slate-500">Runway:</span> <span id="runwayDisplay" class="font-mono">0q</span></div>
        </div>
      </div>
      
      <!-- Log -->
      <div class="bg-white rounded-xl shadow-sm p-4 border border-slate-200">
        <h3 class="font-bold text-slate-800 text-sm mb-2">Log</h3>
        <div id="log" class="h-32 overflow-y-auto space-y-1 text-[11px] text-slate-600">
          <p class="text-slate-400">Your story begins...</p>
        </div>
      </div>
    </aside>
  </div>
</main>

<!-- ==================== MODALS ==================== -->

<!-- Game Preamble / Introduction - Page 1 -->
<div id="preambleModal1" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900 flex items-center justify-center z-50 p-4 overflow-y-auto">
  <div class="max-w-2xl w-full text-center my-auto">
    <!-- Header -->
    <div class="mb-8">
      <div class="text-7xl mb-4">üöÄ</div>
      <h1 class="text-4xl md:text-5xl font-black text-white mb-3 tracking-tight">The AI Startup Game</h1>
      <p class="text-xl text-indigo-300 font-light">Can you build the next AI unicorn?</p>
    </div>
    
    <!-- The Quest -->
    <div class="bg-white/10 backdrop-blur rounded-2xl p-6 mb-8 border border-white/20 text-left">
      <p class="text-lg text-white leading-relaxed mb-4">
        It's 2025. The AI gold rush is on.
      </p>
      <p class="text-slate-300 leading-relaxed mb-4">
        You've quit your job, assembled a small team, and secured just enough funding to get started. 
        Now you have to turn your vision into reality-before the money runs out, the competition 
        overtakes you, or your investors lose patience.
      </p>
      <p class="text-slate-300 leading-relaxed mb-4">
        Hit three major milestones to prove your startup has what it takes. Fail to meet a deadline, 
        run out of cash, or lose your team's trust-and it's game over.
      </p>
      <p class="text-indigo-200 font-medium text-center">
        Do you have what it takes?
      </p>
    </div>
    
    <!-- CTA Buttons -->
    <div class="flex flex-col sm:flex-row justify-center gap-4 mb-6">
      <button onclick="soundManager.playRocketLaunch(); game.showPreamblePage2()" class="group px-10 py-5 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white font-bold text-xl rounded-2xl shadow-lg shadow-indigo-500/30 hover:shadow-xl hover:shadow-indigo-500/40 transition-all transform hover:scale-105">
        Start Your Journey ‚Üí
      </button>
      
      <button onclick="game.startTutorial()" class="group px-8 py-5 bg-white/10 hover:bg-white/20 text-white font-bold text-xl rounded-2xl border border-white/20 transition-all">
        üìö Tutorial
      </button>
    </div>
    
    <!-- Extreme Mode Toggle -->
    <div class="max-w-md mx-auto mb-6">
      <button id="extremeModeTogglePreamble" onclick="game.toggleExtremeMode()" class="w-full flex items-center justify-between p-3 rounded-xl border-2 border-slate-600 hover:border-rose-400 transition-all bg-slate-800/50 hover:bg-rose-900/30 group">
        <div class="flex items-center gap-3">
          <div class="text-left">
            <div class="font-bold text-white text-sm group-hover:text-rose-300 transition-colors">üî• Extreme Mode</div>
            <div class="text-xs text-slate-400 group-hover:text-rose-400 transition-colors">Hidden effects, no hints, less cash</div>
          </div>
        </div>
        <div id="extremeModeStatusPreamble" class="px-3 py-1 rounded-full text-xs font-medium bg-slate-700 text-slate-400">
          OFF
        </div>
      </button>
      <div id="extremeModeDetailsPreamble" class="hidden mt-2 p-3 bg-rose-900/50 rounded-lg border border-rose-500/50 text-xs text-left">
        <div class="text-rose-300 space-y-1">
          <div>‚Ä¢ Hidden effects - only AP & cash shown</div>
          <div>‚Ä¢ Silent advisors - no recommendations</div>
          <div>‚Ä¢ 20% less starting cash</div>
        </div>
      </div>
    </div>
    
    <p class="text-slate-400 text-sm mb-1">New to the game? The tutorial takes just 2 minutes.</p>
    <p class="text-slate-500 text-sm">Average game: 15-20 minutes</p>
    
    <div class="mt-8 pt-4 border-t border-slate-700">
      <p class="text-slate-500 text-xs mb-2">A learning simulation inspired by practice, informed by research, and designed by academics for business students</p>
      <p class="text-slate-600 text-xs">Created by Ammon Salter, Stefano Baruffaldi & Federico Bignone</p>
      <p class="text-slate-600 text-xs mt-1">ESRC "Profiting from Science" [ES/X003949/1]</p>
      <p class="text-slate-600 text-xs mt-1">¬© 2025 ¬∑ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" class="text-indigo-400 hover:text-indigo-300 underline">CC BY-NC-SA 4.0</a></p>
    </div>
  </div>
</div>

<!-- Game Preamble / Introduction - Page 2 -->
<div id="preambleModal2" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="max-w-4xl w-full mx-auto px-4 py-6">
    <!-- Header -->
    <div class="text-center mb-5">
      <h2 class="text-2xl font-bold text-white mb-1">How It Works</h2>
      <p class="text-indigo-300 text-sm">Every quarter, you'll make decisions that shape your startup's fate</p>
    </div>
    
    <!-- Six Pillars - 3x2 Grid -->
    <div class="grid grid-cols-2 md:grid-cols-3 gap-3 mb-5">
      <!-- Action Points -->
      <div class="bg-gradient-to-br from-emerald-500/20 to-teal-500/10 rounded-xl p-4 border border-emerald-500/30">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-10 h-10 rounded-lg bg-emerald-500 flex items-center justify-center text-white text-sm font-black">AP</div>
          <h3 class="text-sm font-bold text-white">Action Points</h3>
        </div>
        <p class="text-slate-300 text-xs leading-relaxed">
          <span class="text-emerald-400 font-bold">5 AP per quarter.</span> You can't do everything-choose where to focus.
        </p>
      </div>
      
      <!-- Team -->
      <div class="bg-gradient-to-br from-blue-500/20 to-indigo-500/10 rounded-xl p-4 border border-blue-500/30">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-10 h-10 rounded-lg bg-blue-500 flex items-center justify-center text-lg">üë•</div>
          <h3 class="text-sm font-bold text-white">Your Team</h3>
        </div>
        <p class="text-slate-300 text-xs leading-relaxed">
          Recruit execs for <span class="text-blue-400 font-bold">Research, Product & Sales</span>. Keep them motivated.
        </p>
      </div>
      
      <!-- Investors -->
      <div class="bg-gradient-to-br from-violet-500/20 to-purple-500/10 rounded-xl p-4 border border-violet-500/30">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-10 h-10 rounded-lg bg-violet-500 flex items-center justify-center text-lg">üè¶</div>
          <h3 class="text-sm font-bold text-white">Investors</h3>
        </div>
        <p class="text-slate-300 text-xs leading-relaxed">
          They offer cash for equity-but each has <span class="text-violet-400 font-bold">their own agenda</span>.
        </p>
      </div>
      
      <!-- Milestones -->
      <div class="bg-gradient-to-br from-amber-500/20 to-orange-500/10 rounded-xl p-4 border border-amber-500/30">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-10 h-10 rounded-lg bg-amber-500 flex items-center justify-center text-lg">üéØ</div>
          <h3 class="text-sm font-bold text-white">Milestones</h3>
        </div>
        <p class="text-slate-300 text-xs leading-relaxed">
          Complete <span class="text-amber-400 font-bold">3 milestones</span> to win. Miss a deadline = game over.
        </p>
      </div>
      
      <!-- Competition -->
      <div class="bg-gradient-to-br from-pink-500/20 to-rose-500/10 rounded-xl p-4 border border-pink-500/30">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-10 h-10 rounded-lg bg-pink-500 flex items-center justify-center text-lg">‚öî</div>
          <h3 class="text-sm font-bold text-white">Competition</h3>
        </div>
        <p class="text-slate-300 text-xs leading-relaxed">
          <span class="text-pink-400 font-bold">Rival startups</span> are racing toward the same goals. Don't fall behind.
        </p>
      </div>
      
      <!-- Cash -->
      <div class="bg-gradient-to-br from-rose-500/20 to-red-500/10 rounded-xl p-4 border border-rose-500/30">
        <div class="flex items-center gap-2 mb-2">
          <div class="w-10 h-10 rounded-lg bg-rose-500 flex items-center justify-center text-lg">üí∑</div>
          <h3 class="text-sm font-bold text-white">Cash & Runway</h3>
        </div>
        <p class="text-slate-300 text-xs leading-relaxed">
          Burn drains cash <span class="text-rose-400 font-bold">every quarter</span>. Zero = game over.
        </p>
      </div>
    </div>
    
    <!-- What Else -->
    <div class="bg-white/5 rounded-xl p-4 mb-5 border border-white/10">
      <h3 class="text-sm font-bold text-white mb-3 text-center">Plus: The Unexpected</h3>
      <div class="grid grid-cols-4 gap-3 text-center">
        <div>
          <div class="text-xl mb-1">‚ö°</div>
          <div class="text-slate-300 text-xs">Market Shocks</div>
        </div>
        <div>
          <div class="text-xl mb-1">üé™</div>
          <div class="text-slate-300 text-xs">Trade Shows</div>
        </div>
        <div>
          <div class="text-xl mb-1">üò§</div>
          <div class="text-slate-300 text-xs">Team Moods</div>
        </div>
        <div>
          <div class="text-xl mb-1">üíº</div>
          <div class="text-slate-300 text-xs">HR Challenges</div>
        </div>
      </div>
    </div>
    
    <!-- CTAs -->
    <div class="flex flex-col sm:flex-row gap-3 justify-center items-center">
      <button onclick="game.backToPreamble1()" class="px-5 py-2 text-slate-400 hover:text-white transition-colors text-sm">
        ‚Üê Back
      </button>
      <button onclick="game.startFromPreamble()" class="group px-8 py-4 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-400 hover:to-teal-500 text-white font-bold text-lg rounded-xl shadow-lg shadow-emerald-500/30 hover:shadow-xl transition-all transform hover:scale-105">
        üöÄ Create Your Founder
        <span class="inline-block ml-2 group-hover:translate-x-1 transition-transform">‚Üí</span>
      </button>
    </div>
  </div>
</div>

<!-- Tutorial Selection Modal -->
<div id="tutorialSelectModal" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900 hidden items-center justify-center z-50">
  <div class="max-w-2xl w-full mx-auto px-4">
    <div class="text-center mb-8">
      <div class="text-6xl mb-4">üìö</div>
      <h1 class="text-3xl font-bold text-white mb-2">Choose Your Tutorial</h1>
      <p class="text-slate-400">Select the tutorial that matches your experience level</p>
    </div>
    
    <div class="grid md:grid-cols-2 gap-6 mb-8">
      <!-- Beginner Track -->
      <button onclick="game.startBeginnerTutorial()" class="group bg-white/10 hover:bg-white/20 border-2 border-emerald-500/50 hover:border-emerald-400 rounded-2xl p-6 text-left transition-all transform hover:scale-105">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-14 h-14 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-xl flex items-center justify-center text-2xl shadow-lg">
            üå±
          </div>
          <div>
            <h3 class="text-xl font-bold text-white">Guided Tour</h3>
            <p class="text-emerald-400 text-sm">~10 minutes ‚Ä¢ 25 steps</p>
          </div>
        </div>
        <p class="text-slate-300 text-sm mb-4">Perfect if you're new to strategy games or want a thorough walkthrough of every feature.</p>
        <ul class="text-xs text-slate-400 space-y-1">
          <li class="flex items-center gap-2"><span class="text-emerald-400">‚úì</span> Visual screenshots of every screen</li>
          <li class="flex items-center gap-2"><span class="text-emerald-400">‚úì</span> Step-by-step interface guide</li>
          <li class="flex items-center gap-2"><span class="text-emerald-400">‚úì</span> Detailed tips on what to look for</li>
          <li class="flex items-center gap-2"><span class="text-emerald-400">‚úì</span> Strategy advice for beginners</li>
        </ul>
        <div class="mt-4 text-center">
          <span class="inline-block px-4 py-2 bg-emerald-500/20 text-emerald-400 rounded-lg text-sm font-medium group-hover:bg-emerald-500 group-hover:text-white transition-colors">
            Start Guided Tour ‚Üí
          </span>
        </div>
      </button>
      
      <!-- Experienced Track -->
      <button onclick="game.startExperiencedTutorial()" class="group bg-white/10 hover:bg-white/20 border-2 border-violet-500/50 hover:border-violet-400 rounded-2xl p-6 text-left transition-all transform hover:scale-105">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-14 h-14 bg-gradient-to-br from-violet-400 to-purple-500 rounded-xl flex items-center justify-center text-2xl shadow-lg">
            ‚ö°
          </div>
          <div>
            <h3 class="text-xl font-bold text-white">Quick Overview</h3>
            <p class="text-violet-400 text-sm">~5 minutes ‚Ä¢ 14 steps</p>
          </div>
        </div>
        <p class="text-slate-300 text-sm mb-4">For experienced gamers who want to jump in quickly with just the key concepts.</p>
        <ul class="text-xs text-slate-400 space-y-1">
          <li class="flex items-center gap-2"><span class="text-violet-400">‚úì</span> Core mechanics overview</li>
          <li class="flex items-center gap-2"><span class="text-violet-400">‚úì</span> Win/lose conditions</li>
          <li class="flex items-center gap-2"><span class="text-violet-400">‚úì</span> Key strategic concepts</li>
          <li class="flex items-center gap-2"><span class="text-violet-400">‚úì</span> Get playing faster</li>
        </ul>
        <div class="mt-4 text-center">
          <span class="inline-block px-4 py-2 bg-violet-500/20 text-violet-400 rounded-lg text-sm font-medium group-hover:bg-violet-500 group-hover:text-white transition-colors">
            Start Quick Overview ‚Üí
          </span>
        </div>
      </button>
    </div>
    
    <div class="text-center">
      <button onclick="game.skipTutorialFromSelect()" class="text-slate-500 hover:text-slate-300 text-sm transition-colors">
        Skip tutorial entirely and start playing ‚Üí
      </button>
    </div>
  </div>
</div>

<!-- Interactive Tutorial -->
<div id="tutorialModal" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="max-w-4xl w-full mx-auto px-4 py-6">
    <!-- Progress Bar -->
    <div class="mb-6">
      <div class="flex justify-between text-xs text-slate-400 mb-2">
        <span id="tutorialTypeLabel">Tutorial Progress</span>
        <span><span id="tutorialStepNum">1</span> of <span id="tutorialTotalSteps">14</span></span>
      </div>
      <div class="h-2 bg-slate-700 rounded-full overflow-hidden">
        <div id="tutorialProgress" class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-300" style="width: 7%"></div>
      </div>
    </div>
    
    <!-- Tutorial Content Area -->
    <div id="tutorialContent" class="bg-white rounded-2xl p-6 shadow-2xl mb-6">
      <!-- Populated by JS -->
    </div>
    
    <!-- Navigation -->
    <div class="flex justify-between items-center">
      <button id="tutorialBackBtn" onclick="game.tutorialBack()" class="px-5 py-2 text-slate-400 hover:text-white transition-colors">
        ‚Üê Back
      </button>
      <button onclick="game.closeTutorial()" class="text-slate-500 hover:text-slate-300 text-sm">
        Skip Tutorial
      </button>
      <button id="tutorialNextBtn" onclick="game.tutorialNext()" class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white font-bold rounded-xl transition-all">
        Next ‚Üí
      </button>
    </div>
  </div>
</div>

<!-- Venture Selection -->
<div id="ventureModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl max-w-4xl w-full p-8 shadow-2xl">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-2xl font-bold text-slate-800">Choose Your Venture</h2>
      <div class="flex items-center gap-3">
        <div id="extremeModeIndicatorVenture" class="hidden">
          <span class="px-3 py-1 bg-rose-600 text-white text-xs font-bold rounded-full">üî• EXTREME MODE</span>
        </div>
        <button onclick="game.backToFounder()" class="text-slate-400 hover:text-slate-600 text-sm px-3 py-1 border rounded">‚Üê Back</button>
      </div>
    </div>
    <p class="text-slate-600 mb-6">Each AI startup faces unique market, technical, and competitive challenges. Which will you tackle?</p>
    <div id="ventureGrid" class="grid sm:grid-cols-2 gap-4 mb-6"></div>
  </div>
</div>

<!-- Location Selection -->
<div id="locationModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="bg-white rounded-2xl max-w-6xl w-full mx-4 my-8 p-6 shadow-2xl">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-2xl font-bold text-slate-800">üìç Where Will You Build?</h2>
      <button onclick="game.backToVenture()" class="text-slate-400 hover:text-slate-600 text-sm px-3 py-1 border rounded">‚Üê Back</button>
    </div>
    <p class="text-slate-600 mb-2">Location shapes your startup ecosystem for <span id="locationVentureName" class="font-semibold">your company</span>.</p>
    <p class="text-sm text-slate-500 mb-4">Each hub offers different trade-offs: talent pools, salary costs, investor networks, and domain expertise. There's no single "best" choice.</p>
    <div id="locationGrid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem;"></div>
  </div>
</div>

<!-- Founder Creation -->
<div id="founderModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 overflow-y-auto p-4">
  <div class="bg-white rounded-2xl max-w-5xl w-full mx-auto my-4 shadow-2xl max-h-[95vh] overflow-y-auto">
    <!-- Header -->
    <div class="p-6 border-b border-slate-200 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-t-2xl sticky top-0 z-10">
      <div class="flex items-center justify-between mb-2">
        <h2 class="text-2xl font-bold text-slate-800">üë§ Who Are You?</h2>
        <button onclick="game.backToPreamble()" class="text-slate-400 hover:text-slate-600 text-sm px-3 py-1 border rounded bg-white">‚Üê Back</button>
      </div>
      <p class="text-slate-600">Your background shapes your strengths, challenges, and how investors perceive you. There's no perfect choice-each path teaches different lessons.</p>
    </div>
    
    <!-- Name input + Profile selection -->
    <div class="p-6">
      <!-- Name Input -->
      <div class="mb-6">
        <label class="block text-sm font-medium text-slate-700 mb-2">Your Name</label>
        <input type="text" id="founderNameInput" placeholder="Enter your name..." 
               class="w-full max-w-md px-4 py-3 border-2 border-slate-200 rounded-xl text-lg focus:border-indigo-400 focus:outline-none"
               oninput="game.updateFounderName()">
      </div>
      
      <!-- Profile Selection -->
      <div class="mb-4">
        <label class="block text-sm font-medium text-slate-700 mb-2">Your Entrepreneurial Background</label>
        <p class="text-sm text-slate-500 mb-4">Each profile brings different strengths and challenges. Pick what resonates with you-or try them all across multiple games.</p>
      </div>
      <div id="founderProfileGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        <!-- Populated by JS -->
      </div>
    </div>
    
    <!-- Selected Profile Detail -->
    <div id="founderProfileDetail" class="hidden mx-6 mb-6 p-4 bg-gradient-to-r from-slate-50 to-indigo-50 rounded-xl border border-indigo-100">
      <div class="flex items-start gap-4">
        <div id="founderDetailAvatar" class="w-16 h-16 rounded-full overflow-hidden border-2 border-indigo-300 flex-shrink-0"></div>
        <div class="flex-1">
          <h3 id="founderDetailName" class="font-bold text-lg text-slate-800"></h3>
          <p id="founderDetailDesc" class="text-slate-600 text-sm mb-3"></p>
          <div class="grid sm:grid-cols-2 gap-3">
            <div class="bg-emerald-50 rounded-lg p-3">
              <div class="text-xs font-medium text-emerald-700 mb-1">üí™ Strengths</div>
              <p id="founderDetailStrengths" class="text-sm text-emerald-800"></p>
            </div>
            <div class="bg-amber-50 rounded-lg p-3">
              <div class="text-xs font-medium text-amber-700 mb-1">‚ö† Challenges</div>
              <p id="founderDetailChallenges" class="text-sm text-amber-800"></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="p-6 border-t border-slate-200 bg-slate-50 rounded-b-2xl flex justify-between items-center sticky bottom-0">
      <div id="founderPreview" class="flex items-center gap-3">
        <div id="founderPreviewAvatar" class="w-12 h-12 rounded-full overflow-hidden border-2 border-slate-300 bg-slate-100"></div>
        <div>
          <div id="founderPreviewName" class="font-medium text-slate-800">Your Founder</div>
          <div id="founderPreviewProfile" class="text-sm text-slate-500">Select a profile</div>
        </div>
      </div>
      <button id="confirmFounderBtn" onclick="game.confirmFounder()" disabled 
              class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-colors">
        Choose Company ‚Üí
      </button>
    </div>
  </div>
</div>

<!-- Funding Stage Selection -->
<div id="fundingModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl max-w-3xl w-full p-8 shadow-2xl">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-2xl font-bold text-slate-800">Choose Your Funding Path</h2>
      <button onclick="game.backToLocation()" class="text-slate-400 hover:text-slate-600 text-sm px-3 py-1 border rounded">‚Üê Back</button>
    </div>
    <p class="text-slate-600 mb-6">How will you fund your startup? Each path offers different resources and constraints.</p>
    <div id="fundingStageGrid" class="grid sm:grid-cols-3 gap-4"></div>
  </div>
</div>

<!-- Funder Selection -->
<div id="funderModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="bg-white rounded-2xl max-w-6xl w-full mx-4 my-8 p-6 shadow-2xl">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-2xl font-bold text-slate-800">Choose Your <span id="funderStageTitle">Investor</span></h2>
      <button onclick="game.backToFundingStage()" class="text-slate-400 hover:text-slate-600 text-sm px-3 py-1 border rounded">‚Üê Back</button>
    </div>
    <p id="funderStageDesc" class="text-slate-600 mb-4">Select your investor carefully-they'll be with you for the journey.</p>
    <div id="funderGrid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;"></div>
  </div>
</div>

<!-- Milestone Selection -->
<div id="milestoneModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl max-w-4xl w-full p-8 shadow-2xl">
    <div class="flex items-center gap-3 mb-2">
      <div id="milestoneLogo" class="w-10 h-10"></div>
      <h2 id="milestoneModalTitle" class="text-2xl font-bold text-slate-800">Choose Your First Milestone</h2>
    </div>
    <p id="milestoneModalDesc" class="text-slate-600 mb-6">Each path requires different strengths. Choose the approach that fits your team.</p>
    <div id="milestoneGrid" class="grid sm:grid-cols-3 gap-4 mb-6"></div>
    <div class="flex justify-between items-center">
      <span class="text-sm text-slate-500">Deadline: <span id="milestoneDeadlinePreview" class="font-mono font-bold">Q4</span></span>
      <button id="confirmMilestoneBtn" disabled class="px-6 py-3 bg-amber-500 hover:bg-amber-600 disabled:bg-slate-300 text-white font-bold rounded-xl">
        Confirm Milestone
      </button>
    </div>
  </div>
</div>

<!-- HIRING MODAL - Compact 3-column layout -->
<div id="hiringModal" class="fixed inset-0 bg-slate-900/95 hidden z-50 overflow-y-auto">
  <div class="min-h-full flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl max-w-6xl w-full shadow-2xl">
      
      <!-- Header with tabs -->
      <div class="p-4 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-white rounded-t-2xl">
        <h2 class="text-xl font-bold text-slate-800 mb-3">Build Your Leadership Team</h2>
        <!-- Tab buttons -->
        <div class="flex gap-2">
          <button onclick="game.goToHiringStep(0)" id="hiringTab0" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-emerald-100 text-emerald-800 font-medium text-sm">
            üî¨ Research <span id="hiringCheck0" class="hidden">‚úì</span>
          </button>
          <button onclick="game.goToHiringStep(1)" id="hiringTab1" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-slate-100 text-slate-400 font-medium text-sm">
            üíª Product <span id="hiringCheck1" class="hidden">‚úì</span>
          </button>
          <button onclick="game.goToHiringStep(2)" id="hiringTab2" class="flex items-center gap-2 px-4 py-2 rounded-lg bg-slate-100 text-slate-400 font-medium text-sm">
            üì£ Sales <span id="hiringCheck2" class="hidden">‚úì</span>
          </button>
        </div>
      </div>
      
      <!-- Content area -->
      <div class="p-4">
        <!-- Research Page -->
        <div id="hiringPage0" class="hiring-page">
          <div class="flex items-center gap-2 mb-3">
            <span class="text-xl">üî¨</span>
            <h3 class="font-bold text-emerald-800">Head of Research</h3>
            <span class="text-sm text-emerald-600">- Drives scientific breakthroughs</span>
          </div>
          <div id="researchHires" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;"></div>
        </div>
        
        <!-- Product Page -->
        <div id="hiringPage1" class="hiring-page hidden">
          <div class="flex items-center gap-2 mb-3">
            <span class="text-xl">üíª</span>
            <h3 class="font-bold text-sky-800">Head of Product</h3>
            <span class="text-sm text-sky-600">- Builds and ships features</span>
          </div>
          <div id="devHires" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;"></div>
        </div>
        
        <!-- Sales Page -->
        <div id="hiringPage2" class="hiring-page hidden">
          <div class="flex items-center gap-2 mb-3">
            <span class="text-xl">üì£</span>
            <h3 class="font-bold text-fuchsia-800">Head of Sales & Marketing</h3>
            <span class="text-sm text-fuchsia-600">- Wins customers and builds brand</span>
          </div>
          <div id="mktHires" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;"></div>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="p-4 border-t border-slate-200 bg-slate-50 flex justify-between items-center rounded-b-2xl">
        <button id="hiringPrevBtn" onclick="game.prevHiringStep()" class="px-4 py-2 text-slate-600 hover:text-slate-800 font-medium rounded-lg hover:bg-slate-100 hidden">
          ‚Üê Back
        </button>
        <div class="flex-1 text-center">
          <span id="equityCommitted" class="text-amber-600 font-medium text-sm"></span>
        </div>
        <button id="hiringNextBtn" onclick="game.nextHiringStep()" disabled class="px-6 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white font-bold rounded-xl">
          Next ‚Üí
        </button>
      </div>
    </div>
  </div>
</div>

<!-- HR Hiring Modal -->
<div id="hrModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="bg-white rounded-2xl max-w-6xl w-full mx-4 my-8 p-6 shadow-2xl">
    <div class="flex items-center gap-3 mb-2">
      <div class="w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center text-2xl">üë•</div>
      <div>
        <h2 class="text-2xl font-bold text-slate-800">Hire a Head of HR</h2>
        <p class="text-slate-600">After your first milestone, the board insists you formalise HR.</p>
      </div>
    </div>
    <p class="text-sm text-slate-500 mb-4">Choose carefully-your Head of HR will shape company culture and help retain your team.</p>
    <div id="hrHires" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;"></div>
  </div>
</div>

<!-- Milestone Achieved -->
<div id="achievedModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl max-w-md w-full p-8 shadow-2xl text-center">
    <div class="text-5xl mb-4">üéâ</div>
    <h2 class="text-2xl font-bold text-slate-800 mb-2">Milestone Achieved!</h2>
    <p id="achievedText" class="text-slate-600 mb-6"></p>
    <button id="achievedContinueBtn" class="px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl">
      Continue
    </button>
  </div>
</div>

<!-- Hire Staff Modal -->
<div id="hireStaffModal" class="fixed inset-0 bg-slate-900/80 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl max-w-lg w-full p-6 shadow-2xl">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-bold text-slate-800">üë• Hire Staff</h2>
      <button onclick="game.closeHireStaffModal()" class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
    </div>
    
    <div class="bg-slate-50 rounded-xl p-4 mb-4">
      <div class="grid grid-cols-2 gap-4 text-sm">
        <div>
          <span class="text-slate-500">Current Staff:</span>
          <span id="hireModalStaff" class="font-bold text-slate-800 ml-1">0</span>
        </div>
        <div>
          <span class="text-slate-500">Current AP Bonus:</span>
          <span id="hireModalAPCurrent" class="font-bold text-emerald-600 ml-1">+0</span>
        </div>
        <div>
          <span class="text-slate-500">Cash Available:</span>
          <span id="hireModalCash" class="font-bold text-slate-800 ml-1">¬£0k</span>
        </div>
        <div>
          <span class="text-slate-500">Current Burn:</span>
          <span id="hireModalBurn" class="font-bold text-slate-800 ml-1">¬£0k/q</span>
        </div>
      </div>
    </div>
    
    <div class="space-y-3 mb-4">
      <h3 class="font-medium text-slate-700">Hiring Costs:</h3>
      <div class="grid grid-cols-1 gap-2 text-sm">
        <div class="flex items-center justify-between p-2 bg-amber-50 rounded-lg">
          <span class="text-amber-800">üí∞ Recruitment fee</span>
          <span id="hireModalCostDisplay" class="font-bold text-amber-700">¬£50k one-time</span>
        </div>
        <div class="flex items-center justify-between p-2 bg-rose-50 rounded-lg">
          <span class="text-rose-800">üî• Increased burn rate</span>
          <span class="font-bold text-rose-700">+¬£25k/quarter</span>
        </div>
        <div class="flex items-center justify-between p-2 bg-purple-50 rounded-lg">
          <span class="text-purple-800">‚è≥ Integration period</span>
          <span id="hireModalIntegrationDisplay" class="font-bold text-purple-700">-1 AP this quarter</span>
        </div>
        <div class="flex items-center justify-between p-2 bg-blue-50 rounded-lg">
          <span class="text-blue-800">üòì Team stretched</span>
          <span id="hireModalMoodDisplay" class="font-bold text-blue-700">-0.5 mood all depts</span>
        </div>
      </div>
    </div>
    
    <div class="bg-emerald-50 rounded-xl p-4 mb-4">
      <h3 class="font-medium text-emerald-800 mb-2">After Hiring:</h3>
      <div class="grid grid-cols-2 gap-2 text-sm">
        <div>
          <span class="text-emerald-600">New Staff Count:</span>
          <span id="hireModalNewStaff" class="font-bold text-emerald-800 ml-1">0</span>
        </div>
        <div>
          <span class="text-emerald-600">AP Bonus (next Q):</span>
          <span id="hireModalAPNew" class="font-bold text-emerald-800 ml-1">+0</span>
        </div>
        <div>
          <span class="text-emerald-600">New Burn Rate:</span>
          <span id="hireModalNewBurn" class="font-bold text-emerald-800 ml-1">¬£0k/q</span>
        </div>
        <div>
          <span class="text-emerald-600">Cash After:</span>
          <span id="hireModalNewCash" class="font-bold text-emerald-800 ml-1">¬£0k</span>
        </div>
      </div>
    </div>
    
    <div class="flex gap-3">
      <button onclick="game.closeHireStaffModal()" class="flex-1 px-4 py-3 border border-slate-300 text-slate-700 font-medium rounded-xl hover:bg-slate-50">
        Cancel
      </button>
      <button id="confirmHireBtn" onclick="game.confirmHireStaff()" class="flex-1 px-4 py-3 bg-emerald-600 hover:bg-emerald-700 text-white font-bold rounded-xl disabled:bg-slate-300 disabled:cursor-not-allowed">
        Hire Staff (+1)
      </button>
    </div>
  </div>
</div>

<!-- Fire Staff Modal -->
<div id="fireStaffModal" class="fixed inset-0 bg-slate-900/80 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl max-w-lg w-full p-6 shadow-2xl">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-xl font-bold text-slate-800">üìâ Reduce Staff</h2>
      <button onclick="game.closeFireStaffModal()" class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
    </div>
    
    <div class="bg-slate-50 rounded-xl p-4 mb-4">
      <div class="grid grid-cols-2 gap-4 text-sm">
        <div>
          <span class="text-slate-500">Current Staff:</span>
          <span id="fireModalStaff" class="font-bold text-slate-800 ml-1">0</span>
        </div>
        <div>
          <span class="text-slate-500">Current AP Bonus:</span>
          <span id="fireModalAPCurrent" class="font-bold text-emerald-600 ml-1">+0</span>
        </div>
        <div>
          <span class="text-slate-500">Cash Available:</span>
          <span id="fireModalCash" class="font-bold text-slate-800 ml-1">¬£0k</span>
        </div>
        <div>
          <span class="text-slate-500">Current Burn:</span>
          <span id="fireModalBurn" class="font-bold text-slate-800 ml-1">¬£0k/q</span>
        </div>
      </div>
    </div>
    
    <div class="space-y-3 mb-4">
      <h3 class="font-medium text-slate-700">Layoff Costs:</h3>
      <div class="grid grid-cols-1 gap-2 text-sm">
        <div class="flex items-center justify-between p-2 bg-amber-50 rounded-lg">
          <span class="text-amber-800">üí∞ Severance package</span>
          <span class="font-bold text-amber-700">¬£40k one-time</span>
        </div>
        <div class="flex items-center justify-between p-2 bg-rose-50 rounded-lg">
          <span class="text-rose-800">üò¢ Morale impact</span>
          <span class="font-bold text-rose-700">-1 mood all depts</span>
        </div>
        <div class="flex items-center justify-between p-2 bg-purple-50 rounded-lg">
          <span class="text-purple-800">‚è≥ Reorganization disruption</span>
          <span class="font-bold text-purple-700">-1 AP this quarter</span>
        </div>
        <div class="flex items-center justify-between p-2 bg-red-50 rounded-lg">
          <span class="text-red-800">‚ö° Capacity reduction</span>
          <span class="font-bold text-red-700">May lose AP tier</span>
        </div>
        <div class="flex items-center justify-between p-2 bg-slate-100 rounded-lg">
          <span class="text-slate-600">üìâ Reduced burn rate</span>
          <span class="font-bold text-emerald-700">-¬£25k/quarter</span>
        </div>
      </div>
    </div>
    
    <div class="bg-rose-50 rounded-xl p-4 mb-4">
      <h3 class="font-medium text-rose-800 mb-2">After Layoff:</h3>
      <div class="grid grid-cols-2 gap-2 text-sm">
        <div>
          <span class="text-rose-600">New Staff Count:</span>
          <span id="fireModalNewStaff" class="font-bold text-rose-800 ml-1">0</span>
        </div>
        <div>
          <span class="text-rose-600">New AP Bonus:</span>
          <span id="fireModalAPNew" class="font-bold text-rose-800 ml-1">+0</span>
        </div>
        <div>
          <span class="text-rose-600">New Burn Rate:</span>
          <span id="fireModalNewBurn" class="font-bold text-rose-800 ml-1">¬£0k/q</span>
        </div>
        <div>
          <span class="text-rose-600">Cash After:</span>
          <span id="fireModalNewCash" class="font-bold text-rose-800 ml-1">¬£0k</span>
        </div>
      </div>
    </div>
    
    <div class="flex gap-3">
      <button onclick="game.closeFireStaffModal()" class="flex-1 px-4 py-3 border border-slate-300 text-slate-700 font-medium rounded-xl hover:bg-slate-50">
        Cancel
      </button>
      <button id="confirmFireBtn" onclick="game.confirmFireStaff()" class="flex-1 px-4 py-3 bg-rose-600 hover:bg-rose-700 text-white font-bold rounded-xl disabled:bg-slate-300 disabled:cursor-not-allowed">
        Lay Off Staff (-1)
      </button>
    </div>
  </div>
</div>

<!-- Milestone Failed -->
<div id="failedModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 p-4">
  <div class="bg-white rounded-2xl max-w-md w-full p-8 shadow-2xl text-center">
    <div class="text-5xl mb-4">üíî</div>
    <h2 class="text-2xl font-bold text-slate-800 mb-2">Milestone Missed</h2>
    <p id="failedText" class="text-slate-600 mb-6"></p>
    <button onclick="location.reload()" class="px-6 py-3 bg-slate-600 hover:bg-slate-700 text-white font-bold rounded-xl">
      Try Again
    </button>
  </div>
</div>

<!-- Game End -->
<div id="endModal" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 hidden items-start justify-center z-50 overflow-y-auto">
  <div class="max-w-2xl w-full mx-auto px-4 py-8 min-h-full">
    <!-- Header -->
    <div class="text-center mb-6">
      <div id="endIcon" class="text-6xl mb-3">üíî</div>
      <h1 id="endTitle" class="text-3xl font-bold text-white mb-2">The End of the Road</h1>
      <p id="endSubtitle" class="text-slate-400">But every ending is a new beginning</p>
    </div>
    
    <!-- Main Card -->
    <div class="bg-white rounded-2xl p-6 shadow-2xl mb-6">
      <!-- What Happened -->
      <div id="endReason" class="bg-rose-50 border border-rose-200 rounded-xl p-4 mb-5">
        <!-- Populated by JS -->
      </div>
      
      <!-- Journey Stats -->
      <div class="mb-5">
        <h3 class="font-bold text-slate-800 mb-3 flex items-center gap-2">
          <span>üìä</span> Your Entrepreneurial Journey
        </h3>
        <div id="endStats" class="grid grid-cols-2 gap-3 text-sm">
          <!-- Populated by JS -->
        </div>
      </div>
      
      <!-- What Went Well -->
      <div class="mb-5">
        <h3 class="font-bold text-emerald-700 mb-3 flex items-center gap-2">
          <span>‚úÖ</span> What Went Well
        </h3>
        <div id="endPositives" class="space-y-2 text-sm">
          <!-- Populated by JS -->
        </div>
      </div>
      
      <!-- Lessons Learned -->
      <div class="mb-5">
        <h3 class="font-bold text-amber-700 mb-3 flex items-center gap-2">
          <span>üí°</span> Lessons for Next Time
        </h3>
        <div id="endLessons" class="space-y-2 text-sm">
          <!-- Populated by JS -->
        </div>
      </div>
      
      <!-- Encouragement -->
      <div id="endEncouragement" class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 text-center border border-indigo-100">
        <!-- Populated by JS -->
      </div>
    </div>
    
    <!-- Play Again -->
    <div class="text-center">
      <button onclick="game.showJourneyModal()" class="px-8 py-4 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-500 hover:to-slate-600 text-white font-bold text-lg rounded-xl shadow-lg transition-all transform hover:scale-105 mb-4">
        üìñ View Your Entrepreneurial Journey
      </button>
      <br>
      <button onclick="location.reload()" class="px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white font-bold text-lg rounded-xl shadow-lg transition-all transform hover:scale-105">
        üîÑ Try Again
      </button>
      <p class="text-slate-500 text-sm mt-3">90% of startups fail. The best founders fail forward.</p>
      
      <div class="mt-8 pt-6 border-t border-slate-700">
        <button onclick="game.showResearchModal()" class="text-indigo-400 hover:text-indigo-300 text-sm mb-4 flex items-center gap-2 mx-auto">
          <span>üìö</span> Learn more about AI startups and research
        </button>
        <p class="text-slate-500 text-sm mb-1">Created by Ammon Salter with Stefano Baruffaldi & Federico Bignone</p>
        <p class="text-slate-600 text-xs mb-2">with Claude, Gemini & ChatGPT ¬∑ Contributors: Paola Criscuolo, Linus Dahlander, Christos Kolympiris, Orietta Marsili, Rossella Salandra, Giacomo Salter, Suki Salter</p>
        <p class="text-slate-600 text-xs mb-2">Part of the ESRC-funded project "Profiting from Science" [ES/X003949/1]</p>
        <p class="text-slate-600 text-xs">¬© 2025 Salter, Baruffaldi & Bignone ¬∑ Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" class="text-indigo-400 hover:text-indigo-300 underline">CC BY-NC-SA 4.0</a></p>
      </div>
    </div>
  </div>
</div>

<!-- Unicorn Event Modal -->
<div id="unicornModal" class="fixed inset-0 bg-gradient-to-br from-purple-900 via-pink-900 to-amber-900 hidden items-start justify-center z-50 overflow-y-auto">
  <div class="max-w-2xl w-full mx-auto px-4 py-8 min-h-full">
    <!-- Animated Background Stars -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-1/4 left-1/4 w-2 h-2 bg-white rounded-full animate-ping"></div>
      <div class="absolute top-1/3 right-1/3 w-1 h-1 bg-yellow-300 rounded-full animate-pulse"></div>
      <div class="absolute bottom-1/4 right-1/4 w-2 h-2 bg-pink-300 rounded-full animate-ping" style="animation-delay: 0.5s"></div>
      <div class="absolute top-1/2 left-1/6 w-1 h-1 bg-white rounded-full animate-pulse" style="animation-delay: 0.3s"></div>
    </div>
    
    <!-- Main Content -->
    <div class="relative bg-white/10 backdrop-blur-lg rounded-3xl p-8 border border-white/30 shadow-2xl text-center">
      <!-- Unicorn Icon -->
      <div class="text-8xl mb-4 animate-bounce">ü¶Ñ</div>
      
      <h1 class="text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-400 via-purple-400 to-amber-400 mb-4">
        UNICORN!
      </h1>
      
      <p class="text-xl text-white/90 mb-6">
        Against all odds, lightning has struck!
      </p>
      
      <!-- Story -->
      <div class="bg-black/30 rounded-2xl p-6 mb-6 text-left">
        <p class="text-white/80 mb-4">
          Your breakthrough technology caught the attention of a major tech conglomerate. After a bidding war between three global giants, your valuation has exploded.
        </p>
        <p class="text-white/80 mb-4">
          This is the stuff of startup legend - the 1-in-10 outcome that every founder dreams of but few achieve.
        </p>
        <div class="flex items-center justify-center gap-4 mt-6">
          <div class="text-center">
            <div class="text-slate-400 text-sm">Previous Valuation</div>
            <div id="unicornPreVal" class="text-2xl font-bold text-white line-through opacity-60">¬£0k</div>
          </div>
          <div class="text-4xl text-amber-400">‚Üí</div>
          <div class="text-center">
            <div class="text-slate-400 text-sm">New Valuation</div>
            <div class="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">¬£1,000,000k</div>
            <div class="text-pink-400 text-sm font-bold">¬£1 BILLION</div>
          </div>
        </div>
        <div class="text-center mt-4">
          <span class="text-amber-400 font-bold text-lg">(<span id="unicornMultiplier">100</span>x multiplier!)</span>
        </div>
      </div>
      
      <!-- Hall of Fame Entry -->
      <div class="bg-gradient-to-r from-amber-900/50 to-yellow-900/50 rounded-2xl p-5 mb-6 border border-amber-500/30">
        <div class="text-amber-400 font-bold mb-3">üèõ Enter the Billionaire Founders Hall of Fame</div>
        <input 
          type="text" 
          id="unicornFounderName" 
          placeholder="Enter your name, founder..." 
          maxlength="30"
          class="w-full px-4 py-3 bg-black/40 border border-amber-500/50 rounded-xl text-white text-center text-lg placeholder-white/40 focus:outline-none focus:border-amber-400 focus:ring-2 focus:ring-amber-400/50"
        />
        <p class="text-amber-300/60 text-xs mt-2">Your name will appear alongside legendary founders</p>
      </div>
      
      <!-- Rarity Badge -->
      <div class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full text-white font-bold text-sm mb-6">
        ‚ú® Achieved by ~10% of winners
      </div>
      
      <!-- Continue Button -->
      <button onclick="game.acceptUnicorn()" class="w-full py-4 bg-gradient-to-r from-amber-500 via-pink-500 to-purple-500 hover:from-amber-400 hover:via-pink-400 hover:to-purple-400 text-white font-bold text-xl rounded-xl shadow-lg transform transition-all hover:scale-105">
        üéâ Join the Hall of Fame
      </button>
    </div>
  </div>
</div>

<!-- Hall of Fame Modal -->
<div id="hallOfFameModal" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-amber-950 to-slate-900 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="max-w-3xl w-full mx-auto px-4 py-8">
    <div class="relative bg-gradient-to-b from-amber-900/30 to-slate-900/80 backdrop-blur-lg rounded-3xl p-8 border border-amber-500/30 shadow-2xl">
      <!-- Header -->
      <div class="text-center mb-8">
        <div class="text-5xl mb-3">üèõ</div>
        <h1 class="text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-amber-400 to-yellow-300 mb-2">
          Billionaire Founders Hall of Fame
        </h1>
        <p class="text-amber-300/70 text-sm">The elite few who built billion-pound empires</p>
      </div>
      
      <!-- Hall of Fame List -->
      <div class="space-y-3 mb-8" id="hallOfFameList">
        <!-- Populated by JS -->
      </div>
      
      <!-- New Entry Highlight -->
      <div id="newHofEntry" class="hidden bg-gradient-to-r from-pink-600/30 to-purple-600/30 rounded-xl p-4 mb-6 border border-pink-500/50">
        <div class="flex items-center gap-4">
          <div class="text-4xl">ü¶Ñ</div>
          <div class="flex-1">
            <div class="text-pink-300 text-sm">Newest Member</div>
            <div id="newHofName" class="text-xl font-bold text-white">You</div>
            <div id="newHofCompany" class="text-amber-400 text-sm">Your Company ‚Ä¢ 2024</div>
          </div>
          <div class="text-right">
            <div class="text-2xl font-black text-emerald-400">¬£1B</div>
            <div class="text-emerald-300 text-xs">Valuation</div>
          </div>
        </div>
      </div>
      
      <!-- Stats -->
      <div class="grid grid-cols-3 gap-4 mb-8">
        <div class="bg-black/30 rounded-xl p-4 text-center">
          <div id="hofTotalFounders" class="text-2xl font-bold text-amber-400">0</div>
          <div class="text-slate-400 text-xs">Total Legends</div>
        </div>
        <div class="bg-black/30 rounded-xl p-4 text-center">
          <div id="hofYourRank" class="text-2xl font-bold text-emerald-400">#1</div>
          <div class="text-slate-400 text-xs">Your Rank</div>
        </div>
        <div class="bg-black/30 rounded-xl p-4 text-center">
          <div id="hofTotalWealth" class="text-2xl font-bold text-pink-400">¬£0T</div>
          <div class="text-slate-400 text-xs">Combined Wealth</div>
        </div>
      </div>
      
      <!-- Continue Button -->
      <button onclick="game.closeHallOfFame()" class="w-full py-4 bg-gradient-to-r from-amber-600 to-yellow-600 hover:from-amber-500 hover:to-yellow-500 text-white font-bold text-lg rounded-xl shadow-lg">
        Continue to Your Victory ‚Üí
      </button>
    </div>
  </div>
</div>

<!-- Victory Modal - All Milestones Complete -->
<div id="victoryModal" class="fixed inset-0 bg-gradient-to-br from-emerald-900 via-slate-900 to-amber-900 hidden items-start justify-center z-50 overflow-y-auto">
  <div class="max-w-4xl w-full mx-auto px-4 py-8 min-h-full">
    <!-- Celebration Header -->
    <div class="text-center mb-6">
      <div class="text-6xl mb-3">üèÜ</div>
      <h1 class="text-4xl font-black text-white mb-2">Victory!</h1>
      <p class="text-xl text-emerald-300">All three milestones complete</p>
      <div id="extremeModeBadge" class="hidden mt-3">
        <span class="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-rose-600 to-orange-600 rounded-full text-white font-bold text-sm shadow-lg animate-pulse">
          üî• EXTREME MODE CONQUERED
        </span>
      </div>
    </div>
    
    <!-- Stats Card -->
    <div class="bg-white/10 backdrop-blur rounded-2xl p-6 mb-6 border border-white/20">
      <h3 class="text-white font-bold mb-4 text-center">üìä Your Entrepreneurial Journey</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div>
          <div id="victoryQuarters" class="text-3xl font-bold text-white">16</div>
          <div class="text-slate-400 text-sm">Quarters</div>
        </div>
        <div>
          <div id="victoryValuation" class="text-3xl font-bold text-emerald-400">¬£0k</div>
          <div class="text-slate-400 text-sm">Valuation</div>
        </div>
        <div>
          <div id="victoryEquity" class="text-3xl font-bold text-amber-400">0%</div>
          <div class="text-slate-400 text-sm">Your Equity</div>
        </div>
        <div>
          <div id="victoryCash" class="text-3xl font-bold text-sky-400">¬£0k</div>
          <div class="text-slate-400 text-sm">Cash</div>
        </div>
      </div>
      <div id="victoryNetWorth" class="mt-4 pt-4 border-t border-white/20 text-center">
        <div class="text-slate-400 text-sm mb-1">Your stake is worth</div>
        <div class="text-4xl font-black text-emerald-400">¬£0k</div>
      </div>
    </div>
    
    <!-- What's Next Section -->
    <div class="text-center mb-4">
      <h2 class="text-2xl font-bold text-white mb-1">What's Next?</h2>
      <p class="text-slate-400">Your board wants to know your plans...</p>
    </div>
    
    <!-- Ending Choices -->
    <div class="grid md:grid-cols-2 gap-4 mb-6">
      <!-- Beach Exit -->
      <button onclick="game.selectEnding('beach')" class="ending-choice group bg-gradient-to-br from-cyan-500/20 to-blue-500/10 hover:from-cyan-500/30 hover:to-blue-500/20 rounded-2xl p-5 border border-cyan-500/30 text-left transition-all hover:scale-[1.02]">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-12 h-12 rounded-xl bg-cyan-500 flex items-center justify-center text-2xl shadow-lg">üèñ</div>
          <div>
            <h3 class="text-lg font-bold text-white">Cash Out & Retire</h3>
            <p class="text-cyan-300 text-xs">Take the money and enjoy life</p>
          </div>
        </div>
        <p class="text-slate-300 text-sm leading-relaxed mb-3">
          Sell your stake, buy a beach house, and finally read all those books. You've earned it.
        </p>
        <div class="bg-cyan-500/20 rounded-lg p-2 mb-3">
          <div class="flex justify-between items-center text-sm">
            <span class="text-cyan-300">üí∞ Your payout:</span>
            <span id="endingBeachValue" class="font-bold text-white">¬£0k</span>
          </div>
        </div>
        <div class="text-xs text-cyan-400 font-medium group-hover:translate-x-1 transition-transform">
          ‚Üí Peaceful ending ‚Ä¢ Maximum personal wealth ‚Ä¢ Zero stress
        </div>
      </button>
      
      <!-- Serial Entrepreneur -->
      <button onclick="game.selectEnding('serial')" class="ending-choice group bg-gradient-to-br from-violet-500/20 to-purple-500/10 hover:from-violet-500/30 hover:to-purple-500/20 rounded-2xl p-5 border border-violet-500/30 text-left transition-all hover:scale-[1.02]">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-12 h-12 rounded-xl bg-violet-500 flex items-center justify-center text-2xl shadow-lg">üöÄ</div>
          <div>
            <h3 class="text-lg font-bold text-white">Start Another Startup</h3>
            <p class="text-violet-300 text-xs">The startup life calls again</p>
          </div>
        </div>
        <p class="text-slate-300 text-sm leading-relaxed mb-3">
          Sell your stake and use the capital to fund your next big idea. Serial entrepreneurs never stop.
        </p>
        <div class="bg-violet-500/20 rounded-lg p-2 mb-3">
          <div class="flex justify-between items-center text-sm mb-1">
            <span class="text-violet-300">üí∞ Sale proceeds:</span>
            <span id="endingSerialSale" class="font-bold text-white">¬£0k</span>
          </div>
          <div class="flex justify-between items-center text-sm">
            <span class="text-violet-300">üöÄ Your seed fund:</span>
            <span id="endingSerialSeed" class="font-bold text-violet-200">¬£0k</span>
          </div>
        </div>
        <div class="text-xs text-violet-400 font-medium group-hover:translate-x-1 transition-transform">
          ‚Üí Restless ending ‚Ä¢ New adventure ‚Ä¢ Self-funded freedom
        </div>
      </button>
      
      <!-- Hyper-scale -->
      <button onclick="game.selectEnding('scale')" class="ending-choice group bg-gradient-to-br from-amber-500/20 to-orange-500/10 hover:from-amber-500/30 hover:to-orange-500/20 rounded-2xl p-5 border border-amber-500/30 text-left transition-all hover:scale-[1.02]">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-12 h-12 rounded-xl bg-amber-500 flex items-center justify-center text-2xl shadow-lg">üìà</div>
          <div>
            <h3 class="text-lg font-bold text-white">Stay & Hyper-Scale</h3>
            <p class="text-amber-300 text-xs">Build a generational company</p>
          </div>
        </div>
        <p class="text-slate-300 text-sm leading-relaxed mb-3">
          Keep your equity, raise a massive Series B, and aim to build one of the defining companies of the decade.
        </p>
        <div class="bg-amber-500/20 rounded-lg p-2 mb-3">
          <div class="flex justify-between items-center text-sm mb-1">
            <span class="text-amber-300">üìà Series B valuation:</span>
            <span id="endingScaleValuation" class="font-bold text-white">¬£0k</span>
          </div>
          <div class="flex justify-between items-center text-sm">
            <span class="text-amber-300">üíé Your stake value:</span>
            <span id="endingScaleStake" class="font-bold text-amber-200">¬£0k</span>
          </div>
        </div>
        <div class="text-xs text-amber-400 font-medium group-hover:translate-x-1 transition-transform">
          ‚Üí Ambitious ending ‚Ä¢ High risk ‚Ä¢ Potential unicorn
        </div>
      </button>
      
      <!-- Acquisition -->
      <button onclick="game.selectEnding('acquisition')" class="ending-choice group bg-gradient-to-br from-emerald-500/20 to-teal-500/10 hover:from-emerald-500/30 hover:to-teal-500/20 rounded-2xl p-5 border border-emerald-500/30 text-left transition-all hover:scale-[1.02]">
        <div class="flex items-center gap-3 mb-3">
          <div class="w-12 h-12 rounded-xl bg-emerald-500 flex items-center justify-center text-2xl shadow-lg">üè¢</div>
          <div>
            <h3 class="text-lg font-bold text-white">Sell to <span id="victoryAcquirerName">Industry Leader</span></h3>
            <p class="text-emerald-300 text-xs">Strategic acquisition</p>
          </div>
        </div>
        <p class="text-slate-300 text-sm leading-relaxed mb-3">
          Accept a premium acquisition offer and lead your tech as a new division inside a tech giant.
        </p>
        <div class="bg-emerald-500/20 rounded-lg p-2 mb-3">
          <div class="flex justify-between items-center text-sm mb-1">
            <span class="text-emerald-300">üè¢ Acquisition price:</span>
            <span id="endingAcquiPrice" class="font-bold text-white">¬£0k</span>
          </div>
          <div class="flex justify-between items-center text-sm">
            <span class="text-emerald-300">üí∞ Your payout:</span>
            <span id="endingAcquiPayout" class="font-bold text-emerald-200">¬£0k</span>
          </div>
        </div>
        <div class="text-xs text-emerald-400 font-medium group-hover:translate-x-1 transition-transform">
          ‚Üí Corporate ending ‚Ä¢ Security + influence ‚Ä¢ VP title
        </div>
      </button>
    </div>
    
    <!-- Play Again -->
    <div class="text-center">
      <button onclick="game.showJourneyModal()" class="px-8 py-4 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-500 hover:to-slate-600 text-white font-bold text-lg rounded-xl shadow-lg transition-all transform hover:scale-105 mb-4">
        üìñ View Your Entrepreneurial Journey
      </button>
      <br>
      <button onclick="location.reload()" class="text-slate-500 hover:text-white text-sm transition-colors">
        ‚Üê Or start over with a new startup
      </button>
      
      <div class="mt-6 pt-4 border-t border-white/20">
        <button onclick="game.showResearchModal()" class="text-indigo-400 hover:text-indigo-300 text-sm mb-4 flex items-center gap-2 mx-auto">
          <span>üìö</span> Learn more about AI startups and research
        </button>
        <p class="text-slate-400 text-sm mb-1">Created by Ammon Salter with Stefano Baruffaldi & Federico Bignone</p>
        <p class="text-slate-500 text-xs mb-2">with Claude, Gemini & ChatGPT ¬∑ Contributors: Paola Criscuolo, Linus Dahlander, Christos Kolympiris, Orietta Marsili, Rossella Salandra, Giacomo Salter, Suki Salter</p>
        <p class="text-slate-500 text-xs mb-2">Part of the ESRC-funded project "Profiting from Science" [ES/X003949/1]</p>
        <p class="text-slate-500 text-xs">¬© 2025 Salter, Baruffaldi & Bignone ¬∑ Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" class="text-slate-400 hover:text-white underline">CC BY-NC-SA 4.0</a></p>
      </div>
    </div>
  </div>
</div>

<!-- Ending Result Modal -->
<div id="endingResultModal" class="fixed inset-0 bg-slate-900/95 hidden items-start justify-center z-50 overflow-y-auto">
  <div class="max-w-2xl w-full mx-auto px-4 py-8 min-h-full">
    <div id="endingResultContent" class="bg-white rounded-2xl p-8 shadow-2xl">
      <!-- Populated by JS -->
    </div>
    <div class="text-center mt-6">
      <button onclick="game.showJourneyModal()" class="px-8 py-4 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white font-bold text-lg rounded-xl shadow-lg transition-all mb-4">
        üìñ View Your Entrepreneurial Journey
      </button>
      <br>
      <button onclick="location.reload()" class="px-8 py-4 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-500 hover:to-slate-600 text-white font-bold text-lg rounded-xl shadow-lg transition-all">
        üéÆ Play Again
      </button>
      
      <div class="mt-8 pt-6 border-t border-slate-700">
        <button onclick="game.showResearchModal()" class="text-indigo-400 hover:text-indigo-300 text-sm mb-4 flex items-center gap-2 mx-auto">
          <span>üìö</span> Learn more about AI startups and research
        </button>
        <p class="text-slate-500 text-sm mb-1">Created by Ammon Salter with Stefano Baruffaldi & Federico Bignone</p>
        <p class="text-slate-600 text-xs mb-2">with Claude, Gemini & ChatGPT ¬∑ Contributors: Paola Criscuolo, Linus Dahlander, Christos Kolympiris, Orietta Marsili, Rossella Salandra, Giacomo Salter, Suki Salter</p>
        <p class="text-slate-600 text-xs mb-2">Part of the ESRC-funded project "Profiting from Science" [ES/X003949/1]</p>
        <p class="text-slate-600 text-xs">¬© 2025 Salter, Baruffaldi & Bignone ¬∑ Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" class="text-indigo-400 hover:text-indigo-300 underline">CC BY-NC-SA 4.0</a></p>
      </div>
    </div>
  </div>
</div>

<!-- Research & Further Reading Modal -->
<div id="researchModal" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900 hidden items-start justify-center z-[70] overflow-y-auto">
  <div class="max-w-3xl w-full mx-auto px-4 py-8 min-h-full">
    <div class="bg-white rounded-2xl p-6 shadow-2xl">
      <!-- Header -->
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center">
            <span class="text-2xl">üìö</span>
          </div>
          <div>
            <h2 class="text-2xl font-bold text-slate-800">Learn More</h2>
            <p class="text-slate-500 text-sm">Research on AI startups & the economics of AI</p>
          </div>
        </div>
        <button onclick="game.hideResearchModal()" class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
      </div>
      
      <!-- Introduction -->
      <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-4 mb-6 border border-indigo-100">
        <p class="text-slate-700">
          If you want to learn more about AI startups and the economics of AI, please see these papers:
        </p>
      </div>
      
      <!-- References -->
      <div class="space-y-4 mb-6">
        <!-- Reference 1 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Agrawal, A., Gans, J., & Goldfarb, A. (2019). <span class="font-semibold">The Economics of Artificial Intelligence</span>. University of Chicago Press.
          </p>
        </div>
        
        <!-- Reference 2 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Ahmed, N., Wahed, M., & Thompson, N. C. (2023). The growing influence of industry in AI research. <span class="italic">Science, 379</span>(6635), 884-886. 
            <a href="https://doi.org/10.1126/science.ade2420" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1126/science.ade2420</a>
          </p>
        </div>
        
        <!-- Reference 3 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Artificial Intelligence sector study 2024. GOV.UK. 
            <a href="https://www.gov.uk/government/publications/artificial-intelligence-sector-study-2024/artificial-intelligence-sector-study-2024" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://www.gov.uk/government/publications/artificial-intelligence-sector-study-2024</a>
          </p>
        </div>
        
        <!-- Reference 4 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Bahoo-Torodi, A., Fontana, R., & Malerba, F. (2026). Pre-entry experience and the heterogeneity in startup performance: Evidence from the nascent artificial intelligence industry. <span class="italic">Research Policy, 55</span>(1), 105367. 
            <a href="https://doi.org/10.1016/j.respol.2025.105367" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1016/j.respol.2025.105367</a>
          </p>
        </div>
        
        <!-- Reference 5 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Baruffaldi, S., van Beuzekom, B., Dernis, H., Harhoff, D., Rao, N., Rosenfeld, D., & Squicciarini, M. (2020). Identifying and measuring developments in artificial intelligence: Making the impossible possible. <span class="italic">OECD Science, Technology and Industry Working Papers</span>. 
            <a href="https://doi.org/10.1787/5f65ff7e-en" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1787/5f65ff7e-en</a>
          </p>
        </div>
        
        <!-- Reference 6 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Bessen, J., Impink, S. M., Reichensperger, L., & Seamans, R. (2022). The role of data for AI startup growth. <span class="italic">Research Policy, 51</span>(5), 104513. 
            <a href="https://doi.org/10.1016/j.respol.2022.104513" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1016/j.respol.2022.104513</a>
          </p>
        </div>
        
        <!-- Reference 7 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Bianchini, S., M√ºller, M., & Pelletier, P. (2022). Artificial intelligence in science: An emerging general method of invention. <span class="italic">Research Policy, 51</span>(10), 104604. 
            <a href="https://doi.org/10.1016/j.respol.2022.104604" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1016/j.respol.2022.104604</a>
          </p>
        </div>
        
        <!-- Reference 8 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Chalmers, D., MacKenzie, N. G., & Carter, S. (2021). Artificial intelligence and entrepreneurship: Implications for venture creation in the fourth industrial revolution. <span class="italic">Entrepreneurship Theory and Practice, 45</span>(5), 1028-1053. 
            <a href="https://doi.org/10.1177/1042258720934581" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1177/1042258720934581</a>
          </p>
        </div>
        
        <!-- Reference 9 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Chattopadhyay, S., Honor√©, F., & Won, S. (2025). Free range startups? Market scope, academic founders, and the role of general knowledge in AI. <span class="italic">Strategic Management Journal, 46</span>(4), 1027-1079. 
            <a href="https://doi.org/10.1002/smj.3685" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1002/smj.3685</a>
          </p>
        </div>
        
        <!-- Reference 10 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Feng, L., Hu, J., Huang, M., Irfan, M., & Hu, M. (2025). From algorithms to invention: AI's impact on corporate innovation output and efficiency. <span class="italic">The Quarterly Review of Economics and Finance</span>, 102042. 
            <a href="https://doi.org/10.1016/j.qref.2025.102042" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1016/j.qref.2025.102042</a>
          </p>
        </div>
        
        <!-- Reference 11 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Hartmann, P., & Henkel, J. (2020). The Rise of Corporate Science in AI: Data as a Strategic Resource. <span class="italic">Academy of Management Discoveries</span>. 
            <a href="https://doi.org/10.5465/amd.2019.0043" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.5465/amd.2019.0043</a>
          </p>
        </div>
        
        <!-- Reference 12 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Jacobides, M. G., Brusoni, S., & Candelon, F. (2021). The evolutionary dynamics of the artificial intelligence ecosystem. <span class="italic">Strategy Science, 6</span>(4), 412-435. 
            <a href="https://doi.org/10.1287/stsc.2021.0148" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1287/stsc.2021.0148</a>
          </p>
        </div>
        
        <!-- Reference 13 -->
        <div class="bg-slate-50 rounded-lg p-4 hover:bg-slate-100 transition-colors">
          <p class="text-slate-800 text-sm leading-relaxed">
            Wang, H., Fu, T., Du, Y., Gao, W., Huang, K., Liu, Z., ... & Zitnik, M. (2023). Scientific discovery in the age of artificial intelligence. <span class="italic">Nature, 620</span>(7972), 47-60. 
            <a href="https://doi.org/10.1038/s41586-023-06221-2" target="_blank" class="text-indigo-600 hover:text-indigo-800 underline">https://doi.org/10.1038/s41586-023-06221-2</a>
          </p>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="text-center">
        <button onclick="game.hideResearchModal()" class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all">
          ‚Üê Back to Game
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Shock Modal -->
<div id="shockModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-50 p-4 shock-overlay">
  <div class="bg-white rounded-2xl max-w-lg w-full p-6 shadow-2xl border-l-4 border-amber-500">
    <div class="flex items-center gap-2 text-amber-600 text-sm font-bold uppercase mb-2">
      <span>‚ö°</span> Breaking News
    </div>
    <h2 id="shockHeadline" class="text-xl font-bold text-slate-800 mb-2"></h2>
    <p id="shockText" class="text-slate-600 mb-4"></p>
    <div id="shockEffects" class="bg-slate-50 rounded-lg p-3 text-sm text-slate-600 mb-4"></div>
    <p class="text-sm text-slate-500 mb-3">How do you respond?</p>
    <div id="shockChoices" class="space-y-2"></div>
  </div>
</div>

<!-- Your Entrepreneurial Journey Modal -->
<div id="journeyModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-[60] p-4 overflow-y-auto">
  <div class="bg-white rounded-2xl max-w-3xl w-full mx-auto my-8 shadow-2xl">
    <div id="journeyContent" class="p-6 max-h-[80vh] overflow-y-auto">
      <!-- Populated by JS -->
    </div>
  </div>
</div>

<!-- Investor Confrontation Modal -->
<div id="investorConfrontationModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-[55] confrontation-overlay">
  <div class="confrontation-card bg-gradient-to-b from-slate-800 to-slate-900 rounded-2xl max-w-lg w-full mx-4 shadow-2xl overflow-hidden border-2 border-red-500/50">
    <!-- Header -->
    <div id="confrontationHeader" class="bg-gradient-to-r from-red-600 to-rose-700 text-white p-4">
      <div class="flex items-center gap-3">
        <div id="confrontationPhoto" class="w-16 h-16 rounded-full border-3 border-white/30 overflow-hidden investor-angry">
          <!-- Investor photo goes here -->
        </div>
        <div>
          <div id="confrontationStatus" class="text-xs uppercase tracking-wide text-red-200 mb-1">Investor Concerned</div>
          <h2 id="confrontationName" class="text-xl font-bold">Investor Name</h2>
          <div id="confrontationTitle" class="text-sm text-red-200">Title</div>
        </div>
      </div>
    </div>
    
    <!-- Content -->
    <div class="p-6">
      <!-- Quote bubble -->
      <div class="bg-slate-700/50 rounded-xl p-4 mb-4 border-l-4 border-red-500">
        <p id="confrontationQuote" class="text-white text-lg italic leading-relaxed">
          "I'm starting to wonder if you know what you're doing."
        </p>
      </div>
      
      <!-- Relationship status -->
      <div class="flex items-center justify-between mb-4 p-3 bg-slate-800/50 rounded-lg">
        <span class="text-slate-400 text-sm">Relationship Status</span>
        <div id="confrontationRelationship" class="flex items-center gap-2">
          <span class="text-red-400 font-bold">Hostile</span>
          <div class="flex gap-1">
            <span class="w-3 h-3 rounded-full bg-red-500"></span>
            <span class="w-3 h-3 rounded-full bg-slate-600"></span>
            <span class="w-3 h-3 rounded-full bg-slate-600"></span>
            <span class="w-3 h-3 rounded-full bg-slate-600"></span>
            <span class="w-3 h-3 rounded-full bg-slate-600"></span>
          </div>
        </div>
      </div>
      
      <!-- Consequences box -->
      <div id="confrontationConsequences" class="bg-red-900/30 border border-red-500/50 rounded-xl p-4 mb-6">
        <h3 class="text-red-400 font-semibold text-sm mb-2 flex items-center gap-2">
          <span>‚ö†</span> Consequences
        </h3>
        <ul id="confrontationConsequencesList" class="text-slate-300 text-sm space-y-2">
          <li>‚Ä¢ They will stop providing strategic advice</li>
          <li>‚Ä¢ Their support bonuses are withdrawn</li>
        </ul>
      </div>
      
      <!-- Recovery hint (only shown if not hostile) -->
      <div id="confrontationRecoveryHint" class="hidden bg-amber-900/30 border border-amber-500/50 rounded-xl p-4 mb-6">
        <h3 class="text-amber-400 font-semibold text-sm mb-2 flex items-center gap-2">
          <span>üí°</span> How to Recover
        </h3>
        <p class="text-slate-300 text-sm">Follow their advice in future quarters to rebuild trust. One more ignored suggestion and they may withdraw support entirely.</p>
      </div>
      
      <!-- Dismiss button -->
      <button onclick="game.dismissConfrontation()" class="w-full py-3 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-xl transition-colors">
        I Understand
      </button>
    </div>
  </div>
</div>

<!-- Mini-Game Intro Modal -->
<div id="minigameIntroModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-[60] minigame-intro-overlay">
  <div class="minigame-intro-card bg-gradient-to-b from-slate-800 to-slate-900 rounded-2xl max-w-lg w-full mx-4 shadow-2xl overflow-hidden border border-slate-700 minigame-intro-glow">
    <!-- Header with icon -->
    <div id="minigameIntroHeader" class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-6 text-center">
      <div id="minigameIntroIcon" class="text-6xl mb-3 minigame-intro-icon">üé™</div>
      <h2 id="minigameIntroTitle" class="text-2xl font-bold">Mini-Game Time!</h2>
    </div>
    
    <!-- Content -->
    <div class="p-6">
      <p id="minigameIntroDesc" class="text-slate-300 text-center mb-4 leading-relaxed">
        Get ready for an interactive challenge!
      </p>
      
      <!-- Tips box -->
      <div id="minigameIntroTips" class="bg-slate-800/50 rounded-xl p-4 mb-6 border border-slate-700">
        <h3 class="text-amber-400 font-semibold text-sm mb-2 flex items-center gap-2">
          <span>üí°</span> Quick Tips
        </h3>
        <ul id="minigameIntroTipsList" class="text-slate-400 text-sm space-y-1">
          <li>‚Ä¢ Tip 1</li>
          <li>‚Ä¢ Tip 2</li>
        </ul>
      </div>
      
      <!-- Reward preview -->
      <div class="text-center mb-6">
        <span class="text-slate-500 text-xs uppercase tracking-wide">Potential Rewards</span>
        <div id="minigameIntroRewards" class="text-lg text-emerald-400 font-semibold mt-1">
          üí∞ Cash ‚Ä¢ üìà Stats ‚Ä¢ üåü Prestige
        </div>
      </div>
      
      <!-- Start button -->
      <button id="minigameIntroStartBtn" onclick="game.startPendingMiniGame()" class="minigame-start-btn w-full py-4 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-400 hover:to-teal-400 text-white font-bold text-lg rounded-xl">
        üöÄ Let's Go!
      </button>
    </div>
  </div>
</div>

<!-- Conference Mini-Game Modal -->
<div id="conferenceModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-50">
  <div class="bg-gradient-to-b from-slate-100 to-slate-200 rounded-2xl max-w-4xl w-full mx-4 shadow-2xl overflow-hidden">
    <!-- Header -->
    <div class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-4">
      <div class="flex justify-between items-center">
        <div>
          <div class="text-sm opacity-80">You're attending</div>
          <h2 id="confName" class="text-2xl font-bold">TechSummit Disrupt London</h2>
        </div>
        <div class="text-right">
          <div class="text-3xl font-mono" id="confTimer">1:00</div>
          <div class="text-sm opacity-80">remaining</div>
        </div>
      </div>
    </div>
    
    <!-- Stats Bar -->
    <div class="bg-white border-b border-slate-200 p-3 flex justify-between items-center text-sm">
      <div class="flex gap-6">
        <div>üí∞ Budget: <span id="confBudget" class="font-bold text-emerald-600">¬£2,000</span></div>
        <div>üìã Leads: <span id="confLeads" class="font-bold text-blue-600">0</span></div>
        <div>‚≠ê Quality: <span id="confQuality" class="font-bold text-amber-600">0</span></div>
      </div>
      <div class="flex gap-4">
        <div class="text-slate-500">Your Interest: <span id="confInterest" class="font-bold text-blue-600">0</span></div>
        <div class="text-slate-500">Rivals: <span id="confRivalInterest" class="font-bold text-red-500">0</span></div>
      </div>
    </div>
    
    <!-- Game Area -->
    <div id="confGameArea" class="relative h-72 bg-gradient-to-b from-slate-100 to-slate-200 overflow-hidden">
      <!-- Ceiling / Lighting rigs -->
      <div class="absolute top-0 left-0 right-0 h-8 bg-gradient-to-b from-slate-800 to-transparent flex justify-around items-start">
        <div class="w-2 h-4 bg-yellow-300 rounded-b shadow-lg shadow-yellow-200/50"></div>
        <div class="w-2 h-4 bg-yellow-300 rounded-b shadow-lg shadow-yellow-200/50"></div>
        <div class="w-2 h-4 bg-yellow-300 rounded-b shadow-lg shadow-yellow-200/50"></div>
        <div class="w-2 h-4 bg-yellow-300 rounded-b shadow-lg shadow-yellow-200/50"></div>
        <div class="w-2 h-4 bg-yellow-300 rounded-b shadow-lg shadow-yellow-200/50"></div>
      </div>
      
      <!-- Floor -->
      <div class="absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-b from-slate-300 to-slate-400">
        <!-- Floor pattern -->
        <div class="absolute inset-0 opacity-20" style="background: repeating-linear-gradient(90deg, #000 0px, #000 1px, transparent 1px, transparent 60px);"></div>
      </div>
      
      <!-- Left Competitor Booth -->
      <div id="confBoothLeft" class="absolute bottom-12 left-4 w-32 h-32">
        <div class="absolute inset-x-0 top-0 h-20 bg-gradient-to-b from-red-500 to-red-600 rounded-t border-2 border-red-700">
          <div class="text-white text-center font-bold mt-1 text-[10px]">NEXAGEN AI</div>
          <div class="mx-2 mt-1 h-8 bg-slate-900 rounded flex items-center justify-center">
            <div id="confLeftDemo" class="text-red-400 text-[8px]">‚ñ∂ DEMO</div>
          </div>
        </div>
        <div class="absolute bottom-0 inset-x-1 h-10 bg-slate-200 rounded-t border border-slate-300"></div>
        <div id="confLeftStaff" class="absolute -bottom-1 left-1/2 -translate-x-1/2">
          <svg width="20" height="24" viewBox="0 0 20 24"><circle cx="10" cy="5" r="4" fill="#ef4444"/><path d="M4 24 L6 12 L14 12 L16 24" fill="#dc2626"/><circle cx="10" cy="5" r="3" fill="#fecaca"/></svg>
        </div>
      </div>
      
      <!-- Right Competitor Booth -->
      <div id="confBoothRight" class="absolute bottom-12 right-4 w-32 h-32">
        <div class="absolute inset-x-0 top-0 h-20 bg-gradient-to-b from-purple-500 to-purple-600 rounded-t border-2 border-purple-700">
          <div class="text-white text-center font-bold mt-1 text-[10px]">SYNTHEX LABS</div>
          <div class="mx-2 mt-1 h-8 bg-slate-900 rounded flex items-center justify-center">
            <div id="confRightDemo" class="text-purple-400 text-[8px]">‚ñ∂ DEMO</div>
          </div>
        </div>
        <div class="absolute bottom-0 inset-x-1 h-10 bg-slate-200 rounded-t border border-slate-300"></div>
        <div id="confRightStaff" class="absolute -bottom-1 left-1/2 -translate-x-1/2">
          <svg width="20" height="24" viewBox="0 0 20 24"><circle cx="10" cy="5" r="4" fill="#8b5cf6"/><path d="M4 24 L6 12 L14 12 L16 24" fill="#7c3aed"/><circle cx="10" cy="5" r="3" fill="#ede9fe"/></svg>
        </div>
      </div>
      
      <!-- Your Booth (center) -->
      <div id="confBooth" class="absolute bottom-12 left-1/2 -translate-x-1/2 w-40 h-36">
        <!-- Back wall -->
        <div class="absolute inset-x-0 top-0 h-24 bg-gradient-to-b from-blue-500 to-blue-600 rounded-t-lg border-4 border-blue-700 shadow-lg">
          <div id="confBoothName" class="text-white text-center font-bold mt-1 text-xs">AETHER BIOLABS</div>
          <div class="text-white/70 text-center text-[10px]">Stand A42</div>
          <!-- Banner/Demo screen -->
          <div class="mx-3 mt-1 h-10 bg-slate-900 rounded flex items-center justify-center">
            <div id="confDemoStatus" class="text-green-400 text-[10px]">‚ñ∂ Demo Ready</div>
          </div>
        </div>
        <!-- Table -->
        <div class="absolute bottom-0 inset-x-2 h-12 bg-slate-200 rounded-t border-2 border-slate-300">
          <div id="confSwagPile" class="absolute left-1 bottom-1 text-lg">üéÅüéÅ</div>
          <div id="confCoffee" class="absolute right-1 bottom-1 text-lg">‚òï</div>
        </div>
        <!-- Your Staff (little people) -->
        <div class="absolute -bottom-1 left-1/2 -translate-x-1/2 flex gap-0.5">
          <svg width="18" height="22" viewBox="0 0 20 24"><circle cx="10" cy="5" r="4" fill="#3b82f6"/><path d="M4 24 L6 12 L14 12 L16 24" fill="#2563eb"/><circle cx="10" cy="5" r="3" fill="#fef3c7"/></svg>
          <svg width="18" height="22" viewBox="0 0 20 24"><circle cx="10" cy="5" r="4" fill="#3b82f6"/><path d="M4 24 L6 12 L14 12 L16 24" fill="#2563eb"/><circle cx="10" cy="5" r="3" fill="#fde68a"/></svg>
        </div>
      </div>
      
      <!-- Delegates will be spawned here -->
      <div id="confDelegates" class="absolute inset-0 pointer-events-none"></div>
      
      <!-- Click effects layer -->
      <div id="confEffects" class="absolute inset-0 pointer-events-none"></div>
    </div>
    
    <!-- Action Buttons -->
    <div class="bg-white p-4 border-t border-slate-200">
      <div class="grid grid-cols-5 gap-2">
        <button id="confActionWave" onclick="game.confAction('wave')" class="conf-action-btn bg-slate-100 hover:bg-slate-200 p-3 rounded-xl text-center transition-all">
          <div class="text-2xl mb-1">üëã</div>
          <div class="text-xs font-medium">Wave</div>
          <div class="text-[10px] text-emerald-600">Free</div>
        </button>
        <button id="confActionSwag" onclick="game.confAction('swag')" class="conf-action-btn bg-amber-50 hover:bg-amber-100 p-3 rounded-xl text-center transition-all">
          <div class="text-2xl mb-1">üéÅ</div>
          <div class="text-xs font-medium">Swag</div>
          <div class="text-[10px] text-amber-600">¬£<span class="swag-cost">20</span></div>
        </button>
        <button id="confActionCoffee" onclick="game.confAction('coffee')" class="conf-action-btn bg-orange-50 hover:bg-orange-100 p-3 rounded-xl text-center transition-all">
          <div class="text-2xl mb-1">‚òï</div>
          <div class="text-xs font-medium">Coffee</div>
          <div class="text-[10px] text-orange-600">¬£<span class="coffee-cost">50</span></div>
        </button>
        <button id="confActionDemo" onclick="game.confAction('demo')" class="conf-action-btn bg-blue-50 hover:bg-blue-100 p-3 rounded-xl text-center transition-all">
          <div class="text-2xl mb-1">üíª</div>
          <div class="text-xs font-medium">Demo</div>
          <div class="text-[10px] text-blue-600">¬£<span class="demo-cost">200</span></div>
        </button>
        <button id="confActionTalk" onclick="game.confAction('talk')" class="conf-action-btn bg-purple-50 hover:bg-purple-100 p-3 rounded-xl text-center transition-all">
          <div class="text-2xl mb-1">üé§</div>
          <div class="text-xs font-medium">Talk</div>
          <div class="text-[10px] text-purple-600">¬£<span class="talk-cost">500</span></div>
        </button>
      </div>
      <div class="mt-3 text-center text-xs text-slate-500">
        Click delegates to engage them! Use actions to boost interest.
      </div>
    </div>
  </div>
</div>

<!-- Conference Results Modal -->
<div id="conferenceResultsModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-50">
  <div class="bg-white rounded-2xl max-w-md w-full mx-4 p-6 shadow-2xl text-center">
    <div id="confResultIcon" class="text-6xl mb-4">üèÜ</div>
    <h2 id="confResultTitle" class="text-2xl font-bold text-slate-800 mb-2">Great Show!</h2>
    <p id="confResultText" class="text-slate-600 mb-4"></p>
    <div id="confResultStats" class="bg-slate-50 rounded-lg p-4 mb-4 text-left">
      <!-- Stats will be populated -->
    </div>
    <div id="confResultRewards" class="bg-emerald-50 rounded-lg p-4 mb-4 text-left text-emerald-800">
      <!-- Rewards will be populated -->
    </div>
    <button onclick="game.closeConference()" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl">
      Continue
    </button>
  </div>
</div>

<!-- Investor Pitch Mini-Game Modal -->
<div id="pitchModal" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="w-full max-w-5xl mx-4 my-4">
    <!-- Header -->
    <div class="flex justify-between items-center mb-3">
      <div>
        <h2 class="text-2xl font-bold text-white">üé§ Investor Pitch</h2>
        <p id="pitchVenueName" class="text-indigo-300 text-sm">Series A Pitch Meeting</p>
      </div>
      <div class="flex gap-6 text-center">
        <div>
          <div class="text-slate-400 text-xs uppercase">Time Left</div>
          <div id="pitchTimer" class="text-3xl font-mono font-bold text-amber-400">0:45</div>
        </div>
        <div>
          <div class="text-slate-400 text-xs uppercase">Pitch Points</div>
          <div id="pitchPoints" class="text-3xl font-mono font-bold text-emerald-400">10</div>
        </div>
      </div>
    </div>
    
    <!-- Main pitch area - Conference room style -->
    <div class="bg-gradient-to-b from-slate-800 to-slate-900 rounded-xl p-4 mb-3 relative border border-slate-700">
      <!-- Investor Panel (top) - The audience -->
      <div class="flex justify-center gap-2 mb-4">
        <div id="investor-0" class="pitch-investor flex flex-col items-center bg-slate-700/50 rounded-xl p-3 w-28 transition-all">
          <div class="text-4xl mb-1 investor-face">üë®üíº</div>
          <div class="text-white text-xs font-medium text-center" id="investor-name-0">Dr. Chen</div>
          <div class="text-[10px] text-slate-400" id="investor-title-0">Lead Partner</div>
          <div class="mt-1 px-2 py-0.5 rounded-full text-[10px] font-medium investor-reaction" id="investor-reaction-0">ü§î Listening</div>
        </div>
        <div id="investor-1" class="pitch-investor flex flex-col items-center bg-slate-700/50 rounded-xl p-3 w-28 transition-all">
          <div class="text-4xl mb-1 investor-face">üë©üíº</div>
          <div class="text-white text-xs font-medium text-center" id="investor-name-1">Sarah Webb</div>
          <div class="text-[10px] text-slate-400" id="investor-title-1">GP, Tech Fund</div>
          <div class="mt-1 px-2 py-0.5 rounded-full text-[10px] font-medium investor-reaction" id="investor-reaction-1">ü§î Listening</div>
        </div>
        <div id="investor-2" class="pitch-investor flex flex-col items-center bg-slate-700/50 rounded-xl p-3 w-28 transition-all">
          <div class="text-4xl mb-1 investor-face">üßëüíº</div>
          <div class="text-white text-xs font-medium text-center" id="investor-name-2">Marcus Cole</div>
          <div class="text-[10px] text-slate-400" id="investor-title-2">Angel Investor</div>
          <div class="mt-1 px-2 py-0.5 rounded-full text-[10px] font-medium investor-reaction" id="investor-reaction-2">ü§î Listening</div>
        </div>
        <div id="investor-3" class="pitch-investor flex flex-col items-center bg-slate-700/50 rounded-xl p-3 w-28 transition-all">
          <div class="text-4xl mb-1 investor-face">üë©üíª</div>
          <div class="text-white text-xs font-medium text-center" id="investor-name-3">Priya Patel</div>
          <div class="text-[10px] text-slate-400" id="investor-title-3">Venture Partner</div>
          <div class="mt-1 px-2 py-0.5 rounded-full text-[10px] font-medium investor-reaction" id="investor-reaction-3">ü§î Listening</div>
        </div>
      </div>
      
      <!-- The Worm Chart - Full width live scrolling attention tracker -->
      <div class="bg-slate-900 rounded-lg p-2 mb-3 border border-slate-600">
        <div class="flex justify-between items-center mb-1">
          <span class="text-xs text-slate-400 uppercase tracking-wide">üìä Live Investor Interest</span>
          <div class="flex items-center gap-3">
            <span class="text-[10px] text-slate-500">Time: <span id="pitchTimerSmall" class="text-amber-400 font-mono">0:30</span></span>
            <span id="pitchAttentionValue" class="text-lg font-bold text-amber-400">50%</span>
          </div>
        </div>
        <div class="relative h-32 bg-gradient-to-b from-slate-800 to-slate-900 rounded overflow-hidden border border-slate-700">
          <!-- Threshold zones with labels on left -->
          <div class="absolute inset-0 flex flex-col">
            <div class="flex-1 bg-emerald-500/10 border-b border-emerald-500/40 relative">
              <span class="absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-emerald-400 font-medium">ü§© EXCITED</span>
            </div>
            <div class="flex-1 bg-amber-500/10 border-b border-amber-500/40 relative">
              <span class="absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-amber-400 font-medium">ü§î INTERESTED</span>
            </div>
            <div class="flex-1 bg-red-500/10 relative">
              <span class="absolute left-2 top-1/2 -translate-y-1/2 text-[10px] text-red-400 font-medium">üò¥ BORED</span>
            </div>
          </div>
          <!-- Time markers -->
          <div class="absolute bottom-0 left-0 right-0 flex justify-between px-2 text-[8px] text-slate-600">
            <span>0s</span>
            <span>10s</span>
            <span>20s</span>
            <span>30s</span>
          </div>
          <!-- The worm line (SVG) - scrolls left to right -->
          <svg id="pitchWormChart" class="absolute inset-0 w-full h-full" viewBox="0 0 300 100" preserveAspectRatio="none">
            <defs>
              <linearGradient id="wormGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" style="stop-color:#64748b"/>
                <stop offset="80%" style="stop-color:#f59e0b"/>
                <stop offset="100%" style="stop-color:#10b981"/>
              </linearGradient>
              <filter id="glow">
                <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                <feMerge>
                  <feMergeNode in="coloredBlur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <polyline id="pitchWormLine" fill="none" stroke="url(#wormGradient)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" filter="url(#glow)" points="0,50"/>
          </svg>
          <!-- Current position dot (pulses) -->
          <div id="pitchWormDot" class="absolute w-4 h-4 bg-white rounded-full shadow-lg shadow-white/70 animate-pulse" style="left: 0%; top: 50%; transform: translate(-50%, -50%);"></div>
        </div>
      </div>
      
      <!-- Presenter area -->
      <div class="flex items-center justify-center gap-6">
        <div class="text-center">
          <div id="pitchPresenter" class="text-5xl transition-transform duration-200">üßëüíº</div>
          <div class="text-white text-sm font-medium mt-1">You</div>
        </div>
        <div id="pitchSpeechBubble" class="bg-white rounded-2xl rounded-bl-none px-4 py-2 max-w-xs shadow-lg">
          <p id="pitchSpeechText" class="text-slate-800 text-sm italic">"Thank you for having me today..."</p>
        </div>
      </div>
      
      <!-- Effects container -->
      <div id="pitchEffects" class="absolute inset-0 pointer-events-none overflow-hidden"></div>
    </div>
    
    <!-- Action buttons - 2 rows of 4 -->
    <div class="grid grid-cols-4 gap-2 mb-2">
      <button onclick="game.pitchAction('story')" class="pitch-action-btn bg-violet-600 hover:bg-violet-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üìñ</div>
        <div class="text-xs font-medium">Tell Story</div>
        <div class="text-[9px] text-violet-200">3 pts ‚Ä¢ +15</div>
      </button>
      <button onclick="game.pitchAction('joke')" class="pitch-action-btn bg-amber-600 hover:bg-amber-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üòÑ</div>
        <div class="text-xs font-medium">Tell Joke</div>
        <div class="text-[9px] text-amber-200">2 pts ‚Ä¢ risky!</div>
      </button>
      <button onclick="game.pitchAction('customer')" class="pitch-action-btn bg-emerald-600 hover:bg-emerald-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üè¢</div>
        <div class="text-xs font-medium">Name Drop</div>
        <div class="text-[9px] text-emerald-200">2 pts ‚Ä¢ +12</div>
      </button>
      <button onclick="game.pitchAction('data')" class="pitch-action-btn bg-blue-600 hover:bg-blue-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üìä</div>
        <div class="text-xs font-medium">Show Data</div>
        <div class="text-[9px] text-blue-200">2 pts ‚Ä¢ +8</div>
      </button>
    </div>
    <div class="grid grid-cols-4 gap-2">
      <button onclick="game.pitchAction('smile')" class="pitch-action-btn bg-pink-600 hover:bg-pink-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üòä</div>
        <div class="text-xs font-medium">Smile</div>
        <div class="text-[9px] text-pink-200">1 pt ‚Ä¢ +5</div>
      </button>
      <button onclick="game.pitchAction('walk')" class="pitch-action-btn bg-cyan-600 hover:bg-cyan-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üö∂</div>
        <div class="text-xs font-medium">Step Forward</div>
        <div class="text-[9px] text-cyan-200">1 pt ‚Ä¢ +6</div>
      </button>
      <button onclick="game.pitchAction('enthusiasm')" class="pitch-action-btn bg-orange-600 hover:bg-orange-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üôå</div>
        <div class="text-xs font-medium">Show Passion</div>
        <div class="text-[9px] text-orange-200">2 pts ‚Ä¢ +10</div>
      </button>
      <button onclick="game.pitchAction('demo')" id="pitchDemoBtn" class="pitch-action-btn bg-indigo-600 hover:bg-indigo-500 text-white p-2.5 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed">
        <div class="text-xl mb-0.5">üíª</div>
        <div class="text-xs font-medium">Live Demo</div>
        <div class="text-[9px] text-indigo-200">4 pts ‚Ä¢ +20 (1x)</div>
      </button>
    </div>
    
    <!-- Status bar -->
    <div class="mt-3 bg-slate-800/50 rounded-lg p-2 flex justify-between text-sm">
      <div class="text-slate-400 text-xs">
        <span id="pitchActionLog">Ready to pitch...</span>
      </div>
      <div class="text-slate-400 text-xs">
        Room mood: <span id="pitchInvestorMood" class="text-amber-400 font-medium">Neutral</span>
      </div>
    </div>
  </div>
</div>

<!-- Pitch Results Modal -->
<div id="pitchResultsModal" class="fixed inset-0 bg-slate-900/95 hidden items-center justify-center z-50">
  <div class="bg-white rounded-2xl max-w-md w-full mx-4 p-6 shadow-2xl text-center">
    <div id="pitchResultIcon" class="text-6xl mb-4">üéâ</div>
    <h2 id="pitchResultTitle" class="text-2xl font-bold text-slate-800 mb-2">Pitch Complete!</h2>
    <p id="pitchResultText" class="text-slate-600 mb-4"></p>
    <div id="pitchResultStats" class="bg-slate-50 rounded-lg p-4 mb-4 text-left">
      <!-- Stats will be populated -->
    </div>
    <div id="pitchResultRewards" class="bg-emerald-50 rounded-lg p-4 mb-4 text-left text-emerald-800">
      <!-- Rewards will be populated -->
    </div>
    <button onclick="game.closePitch()" class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl">
      Continue to Next Milestone
    </button>
  </div>
</div>

<!-- Raise Funding Modal -->
<div id="raiseModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 overflow-y-auto">
  <div class="bg-white rounded-2xl max-w-3xl w-full mx-4 my-8 p-6 shadow-2xl max-h-[90vh] overflow-y-auto">
    <div class="flex items-center justify-between mb-2 sticky top-0 bg-white pb-2 border-b border-slate-100">
      <h2 class="text-2xl font-bold text-slate-800">üí∞ Raise Follow-On Funding</h2>
      <button onclick="game.closeRaiseModal()" class="text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
    </div>
    <div class="flex items-center gap-4 mb-4 text-sm">
      <span class="text-slate-600">Valuation: <span id="raiseCurrentVal" class="font-bold text-emerald-600">¬£0k</span></span>
      <span class="text-slate-600">Your Equity: <span id="raiseCurrentEquity" class="font-bold">0%</span></span>
    </div>
    
    <div id="raiseOptions" class="space-y-3 mb-4"></div>
    
    <div class="bg-slate-50 rounded-lg p-3 text-xs text-slate-600">
      <strong>Note:</strong> You can only raise once per year (every 4 quarters). Investors aligned to your funding stage.
    </div>
  </div>
</div>

<!-- HELP MODAL -->
<div id="helpModal" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50 overflow-y-auto p-4">
  <div class="bg-white rounded-2xl max-w-2xl w-full mx-auto my-8 shadow-2xl max-h-[90vh] overflow-hidden flex flex-col">
    <!-- Header -->
    <div class="flex items-center justify-between p-4 border-b border-slate-200 bg-gradient-to-r from-indigo-500 to-purple-600">
      <h2 class="text-xl font-bold text-white">üìö How to Play</h2>
      <button onclick="game.closeHelpModal()" class="text-white/80 hover:text-white text-2xl">&times;</button>
    </div>
    
    <!-- Tabs -->
    <div class="flex border-b border-slate-200 bg-slate-50">
      <button onclick="game.showHelpTab('overview')" class="help-tab px-4 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent" data-tab="overview">Overview</button>
      <button onclick="game.showHelpTab('ap')" class="help-tab px-4 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent" data-tab="ap">Action Points</button>
      <button onclick="game.showHelpTab('money')" class="help-tab px-4 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent" data-tab="money">Money</button>
      <button onclick="game.showHelpTab('milestones')" class="help-tab px-4 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent" data-tab="milestones">Milestones</button>
      <button onclick="game.showHelpTab('team')" class="help-tab px-4 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600 border-b-2 border-transparent" data-tab="team">Team</button>
    </div>
    
    <!-- Content -->
    <div class="p-5 overflow-y-auto flex-1">
      <!-- Overview Tab -->
      <div id="helpContent-overview" class="help-content">
        <h3 class="font-bold text-lg text-slate-800 mb-3">üéØ Goal: Build a Successful AI Startup</h3>
        <p class="text-slate-600 mb-4">Complete <strong>3 milestones</strong> before running out of cash to win!</p>
        
        <div class="grid grid-cols-2 gap-4 mb-4">
          <div class="bg-emerald-50 rounded-lg p-3 border border-emerald-200">
            <div class="font-bold text-emerald-800 mb-1">‚úÖ You Win If:</div>
            <ul class="text-sm text-emerald-700 space-y-1">
              <li>‚Ä¢ Complete all 3 milestones</li>
              <li>‚Ä¢ Choose your exit (sell, scale, etc.)</li>
            </ul>
          </div>
          <div class="bg-rose-50 rounded-lg p-3 border border-rose-200">
            <div class="font-bold text-rose-800 mb-1">üíÄ You Lose If:</div>
            <ul class="text-sm text-rose-700 space-y-1">
              <li>‚Ä¢ Cash hits zero (bankruptcy)</li>
              <li>‚Ä¢ Miss a milestone deadline</li>
            </ul>
          </div>
        </div>
        
        <h4 class="font-bold text-slate-800 mb-2">Each Quarter You:</h4>
        <ol class="text-slate-600 space-y-2 mb-4">
          <li><span class="font-bold text-indigo-600">1.</span> Review decisions from your 3 department heads</li>
          <li><span class="font-bold text-indigo-600">2.</span> Select choices (each costs Action Points)</li>
          <li><span class="font-bold text-indigo-600">3.</span> Commit to end the quarter</li>
          <li><span class="font-bold text-indigo-600">4.</span> Pay your burn rate and see results</li>
        </ol>
        
        <div class="bg-amber-50 rounded-lg p-3 border border-amber-200">
          <div class="font-bold text-amber-800 mb-1">üí° Pro Tips:</div>
          <ul class="text-sm text-amber-700 space-y-1">
            <li>‚Ä¢ Focus on metrics that match your current milestone</li>
            <li>‚Ä¢ Keep runway above 3 quarters when possible</li>
            <li>‚Ä¢ Happy executives give better advice</li>
          </ul>
        </div>
      </div>
      
      <!-- AP Tab -->
      <div id="helpContent-ap" class="help-content hidden">
        <h3 class="font-bold text-lg text-slate-800 mb-3">‚ö° Action Points (AP)</h3>
        <p class="text-slate-600 mb-3"><strong>AP represents your managerial attention</strong>-the scarcest resource in any startup. You can't do everything, so every quarter you must choose where to focus while other opportunities pass by.</p>
        <p class="text-slate-600 mb-4">Every choice costs AP. The game forces you to prioritise: what deserves your attention right now?</p>
        
        <div class="bg-slate-100 rounded-lg p-4 mb-4">
          <div class="font-bold text-slate-800 mb-2">Your AP Budget:</div>
          <div class="space-y-2 text-sm">
            <div class="flex justify-between items-center">
              <span class="text-slate-600">Base AP per quarter:</span>
              <span class="font-bold text-slate-800">5 AP</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-slate-600">Staff bonus (3+ staff):</span>
              <span class="font-bold text-emerald-600">+1 to +3 AP</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-slate-600">Banked from last quarter:</span>
              <span class="font-bold text-amber-600">up to 2 AP</span>
            </div>
          </div>
        </div>
        
        <h4 class="font-bold text-slate-800 mb-2">Staff AP Bonus:</h4>
        <div class="grid grid-cols-4 gap-2 mb-4">
          <div class="text-center p-2 bg-slate-200 rounded-lg">
            <div class="text-xs text-slate-500">1-2 staff</div>
            <div class="font-bold text-slate-600">+0 AP</div>
          </div>
          <div class="text-center p-2 bg-emerald-100 rounded-lg">
            <div class="text-xs text-emerald-600">3-5 staff</div>
            <div class="font-bold text-emerald-700">+1 AP</div>
          </div>
          <div class="text-center p-2 bg-emerald-200 rounded-lg">
            <div class="text-xs text-emerald-600">6-8 staff</div>
            <div class="font-bold text-emerald-700">+2 AP</div>
          </div>
          <div class="text-center p-2 bg-emerald-300 rounded-lg">
            <div class="text-xs text-emerald-700">9+ staff</div>
            <div class="font-bold text-emerald-800">+3 AP</div>
          </div>
        </div>
        
        <div class="bg-indigo-50 rounded-lg p-3 border border-indigo-200">
          <div class="font-bold text-indigo-800 mb-1">üè¶ AP Banking:</div>
          <p class="text-sm text-indigo-700">Unused AP carries over to the next quarter (max 2). Save up for big decisions!</p>
        </div>
      </div>
      
      <!-- Money Tab -->
      <div id="helpContent-money" class="help-content hidden">
        <h3 class="font-bold text-lg text-slate-800 mb-3">üí∞ Cash, Burn & Runway</h3>
        
        <div class="space-y-4 mb-4">
          <div class="bg-emerald-50 rounded-lg p-3 border border-emerald-200">
            <div class="font-bold text-emerald-800">üíµ Cash</div>
            <p class="text-sm text-emerald-700">Your available money. Some choices cost cash. Hiring costs ¬£50k. If this hits zero, you're bankrupt!</p>
          </div>
          
          <div class="bg-rose-50 rounded-lg p-3 border border-rose-200">
            <div class="font-bold text-rose-800">üî• Burn Rate</div>
            <p class="text-sm text-rose-700">How much cash you spend per quarter automatically. Each staff member adds ¬£25k/quarter to burn.</p>
          </div>
          
          <div class="bg-amber-50 rounded-lg p-3 border border-amber-200">
            <div class="font-bold text-amber-800">‚è± Runway</div>
            <p class="text-sm text-amber-700">Quarters until bankruptcy (Cash √∑ Burn). Red = danger! Raise funding or cut costs.</p>
          </div>
          
          <div class="bg-sky-50 rounded-lg p-3 border border-sky-200">
            <div class="font-bold text-sky-800">üìà Valuation</div>
            <p class="text-sm text-sky-700">Your company's worth. Higher valuation = give up less equity when raising. Grows with milestones and strong metrics.</p>
          </div>
        </div>
        
        <h4 class="font-bold text-slate-800 mb-2">Raising Funding:</h4>
        <ul class="text-sm text-slate-600 space-y-1">
          <li>‚Ä¢ Trade equity for cash injection</li>
          <li>‚Ä¢ Better metrics = higher valuation = less dilution</li>
          <li>‚Ä¢ Can only raise once every 4 quarters</li>
          <li>‚Ä¢ New investors may have conflicting preferences</li>
        </ul>
      </div>
      
      <!-- Milestones Tab -->
      <div id="helpContent-milestones" class="help-content hidden">
        <h3 class="font-bold text-lg text-slate-800 mb-3">üéØ Milestones</h3>
        <p class="text-slate-600 mb-4">Milestones are your key objectives. Complete all 3 to win!</p>
        
        <div class="bg-slate-100 rounded-lg p-4 mb-4">
          <div class="font-bold text-slate-800 mb-2">Each Milestone Has:</div>
          <ul class="text-sm text-slate-600 space-y-2">
            <li><span class="font-bold text-indigo-600">Requirements:</span> Metrics you need to achieve (e.g., Science > 40)</li>
            <li><span class="font-bold text-rose-600">Deadline:</span> Quarters to complete it (miss = game over!)</li>
            <li><span class="font-bold text-emerald-600">Rewards:</span> Cash bonus and valuation boost when completed</li>
          </ul>
        </div>
        
        <h4 class="font-bold text-slate-800 mb-2">The Four Metrics:</h4>
        <div class="grid grid-cols-2 gap-2 mb-4">
          <div class="bg-blue-50 rounded-lg p-2 border border-blue-200">
            <span class="font-bold text-blue-700">üî¨ Science:</span>
            <span class="text-sm text-blue-600">Research quality</span>
          </div>
          <div class="bg-emerald-50 rounded-lg p-2 border border-emerald-200">
            <span class="font-bold text-emerald-700">üíª Dev:</span>
            <span class="text-sm text-emerald-600">Product & engineering</span>
          </div>
          <div class="bg-purple-50 rounded-lg p-2 border border-purple-200">
            <span class="font-bold text-purple-700">üì£ Marketing:</span>
            <span class="text-sm text-purple-600">Sales & growth</span>
          </div>
          <div class="bg-amber-50 rounded-lg p-2 border border-amber-200">
            <span class="font-bold text-amber-700">üë• HR:</span>
            <span class="text-sm text-amber-600">Team & culture</span>
          </div>
        </div>
        
        <div class="bg-indigo-50 rounded-lg p-3 border border-indigo-200">
          <div class="font-bold text-indigo-800 mb-1">üí° Strategy:</div>
          <p class="text-sm text-indigo-700">Focus your AP on choices that boost the metrics your current milestone needs!</p>
        </div>
      </div>
      
      <!-- Team Tab -->
      <div id="helpContent-team" class="help-content hidden">
        <h3 class="font-bold text-lg text-slate-800 mb-3">üë• Your Team</h3>
        
        <h4 class="font-bold text-slate-800 mb-2">Executives (Department Heads):</h4>
        <p class="text-slate-600 mb-3">You have 3 executives who present decisions each quarter:</p>
        <div class="grid grid-cols-3 gap-2 mb-4">
          <div class="bg-blue-50 rounded-lg p-2 text-center border border-blue-200">
            <div class="text-2xl mb-1">üî¨</div>
            <div class="font-bold text-blue-700 text-sm">Research</div>
          </div>
          <div class="bg-emerald-50 rounded-lg p-2 text-center border border-emerald-200">
            <div class="text-2xl mb-1">üíª</div>
            <div class="font-bold text-emerald-700 text-sm">Development</div>
          </div>
          <div class="bg-purple-50 rounded-lg p-2 text-center border border-purple-200">
            <div class="text-2xl mb-1">üì£</div>
            <div class="font-bold text-purple-700 text-sm">Marketing</div>
          </div>
        </div>
        
        <h4 class="font-bold text-slate-800 mb-2">Executive Mood:</h4>
        <p class="text-slate-600 mb-3">Executives have moods that affect what events they bring to you:</p>
        <div class="space-y-2 mb-3 text-sm">
          <div class="flex items-center gap-2">
            <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full">üòä Happy</span>
            <span class="text-slate-600">More likely to bring opportunities with better outcomes</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="px-2 py-1 bg-slate-100 text-slate-700 rounded-full">üòê Neutral</span>
            <span class="text-slate-600">Random mix of events</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="px-2 py-1 bg-amber-100 text-amber-700 rounded-full">üòü Frustrated</span>
            <span class="text-slate-600">More likely to bring problems and challenges</span>
          </div>
          <div class="flex items-center gap-2">
            <span class="px-2 py-1 bg-rose-100 text-rose-700 rounded-full">üò† Upset</span>
            <span class="text-slate-600">Significantly more likely to bring difficult situations</span>
          </div>
        </div>
        <p class="text-slate-500 text-xs">Mood improves when you invest in their domain. Passing on decisions lowers mood.</p>
        
        <h4 class="font-bold text-slate-800 mb-2">Staff:</h4>
        <ul class="text-sm text-slate-600 space-y-1 mb-4">
          <li><span class="font-bold">Hiring:</span> ¬£50k + adds ¬£25k/quarter burn</li>
          <li><span class="font-bold">Firing:</span> ¬£40k severance, reduces burn by ¬£25k/quarter</li>
          <li><span class="font-bold">AP Bonus:</span> More staff = more AP (unlocks after M1)</li>
          <li><span class="font-bold">Integration:</span> New hires need 1 quarter to integrate</li>
        </ul>
        
        <div class="bg-amber-50 rounded-lg p-3 border border-amber-200">
          <div class="font-bold text-amber-800 mb-1">‚ö† Note:</div>
          <p class="text-sm text-amber-700">Staff AP bonus only unlocks after completing your first milestone!</p>
        </div>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="p-4 border-t border-slate-200 bg-slate-50">
      <button onclick="game.closeHelpModal()" class="w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg">
        Got It!
      </button>
    </div>
  </div>
</div>

<script>
// =============================================================================
// THE AI VENTURE GAME - REDESIGNED
// =============================================================================

// Custom executive portraits - distinctive SVG illustrations
const PORTRAITS = {
  // RESEARCH
  fatima: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="fatimaGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#e0e7ff"/><stop offset="100%" style="stop-color:#c7d2fe"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#fatimaGrad)" stroke="#6366f1" stroke-width="2"/>
    <ellipse cx="40" cy="38" rx="22" ry="26" fill="#8B5A2B"/>
    <path d="M18 32 Q25 20 40 18 Q55 20 62 32 Q62 26 55 22 Q40 14 25 22 Q18 26 18 32" fill="#1a1a1a"/>
    <ellipse cx="40" cy="42" rx="16" ry="18" fill="#D4A574"/>
    <circle cx="33" cy="38" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="38" r="2.5" fill="#1a1a1a"/>
    <path d="M35 48 Q40 51 45 48" stroke="#8B4513" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="30" y="56" width="20" height="12" fill="#6366f1" rx="2"/>
    <circle cx="40" cy="60" r="1.5" fill="white"/>
    <path d="M22 28 Q20 20 28 18" stroke="#c7d2fe" stroke-width="3" fill="none" stroke-linecap="round"/>
  </svg>`,
  
  yuki: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="yukiGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#fce7f3"/><stop offset="100%" style="stop-color:#fbcfe8"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#yukiGrad)" stroke="#ec4899" stroke-width="2"/>
    <path d="M20 35 Q25 15 40 14 Q55 15 60 35 L58 50 Q55 55 40 56 Q25 55 22 50 Z" fill="#1a1a1a"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#F5DEB3"/>
    <ellipse cx="33" cy="40" rx="3" ry="2" fill="#1a1a1a"/><ellipse cx="47" cy="40" rx="3" ry="2" fill="#1a1a1a"/>
    <path d="M36 50 Q40 52 44 50" stroke="#CD853F" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="28" y="58" width="24" height="10" fill="#10b981" rx="2"/>
    <path d="M36 62 L40 58 L44 62" stroke="white" stroke-width="1.5" fill="none"/>
  </svg>`,
  
  kwame: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="kwameGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#fef3c7"/><stop offset="100%" style="stop-color:#fde68a"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#kwameGrad)" stroke="#f59e0b" stroke-width="2"/>
    <ellipse cx="40" cy="30" rx="18" ry="14" fill="#1a1a1a"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#6B4423"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M33 48 Q40 54 47 48" stroke="#4a3520" stroke-width="2" fill="none" stroke-linecap="round"/>
    <rect x="22" y="58" width="36" height="12" fill="#1a1a1a" rx="2"/>
    <path d="M32 64 L48 64" stroke="#f59e0b" stroke-width="2"/>
    <rect x="38" y="34" width="4" height="6" fill="#4a3520" rx="1"/>
  </svg>`,

  // DEV
  aoife: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="aoifeGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#dcfce7"/><stop offset="100%" style="stop-color:#bbf7d0"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#aoifeGrad)" stroke="#22c55e" stroke-width="2"/>
    <path d="M18 40 Q20 18 40 16 Q60 18 62 40 Q60 35 50 34 Q40 38 30 34 Q20 35 18 40" fill="#B8860B"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#FFE4C4"/>
    <circle cx="33" cy="40" r="2" fill="#22c55e"/><circle cx="47" cy="40" r="2" fill="#22c55e"/>
    <path d="M35 50 Q40 52 45 50" stroke="#CD853F" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="26" y="58" width="28" height="10" fill="#374151" rx="2"/>
    <text x="40" y="65" text-anchor="middle" fill="#22c55e" font-size="6" font-family="monospace">&lt;/&gt;</text>
  </svg>`,
  
  raj: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="rajGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#e0f2fe"/><stop offset="100%" style="stop-color:#bae6fd"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#rajGrad)" stroke="#0ea5e9" stroke-width="2"/>
    <path d="M22 38 Q28 22 40 20 Q52 22 58 38 Q54 34 40 33 Q26 34 22 38" fill="#1a1a1a"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#C68642"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M34 50 Q40 53 46 50" stroke="#8B5A2B" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M28 36 Q32 34 36 36 M44 36 Q48 34 52 36" stroke="#1a1a1a" stroke-width="1" fill="none"/>
    <rect x="28" y="58" width="24" height="10" fill="#0ea5e9" rx="2"/>
    <circle cx="40" cy="63" r="2" fill="white"/>
  </svg>`,
  
  wei: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="weiGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#f3e8ff"/><stop offset="100%" style="stop-color:#e9d5ff"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#weiGrad)" stroke="#a855f7" stroke-width="2"/>
    <path d="M20 36 Q24 20 40 18 Q56 20 60 36 L55 40 Q40 38 25 40 Z" fill="#1a1a1a"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#F5DEB3"/>
    <ellipse cx="33" cy="40" rx="2.5" ry="2" fill="#1a1a1a"/><ellipse cx="47" cy="40" rx="2.5" ry="2" fill="#1a1a1a"/>
    <path d="M36 50 Q40 53 44 50" stroke="#CD853F" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="28" y="58" width="24" height="10" fill="#a855f7" rx="2"/>
    <path d="M33 63 L40 60 L47 63" stroke="white" stroke-width="1.5" fill="none"/>
  </svg>`,

  // MARKETING
  priya: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="priyaGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#fee2e2"/><stop offset="100%" style="stop-color:#fecaca"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#priyaGrad)" stroke="#ef4444" stroke-width="2"/>
    <path d="M18 42 Q22 16 40 14 Q58 16 62 42 Q58 38 40 36 Q22 38 18 42" fill="#1a1a1a"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#C68642"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M34 49 Q40 53 46 49" stroke="#8B5A2B" stroke-width="2" fill="none" stroke-linecap="round"/>
    <circle cx="24" cy="44" r="3" fill="#fecaca"/>
    <rect x="26" y="58" width="28" height="10" fill="#ef4444" rx="2"/>
    <path d="M32 63 L40 61 L48 63" stroke="white" stroke-width="1.5" fill="none"/>
  </svg>`,
  
  marcus: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="marcusGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#dbeafe"/><stop offset="100%" style="stop-color:#bfdbfe"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#marcusGrad)" stroke="#3b82f6" stroke-width="2"/>
    <path d="M24 34 Q28 24 40 22 Q52 24 56 34 Q52 30 40 29 Q28 30 24 34" fill="#4a3728"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#6B4423"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#4a3520" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="30" y="32" width="20" height="2" fill="#4a3728" rx="1"/>
    <rect x="26" y="58" width="28" height="10" fill="#3b82f6" rx="2"/>
    <text x="40" y="65" text-anchor="middle" fill="white" font-size="7" font-family="sans-serif">%</text>
  </svg>`,
  
  emma: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="emmaGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#fef9c3"/><stop offset="100%" style="stop-color:#fef08a"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#emmaGrad)" stroke="#eab308" stroke-width="2"/>
    <path d="M20 45 Q18 20 40 16 Q62 20 60 45 Q55 35 40 34 Q25 35 20 45" fill="#F4E4BA"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#FFE4C4"/>
    <circle cx="33" cy="40" r="2.5" fill="#4a90a4"/><circle cx="47" cy="40" r="2.5" fill="#4a90a4"/>
    <path d="M35 50 Q40 52 45 50" stroke="#CD853F" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="28" y="58" width="24" height="10" fill="#1a1a1a" rx="2"/>
    <path d="M34 62 L38 65 L42 62 L46 65" stroke="#eab308" stroke-width="1.5" fill="none"/>
  </svg>`,

  // HR
  david: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="davidGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#d1fae5"/><stop offset="100%" style="stop-color:#a7f3d0"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#davidGrad)" stroke="#059669" stroke-width="2"/>
    <ellipse cx="40" cy="28" rx="14" ry="10" fill="#1a1a1a"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#6B4423"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 52 45 50" stroke="#4a3520" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="24" y="56" width="32" height="14" fill="#374151" rx="2"/>
    <path d="M36 60 L36 66 M40 58 L40 66 M44 60 L44 66" stroke="#059669" stroke-width="1.5"/>
    <rect x="38" y="62" width="4" height="4" fill="#059669"/>
  </svg>`,
  
  sofia: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="sofiaGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#ffe4e6"/><stop offset="100%" style="stop-color:#fecdd3"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#sofiaGrad)" stroke="#f43f5e" stroke-width="2"/>
    <path d="M16 48 Q18 18 40 14 Q62 18 64 48 Q58 40 40 38 Q22 40 16 48" fill="#4a2c2a"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#D4A574"/>
    <circle cx="33" cy="40" r="2.5" fill="#4a2c2a"/><circle cx="47" cy="40" r="2.5" fill="#4a2c2a"/>
    <path d="M34 50 Q40 54 46 50" stroke="#8B5A2B" stroke-width="2" fill="none" stroke-linecap="round"/>
    <circle cx="30" cy="46" r="3" fill="#fecdd3" opacity="0.6"/>
    <circle cx="50" cy="46" r="3" fill="#fecdd3" opacity="0.6"/>
    <rect x="28" y="58" width="24" height="10" fill="#f43f5e" rx="2"/>
    <circle cx="40" cy="63" r="2" fill="white"/>
  </svg>`,
  
  aisha: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <defs><linearGradient id="aishaGrad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#fae8ff"/><stop offset="100%" style="stop-color:#f5d0fe"/></linearGradient></defs>
    <circle cx="40" cy="40" r="38" fill="url(#aishaGrad)" stroke="#d946ef" stroke-width="2"/>
    <path d="M18 50 Q16 22 40 16 Q64 22 62 50" fill="#1a1a1a"/>
    <path d="M20 36 Q40 32 60 36 Q58 28 40 24 Q22 28 20 36" fill="#d946ef" opacity="0.3"/>
    <ellipse cx="40" cy="46" rx="14" ry="16" fill="#C68642"/>
    <circle cx="34" cy="42" r="2" fill="#1a1a1a"/><circle cx="46" cy="42" r="2" fill="#1a1a1a"/>
    <path d="M36 52 Q40 54 44 52" stroke="#8B5A2B" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="28" y="60" width="24" height="8" fill="#d946ef" rx="2"/>
    <circle cx="40" cy="64" r="1.5" fill="white"/>
  </svg>`
};

const getAvatar = (seed) => {
  // Extract the ID from the seed (e.g., "fatima-alrashid-uk" -> "fatima")
  const id = seed.split('-')[0];
  return PORTRAITS[id] || `https://api.dicebear.com/7.x/notionists/svg?seed=${seed}`;
};

// Helper to render avatar - handles both SVG strings and URLs
const renderAvatar = (avatar, name) => {
  if (avatar.startsWith('<svg')) {
    return avatar;
  }
  return `<img src="${avatar}" alt="${name}">`;
};

// ===== DATA =====

// Company logos as inline SVGs
const LOGOS = {
  aether: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="18" stroke="#6366f1" stroke-width="2" fill="#eef2ff"/>
    <path d="M20 8 L20 32 M12 14 Q20 20 12 26 M28 14 Q20 20 28 26" stroke="#6366f1" stroke-width="2" stroke-linecap="round"/>
    <circle cx="20" cy="20" r="4" fill="#6366f1"/>
  </svg>`,
  vanguard: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="4" y="12" width="32" height="20" rx="2" stroke="#f97316" stroke-width="2" fill="#fff7ed"/>
    <circle cx="12" cy="28" r="4" stroke="#f97316" stroke-width="2" fill="#fdba74"/>
    <circle cx="28" cy="28" r="4" stroke="#f97316" stroke-width="2" fill="#fdba74"/>
    <path d="M8 16 L20 8 L32 16" stroke="#f97316" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <rect x="16" y="16" width="8" height="6" fill="#f97316" rx="1"/>
  </svg>`,
  quant: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="4" y="4" width="32" height="32" rx="4" stroke="#10b981" stroke-width="2" fill="#ecfdf5"/>
    <path d="M8 28 L14 20 L20 24 L26 12 L32 16" stroke="#10b981" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
    <circle cx="14" cy="20" r="2" fill="#10b981"/>
    <circle cx="20" cy="24" r="2" fill="#10b981"/>
    <circle cx="26" cy="12" r="2" fill="#10b981"/>
  </svg>`,
  dream: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="16" stroke="#ec4899" stroke-width="2" fill="#fdf2f8"/>
    <path d="M12 20 Q16 12 20 20 Q24 28 28 20" stroke="#ec4899" stroke-width="2" stroke-linecap="round"/>
    <path d="M14 14 L16 18 M26 14 L24 18" stroke="#ec4899" stroke-width="2" stroke-linecap="round"/>
    <circle cx="20" cy="26" r="3" stroke="#ec4899" stroke-width="2" fill="#f9a8d4"/>
  </svg>`,
  cyber: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="16" stroke="#0ea5e9" stroke-width="2" fill="#f0f9ff"/>
    <path d="M20 8 L20 14 M20 26 L20 32 M8 20 L14 20 M26 20 L32 20" stroke="#0ea5e9" stroke-width="2" stroke-linecap="round"/>
    <circle cx="20" cy="20" r="6" stroke="#0ea5e9" stroke-width="2" fill="#0ea5e9"/>
    <path d="M12 12 L16 16 M28 12 L24 16 M12 28 L16 24 M28 28 L24 24" stroke="#0ea5e9" stroke-width="1.5" stroke-linecap="round"/>
  </svg>`,
  terra: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="20" cy="20" r="16" stroke="#22c55e" stroke-width="2" fill="#f0fdf4"/>
    <ellipse cx="20" cy="20" rx="14" ry="6" stroke="#22c55e" stroke-width="1.5" fill="none"/>
    <ellipse cx="20" cy="20" rx="6" ry="14" stroke="#22c55e" stroke-width="1.5" fill="none"/>
    <circle cx="20" cy="20" r="4" fill="#22c55e"/>
    <path d="M10 14 Q14 12 18 14 M22 26 Q26 28 30 26" stroke="#22c55e" stroke-width="1.5" stroke-linecap="round"/>
  </svg>`,
  legal: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="8" y="6" width="24" height="28" rx="2" stroke="#8b5cf6" stroke-width="2" fill="#f5f3ff"/>
    <path d="M12 12 L28 12 M12 18 L28 18 M12 24 L22 24" stroke="#8b5cf6" stroke-width="2" stroke-linecap="round"/>
    <circle cx="26" cy="28" r="4" stroke="#8b5cf6" stroke-width="2" fill="#c4b5fd"/>
    <path d="M24 28 L26 30 L29 26" stroke="#8b5cf6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>`,
  edu: `<svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20 6 L4 16 L20 26 L36 16 Z" stroke="#f59e0b" stroke-width="2" fill="#fffbeb"/>
    <path d="M10 20 L10 30 Q20 36 30 30 L30 20" stroke="#f59e0b" stroke-width="2" fill="#fef3c7"/>
    <circle cx="20" cy="16" r="4" fill="#f59e0b"/>
    <path d="M36 16 L36 28" stroke="#f59e0b" stroke-width="2" stroke-linecap="round"/>
    <circle cx="36" cy="30" r="2" fill="#f59e0b"/>
  </svg>`
};

// ===== HALL OF FAME - Billionaire Founders =====
const HALL_OF_FAME_LEGENDS = [
  // UK AI & Tech Founders
  { name: "Marcus Chen", company: "CortexAI", year: 2010, valuation: 20, emoji: "üß†", bio: "British AI pioneer, acquired by tech giant for ¬£400M" },
  { name: "Priya Sharma", company: "Nexus AI", year: 2022, valuation: 4, emoji: "ü§ñ", bio: "CortexAI co-founder, now leading enterprise AI" },
  { name: "Tom Blomfield", company: "Monzo", year: 2015, valuation: 5, emoji: "üí≥", bio: "Revolutionising British banking" },
  { name: "Anne Boden", company: "Starling Bank", year: 2014, valuation: 3, emoji: "‚≠ê", bio: "Former Allied Irish Banks exec turned fintech founder" },
  { name: "Elena Thornton", company: "CyberShield", year: 2013, valuation: 4, emoji: "üõ°", bio: "Cambridge-born AI cybersecurity unicorn" },
  { name: "Mike Lynch", company: "Autonomy", year: 1996, valuation: 8, emoji: "üîç", bio: "Britain's first software billionaire" },
  { name: "Hermann Hauser", company: "ARM / Amadeus", year: 1978, valuation: 2, emoji: "üíæ", bio: "Godfather of British tech, ARM co-founder" },
  { name: "Martha Lane Fox", company: "Lastminute.com", year: 1998, valuation: 1, emoji: "‚úà", bio: "Dot-com pioneer and digital champion" },
  { name: "Marco De Luca", company: "VideoGen AI", year: 2017, valuation: 2, emoji: "üé¨", bio: "London-based AI video generation" },
  { name: "Taavet Hinrikus", company: "Wise", year: 2011, valuation: 9, emoji: "üí±", bio: "Estonian-British fintech transforming transfers" },
  { name: "James Hartley", company: "Insight Analytics", year: 2014, valuation: 1, emoji: "üìä", bio: "London AI consultancy advising government" },
  
  // Global Tech Icons
  { name: "David Chen", company: "Horizon AI", year: 2015, valuation: 157, emoji: "üåê", bio: "Leading the generative AI revolution" },
  { name: "Victor Park", company: "SiliconCore", year: 1993, valuation: 1200, emoji: "üíö", bio: "The godfather of GPU computing" },
  { name: "James Wright", company: "Nova Motors / Stellar Space", year: 2002, valuation: 800, emoji: "üöÄ", bio: "Serial founder across industries" },
  { name: "Alex Rivera", company: "Helix Social", year: 2004, valuation: 900, emoji: "üë§", bio: "Social media empire builder" },
  { name: "Connor Walsh", company: "PayFlow", year: 2010, valuation: 95, emoji: "üí≥", bio: "Brothers revolutionising payments" },
  { name: "Erik Lindgren", company: "StreamSound", year: 2006, valuation: 70, emoji: "üéµ", bio: "Swedish entrepreneur who changed music" },
  { name: "Ryan Foster", company: "StayLocal", year: 2008, valuation: 85, emoji: "üè†", bio: "Designer who reimagined hospitality" },
  { name: "Nathan Brooks", company: "SafeAI Labs", year: 2021, valuation: 18, emoji: "üî¨", bio: "Building safe, beneficial AI" },
  { name: "Lucas Chen", company: "DataForge AI", year: 2016, valuation: 14, emoji: "üìê", bio: "Youngest self-made billionaire in AI" }
];

const COMPANIES = [
  { id: "aether", name: "Aether BioLabs", desc: "AI-driven protein design for public health system applications. Deep science, high stakes.", archetype: "BioTech", staff: 5, burn: 60, color: "#6366f1" },
  { id: "vanguard", name: "Vanguard Robotics", desc: "Autonomous robots for UK warehouses. Hardware meets software.", archetype: "Robotics", staff: 6, burn: 70, color: "#f97316" },
  { id: "quant", name: "QuantFlow Systems", desc: "AI trading systems for the City. Fast money, faster competition.", archetype: "FinTech", staff: 4, burn: 45, color: "#10b981" },
  { id: "dream", name: "DreamScape Studios", desc: "Generative AI for creators. Consumer-facing, culture-shaping.", archetype: "Creative AI", staff: 5, burn: 55, color: "#ec4899" },
  { id: "cyber", name: "CyberShield AI", desc: "AI-powered threat detection for UK critical infrastructure. High security, high stakes.", archetype: "CyberSec", staff: 4, burn: 50, color: "#0ea5e9" },
  { id: "terra", name: "TerraMind Analytics", desc: "Climate prediction and sustainability AI. Save the planet, build a business.", archetype: "CleanTech", staff: 5, burn: 55, color: "#22c55e" },
  { id: "legal", name: "LegalMind AI", desc: "Contract analysis and legal research automation. Disrupting the Magic Circle.", archetype: "LegalTech", staff: 4, burn: 45, color: "#8b5cf6" },
  { id: "edu", name: "EduSpark AI", desc: "Personalised learning that adapts to every student. EdTech meets AI.", archetype: "EdTech", staff: 5, burn: 50, color: "#f59e0b" }
];

// ===== FOUNDER PROFILES - Player character archetypes =====
const FOUNDER_PROFILES = {
  academic: {
    id: "academic",
    name: "The Academic",
    title: "PhD turned founder",
    icon: "üéì",
    color: "#6366f1",
    portraitStyle: "style7", // Glasses, neat hair - scholarly look
    desc: "You spent years in the lab, publishing papers and pushing the boundaries of knowledge. Now you're translating that expertise into a company. You understand the science deeply, but the business world is new territory.",
    strengths: "Deep technical credibility, research network, scientific rigour",
    challenges: "Commercial instincts, investor relations, moving at startup speed",
    stats: { technical: 5, commercial: 1, operational: 2, financial: 1, leadership: 2, adaptability: 3 }
  },
  serial: {
    id: "serial",
    name: "The Serial Founder",
    title: "Been here before",
    icon: "üîÑ",
    color: "#10b981",
    portraitStyle: "style12", // Older, grey hair - experienced
    desc: "This isn't your first rodeo. You've built companies before-some succeeded, some didn't-and you learned from all of them. You know how the game works, but every startup is different.",
    strengths: "Investor relationships, pattern recognition, crisis management",
    challenges: "Avoiding old playbooks that don't fit, staying humble, technical depth",
    stats: { technical: 2, commercial: 2, operational: 2, financial: 4, leadership: 3, adaptability: 2 }
  },
  corporate: {
    id: "corporate",
    name: "The Corporate Escapee",
    title: "Ex-BigTech executive",
    icon: "üè¢",
    color: "#64748b",
    portraitStyle: "style1", // Professional look
    desc: "You climbed the ladder at a major tech company, learning how large organisations work. Now you're trading stability for autonomy. You know process and scale, but startups play by different rules.",
    strengths: "Operational excellence, enterprise sales, professional networks",
    challenges: "Scrappy execution, ambiguity tolerance, founder mentality",
    stats: { technical: 2, commercial: 3, operational: 5, financial: 2, leadership: 2, adaptability: 1 }
  },
  prodigy: {
    id: "prodigy",
    name: "The Technical Prodigy",
    title: "Builder extraordinaire",
    icon: "üí°",
    color: "#f59e0b",
    portraitStyle: "style5", // Young, tech look
    desc: "You've been coding since you were twelve and can build almost anything. Technical problems bow before you. People problems? Those are trickier. You're betting your skills can carry the company.",
    strengths: "Technical excellence, rapid prototyping, product intuition",
    challenges: "Delegation, commercial focus, patience with non-technical issues",
    stats: { technical: 6, commercial: 1, operational: 2, financial: 1, leadership: 1, adaptability: 2 }
  },
  dealmaker: {
    id: "dealmaker",
    name: "The Dealmaker",
    title: "Sales & partnerships pro",
    icon: "ü§ù",
    color: "#ec4899",
    portraitStyle: "style10", // Long hair, confident
    desc: "You could sell ice to penguins. Your career has been about relationships, negotiations, and closing deals. You'll find customers and partners-but you'll need to trust others to build the product.",
    strengths: "Customer acquisition, partnership deals, fundraising pitches",
    challenges: "Technical judgment, product details, operational patience",
    stats: { technical: 1, commercial: 5, operational: 2, financial: 3, leadership: 2, adaptability: 1 }
  },
  operator: {
    id: "operator",
    name: "The Operator",
    title: "COO turned CEO",
    icon: "‚öô",
    color: "#0ea5e9",
    portraitStyle: "style8", // Bald, confident
    desc: "You make things work. Processes, systems, teams-you've optimised them all. You ran operations for growing companies and now want to run your own. Execution is your superpower.",
    strengths: "Efficient scaling, team management, cost control",
    challenges: "Vision-setting, technical innovation, external storytelling",
    stats: { technical: 1, commercial: 2, operational: 5, financial: 2, leadership: 3, adaptability: 1 }
  },
  domain: {
    id: "domain",
    name: "The Domain Expert",
    title: "Industry insider",
    icon: "üèÜ",
    color: "#8b5cf6",
    portraitStyle: "style9", // Middle Eastern, beard - experienced industry look
    desc: "You've spent decades in the industry your startup targets. You know the customers, the problems, and the politics. Your rolodex is gold. But technology moves fast, and you're still learning AI.",
    strengths: "Customer insight, industry credibility, regulatory navigation",
    challenges: "Technical trends, startup culture, moving beyond what worked before",
    stats: { technical: 1, commercial: 4, operational: 2, financial: 1, leadership: 2, adaptability: 3 }
  },
  firsttimer: {
    id: "firsttimer",
    name: "The First-Timer",
    title: "Fresh and hungry",
    icon: "üå±",
    color: "#22c55e",
    portraitStyle: "style3", // Young, eager look
    desc: "You've never done this before, and that's your edge. No bad habits, no assumptions, no fear. You'll learn fast, make mistakes faster, and adapt. Everything is possible because you don't know what's impossible.",
    strengths: "Open-minded learning, energy and drive, willingness to pivot",
    challenges: "Everything is new, limited network, learning while doing",
    stats: { technical: 2, commercial: 2, operational: 2, financial: 2, leadership: 2, adaptability: 4 }
  },
  visionary: {
    id: "visionary",
    name: "The Visionary",
    title: "Big-picture thinker",
    icon: "üîÆ",
    color: "#a855f7",
    portraitStyle: "style11", // Hispanic/Latino, confident leader look
    desc: "You see where the world is going before others do. Your ideas inspire people-investors, employees, journalists. Execution details bore you, but you know how to find people who sweat the small stuff.",
    strengths: "Inspiring leadership, strategic clarity, attracting talent and capital",
    challenges: "Operational details, patience with incremental progress, listening",
    stats: { technical: 2, commercial: 3, operational: 1, financial: 2, leadership: 5, adaptability: 2 }
  },
  bootstrapper: {
    id: "bootstrapper",
    name: "The Bootstrapper",
    title: "Self-funded scrapper",
    icon: "üí∞",
    color: "#16a34a",
    portraitStyle: "style4", // Deep brown, practical look
    desc: "You believe in building businesses that make money, not just raise it. Every pound counts, every hire must earn their keep. You'll grow slower but own more-if you can survive long enough.",
    strengths: "Cash efficiency, sustainable growth, full ownership mentality",
    challenges: "Scaling fast enough, competing with funded rivals, raising when needed",
    stats: { technical: 2, commercial: 2, operational: 3, financial: 5, leadership: 1, adaptability: 2 }
  },
  community: {
    id: "community",
    name: "The Community Builder",
    title: "Ecosystem orchestrator",
    icon: "üåê",
    color: "#06b6d4",
    portraitStyle: "style2", // Dark skin, approachable
    desc: "You believe in building with people, not just for them. Open source, developer communities, user movements-you've rallied people around shared causes. Now you're channeling that into a company.",
    strengths: "Organic growth, passionate users, talent attraction",
    challenges: "Monetisation, focus, saying no to community requests",
    stats: { technical: 2, commercial: 3, operational: 1, financial: 1, leadership: 4, adaptability: 3 }
  },
  strategist: {
    id: "strategist",
    name: "The Strategist",
    title: "Ex-consultant analyst",
    icon: "üìä",
    color: "#78716c",
    portraitStyle: "style6", // South Asian, analytical look
    desc: "You've advised CEOs and analysed markets. You see business models clearly and can spot flaws in any plan-including your own. Now you're moving from advisor to operator. Theory meets reality.",
    strengths: "Strategic thinking, financial modelling, structured problem-solving",
    challenges: "Execution speed, comfort with ambiguity, inspiring vs. analysing",
    stats: { technical: 2, commercial: 2, operational: 2, financial: 4, leadership: 2, adaptability: 3 }
  }
};

// Standard founder portraits (diverse styles)
const FOUNDER_PORTRAITS = {
  // Light skin, short dark hair
  style1: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#d4a574"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#8B4513" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M24 32 Q30 20 40 18 Q50 20 56 32 Q56 24 48 20 Q40 16 32 20 Q24 24 24 32" fill="#4a3728"/>
    <rect x="28" y="58" width="24" height="12" fill="#475569" rx="2"/>
  </svg>`,
  // Dark skin, short black hair
  style2: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#8b6914"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#5c4a0f" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M22 35 Q28 18 40 16 Q52 18 58 35 L56 28 Q48 22 40 22 Q32 22 24 28 Z" fill="#1a1a1a"/>
    <rect x="28" y="58" width="24" height="12" fill="#1e3a5f" rx="2"/>
  </svg>`,
  // Fair skin, wavy brown hair
  style3: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#f5deb3"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#cd853f" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M20 38 Q25 20 40 18 Q55 20 60 38 Q58 32 52 28 Q40 24 28 28 Q22 32 20 38" fill="#8b4513"/>
    <rect x="28" y="58" width="24" height="12" fill="#374151" rx="2"/>
  </svg>`,
  // Deep brown skin, short hair
  style4: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#6b4423"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#4a3520" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <ellipse cx="40" cy="28" rx="16" ry="12" fill="#1a1a1a"/>
    <rect x="28" y="58" width="24" height="12" fill="#0f766e" rx="2"/>
  </svg>`,
  // East Asian, straight black hair
  style5: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#f0d5a0"/>
    <circle cx="33" cy="40" r="2" fill="#1a1a1a"/><circle cx="47" cy="40" r="2" fill="#1a1a1a"/>
    <path d="M35 50 Q40 52 45 50" stroke="#8b7355" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M22 40 Q24 18 40 16 Q56 18 58 40 L56 35 Q52 24 40 22 Q28 24 24 35 Z" fill="#1a1a1a"/>
    <rect x="28" y="58" width="24" height="12" fill="#4338ca" rx="2"/>
  </svg>`,
  // South Asian, dark hair
  style6: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#c68642"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#8b5a2b" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M20 36 Q26 16 40 14 Q54 16 60 36 Q58 28 50 24 Q40 20 30 24 Q22 28 20 36" fill="#1a1a1a"/>
    <rect x="28" y="58" width="24" height="12" fill="#7c3aed" rx="2"/>
  </svg>`,
  // Light skin, glasses, neat hair
  style7: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#e8beac"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#a0522d" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M24 30 Q32 18 40 18 Q48 18 56 30 Q54 24 48 22 Q40 20 32 22 Q26 24 24 30" fill="#654321"/>
    <rect x="27" y="36" width="12" height="8" rx="2" fill="none" stroke="#374151" stroke-width="1.5"/>
    <rect x="41" y="36" width="12" height="8" rx="2" fill="none" stroke="#374151" stroke-width="1.5"/>
    <line x1="39" y1="40" x2="41" y2="40" stroke="#374151" stroke-width="1.5"/>
    <rect x="28" y="58" width="24" height="12" fill="#059669" rx="2"/>
  </svg>`,
  // Darker skin, bald/shaved head
  style8: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="42" rx="18" ry="20" fill="#8d5524"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#5c3d1e" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="28" y="58" width="24" height="12" fill="#dc2626" rx="2"/>
  </svg>`,
  // Middle Eastern, beard
  style9: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#c4a484"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 48 Q40 50 45 48" stroke="#5c4033" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M22 34 Q28 18 40 16 Q52 18 58 34 Q56 26 48 22 Q40 18 32 22 Q24 26 22 34" fill="#2d2d2d"/>
    <path d="M28 52 Q32 58 40 60 Q48 58 52 52 Q50 56 40 58 Q30 56 28 52" fill="#2d2d2d"/>
    <rect x="28" y="60" width="24" height="10" fill="#1e40af" rx="2"/>
  </svg>`,
  // Light skin, long hair
  style10: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <path d="M18 35 Q22 15 40 12 Q58 15 62 35 L64 55 Q62 62 55 64 L55 58 Q52 50 40 48 Q28 50 25 58 L25 64 Q18 62 16 55 Z" fill="#5c4033"/>
    <ellipse cx="40" cy="44" rx="15" ry="17" fill="#ffe4c4"/>
    <circle cx="34" cy="42" r="2" fill="#1a1a1a"/><circle cx="46" cy="42" r="2" fill="#1a1a1a"/>
    <path d="M36 50 Q40 52 44 50" stroke="#cd853f" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <rect x="29" y="58" width="22" height="11" fill="#db2777" rx="2"/>
  </svg>`,
  // Hispanic/Latino, dark wavy hair
  style11: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#c19a6b"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 53 45 50" stroke="#8b6914" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M20 36 Q24 16 40 14 Q56 16 60 36 Q58 30 52 26 Q46 22 40 22 Q34 22 28 26 Q22 30 20 36" fill="#2d2d2d"/>
    <path d="M22 36 Q24 34 28 36 Q26 32 22 36" fill="#2d2d2d"/>
    <path d="M58 36 Q56 34 52 36 Q54 32 58 36" fill="#2d2d2d"/>
    <rect x="28" y="58" width="24" height="12" fill="#0891b2" rx="2"/>
  </svg>`,
  // Older, grey hair
  style12: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
    <circle cx="40" cy="40" r="38" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
    <ellipse cx="40" cy="44" rx="16" ry="18" fill="#deb887"/>
    <circle cx="33" cy="40" r="2.5" fill="#1a1a1a"/><circle cx="47" cy="40" r="2.5" fill="#1a1a1a"/>
    <path d="M35 50 Q40 52 45 50" stroke="#a0522d" stroke-width="1.5" fill="none" stroke-linecap="round"/>
    <path d="M24 32 Q30 20 40 18 Q50 20 56 32 Q54 26 48 22 Q40 18 32 22 Q26 26 24 32" fill="#9ca3af"/>
    <path d="M30 36 L32 34" stroke="#d1d5db" stroke-width="1"/>
    <path d="M48 36 L50 34" stroke="#d1d5db" stroke-width="1"/>
    <rect x="28" y="58" width="24" height="12" fill="#78716c" rx="2"/>
  </svg>`
};

// ===== LOCATIONS - City choices per venture =====
const LOCATIONS = {
  // AETHER LABS - Biotech
  aether: [
    {
      id: "oxford",
      name: "Oxford",
      region: "South East",
      tagline: "The Dreaming Spires",
      salaryMod: 0.20, // +20%
      bonuses: { sci: 4, mkt: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#e0f2fe"/>
        <!-- Radcliffe Camera dome -->
        <ellipse cx="60" cy="55" rx="25" ry="8" fill="#d4a574"/>
        <rect x="40" y="35" width="40" height="20" fill="#d4a574"/>
        <ellipse cx="60" cy="35" rx="20" ry="12" fill="#c4956a"/>
        <ellipse cx="60" cy="28" rx="12" ry="8" fill="#b8860b"/>
        <circle cx="60" cy="22" r="4" fill="#8b7355"/>
        <!-- Spires -->
        <polygon points="20,60 25,25 30,60" fill="#a0a0a0"/>
        <polygon points="90,60 95,20 100,60" fill="#a0a0a0"/>
        <!-- Windows -->
        <rect x="45" y="40" width="4" height="6" fill="#4a5568"/>
        <rect x="55" y="40" width="4" height="6" fill="#4a5568"/>
        <rect x="65" y="40" width="4" height="6" fill="#4a5568"/>
        <!-- Ground -->
        <rect x="0" y="60" width="120" height="20" fill="#86efac"/>
      </svg>`,
      description: "Ancient colleges meet cutting-edge science. The biotech incubator and university spin-outs have created a world-class life sciences cluster.",
      pros: ["World-leading research university", "Strong pharma connections (nearby Harwell)", "Prestigious address attracts talent"],
      cons: ["High costs and housing shortage", "Academic culture can slow commercialisation"]
    },
    {
      id: "glasgow",
      name: "Glasgow",
      region: "Scotland",
      tagline: "The Inventive City",
      salaryMod: -0.05, // -5%
      bonuses: { sci: 2, hr: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#cbd5e1"/>
        <!-- SEC Armadillo -->
        <path d="M30,60 Q45,30 60,60" fill="#64748b" stroke="#475569" stroke-width="1"/>
        <path d="M35,58 Q48,35 55,58" fill="#94a3b8"/>
        <!-- Finnieston Crane -->
        <rect x="85" y="25" width="4" height="35" fill="#475569"/>
        <rect x="75" y="25" width="24" height="4" fill="#475569"/>
        <line x1="87" y1="29" x2="78" y2="55" stroke="#475569" stroke-width="2"/>
        <!-- Buildings -->
        <rect x="5" y="40" width="15" height="20" fill="#78716c"/>
        <rect x="100" y="35" width="15" height="25" fill="#78716c"/>
        <!-- River Clyde -->
        <rect x="0" y="60" width="120" height="10" fill="#60a5fa"/>
        <!-- Ground -->
        <rect x="0" y="70" width="120" height="10" fill="#6b7280"/>
      </svg>`,
      description: "Scotland's largest city with a proud industrial heritage reborn as an innovation hub. Strong public health system links through the university hospital campus.",
      pros: ["Excellent public health system collaboration opportunities", "Affordable talent with strong work ethic", "regional development funding available"],
      cons: ["Smaller biotech investor ecosystem", "Perception gap with London VCs"]
    },
    {
      id: "cardiff",
      name: "Cardiff",
      region: "Wales",
      tagline: "The Life Sciences Valley",
      salaryMod: -0.10, // -10%
      bonuses: { sci: 2, hr: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#dbeafe"/>
        <!-- Millennium Stadium/Principality -->
        <ellipse cx="60" cy="50" rx="30" ry="15" fill="#94a3b8"/>
        <path d="M35,50 L35,35 L45,30 L45,50" fill="#64748b"/>
        <path d="M75,50 L75,35 L85,30 L85,50" fill="#64748b"/>
        <path d="M45,50 L45,25 L75,25 L75,50" fill="#78716c"/>
        <!-- Spikes on top -->
        <polygon points="40,30 42,20 44,30" fill="#475569"/>
        <polygon points="55,25 57,15 59,25" fill="#475569"/>
        <polygon points="70,25 72,15 74,25" fill="#475569"/>
        <!-- Castle tower hint -->
        <rect x="5" y="35" width="12" height="25" fill="#a8a29e"/>
        <polygon points="5,35 11,25 17,35" fill="#a8a29e"/>
        <!-- Welsh dragon flag hint -->
        <rect x="8" y="38" width="6" height="4" fill="#dc2626"/>
        <!-- Ground -->
        <rect x="0" y="60" width="120" height="20" fill="#86efac"/>
      </svg>`,
      description: "Welsh capital with a growing life sciences cluster. The Cardiff Medicentre and Development Bank of Wales offer strong support for health tech startups.",
      pros: ["Welsh Government grants and support", "Growing life sciences park", "Low costs, high quality of life"],
      cons: ["Smaller talent pool", "Less visibility to major investors"]
    }
  ],
  
  // VANGUARD ROBOTICS - Industrial Automation
  vanguard: [
    {
      id: "southampton",
      name: "Southampton",
      region: "South",
      tagline: "The Maritime Tech Hub",
      salaryMod: 0.05, // +5%
      bonuses: { dev: 2, mkt: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#e0f2fe"/>
        <!-- Cruise ship -->
        <rect x="20" y="35" width="60" height="20" rx="2" fill="#f8fafc"/>
        <rect x="25" y="25" width="50" height="12" fill="#f1f5f9"/>
        <rect x="35" y="18" width="30" height="8" fill="#e2e8f0"/>
        <!-- Funnels -->
        <rect x="55" y="10" width="8" height="10" fill="#ef4444"/>
        <rect x="57" y="8" width="4" height="4" fill="#1f2937"/>
        <!-- Windows -->
        <circle cx="30" cy="42" r="2" fill="#60a5fa"/>
        <circle cx="40" cy="42" r="2" fill="#60a5fa"/>
        <circle cx="50" cy="42" r="2" fill="#60a5fa"/>
        <circle cx="60" cy="42" r="2" fill="#60a5fa"/>
        <circle cx="70" cy="42" r="2" fill="#60a5fa"/>
        <!-- Port cranes -->
        <rect x="95" y="30" width="3" height="30" fill="#f59e0b"/>
        <rect x="90" y="30" width="13" height="3" fill="#f59e0b"/>
        <rect x="5" y="35" width="3" height="25" fill="#f59e0b"/>
        <rect x="2" y="35" width="10" height="3" fill="#f59e0b"/>
        <!-- Sea -->
        <rect x="0" y="55" width="120" height="15" fill="#3b82f6"/>
        <!-- Dock -->
        <rect x="0" y="70" width="120" height="10" fill="#78716c"/>
      </svg>`,
      description: "Major port city with expertise in maritime technology and logistics automation. The University of Southampton has world-class engineering and autonomous systems research.",
      pros: ["Port and logistics expertise", "Strong university engineering links", "Good transport to London customers"],
      cons: ["Mid-tier costs", "Competes with London for talent"]
    },
    {
      id: "birmingham",
      name: "Birmingham",
      region: "Midlands",
      tagline: "The Manufacturing Heart",
      salaryMod: 0.05, // +5%
      bonuses: { dev: 2, mkt: 1, hr: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#f0f9ff"/>
        <!-- Selfridges Building -->
        <ellipse cx="60" cy="45" rx="25" ry="20" fill="#60a5fa"/>
        <!-- Dots pattern -->
        <circle cx="45" cy="40" r="2" fill="#93c5fd"/>
        <circle cx="55" cy="35" r="2" fill="#93c5fd"/>
        <circle cx="65" cy="35" r="2" fill="#93c5fd"/>
        <circle cx="75" cy="40" r="2" fill="#93c5fd"/>
        <circle cx="50" cy="45" r="2" fill="#93c5fd"/>
        <circle cx="60" cy="42" r="2" fill="#93c5fd"/>
        <circle cx="70" cy="45" r="2" fill="#93c5fd"/>
        <circle cx="55" cy="52" r="2" fill="#93c5fd"/>
        <circle cx="65" cy="52" r="2" fill="#93c5fd"/>
        <!-- BT Tower -->
        <rect x="10" y="20" width="6" height="40" fill="#64748b"/>
        <rect x="8" y="20" width="10" height="5" fill="#94a3b8"/>
        <!-- Library of Birmingham -->
        <rect x="85" y="30" width="25" height="30" fill="#a8a29e"/>
        <rect x="88" y="33" width="6" height="6" fill="#78716c"/>
        <rect x="97" y="33" width="6" height="6" fill="#78716c"/>
        <rect x="88" y="42" width="6" height="6" fill="#78716c"/>
        <rect x="97" y="42" width="6" height="6" fill="#78716c"/>
        <!-- Ground -->
        <rect x="0" y="60" width="120" height="20" fill="#9ca3af"/>
      </svg>`,
      description: "Britain's second city, central to the UK's manufacturing supply chain. JLR, Aston Martin, and a huge automotive supply base make it ideal for industrial automation.",
      pros: ["Central UK location", "Large manufacturing customer base", "Diverse, skilled workforce"],
      cons: ["Less tech-startup culture", "Competes with London for visibility"]
    },
    {
      id: "grimsby",
      name: "Grimsby",
      region: "Lincolnshire",
      tagline: "The Reinvention",
      salaryMod: -0.20, // -20%
      bonuses: { dev: 2, sci: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky with clouds -->
        <rect width="120" height="80" fill="#f1f5f9"/>
        <ellipse cx="30" cy="15" rx="15" ry="8" fill="#fff"/>
        <ellipse cx="90" cy="20" rx="12" ry="6" fill="#fff"/>
        <!-- Wind turbines -->
        <rect x="25" y="35" width="2" height="30" fill="#e5e7eb"/>
        <polygon points="26,35 26,25 30,35 26,35" fill="#d1d5db"/>
        <polygon points="26,35 18,40 26,38" fill="#d1d5db"/>
        <polygon points="26,35 30,45 26,38" fill="#d1d5db"/>
        <rect x="55" y="30" width="2" height="35" fill="#e5e7eb"/>
        <polygon points="56,30 56,18 61,30 56,30" fill="#d1d5db"/>
        <polygon points="56,30 46,36 56,33" fill="#d1d5db"/>
        <polygon points="56,30 62,42 56,33" fill="#d1d5db"/>
        <rect x="85" y="32" width="2" height="33" fill="#e5e7eb"/>
        <polygon points="86,32 86,22 90,32 86,32" fill="#d1d5db"/>
        <polygon points="86,32 78,37 86,35" fill="#d1d5db"/>
        <polygon points="86,32 92,43 86,35" fill="#d1d5db"/>
        <!-- Dock/industrial -->
        <rect x="5" y="50" width="20" height="15" fill="#78716c"/>
        <rect x="100" y="45" width="15" height="20" fill="#78716c"/>
        <!-- Sea -->
        <rect x="0" y="65" width="120" height="15" fill="#60a5fa"/>
      </svg>`,
      description: "Once a fishing powerhouse, now reinventing itself as the UK's offshore wind capital. Lowest costs in the country with access to automation-hungry food processing and renewable energy sectors.",
      pros: ["Lowest operating costs in UK", "Offshore wind boom creating demand", "Eager local workforce"],
      cons: ["Perception challenges", "Remote location, harder to attract talent"]
    }
  ],
  
  // QUANT AI - Financial ML
  quant: [
    {
      id: "london",
      name: "London",
      region: "Capital",
      tagline: "The City",
      salaryMod: 0.35, // +35%
      bonuses: { mkt: 3, sci: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#dbeafe"/>
        <!-- Shard -->
        <polygon points="95,60 100,5 105,60" fill="#60a5fa"/>
        <line x1="100" y1="10" x2="100" y2="60" stroke="#93c5fd" stroke-width="1"/>
        <!-- Gherkin -->
        <ellipse cx="75" cy="40" rx="8" ry="20" fill="#34d399"/>
        <path d="M70,25 Q75,20 80,25" fill="none" stroke="#10b981" stroke-width="1"/>
        <path d="M69,35 Q75,30 81,35" fill="none" stroke="#10b981" stroke-width="1"/>
        <path d="M69,45 Q75,40 81,45" fill="none" stroke="#10b981" stroke-width="1"/>
        <!-- Walkie Talkie -->
        <path d="M45,60 L42,25 L58,25 L55,60" fill="#94a3b8"/>
        <!-- Tower of London hint -->
        <rect x="5" y="45" width="20" height="15" fill="#a8a29e"/>
        <polygon points="10,45 15,38 20,45" fill="#a8a29e"/>
        <!-- St Paul's dome -->
        <rect x="20" y="40" width="15" height="20" fill="#d4c4a8"/>
        <ellipse cx="27" cy="40" rx="7" ry="5" fill="#d4c4a8"/>
        <circle cx="27" cy="36" r="2" fill="#a8a29e"/>
        <!-- Thames -->
        <rect x="0" y="60" width="120" height="8" fill="#3b82f6"/>
        <!-- Ground -->
        <rect x="0" y="68" width="120" height="12" fill="#6b7280"/>
      </svg>`,
      description: "The world's leading financial centre. Every major bank, hedge fund, and asset manager has a presence here. Unmatched access to customers, talent, and capital.",
      pros: ["All financial customers on doorstep", "Deepest quant talent pool globally", "Investor meetings over lunch"],
      cons: ["Brutal costs and competition", "Constant poaching of staff"]
    },
    {
      id: "edinburgh",
      name: "Edinburgh",
      region: "Scotland",
      tagline: "The Fund Managers",
      salaryMod: 0.05, // +5%
      bonuses: { sci: 2, mkt: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#e0e7ff"/>
        <!-- Castle rock -->
        <polygon points="10,65 30,30 50,65" fill="#78716c"/>
        <!-- Edinburgh Castle -->
        <rect x="20" y="25" width="20" height="15" fill="#a8a29e"/>
        <rect x="25" y="18" width="10" height="10" fill="#a8a29e"/>
        <polygon points="25,18 30,10 35,18" fill="#78716c"/>
        <!-- Scott Monument -->
        <polygon points="75,65 80,20 85,65" fill="#57534e"/>
        <rect x="77" y="35" width="6" height="3" fill="#78716c"/>
        <rect x="77" y="45" width="6" height="3" fill="#78716c"/>
        <!-- Calton Hill columns -->
        <rect x="100" y="40" width="3" height="15" fill="#d4c4a8"/>
        <rect x="107" y="42" width="3" height="13" fill="#d4c4a8"/>
        <rect x="100" y="37" width="12" height="4" fill="#d4c4a8"/>
        <!-- Old Town buildings -->
        <rect x="45" y="45" width="8" height="20" fill="#78716c"/>
        <rect x="55" y="40" width="10" height="25" fill="#6b7280"/>
        <rect x="90" y="50" width="8" height="15" fill="#78716c"/>
        <!-- Ground -->
        <rect x="0" y="65" width="120" height="15" fill="#86efac"/>
      </svg>`,
      description: "Scotland's capital hosts major fund managers including Baillie Gifford and Abrdn. A sophisticated financial centre with world-class universities and a thriving fintech scene.",
      pros: ["Major asset managers headquartered here", "Strong data science and AI talent", "regional development support"],
      cons: ["Fewer hedge funds than London", "Some investors require travel"]
    },
    {
      id: "belfast",
      name: "Belfast",
      region: "Northern Ireland",
      tagline: "The Fintech Frontier",
      salaryMod: -0.15, // -15%
      bonuses: { dev: 2, mkt: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#f0f9ff"/>
        <!-- Harland & Wolff cranes (Samson and Goliath) -->
        <rect x="80" y="20" width="6" height="45" fill="#fbbf24"/>
        <rect x="75" y="20" width="16" height="5" fill="#fbbf24"/>
        <line x1="83" y1="25" x2="78" y2="55" stroke="#fbbf24" stroke-width="2"/>
        <rect x="95" y="25" width="5" height="40" fill="#fbbf24"/>
        <rect x="91" y="25" width="13" height="4" fill="#fbbf24"/>
        <!-- Titanic Belfast -->
        <polygon points="30,65 45,30 60,65" fill="#94a3b8"/>
        <polygon points="35,65 45,35 55,65" fill="#a8a29e"/>
        <polygon points="40,65 45,40 50,65" fill="#cbd5e1"/>
        <!-- City Hall dome -->
        <rect x="5" y="45" width="20" height="20" fill="#d4c4a8"/>
        <ellipse cx="15" cy="45" rx="8" ry="5" fill="#d4c4a8"/>
        <circle cx="15" cy="42" r="2" fill="#a8a29e"/>
        <!-- River Lagan -->
        <rect x="0" y="65" width="120" height="8" fill="#60a5fa"/>
        <!-- Ground -->
        <rect x="0" y="73" width="120" height="7" fill="#9ca3af"/>
      </svg>`,
      description: "Northern Ireland's capital has quietly become a fintech powerhouse. Citi, Allstate, and CME Group have major tech operations here, creating a deep pool of financial services engineers.",
      pros: ["Lowest costs of major UK cities", "Strong financial services tech talent", "Invest NI grants available"],
      cons: ["Distance from London clients", "Smaller quant research community"]
    }
  ],
  
  // DREAM MACHINE - Creative AI
  dream: [
    {
      id: "brighton",
      name: "Brighton",
      region: "South East",
      tagline: "The Creative Coast",
      salaryMod: 0.15, // +15%
      bonuses: { mkt: 2, dev: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#fdf4ff"/>
        <!-- Royal Pavilion domes -->
        <ellipse cx="60" cy="35" rx="15" ry="12" fill="#fef3c7"/>
        <ellipse cx="60" cy="28" rx="8" ry="6" fill="#fde68a"/>
        <circle cx="60" cy="22" r="3" fill="#fbbf24"/>
        <!-- Smaller domes -->
        <ellipse cx="40" cy="42" rx="8" ry="7" fill="#fef3c7"/>
        <ellipse cx="40" cy="38" rx="4" ry="3" fill="#fde68a"/>
        <ellipse cx="80" cy="42" rx="8" ry="7" fill="#fef3c7"/>
        <ellipse cx="80" cy="38" rx="4" ry="3" fill="#fde68a"/>
        <!-- Minarets -->
        <rect x="25" y="30" width="3" height="20" fill="#fef3c7"/>
        <circle cx="26" cy="28" r="3" fill="#fde68a"/>
        <rect x="92" y="30" width="3" height="20" fill="#fef3c7"/>
        <circle cx="93" cy="28" r="3" fill="#fde68a"/>
        <!-- Pier hint -->
        <rect x="0" y="62" width="40" height="3" fill="#a8a29e"/>
        <rect x="5" y="58" width="4" height="6" fill="#78716c"/>
        <rect x="15" y="55" width="8" height="9" fill="#78716c"/>
        <!-- Beach -->
        <rect x="0" y="65" width="120" height="8" fill="#fde68a"/>
        <!-- Sea -->
        <rect x="0" y="73" width="120" height="7" fill="#38bdf8"/>
      </svg>`,
      description: "London's creative escape by the sea. A thriving indie games scene, digital agencies, and media companies make Brighton the UK's creative tech capital outside London.",
      pros: ["Strong creative and games talent", "50 mins to London clients", "Vibrant, attractive lifestyle"],
      cons: ["High costs for a small city", "Limited growth ceiling"]
    },
    {
      id: "bristol",
      name: "Bristol",
      region: "South West",
      tagline: "The Animation Capital",
      salaryMod: 0.10, // +10%
      bonuses: { dev: 2, mkt: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#ecfeff"/>
        <!-- Clifton Suspension Bridge -->
        <rect x="10" y="45" width="8" height="25" fill="#a8a29e"/>
        <rect x="102" y="45" width="8" height="25" fill="#a8a29e"/>
        <!-- Bridge towers -->
        <rect x="11" y="30" width="6" height="18" fill="#78716c"/>
        <rect x="103" y="30" width="6" height="18" fill="#78716c"/>
        <!-- Cables -->
        <path d="M14,32 Q60,55 106,32" fill="none" stroke="#57534e" stroke-width="2"/>
        <path d="M14,35 Q60,58 106,35" fill="none" stroke="#57534e" stroke-width="1"/>
        <!-- Deck -->
        <line x1="14" y1="48" x2="106" y2="48" stroke="#6b7280" stroke-width="3"/>
        <!-- Gorge -->
        <polygon points="0,50 20,70 0,80" fill="#86efac"/>
        <polygon points="120,50 100,70 120,80" fill="#86efac"/>
        <!-- River Avon -->
        <rect x="20" y="70" width="80" height="10" fill="#60a5fa"/>
        <!-- Balloon hint -->
        <ellipse cx="85" cy="20" rx="6" ry="8" fill="#f87171"/>
        <rect x="83" y="28" width="4" height="5" fill="#fbbf24"/>
      </svg>`,
      description: "Home to award-winning animation studios and national broadcasters. A rich creative heritage combined with strong engineering talent from the aerospace industry. Annual Balloon Fiesta captures the city's spirit.",
      pros: ["Animation studios and broadcaster heritage", "Strong VFX and animation talent", "More affordable than London"],
      cons: ["Smaller than London market", "Some client travel required"]
    },
    {
      id: "dundee",
      name: "Dundee",
      region: "Scotland",
      tagline: "The Games City",
      salaryMod: -0.10, // -10%
      bonuses: { dev: 3, mkt: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#e0f2fe"/>
        <!-- V&A Dundee -->
        <polygon points="40,60 60,35 80,60" fill="#1e293b"/>
        <polygon points="45,60 60,40 75,60" fill="#334155"/>
        <!-- Gap in middle -->
        <rect x="55" y="45" width="10" height="15" fill="#e0f2fe"/>
        <!-- Tay Rail Bridge -->
        <line x1="0" y1="55" x2="35" y2="55" stroke="#78716c" stroke-width="2"/>
        <line x1="85" y1="55" x2="120" y2="55" stroke="#78716c" stroke-width="2"/>
        <rect x="5" y="52" width="2" height="8" fill="#78716c"/>
        <rect x="15" y="52" width="2" height="8" fill="#78716c"/>
        <rect x="25" y="52" width="2" height="8" fill="#78716c"/>
        <rect x="93" y="52" width="2" height="8" fill="#78716c"/>
        <rect x="103" y="52" width="2" height="8" fill="#78716c"/>
        <rect x="113" y="52" width="2" height="8" fill="#78716c"/>
        <!-- Law hill -->
        <ellipse cx="100" cy="45" rx="15" ry="10" fill="#86efac"/>
        <!-- River Tay -->
        <rect x="0" y="60" width="120" height="12" fill="#60a5fa"/>
        <!-- Waterfront -->
        <rect x="0" y="72" width="120" height="8" fill="#9ca3af"/>
      </svg>`,
      description: "Birthplace of Grand Theft Auto and home to the V&A's only museum outside London. Abertay University pioneered games degrees, creating a unique talent pool for interactive entertainment.",
      pros: ["GTA legacy and games talent", "V&A Dundee creative hub", "Low costs, high creativity"],
      cons: ["Small city, limited scale", "Remote from media buyers"]
    }
  ],

  // CYBERSHIELD AI - Cybersecurity
  cyber: [
    { id: "cheltenham", name: "Cheltenham", region: "South West", tagline: "National Cyber Agency's Backyard", salaryMod: 0.10, bonuses: { sci: 3, dev: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky - dark for cyber theme -->
        <rect width="120" height="80" fill="#0f172a"/>
        <!-- Stars -->
        <circle cx="15" cy="12" r="1" fill="#fff"/>
        <circle cx="45" cy="8" r="1" fill="#fff"/>
        <circle cx="95" cy="15" r="1" fill="#fff"/>
        <circle cx="75" cy="6" r="1" fill="#fff"/>
        <!-- National Cyber Agency Doughnut building -->
        <ellipse cx="60" cy="45" rx="28" ry="18" fill="#334155"/>
        <ellipse cx="60" cy="45" rx="12" ry="8" fill="#0f172a"/>
        <ellipse cx="60" cy="43" rx="28" ry="16" fill="#475569" stroke="#22d3ee" stroke-width="1"/>
        <ellipse cx="60" cy="43" rx="10" ry="6" fill="#0f172a"/>
        <!-- Glowing windows -->
        <circle cx="45" cy="42" r="2" fill="#22d3ee" opacity="0.8"/>
        <circle cx="55" cy="38" r="2" fill="#22d3ee" opacity="0.8"/>
        <circle cx="65" cy="38" r="2" fill="#22d3ee" opacity="0.8"/>
        <circle cx="75" cy="42" r="2" fill="#22d3ee" opacity="0.8"/>
        <!-- Ground -->
        <rect x="0" y="60" width="120" height="20" fill="#1e293b"/>
        <!-- Data streams -->
        <line x1="20" y1="70" x2="35" y2="55" stroke="#22d3ee" stroke-width="1" opacity="0.5"/>
        <line x1="85" y1="70" x2="100" y2="55" stroke="#22d3ee" stroke-width="1" opacity="0.5"/>
      </svg>`,
      description: "Home to National Cyber Agency and National Cyber Security Centre. The UK's intelligence community creates a unique talent pipeline.", pros: ["National Cyber Agency talent pipeline", "Security clearance culture", "Government contracts"], cons: ["Quiet town", "Talent often cleared elsewhere"] },
    { id: "newport", name: "Newport", region: "Wales", tagline: "Cyber Wales Hub", salaryMod: -0.10, bonuses: { dev: 3, hr: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#dbeafe"/>
        <!-- Hills in background -->
        <ellipse cx="30" cy="65" rx="40" ry="20" fill="#86efac"/>
        <ellipse cx="100" cy="65" rx="35" ry="18" fill="#4ade80"/>
        <!-- Transporter Bridge -->
        <rect x="25" y="30" width="4" height="35" fill="#475569"/>
        <rect x="91" y="30" width="4" height="35" fill="#475569"/>
        <rect x="25" y="28" width="70" height="4" fill="#475569"/>
        <!-- Suspension cables -->
        <line x1="27" y1="32" x2="60" y2="50" stroke="#64748b" stroke-width="1"/>
        <line x1="93" y1="32" x2="60" y2="50" stroke="#64748b" stroke-width="1"/>
        <!-- Gondola -->
        <rect x="50" y="48" width="20" height="8" fill="#dc2626"/>
        <!-- Modern tech buildings -->
        <rect x="5" y="45" width="15" height="20" fill="#6366f1"/>
        <rect x="8" y="48" width="4" height="4" fill="#c7d2fe"/>
        <rect x="8" y="55" width="4" height="4" fill="#c7d2fe"/>
        <!-- Welsh dragon hint -->
        <circle cx="12" cy="42" r="3" fill="#dc2626"/>
        <!-- River Usk -->
        <rect x="0" y="65" width="120" height="15" fill="#3b82f6"/>
      </svg>`,
      description: "Home to the National Cyber Security Academy and growing Welsh cyber cluster. ONS data science campus nearby in the valleys.", pros: ["Cyber Security Academy", "Welsh Government support", "Low costs"], cons: ["Smaller talent pool", "Less visibility"] },
    { id: "malvern", name: "Malvern", region: "West Midlands", tagline: "Defence Tech Valley", salaryMod: 0.05, bonuses: { sci: 4, mkt: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#e0f2fe"/>
        <!-- Malvern Hills - rolling green -->
        <ellipse cx="0" cy="70" rx="50" ry="35" fill="#22c55e"/>
        <ellipse cx="60" cy="65" rx="45" ry="30" fill="#16a34a"/>
        <ellipse cx="120" cy="70" rx="50" ry="35" fill="#22c55e"/>
        <!-- DefenceTech Labs building -->
        <rect x="45" y="40" width="35" height="25" fill="#475569"/>
        <rect x="50" y="44" width="8" height="6" fill="#bfdbfe"/>
        <rect x="62" y="44" width="8" height="6" fill="#bfdbfe"/>
        <rect x="50" y="54" width="8" height="6" fill="#bfdbfe"/>
        <rect x="62" y="54" width="8" height="6" fill="#bfdbfe"/>
        <!-- Radar dome -->
        <circle cx="90" cy="50" r="10" fill="#e2e8f0"/>
        <ellipse cx="90" cy="55" rx="10" ry="3" fill="#cbd5e1"/>
        <!-- Victorian buildings hint -->
        <rect x="10" y="48" width="20" height="17" fill="#a8a29e"/>
        <polygon points="10,48 20,38 30,48" fill="#78716c"/>
        <!-- Ground -->
        <rect x="0" y="65" width="120" height="15" fill="#86efac"/>
      </svg>`,
      description: "Home to DefenceTech Labs and Defence Research Institute. The Malvern Hills tech cluster has deep defence and signals intelligence heritage.", pros: ["DefenceTech Labs/Defence Research Institute proximity", "Defence contracts", "Beautiful location"], cons: ["Small town", "Limited nightlife"] }
  ],

  // TERRAMIND ANALYTICS - CleanTech
  terra: [
    { id: "aberdeen", name: "Aberdeen", region: "Scotland", tagline: "Energy Transition Hub", salaryMod: 0.05, bonuses: { mkt: 4, hr: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#cbd5e1"/>
        <!-- North Sea -->
        <rect x="0" y="55" width="120" height="25" fill="#3b82f6"/>
        <!-- Waves -->
        <path d="M0,60 Q10,57 20,60 Q30,63 40,60 Q50,57 60,60 Q70,63 80,60 Q90,57 100,60 Q110,63 120,60" fill="none" stroke="#60a5fa" stroke-width="1"/>
        <!-- Oil rig (transitioning) -->
        <rect x="15" y="35" width="3" height="25" fill="#6b7280"/>
        <rect x="22" y="35" width="3" height="25" fill="#6b7280"/>
        <rect x="12" y="32" width="16" height="5" fill="#475569"/>
        <!-- Wind turbine (the future) -->
        <rect x="80" y="25" width="3" height="35" fill="#e2e8f0"/>
        <path d="M81.5,25 L81.5,10 L86,25" fill="#f1f5f9"/>
        <path d="M81.5,25 L72,35 L81.5,28" fill="#f1f5f9"/>
        <path d="M81.5,25 L91,35 L81.5,28" fill="#f1f5f9"/>
        <!-- Granite buildings -->
        <rect x="40" y="40" width="18" height="18" fill="#9ca3af"/>
        <rect x="44" y="44" width="4" height="5" fill="#475569"/>
        <rect x="52" y="44" width="4" height="5" fill="#475569"/>
        <polygon points="40,40 49,32 58,40" fill="#78716c"/>
        <!-- Ground/harbour -->
        <rect x="0" y="58" width="120" height="5" fill="#64748b"/>
      </svg>`,
      description: "Oil & gas capital pivoting to renewables. Energy giants need AI for transition-huge budgets, urgent timelines.", pros: ["Energy company HQs", "Transition urgency", "Large budgets"], cons: ["Remote location", "Oil industry stigma"] },
    { id: "hull", name: "Hull", region: "Yorkshire", tagline: "Offshore Wind Capital", salaryMod: -0.20, bonuses: { dev: 3, mkt: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#e0f2fe"/>
        <!-- The Deep aquarium -->
        <polygon points="10,60 10,40 35,30 35,60" fill="#1e3a5f"/>
        <polygon points="12,58 12,42 33,33 33,58" fill="#0ea5e9"/>
        <!-- Wind turbines in sea -->
        <rect x="55" y="30" width="2" height="30" fill="#e2e8f0"/>
        <path d="M56,30 L56,18 L60,30" fill="#f1f5f9"/>
        <path d="M56,30 L50,38 L56,32" fill="#f1f5f9"/>
        <path d="M56,30 L62,38 L56,32" fill="#f1f5f9"/>
        <rect x="80" y="25" width="2" height="35" fill="#e2e8f0"/>
        <path d="M81,25 L81,13 L85,25" fill="#f1f5f9"/>
        <path d="M81,25 L75,33 L81,27" fill="#f1f5f9"/>
        <path d="M81,25 L87,33 L81,27" fill="#f1f5f9"/>
        <rect x="100" y="32" width="2" height="28" fill="#e2e8f0"/>
        <path d="M101,32 L101,22 L104,32" fill="#f1f5f9"/>
        <!-- Humber estuary -->
        <rect x="0" y="60" width="120" height="20" fill="#3b82f6"/>
        <!-- Siemens factory hint -->
        <rect x="70" y="50" width="25" height="10" fill="#22c55e"/>
        <rect x="75" y="52" width="6" height="6" fill="#86efac"/>
      </svg>`,
      description: "UK's offshore wind hub. Siemens Gamesa factory and Humber freeport offer grants and access to renewables sector.", pros: ["Offshore wind cluster", "Freeport incentives", "Lowest costs"], cons: ["Remote from investors", "Limited tech scene"] },
    { id: "exeter", name: "Exeter", region: "South West", tagline: "Met Office & Climate", salaryMod: 0.05, bonuses: { sci: 4, dev: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky with weather elements -->
        <rect width="120" height="80" fill="#bfdbfe"/>
        <!-- Sun -->
        <circle cx="100" cy="15" r="10" fill="#fbbf24"/>
        <!-- Cloud -->
        <ellipse cx="30" cy="18" rx="12" ry="6" fill="#fff"/>
        <ellipse cx="22" cy="20" rx="8" ry="5" fill="#fff"/>
        <ellipse cx="38" cy="20" rx="8" ry="5" fill="#fff"/>
        <!-- Met Office building -->
        <rect x="40" y="35" width="40" height="28" fill="#1e3a5f"/>
        <rect x="45" y="40" width="10" height="8" fill="#60a5fa"/>
        <rect x="60" y="40" width="10" height="8" fill="#60a5fa"/>
        <rect x="45" y="52" width="10" height="8" fill="#60a5fa"/>
        <rect x="60" y="52" width="10" height="8" fill="#60a5fa"/>
        <!-- Weather data satellite dish -->
        <ellipse cx="85" cy="45" rx="8" ry="4" fill="#e2e8f0"/>
        <rect x="84" y="45" width="2" height="15" fill="#94a3b8"/>
        <!-- Exeter Cathedral hint -->
        <rect x="8" y="42" width="20" height="21" fill="#a8a29e"/>
        <polygon points="8,42 18,30 28,42" fill="#78716c"/>
        <polygon points="10,42 18,35 26,42" fill="#94a3b8"/>
        <!-- River Exe -->
        <path d="M0,70 Q40,65 80,70 Q100,72 120,68" fill="#3b82f6"/>
        <!-- Ground -->
        <rect x="0" y="63" width="120" height="17" fill="#86efac"/>
      </svg>`,
      description: "Home to the Met Office and University of Exeter's climate research. World-leading weather and climate science on your doorstep.", pros: ["Met Office partnership", "Climate science hub", "Quality of life"], cons: ["Small city", "Far from London"] }
  ],

  // LEGALMIND AI - LegalTech
  legal: [
    { id: "leeds", name: "Leeds", region: "Yorkshire", tagline: "Legal Process Centre", salaryMod: -0.05, bonuses: { dev: 3, hr: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#e0e7ff"/>
        <!-- Leeds Town Hall -->
        <rect x="35" y="30" width="50" height="33" fill="#d4a574"/>
        <rect x="40" y="35" width="8" height="12" fill="#1e293b"/>
        <rect x="52" y="35" width="8" height="12" fill="#1e293b"/>
        <rect x="64" y="35" width="8" height="12" fill="#1e293b"/>
        <rect x="76" y="35" width="8" height="12" fill="#1e293b"/>
        <!-- Columns -->
        <rect x="38" y="50" width="4" height="13" fill="#c4956a"/>
        <rect x="48" y="50" width="4" height="13" fill="#c4956a"/>
        <rect x="58" y="50" width="4" height="13" fill="#c4956a"/>
        <rect x="68" y="50" width="4" height="13" fill="#c4956a"/>
        <rect x="78" y="50" width="4" height="13" fill="#c4956a"/>
        <!-- Dome/clock tower -->
        <rect x="52" y="18" width="16" height="12" fill="#c4956a"/>
        <ellipse cx="60" cy="18" rx="10" ry="6" fill="#b8860b"/>
        <circle cx="60" cy="23" r="4" fill="#fff" stroke="#1e293b" stroke-width="1"/>
        <!-- Modern towers -->
        <rect x="5" y="35" width="15" height="28" fill="#7c3aed"/>
        <rect x="8" y="40" width="4" height="4" fill="#c4b5fd"/>
        <rect x="8" y="48" width="4" height="4" fill="#c4b5fd"/>
        <rect x="100" y="32" width="15" height="31" fill="#6366f1"/>
        <rect x="103" y="38" width="4" height="4" fill="#a5b4fc"/>
        <rect x="103" y="46" width="4" height="4" fill="#a5b4fc"/>
        <!-- Ground -->
        <rect x="0" y="63" width="120" height="17" fill="#a5b4fc"/>
      </svg>`,
      description: "UK's largest legal centre outside London. DLA Piper and Eversheds run major operations. Legal process expertise.", pros: ["Major firm operations", "Legal process expertise", "Strong universities"], cons: ["Process not prestige", "Less M&A work"] },
    { id: "swansea", name: "Swansea", region: "Wales", tagline: "Welsh Legal Tech", salaryMod: -0.15, bonuses: { dev: 3, hr: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#bfdbfe"/>
        <!-- Gower hills in background -->
        <ellipse cx="20" cy="55" rx="35" ry="20" fill="#86efac"/>
        <ellipse cx="100" cy="55" rx="30" ry="18" fill="#4ade80"/>
        <!-- Swansea Bay curve -->
        <path d="M0,55 Q60,45 120,55" fill="#3b82f6"/>
        <!-- University building -->
        <rect x="45" y="32" width="35" height="25" fill="#8b5cf6"/>
        <rect x="50" y="37" width="8" height="6" fill="#c4b5fd"/>
        <rect x="62" y="37" width="8" height="6" fill="#c4b5fd"/>
        <rect x="50" y="47" width="8" height="6" fill="#c4b5fd"/>
        <rect x="62" y="47" width="8" height="6" fill="#c4b5fd"/>
        <!-- SA1 Waterfront modern buildings -->
        <rect x="8" y="40" width="18" height="17" fill="#6366f1"/>
        <rect x="12" y="44" width="4" height="4" fill="#a5b4fc"/>
        <rect x="18" y="44" width="4" height="4" fill="#a5b4fc"/>
        <!-- Welsh dragon hint -->
        <circle cx="95" cy="38" r="6" fill="#dc2626" opacity="0.8"/>
        <!-- Beach -->
        <rect x="0" y="57" width="120" height="8" fill="#fef3c7"/>
        <!-- Sea -->
        <rect x="0" y="65" width="120" height="15" fill="#60a5fa"/>
      </svg>`,
      description: "Swansea University's Hillary Rodham Clinton School of Law and growing legal services sector. Welsh Government backing for legal tech.", pros: ["University law school", "Welsh Government support", "Low costs"], cons: ["Small legal market", "Far from London courts"] },
    { id: "bournemouth", name: "Bournemouth", region: "South", tagline: "South Coast Legal", salaryMod: 0.05, bonuses: { mkt: 2, hr: 3 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#bae6fd"/>
        <!-- Sun -->
        <circle cx="95" cy="18" r="12" fill="#fbbf24"/>
        <!-- Cliff/town -->
        <rect x="0" y="35" width="120" height="20" fill="#86efac"/>
        <!-- Victorian buildings -->
        <rect x="15" y="28" width="18" height="27" fill="#fef3c7"/>
        <polygon points="15,28 24,18 33,28" fill="#dc2626"/>
        <rect x="18" y="32" width="5" height="8" fill="#1e293b"/>
        <rect x="26" y="32" width="5" height="8" fill="#1e293b"/>
        <rect x="45" y="25" width="20" height="30" fill="#8b5cf6"/>
        <rect x="49" y="30" width="5" height="6" fill="#c4b5fd"/>
        <rect x="56" y="30" width="5" height="6" fill="#c4b5fd"/>
        <rect x="49" y="40" width="5" height="6" fill="#c4b5fd"/>
        <rect x="56" y="40" width="5" height="6" fill="#c4b5fd"/>
        <!-- Pier -->
        <rect x="75" y="52" width="40" height="3" fill="#92400e"/>
        <rect x="78" y="45" width="8" height="10" fill="#78350f"/>
        <rect x="95" y="48" width="6" height="7" fill="#78350f"/>
        <!-- Beach -->
        <rect x="0" y="55" width="120" height="10" fill="#fef3c7"/>
        <!-- Sea -->
        <rect x="0" y="65" width="120" height="15" fill="#3b82f6"/>
        <!-- Waves -->
        <path d="M0,68 Q15,65 30,68 Q45,71 60,68 Q75,65 90,68 Q105,71 120,68" fill="none" stroke="#60a5fa" stroke-width="1"/>
      </svg>`,
      description: "Growing professional services hub with Bournemouth University's strong business law programme. Quality of life attracts London escapees.", pros: ["Quality of life", "Lower costs than London", "Growing legal sector"], cons: ["Smaller market", "Limited Magic Circle presence"] }
  ],

  // EDUSPARK AI - EdTech
  edu: [
    { id: "york", name: "York", region: "Yorkshire", tagline: "Education Research Hub", salaryMod: -0.05, bonuses: { sci: 4, hr: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#fef9c3"/>
        <!-- York Minster -->
        <rect x="40" y="25" width="40" height="38" fill="#d4a574"/>
        <!-- Twin towers -->
        <rect x="42" y="15" width="12" height="48" fill="#c4956a"/>
        <rect x="66" y="15" width="12" height="48" fill="#c4956a"/>
        <polygon points="42,15 48,5 54,15" fill="#b8860b"/>
        <polygon points="66,15 72,5 78,15" fill="#b8860b"/>
        <!-- Central tower -->
        <rect x="52" y="20" width="16" height="10" fill="#b8860b"/>
        <polygon points="52,20 60,8 68,20" fill="#a8763d"/>
        <!-- Rose window -->
        <circle cx="60" cy="40" r="8" fill="#1e293b"/>
        <circle cx="60" cy="40" r="6" fill="#3b82f6" opacity="0.6"/>
        <!-- Gothic windows -->
        <rect x="45" y="35" width="4" height="10" fill="#1e293b"/>
        <rect x="71" y="35" width="4" height="10" fill="#1e293b"/>
        <!-- City walls hint -->
        <rect x="5" y="50" width="25" height="13" fill="#a8a29e"/>
        <rect x="8" y="45" width="4" height="8" fill="#94a3b8"/>
        <rect x="22" y="45" width="4" height="8" fill="#94a3b8"/>
        <rect x="95" y="48" width="20" height="15" fill="#a8a29e"/>
        <!-- Ground -->
        <rect x="0" y="63" width="120" height="17" fill="#86efac"/>
      </svg>`,
      description: "University of York's education department is world-ranked. Strong evidence-based education research and school partnerships.", pros: ["Top education research", "School partnerships", "Historic city appeal"], cons: ["Small city", "Limited tech scene"] },
    { id: "coventry", name: "Coventry", region: "Midlands", tagline: "Warwick & WMG Country", salaryMod: -0.05, bonuses: { sci: 3, dev: 2 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#fef3c7"/>
        <!-- Old Cathedral ruins -->
        <rect x="20" y="35" width="8" height="28" fill="#a8a29e"/>
        <rect x="35" y="40" width="6" height="23" fill="#94a3b8"/>
        <polygon points="20,35 24,20 28,35" fill="#78716c"/>
        <!-- New Cathedral - angular modern -->
        <polygon points="50,63 50,30 80,25 80,63" fill="#f59e0b"/>
        <polygon points="52,60 52,33 78,28 78,60" fill="#fbbf24"/>
        <!-- Stained glass zigzag -->
        <path d="M55,35 L60,45 L65,35 L70,45 L75,35" stroke="#dc2626" stroke-width="2" fill="none"/>
        <path d="M55,45 L60,55 L65,45 L70,55 L75,45" stroke="#3b82f6" stroke-width="2" fill="none"/>
        <!-- University modern building -->
        <rect x="90" y="40" width="25" height="23" fill="#6366f1"/>
        <rect x="95" y="45" width="6" height="5" fill="#a5b4fc"/>
        <rect x="105" y="45" width="6" height="5" fill="#a5b4fc"/>
        <rect x="95" y="53" width="6" height="5" fill="#a5b4fc"/>
        <rect x="105" y="53" width="6" height="5" fill="#a5b4fc"/>
        <!-- Ring road hint -->
        <path d="M0,68 Q30,62 60,68 Q90,74 120,68" fill="#64748b"/>
        <!-- Ground -->
        <rect x="0" y="63" width="120" height="17" fill="#86efac"/>
      </svg>`,
      description: "University of Warwick's world-ranked education research, Warwick Business School, and WMG's industry partnerships. UK City of Culture 2021 added creative energy.", pros: ["Warwick Business School", "WMG industry links", "Central UK location"], cons: ["Campus outside city", "Student town feel"] },
    { id: "bath", name: "Bath", region: "South West", tagline: "Two Universities, One Vision", salaryMod: 0.10, bonuses: { sci: 2, dev: 2, mkt: 1 },
      image: `<svg viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg">
        <!-- Sky -->
        <rect width="120" height="80" fill="#fef3c7"/>
        <!-- Hills -->
        <ellipse cx="0" cy="65" rx="40" ry="25" fill="#86efac"/>
        <ellipse cx="120" cy="65" rx="40" ry="25" fill="#86efac"/>
        <!-- Royal Crescent - curved Georgian terrace -->
        <path d="M15,50 Q60,35 105,50" fill="#f5f5dc" stroke="#d4a574" stroke-width="1"/>
        <path d="M20,48 Q60,35 100,48" fill="#fef3c7"/>
        <!-- Windows on crescent -->
        <rect x="25" y="42" width="4" height="5" fill="#1e293b"/>
        <rect x="35" y="40" width="4" height="5" fill="#1e293b"/>
        <rect x="45" y="38" width="4" height="5" fill="#1e293b"/>
        <rect x="55" y="37" width="4" height="5" fill="#1e293b"/>
        <rect x="65" y="38" width="4" height="5" fill="#1e293b"/>
        <rect x="75" y="40" width="4" height="5" fill="#1e293b"/>
        <rect x="85" y="42" width="4" height="5" fill="#1e293b"/>
        <!-- Roman Baths -->
        <rect x="40" y="55" width="40" height="10" fill="#c4956a"/>
        <ellipse cx="60" cy="60" rx="15" ry="5" fill="#22d3ee"/>
        <ellipse cx="60" cy="59" rx="12" ry="3" fill="#67e8f9"/>
        <!-- Columns -->
        <rect x="45" y="52" width="3" height="8" fill="#d4a574"/>
        <rect x="55" y="52" width="3" height="8" fill="#d4a574"/>
        <rect x="65" y="52" width="3" height="8" fill="#d4a574"/>
        <!-- Ground -->
        <rect x="0" y="65" width="120" height="15" fill="#86efac"/>
      </svg>`,
      description: "University of Bath's Institute of Coding and Bath Spa University's creative education programmes. Two universities, one beautiful UNESCO World Heritage city.", pros: ["Institute of Coding", "Bath Spa creativity", "UNESCO heritage city"], cons: ["Small city", "High living costs"] }
  ]
};

// Map location ID to location data for easy lookup
const LOCATION_MAP = {};
Object.values(LOCATIONS).flat().forEach(loc => {
  LOCATION_MAP[loc.id] = loc;
});

// Funding stages
const FUNDING_STAGES = {
  bootstrap: { id: "bootstrap", name: "Bootstrapped", desc: "Your savings and credit cards. Full control, tight runway." },
  angel: { id: "angel", name: "Angel Round", desc: "Smart money from experienced operators." },
  vc: { id: "vc", name: "VC Seed", desc: "Institutional capital with institutional expectations." }
};

// Friendly labels for stats
const STAT_LABELS = {
  sci: "Research",
  dev: "Product",
  mkt: "Sales",
  hr: "People",
  cash: "Cash",
  val: "Valuation",
  burn: "Burn Rate",
  staff: "Staff",
  equity: "Equity"
};

// Individual funders with personalities
// NOTE: 'equity' = the stake THEY TAKE, not what you keep
const FUNDERS = {
  // BOOTSTRAPPED - just you
  self: {
    id: "self",
    stage: "bootstrap",
    name: "Self-Funded",
    title: "Your Own Capital",
    photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="selfBg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#f1f5f9"/>
          <stop offset="100%" style="stop-color:#cbd5e1"/>
        </linearGradient>
      </defs>
      <circle cx="40" cy="40" r="38" fill="url(#selfBg)" stroke="#64748b" stroke-width="2"/>
      <text x="40" y="35" text-anchor="middle" font-size="28">ü™û</text>
      <text x="40" y="58" text-anchor="middle" font-size="10" fill="#475569" font-weight="bold">YOU</text>
    </svg>`,
    cash: 350,
    val: 350,
    equity: 0,
    apMod: -1,
    desc: "Savings, credit cards, a re-mortgaged flat. Everything on the line.",
    personality: "It's all on you. No safety net. No excuses.",
    bonus: {},
    ongoing: "No investors to blame. No one to call for help. Just you and the abyss."
  },

  // ANGELS
  dragon: {
    id: "dragon",
    stage: "angel",
    name: "Victoria Sterling",
    title: "TV Dragon / Media Personality",
    photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="dragonBg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#fef3c7"/>
          <stop offset="100%" style="stop-color:#fcd34d"/>
        </linearGradient>
      </defs>
      <circle cx="40" cy="40" r="38" fill="url(#dragonBg)" stroke="#f59e0b" stroke-width="2"/>
      <!-- Glamorous blonde hair -->
      <ellipse cx="40" cy="32" rx="22" ry="18" fill="#fbbf24"/>
      <path d="M18 35 Q25 20 40 18 Q55 20 62 35 Q55 28 40 26 Q25 28 18 35" fill="#fde047"/>
      <!-- Face -->
      <ellipse cx="40" cy="42" rx="16" ry="18" fill="#fef3c7"/>
      <!-- Confident eyes with lashes -->
      <ellipse cx="33" cy="38" rx="4" ry="3" fill="white"/>
      <ellipse cx="47" cy="38" rx="4" ry="3" fill="white"/>
      <circle cx="33" cy="38" r="2" fill="#1e3a5f"/>
      <circle cx="47" cy="38" r="2" fill="#1e3a5f"/>
      <path d="M29 35 L32 37 M34 37 L37 35" stroke="#1a1a1a" stroke-width="1"/>
      <path d="M43 35 L46 37 M48 37 L51 35" stroke="#1a1a1a" stroke-width="1"/>
      <!-- Red lipstick smirk -->
      <path d="M34 50 Q40 54 46 50" stroke="#dc2626" stroke-width="2.5" fill="none"/>
      <!-- Gold earrings -->
      <circle cx="22" cy="45" r="3" fill="#f59e0b"/>
      <circle cx="58" cy="45" r="3" fill="#f59e0b"/>
      <!-- Power blazer -->
      <path d="M20 65 L28 55 L40 58 L52 55 L60 65" fill="#dc2626"/>
      <path d="M36 58 L40 65 L44 58" fill="white"/>
    </svg>`,
    cash: 400,
    val: 1000,
    equity: 25,
    apMod: 0,
    desc: "Famous investor from Dragons' Den. Her face is on billboards. She knows it.",
    personality: "I don't do hand-holding. Weekly numbers or I'm on the phone asking why not. My reputation is on the line here.",
    bonus: { mkt: 4 },
    ongoing: "+4 Sales from TV exposure. Expects profitability by Q8 or she'll 'have words' publicly."
  },
  
  techAngel: {
    id: "techAngel",
    stage: "angel",
    name: "James Chen-Williams",
    title: "Exited Founder / Angel Syndicate Lead",
    photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="techBg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#dbeafe"/>
          <stop offset="100%" style="stop-color:#93c5fd"/>
        </linearGradient>
      </defs>
      <circle cx="40" cy="40" r="38" fill="url(#techBg)" stroke="#3b82f6" stroke-width="2"/>
      <!-- Neat dark hair -->
      <path d="M22 38 Q24 22 40 20 Q56 22 58 38 Q54 30 40 28 Q26 30 22 38" fill="#1e293b"/>
      <!-- Face -->
      <ellipse cx="40" cy="44" rx="15" ry="17" fill="#fef3c7"/>
      <!-- Glasses -->
      <rect x="26" y="38" width="12" height="9" rx="2" fill="none" stroke="#1e40af" stroke-width="2"/>
      <rect x="42" y="38" width="12" height="9" rx="2" fill="none" stroke="#1e40af" stroke-width="2"/>
      <path d="M38 42 L42 42" stroke="#1e40af" stroke-width="2"/>
      <!-- Eyes behind glasses -->
      <circle cx="32" cy="42" r="2" fill="#1e293b"/>
      <circle cx="48" cy="42" r="2" fill="#1e293b"/>
      <!-- Slight smile -->
      <path d="M35 52 Q40 55 45 52" stroke="#92400e" stroke-width="1.5" fill="none"/>
      <!-- Patagonia vest over hoodie -->
      <rect x="24" y="60" width="32" height="18" fill="#475569"/>
      <rect x="28" y="62" width="24" height="14" fill="#1e40af"/>
      <rect x="36" y="62" width="8" height="6" fill="#60a5fa"/>
    </svg>`,
    cash: 500,
    val: 1400,
    equity: 18,
    apMod: 0,
    desc: "Sold his startup to a tech giant for ¬£200M. Thinks he knows exactly how you should run yours.",
    personality: "I've done this before. Multiple times. Listen to my advice or don't-but I told you so.",
    bonus: { dev: 2, sci: 2 },
    ongoing: "+2 Product, +2 Research. Will second-guess every technical decision. Monthly 'suggestions'."
  },
  
  operatorAngel: {
    id: "operatorAngel",
    stage: "angel",
    name: "Sarah Okonkwo",
    title: "Former COO / Operating Partner",
    photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="opsBg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#d1fae5"/>
          <stop offset="100%" style="stop-color:#6ee7b7"/>
        </linearGradient>
      </defs>
      <circle cx="40" cy="40" r="38" fill="url(#opsBg)" stroke="#10b981" stroke-width="2"/>
      <!-- Natural afro hair -->
      <circle cx="40" cy="32" r="20" fill="#1c1917"/>
      <circle cx="28" cy="28" r="8" fill="#1c1917"/>
      <circle cx="52" cy="28" r="8" fill="#1c1917"/>
      <circle cx="24" cy="36" r="6" fill="#1c1917"/>
      <circle cx="56" cy="36" r="6" fill="#1c1917"/>
      <!-- Face -->
      <ellipse cx="40" cy="45" rx="14" ry="16" fill="#8b5a2b"/>
      <!-- Warm confident eyes -->
      <ellipse cx="34" cy="42" rx="3" ry="2.5" fill="white"/>
      <ellipse cx="46" cy="42" rx="3" ry="2.5" fill="white"/>
      <circle cx="34" cy="42" r="1.5" fill="#1c1917"/>
      <circle cx="46" cy="42" r="1.5" fill="#1c1917"/>
      <!-- Warm smile -->
      <path d="M34 52 Q40 57 46 52" stroke="#5c3d2e" stroke-width="2" fill="none"/>
      <!-- Small gold studs -->
      <circle cx="26" cy="45" r="2" fill="#fbbf24"/>
      <circle cx="54" cy="45" r="2" fill="#fbbf24"/>
      <!-- Professional blouse -->
      <path d="M22 68 L30 58 L40 60 L50 58 L58 68" fill="#059669"/>
      <circle cx="40" cy="62" r="2" fill="#fbbf24"/>
    </svg>`,
    cash: 450,
    val: 1200,
    equity: 20,
    apMod: 0,
    desc: "Scaled three startups as COO. Knows where the bodies are buried. Literally keeps spreadsheets.",
    personality: "I've seen founders burn out, teams implode, companies crater. I won't let that happen here. You'll thank me later.",
    bonus: { hr: 4 },
    ongoing: "+4 People from ops playbooks. Quarterly org reviews whether you like it or not."
  },

  // VCs - greedier and more demanding
  sectorVC: {
    id: "sectorVC",
    stage: "vc",
    name: "Meridian Health Ventures",
    title: "Specialist HealthTech VC",
    photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="mhvBg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#ede9fe"/>
          <stop offset="100%" style="stop-color:#c4b5fd"/>
        </linearGradient>
      </defs>
      <circle cx="40" cy="40" r="38" fill="url(#mhvBg)" stroke="#8b5cf6" stroke-width="2"/>
      <!-- Building/institution icon -->
      <rect x="24" y="28" width="32" height="32" fill="#7c3aed" rx="3"/>
      <!-- Cross symbol -->
      <rect x="36" y="32" width="8" height="24" fill="white"/>
      <rect x="28" y="40" width="24" height="8" fill="white"/>
      <!-- Pillars -->
      <rect x="26" y="52" width="4" height="8" fill="#a78bfa"/>
      <rect x="34" y="52" width="4" height="8" fill="#a78bfa"/>
      <rect x="42" y="52" width="4" height="8" fill="#a78bfa"/>
      <rect x="50" y="52" width="4" height="8" fill="#a78bfa"/>
      <!-- Fund name -->
      <text x="40" y="72" text-anchor="middle" font-size="7" fill="#5b21b6" font-weight="bold">MERIDIAN</text>
    </svg>`,
    cash: 750,
    val: 2500,
    equity: 30,
    apMod: 1,
    desc: "¬£50M fund. They only do health-tech. If you're not in health-tech, why are we talking?",
    personality: "We know every public health system procurement officer by first name. Do exactly what we say with intros or don't waste them.",
    bonus: { sci: 2, mkt: 3 },
    ongoing: "+2 Research, +3 Sales from public health system network. Board seat. They WILL bring other portfolio companies to your meetings."
  },
  
  tier1VC: {
    id: "tier1VC",
    stage: "vc",
    name: "Northstar Partners",
    title: "Tier-1 Generalist VC",
    photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="nsBg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#fce7f3"/>
          <stop offset="100%" style="stop-color:#f9a8d4"/>
        </linearGradient>
        <linearGradient id="starGold" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#fef3c7"/>
          <stop offset="100%" style="stop-color:#fbbf24"/>
        </linearGradient>
      </defs>
      <circle cx="40" cy="40" r="38" fill="url(#nsBg)" stroke="#ec4899" stroke-width="2"/>
      <!-- Large prominent star -->
      <polygon points="40,12 45,28 62,28 48,38 54,55 40,45 26,55 32,38 18,28 35,28" fill="url(#starGold)" stroke="#f59e0b" stroke-width="1"/>
      <!-- Inner star detail -->
      <polygon points="40,20 43,30 52,30 45,36 48,46 40,40 32,46 35,36 28,30 37,30" fill="#fef3c7"/>
      <!-- Fund name -->
      <text x="40" y="68" text-anchor="middle" font-size="6" fill="#be185d" font-weight="bold">NORTHSTAR</text>
      <text x="40" y="75" text-anchor="middle" font-size="5" fill="#9d174d">PARTNERS</text>
    </svg>`,
    cash: 1200,
    val: 3000,
    equity: 40,
    apMod: 1,
    desc: "The logo on your deck that makes other VCs return calls. They know what they're worth.",
    personality: "We backed 3 unicorns last year. We know the pattern. Hit your numbers or we'll find a CEO who can.",
    bonus: { mkt: 4, hr: 2 },
    ongoing: "+4 Sales from brand, +2 People from network. Monthly board. Miss targets twice and they'll 'help' with leadership."
  },
  
  corporateVC: {
    id: "corporateVC",
    stage: "vc",
    name: "RELX Ventures",
    title: "Corporate VC (Publishing/Data Giant)",
    photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="relxBg" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#e0e7ff"/>
          <stop offset="100%" style="stop-color:#a5b4fc"/>
        </linearGradient>
      </defs>
      <circle cx="40" cy="40" r="38" fill="url(#relxBg)" stroke="#4f46e5" stroke-width="2"/>
      <!-- Corporate building -->
      <rect x="20" y="22" width="40" height="38" fill="#4338ca" rx="2"/>
      <!-- Windows grid -->
      <rect x="24" y="26" width="6" height="5" fill="#c7d2fe"/>
      <rect x="32" y="26" width="6" height="5" fill="#c7d2fe"/>
      <rect x="42" y="26" width="6" height="5" fill="#c7d2fe"/>
      <rect x="50" y="26" width="6" height="5" fill="#c7d2fe"/>
      <rect x="24" y="34" width="6" height="5" fill="#c7d2fe"/>
      <rect x="32" y="34" width="6" height="5" fill="#c7d2fe"/>
      <rect x="42" y="34" width="6" height="5" fill="#a5b4fc"/>
      <rect x="50" y="34" width="6" height="5" fill="#c7d2fe"/>
      <rect x="24" y="42" width="6" height="5" fill="#c7d2fe"/>
      <rect x="32" y="42" width="6" height="5" fill="#a5b4fc"/>
      <rect x="42" y="42" width="6" height="5" fill="#c7d2fe"/>
      <rect x="50" y="42" width="6" height="5" fill="#c7d2fe"/>
      <!-- Door -->
      <rect x="36" y="50" width="8" height="10" fill="#1e1b4b"/>
      <!-- Company name -->
      <text x="40" y="72" text-anchor="middle" font-size="9" fill="#3730a3" font-weight="bold">RELX</text>
    </svg>`,
    cash: 1000,
    val: 2800,
    equity: 35,
    apMod: 1,
    desc: "Strategic arm of a ¬£50B data giant. They see you as a feature, not a company.",
    personality: "We move slowly because we're not going anywhere. You might be acquired. You might be acqui-hired. Depends on performance.",
    bonus: { dev: 3, mkt: 2, sci: 1 },
    ongoing: "+3 Product (data access), +2 Sales, +1 Research. They'll want right of first refusal on acquisition. Non-negotiable."
  }
};

// Funder advice templates - each funder has domain preferences and personality-driven advice
const FUNDER_ADVICE = {
  self: null, // Bootstrapped = no investor advice
  
  dragon: {
    name: "Victoria",
    preferredDomains: ["marketing", "marketing", "marketing", "dev"], // Heavily biased to sales
    preferredChoice: 0, // Usually wants the big/expensive option
    advice: {
      marketing: [
        { text: "Go big on this one. My phone's been ringing-people are watching.", reason: "Visibility is everything in the early days." },
        { text: "This is a PR opportunity. Don't be cheap.", reason: "I didn't invest in a company that hides." },
        { text: "I want to see headlines, not excuses.", reason: "My brand is attached to yours now." }
      ],
      research: [
        { text: "Science is nice, but what are customers saying?", reason: "Revenue first, research later." },
        { text: "Don't over-engineer this. Ship something.", reason: "Perfect is the enemy of profitable." }
      ],
      dev: [
        { text: "Make it look good. First impressions matter.", reason: "I've seen ugly products die." },
        { text: "Speed to market. We can fix bugs later.", reason: "Someone else will eat your lunch." }
      ],
      hr: [
        { text: "Hire salespeople. Everything else can wait.", reason: "No sales, no company." },
        { text: "I don't care about culture-I care about numbers.", reason: "Happy employees don't pay my returns." }
      ]
    },
    followedReaction: "Good. That's the Victoria Sterling way. üí™",
    ignoredReaction: "Fine. Do it your way. But remember who's watching. üòí",
    hostileWarning: "I'm starting to wonder if you know what you're doing.",
    hostileEffect: { mkt: -2 } // Withdraws PR support
  },
  
  techAngel: {
    name: "James",
    preferredDomains: ["dev", "research", "dev", "research"], // Technical focus
    preferredChoice: 1, // Usually wants the balanced/smart option
    advice: {
      marketing: [
        { text: "Marketing's fine, but is the product ready?", reason: "Don't sell what you can't deliver." },
        { text: "Developer marketing > consumer marketing at this stage.", reason: "Build the community first." }
      ],
      research: [
        { text: "This is why I invested. Push the science.", reason: "Technology advantages are the best protection against competitors." },
        { text: "Have you talked to the team at CortexAI about this?", reason: "I can make an intro." },
        { text: "Don't rush peer review. Do it right.", reason: "One retraction kills a company." }
      ],
      dev: [
        { text: "Technical debt now means pain later. Invest properly.", reason: "I've seen this movie before." },
        { text: "Architecture matters. Don't cut corners.", reason: "You'll thank me at scale." },
        { text: "Have you considered the API design carefully?", reason: "B2B success is built on good APIs." }
      ],
      hr: [
        { text: "Hire engineers, not managers.", reason: "Execution beats process at this stage." },
        { text: "Culture follows talent. Get the best people.", reason: "A-players attract A-players." }
      ]
    },
    followedReaction: "Smart choice. This is why we backed you. üôÇ",
    ignoredReaction: "Your call. But I've seen what happens when you ignore the tech. üòê",
    hostileWarning: "I'm losing confidence in the technical direction here.",
    hostileEffect: { dev: -2, sci: -1 } // Withdraws technical network
  },
  
  operatorAngel: {
    name: "Sarah",
    preferredDomains: ["hr", "hr", "dev", "marketing"], // People & ops focus
    preferredChoice: 1, // Usually wants the sustainable/balanced option
    advice: {
      marketing: [
        { text: "Make sure the team can handle the growth this creates.", reason: "I've seen companies break from success." },
        { text: "Customer success > customer acquisition.", reason: "Churn will kill you quietly." }
      ],
      research: [
        { text: "Is the team burning out on this?", reason: "Sustainable pace wins marathons." },
        { text: "Document everything. Key-person risk is real.", reason: "What if your lead scientist leaves?" }
      ],
      dev: [
        { text: "Process matters. How are you tracking this work?", reason: "Chaos doesn't scale." },
        { text: "Make sure there's coverage. No single points of failure.", reason: "I've seen CTOs burn out." }
      ],
      hr: [
        { text: "This is the priority. Always.", reason: "Your people are your company." },
        { text: "Invest in management training. Promote from within.", reason: "External hires break culture." },
        { text: "Have you done the engagement survey yet?", reason: "Problems hide until they explode." }
      ]
    },
    followedReaction: "Good. Building the right way. üòä",
    ignoredReaction: "I hope you know what you're doing. People remember how they're treated. üòï",
    hostileWarning: "The team is noticing. And so am I.",
    hostileEffect: { hr: -3 } // Withdraws ops support
  },
  
  sectorVC: {
    name: "Meridian",
    preferredDomains: ["research", "marketing", "research", "dev"], // Sector expertise
    preferredChoice: 0, // Wants the ambitious option
    advice: {
      marketing: [
        { text: "We can get you in front of three public health system trusts next month. Go big.", reason: "Our network is your unfair advantage." },
        { text: "Position for the public health system Innovation Accelerator.", reason: "Government backing changes everything." }
      ],
      research: [
        { text: "This aligns with the regulatory pathway. Prioritise it.", reason: "We know what the MHRA wants to see." },
        { text: "Our portfolio company did something similar. I'll connect you.", reason: "Learn from others' mistakes." },
        { text: "Publish this. Credibility in healthtech is everything.", reason: "Clinicians read journals, not blogs." }
      ],
      dev: [
        { text: "public health system integration requirements are non-negotiable. Plan for them.", reason: "We've seen companies fail on this." },
        { text: "Security and compliance first. Features second.", reason: "One breach and you're done in healthcare." }
      ],
      hr: [
        { text: "Hire someone with public health system experience. It's a different world.", reason: "Procurement cycles will break you otherwise." },
        { text: "Clinical advisory board. You need credibility.", reason: "Doctors trust doctors." }
      ]
    },
    followedReaction: "Exactly right. This is why we invested. üëç",
    ignoredReaction: "Your choice. But we know this sector. ü§î",
    hostileWarning: "The board is concerned about strategic alignment.",
    hostileEffect: { mkt: -2, sci: -1 } // Withdraws public health system network
  },
  
  tier1VC: {
    name: "Northstar",
    preferredDomains: ["marketing", "dev", "marketing", "hr"], // Growth focused
    preferredChoice: 0, // Always wants the biggest/most aggressive option
    advice: {
      marketing: [
        { text: "Triple down. This is how you become a market leader.", reason: "We didn't invest in a lifestyle business." },
        { text: "Outspend the competition. We'll fund it.", reason: "First mover advantage is real." },
        { text: "I want to see 3x growth this quarter.", reason: "That's the Northstar standard." }
      ],
      research: [
        { text: "Is this moving the needle on growth?", reason: "Research is a means to an end." },
        { text: "Patent it and move on. Defensibility matters.", reason: "Don't let competitors copy you." }
      ],
      dev: [
        { text: "Ship fast. We can always iterate.", reason: "Speed is the only sustainable advantage." },
        { text: "What clever trick can make this spread by itself?", reason: "Word of mouth beats paid advertising." },
        { text: "Make it addictive. Retention is everything.", reason: "How many users come back every day?" }
      ],
      hr: [
        { text: "Hire ahead of the curve. We're planning for 10x.", reason: "The best people take months to close." },
        { text: "Get a world-class CRO. Revenue is everything.", reason: "Sales fixes everything." }
      ]
    },
    followedReaction: "Now you're thinking like a unicorn. ü¶Ñ",
    ignoredReaction: "Disappointing. We expect more aggression. üò§",
    hostileWarning: "The partnership is discussing leadership changes.",
    hostileEffect: { mkt: -3, hr: -1 } // Withdraws brand support and recruiting help
  },
  
  corporateVC: {
    name: "RELX",
    preferredDomains: ["dev", "research", "dev", "marketing"], // Product & strategic fit
    preferredChoice: 1, // Wants sustainable/strategic options
    advice: {
      marketing: [
        { text: "Have you considered our enterprise customers?", reason: "We can open doors you can't." },
        { text: "Co-marketing with RELX brands is on the table.", reason: "Our reach is your reach." }
      ],
      research: [
        { text: "This could integrate with our data assets.", reason: "Strategic synergy is why we're here." },
        { text: "Our research teams might collaborate.", reason: "We have 10,000 engineers. Use them." },
        { text: "IP considerations matter for potential acquisition.", reason: "Keep your house clean." }
      ],
      dev: [
        { text: "Build for enterprise scale from day one.", reason: "Our customers expect reliability." },
        { text: "API compatibility with our stack would be... beneficial.", reason: "Just something to consider." },
        { text: "Security audit soon. Our compliance team will help.", reason: "Enterprise sales require it." }
      ],
      hr: [
        { text: "We have a talent sharing program. Interested?", reason: "Secondments can help you scale." },
        { text: "Your team should visit our innovation hub.", reason: "Inspiration and networking." }
      ]
    },
    followedReaction: "Good alignment. The partnership is pleased. ü§ù",
    ignoredReaction: "Noted. We'll discuss at the next strategy review. üòê",
    hostileWarning: "Strategic misalignment is becoming a concern.",
    hostileEffect: { dev: -2, mkt: -1 } // Withdraws data access and enterprise intros
  },
  
  growthVC: {
    name: "Highland",
    preferredDomains: ["marketing", "marketing", "dev", "hr"], // Growth & scaling focus
    preferredChoice: 0, // Wants aggressive/high-impact options
    advice: {
      marketing: [
        { text: "How much are you spending to win each customer, versus how much they pay you over time?", reason: "The maths has to work." },
        { text: "Have you tested paid advertising at scale yet?", reason: "Time to pour fuel on the fire." },
        { text: "Growth rate is everything at this stage.", reason: "10x or go home." }
      ],
      research: [
        { text: "R&D is fine, but does it help you grow faster?", reason: "Science doesn't compound like users do." },
        { text: "Can you patent this? Defensibility matters.", reason: "Patents protect you from copycats." }
      ],
      dev: [
        { text: "Move fast. You can fix things later.", reason: "Speed wins in competitive markets." },
        { text: "Does each user bring in more users? That's how you grow without spending.", reason: "Organic growth is the best growth." },
        { text: "Test everything. Compare versions. Data drives growth.", reason: "Intuition doesn't scale." }
      ],
      hr: [
        { text: "Hire ahead of growth, not behind.", reason: "Scaling breaks companies that aren't ready." },
        { text: "You need a growth hacker, not more engineers.", reason: "Different skills for different stages." }
      ]
    },
    followedReaction: "Now we're talking! That's the growth mindset. üìà",
    ignoredReaction: "Your company, your call. But growth waits for no one. üòê",
    hostileWarning: "I'm not seeing the trajectory we expected.",
    hostileEffect: { mkt: -3 } // Withdraws growth expertise
  },
  
  impactVC: {
    name: "Bethnal Green",
    preferredDomains: ["research", "hr", "research", "dev"], // Impact & ethics focus
    preferredChoice: 1, // Wants balanced/responsible options
    advice: {
      marketing: [
        { text: "Are we being authentic in our messaging?", reason: "Impact washing hurts everyone." },
        { text: "Let's lead with mission, not features.", reason: "People buy purpose." },
        { text: "Have you measured the social impact?", reason: "What gets measured gets done." }
      ],
      research: [
        { text: "This could genuinely help people. Prioritize it.", reason: "That's why we're all here." },
        { text: "Have you considered the ethical implications?", reason: "Responsible innovation matters." },
        { text: "Open-source some of this. Give back.", reason: "The ecosystem gave to you." }
      ],
      dev: [
        { text: "Accessibility should be built in, not bolted on.", reason: "Inclusive design is better design." },
        { text: "What's the environmental footprint?", reason: "Tech has a carbon cost." },
        { text: "Data privacy by design, please.", reason: "Trust is our most valuable asset." }
      ],
      hr: [
        { text: "Diversity isn't optional. It's essential.", reason: "Better teams build better products." },
        { text: "How's the work-life balance?", reason: "Burnout helps no one." },
        { text: "Pay equity audit soon?", reason: "Walk the talk on values." }
      ]
    },
    followedReaction: "This is what it's all about. Impact and integrity. üíö",
    ignoredReaction: "I hope you're keeping the mission in mind. üòê",
    hostileWarning: "We're concerned about mission drift.",
    hostileEffect: { hr: -2, sci: -1 } // Withdraws impact network and credibility
  }
};

// Group funders by stage for UI
const FUNDER_OPTIONS = {
  bootstrap: ["self"],
  angel: ["dragon", "techAngel", "operatorAngel"],
  vc: ["sectorVC", "tier1VC", "corporateVC"]
};

// Follow-on investors for each funding path
const FOLLOW_ON_INVESTORS = {
  // For bootstrapped founders - first outside money
  bootstrap: [
    {
      id: "fof_fff",
      name: "Friends & Family",
      title: "The People Who Believe In You",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
        <text x="40" y="45" text-anchor="middle" font-size="32">üë®üë©üëß</text>
        <text x="40" y="68" text-anchor="middle" font-size="7" fill="#92400e" font-weight="bold">F&F ROUND</text>
      </svg>`,
      baseCash: 80,
      baseDilution: 5,
      valMult: 1.15,
      personality: "We believe in you, not the spreadsheet. Don't let us down-we'll see you at Christmas.",
      bonus: {}
    },
    {
      id: "fof_microangel",
      name: "Dave Morrison",
      title: "Local Tech Entrepreneur",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
        <path d="M25 38 Q30 25 40 24 Q50 25 55 38" fill="#6b7280"/>
        <ellipse cx="40" cy="44" rx="12" ry="14" fill="#fcd9b6"/>
        <circle cx="35" cy="41" r="2" fill="#1e293b"/><circle cx="45" cy="41" r="2" fill="#1e293b"/>
        <path d="M35 50 Q40 53 45 50" stroke="#92400e" stroke-width="1.5" fill="none"/>
        <rect x="30" y="58" width="20" height="10" fill="#0ea5e9"/>
      </svg>`,
      baseCash: 120,
      baseDilution: 8,
      valMult: 1.2,
      personality: "I sold my agency for ¬£2M. I know the pain of early stage. Monthly mentoring included whether you want it or not.",
      bonus: { mkt: 1 }
    },
    {
      id: "fof_crowdfund",
      name: "Seedrs Campaign",
      title: "Equity Crowdfunding",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#dcfce7" stroke="#22c55e" stroke-width="2"/>
        <circle cx="25" cy="35" r="6" fill="#86efac"/><circle cx="40" cy="30" r="6" fill="#86efac"/>
        <circle cx="55" cy="35" r="6" fill="#86efac"/><circle cx="30" cy="48" r="6" fill="#86efac"/>
        <circle cx="50" cy="48" r="6" fill="#86efac"/><circle cx="40" cy="55" r="6" fill="#86efac"/>
        <text x="40" y="72" text-anchor="middle" font-size="7" fill="#15803d" font-weight="bold">CROWD</text>
      </svg>`,
      baseCash: 200,
      baseDilution: 12,
      valMult: 1.25,
      personality: "347 investors, 347 opinions. Great for PR, exhausting for admin. They'll all email you.",
      bonus: { mkt: 2, hr: -1 }
    }
  ],
  
  // For angel-backed founders - follow-on angels or first VCs
  angel: [
    {
      id: "fof_existing",
      name: "Pro-Rata Rights",
      title: "Your Existing Angels Follow On",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
        <text x="40" y="38" text-anchor="middle" font-size="24">üîÑ</text>
        <text x="40" y="55" text-anchor="middle" font-size="8" fill="#92400e">EXISTING</text>
        <text x="40" y="68" text-anchor="middle" font-size="7" fill="#92400e" font-weight="bold">INVESTORS</text>
      </svg>`,
      baseCash: 150,
      baseDilution: 8,
      valMult: 1.25,
      personality: "We're doubling down. Same terms, no new due diligence. Quick close.",
      bonus: {}
    },
    {
      id: "fof_superangel",
      name: "Niklas √ñstberg",
      title: "European Super Angel",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#ede9fe" stroke="#8b5cf6" stroke-width="2"/>
        <path d="M22 36 Q28 22 40 20 Q52 22 58 36" fill="#e5e7eb"/>
        <ellipse cx="40" cy="42" rx="14" ry="16" fill="#fcd9b6"/>
        <rect x="28" y="38" width="10" height="6" rx="1" fill="none" stroke="#4b5563" stroke-width="1.5"/>
        <rect x="42" y="38" width="10" height="6" rx="1" fill="none" stroke="#4b5563" stroke-width="1.5"/>
        <circle cx="33" cy="41" r="2" fill="#1e293b"/><circle cx="47" cy="41" r="2" fill="#1e293b"/>
        <path d="M35 52 Q40 55 45 52" stroke="#92400e" stroke-width="1.5" fill="none"/>
        <rect x="32" y="60" width="16" height="8" fill="#1e1b4b"/>
      </svg>`,
      baseCash: 350,
      baseDilution: 12,
      valMult: 1.35,
      personality: "I've backed 200 companies. I know pattern. You're either on track or you're not. I'll know in 10 minutes.",
      bonus: { mkt: 2 }
    },
    {
      id: "fof_seedvc",
      name: "Forward Partners",
      title: "Seed-Stage VC",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
        <path d="M25 25 L55 25 L55 55 L25 55 Z" fill="#2563eb"/>
        <path d="M30 35 L40 28 L50 35 L50 50 L30 50 Z" fill="white"/>
        <rect x="37" y="42" width="6" height="8" fill="#2563eb"/>
        <text x="40" y="70" text-anchor="middle" font-size="6" fill="#1e40af" font-weight="bold">FORWARD</text>
      </svg>`,
      baseCash: 500,
      baseDilution: 18,
      valMult: 1.45,
      personality: "We're seed specialists. We'll lead, set terms, and expect a board seat. This is your Series Seed.",
      bonus: { dev: 2, mkt: 1 }
    }
  ],
  
  // VC options unlocked after Milestone 1 (for bootstrap/angel paths)
  vc_unlocked: [
    {
      id: "fof_seedvc_hoxton",
      name: "Hoxton Ventures",
      title: "Seed-Stage VC",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
        <rect x="22" y="28" width="36" height="24" rx="3" fill="#db2777"/>
        <text x="40" y="45" text-anchor="middle" font-size="14" fill="white" font-weight="bold">HV</text>
        <text x="40" y="68" text-anchor="middle" font-size="6" fill="#9d174d" font-weight="bold">HOXTON</text>
      </svg>`,
      baseCash: 450,
      baseDilution: 15,
      valMult: 1.5,
      personality: "We back technical founders. Show us your engineering moat and we'll write the check.",
      bonus: { dev: 2, sci: 1 }
    },
    {
      id: "fof_seedvc_localglobe",
      name: "LocalGlobe",
      title: "London's Premier Seed Fund",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
        <circle cx="40" cy="40" r="18" fill="none" stroke="#2563eb" stroke-width="3"/>
        <circle cx="40" cy="40" r="10" fill="#2563eb"/>
        <circle cx="40" cy="40" r="4" fill="white"/>
        <text x="40" y="70" text-anchor="middle" font-size="5" fill="#1e40af" font-weight="bold">LOCALGLOBE</text>
      </svg>`,
      baseCash: 600,
      baseDilution: 18,
      valMult: 1.55,
      personality: "We've backed Transferwise, Zoopla, Citymapper. Our network is your network. But we expect London ambition.",
      bonus: { mkt: 3, hr: 1 }
    },
    {
      id: "fof_seedvc_notion",
      name: "Notion Capital",
      title: "B2B SaaS Specialists",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
        <rect x="25" y="30" width="30" height="20" rx="2" fill="#15803d"/>
        <text x="40" y="45" text-anchor="middle" font-size="12" fill="white" font-weight="bold">N</text>
        <text x="40" y="68" text-anchor="middle" font-size="6" fill="#166534" font-weight="bold">NOTION</text>
      </svg>`,
      baseCash: 550,
      baseDilution: 16,
      valMult: 1.45,
      personality: "Enterprise software is our game. If you're selling to businesses, we know every CTO in Europe.",
      bonus: { mkt: 2, dev: 2 }
    }
  ],
  
  // For VC-backed founders - Series A/B investors (now only available via follow-on)
  vc: [
    {
      id: "fof_insideround",
      name: "Inside Round",
      title: "Existing VCs Extend Runway",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#fee2e2" stroke="#ef4444" stroke-width="2"/>
        <text x="40" y="38" text-anchor="middle" font-size="24">üè†</text>
        <text x="40" y="55" text-anchor="middle" font-size="8" fill="#b91c1c">INSIDE</text>
        <text x="40" y="68" text-anchor="middle" font-size="7" fill="#b91c1c" font-weight="bold">ROUND</text>
      </svg>`,
      baseCash: 400,
      baseDilution: 12,
      valMult: 1.15,
      personality: "Flat round. We're protecting our position. No new investors means no new validation. Market will notice.",
      bonus: {}
    },
    {
      id: "fof_seriesa",
      name: "Northstar Capital",
      title: "Series A Leader",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#fce7f3" stroke="#ec4899" stroke-width="2"/>
        <rect x="22" y="25" width="36" height="30" rx="3" fill="#be185d"/>
        <text x="40" y="45" text-anchor="middle" font-size="18" fill="white" font-weight="bold">B</text>
        <text x="40" y="68" text-anchor="middle" font-size="6" fill="#9d174d" font-weight="bold">BALDERTON</text>
      </svg>`,
      baseCash: 800,
      baseDilution: 22,
      valMult: 1.6,
      personality: "We lead Series A in Europe. Our brand on your deck opens doors. We expect 3x growth year-over-year. Non-negotiable.",
      bonus: { mkt: 3, hr: 1 }
    },
    {
      id: "fof_growth",
      name: "Velocity Partners",
      title: "Growth Equity Giant",
      photo: `<svg viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
        <circle cx="40" cy="40" r="38" fill="#f0fdf4" stroke="#22c55e" stroke-width="2"/>
        <path d="M20 55 L35 40 L45 48 L60 25" stroke="#15803d" stroke-width="4" fill="none" stroke-linecap="round"/>
        <circle cx="60" cy="25" r="5" fill="#22c55e"/>
        <text x="40" y="70" text-anchor="middle" font-size="8" fill="#166534" font-weight="bold">ACCEL</text>
      </svg>`,
      baseCash: 1500,
      baseDilution: 28,
      valMult: 1.8,
      personality: "We've backed multiple unicorns in social, music, and enterprise. We write big checks for big outcomes. Go big or go home.",
      bonus: { mkt: 4, sci: 1, dev: 1 }
    }
  ]
};

const MILESTONES = {
  aether: {
    m1: [
      { 
        id: "m1_conservative", 
        name: "Core Algorithm Validation", 
        desc: "Validate our AI approach with reproducible in-vitro results. Low risk, solid foundation.",
        difficulty: "conservative",
        time: 6, 
        focus: ["sci"], 
        threshold: { sci: 35 },
        icon: "üî¨",
        reward: { cash: 75, val: 200 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m1_balanced", 
        name: "Peer-Reviewed Publication", 
        desc: "Publish breakthrough results in a respected journal. Builds credibility with investors and partners.",
        difficulty: "balanced",
        time: 5, 
        focus: ["sci", "dev"], 
        threshold: { sci: 40, dev: 30 },
        icon: "üìÑ",
        reward: { cash: 150, val: 450 },
        investorFit: ["seed", "angels"]
      },
      { 
        id: "m1_ambitious", 
        name: "public health system Research Partnership", 
        desc: "Secure a formal research partnership with an public health system trust. High visibility, tight timeline.",
        difficulty: "ambitious",
        time: 4, 
        focus: ["sci", "mkt"], 
        threshold: { sci: 45, mkt: 32 },
        icon: "üè•",
        reward: { cash: 300, val: 900 },
        investorFit: ["seriesA", "seed"]
      }
    ],
    m2: [
      { 
        id: "m2_conservative", 
        name: "Safety Study Complete", 
        desc: "Complete comprehensive safety and efficacy studies. Methodical path to regulatory approval.",
        difficulty: "conservative",
        time: 5, 
        focus: ["sci", "dev"], 
        threshold: { sci: 58, dev: 48 },
        icon: "üõ°",
        reward: { cash: 80, val: 300 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m2_balanced", 
        name: "MHRA Pre-Submission", 
        desc: "Complete MHRA pre-submission meeting with positive feedback. Clear regulatory pathway.",
        difficulty: "balanced",
        time: 4, 
        focus: ["sci", "dev", "mkt"], 
        threshold: { sci: 65, dev: 55, mkt: 42 },
        icon: "üìã",
        reward: { cash: 175, val: 550 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m2_ambitious", 
        name: "First Paying Customer", 
        desc: "Land our first paying healthcare customer. Revenue before full approval.",
        difficulty: "ambitious",
        time: 3, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 55, dev: 58, sci: 52 },
        icon: "üí∑",
        reward: { cash: 400, val: 1100 },
        investorFit: ["seriesA"]
      }
    ],
    m3: [
      { 
        id: "m3_conservative", 
        name: "Data Partnership Network", 
        desc: "Secure 3+ public health system data partnerships. Build moat through exclusive access.",
        difficulty: "conservative",
        time: 4, 
        focus: ["sci", "mkt"], 
        threshold: { sci: 78, mkt: 68, dev: 60 },
        icon: "üîó",
        reward: { cash: 100, val: 400 },
        investorFit: ["bootstrapped", "angels", "seed"]
      },
      { 
        id: "m3_balanced", 
        name: "Regulatory Approval", 
        desc: "Achieve full MHRA approval for our core product. Ready for scale.",
        difficulty: "balanced",
        time: 3, 
        focus: ["sci", "dev", "mkt"], 
        threshold: { sci: 85, dev: 75, mkt: 68, hr: 55 },
        icon: "‚úÖ",
        reward: { cash: 250, val: 750 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m3_ambitious", 
        name: "¬£1M ARR", 
        desc: "Hit ¬£1M annual recurring revenue. Prove the business model works.",
        difficulty: "ambitious",
        time: 2, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 82, dev: 80, sci: 75, hr: 60 },
        icon: "üöÄ",
        reward: { cash: 500, val: 1500 },
        investorFit: ["seriesA"]
      }
    ]
  },
  
  vanguard: {
    m1: [
      { 
        id: "m1_conservative", 
        name: "Working Prototype", 
        desc: "Build a functional robot prototype in controlled conditions. Prove the core technology.",
        difficulty: "conservative",
        time: 6, 
        focus: ["dev", "sci"], 
        threshold: { dev: 35, sci: 28 },
        icon: "ü§ñ",
        reward: { cash: 75, val: 200 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m1_balanced", 
        name: "Warehouse Pilot", 
        desc: "Deploy robots in a real warehouse environment. Prove it works outside the lab.",
        difficulty: "balanced",
        time: 5, 
        focus: ["dev", "mkt"], 
        threshold: { dev: 40, mkt: 32 },
        icon: "üè≠",
        reward: { cash: 150, val: 450 },
        investorFit: ["seed", "angels"]
      },
      { 
        id: "m1_ambitious", 
        name: "Multi-Site Deployment", 
        desc: "Operate successfully across 3+ customer sites. Prove scalability early.",
        difficulty: "ambitious",
        time: 4, 
        focus: ["dev", "mkt"], 
        threshold: { dev: 45, mkt: 38, sci: 28 },
        icon: "üåê",
        reward: { cash: 300, val: 900 },
        investorFit: ["seriesA", "seed"]
      }
    ],
    m2: [
      { 
        id: "m2_conservative", 
        name: "Safety Certification", 
        desc: "Achieve CE marking and safety certification. Essential for enterprise sales.",
        difficulty: "conservative",
        time: 5, 
        focus: ["dev", "hr"], 
        threshold: { dev: 58, hr: 52 },
        icon: "üõ°",
        reward: { cash: 80, val: 300 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m2_balanced", 
        name: "¬£500k Contract", 
        desc: "Land an enterprise contract worth ¬£500k+. Validate enterprise demand.",
        difficulty: "balanced",
        time: 4, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 58, dev: 55 },
        icon: "üìù",
        reward: { cash: 175, val: 550 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m2_ambitious", 
        name: "Major Logistics Partner", 
        desc: "Sign strategic partnership with a top-10 UK logistics company.",
        difficulty: "ambitious",
        time: 3, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 65, dev: 62, sci: 45 },
        icon: "ü§ù",
        reward: { cash: 400, val: 1100 },
        investorFit: ["seriesA"]
      }
    ],
    m3: [
      { 
        id: "m3_conservative", 
        name: "Unit Economics Positive", 
        desc: "Prove each robot deployment is profitable. Sustainable growth path.",
        difficulty: "conservative",
        time: 4, 
        focus: ["dev", "mkt"], 
        threshold: { dev: 78, mkt: 70, sci: 62 },
        icon: "üìä",
        reward: { cash: 100, val: 400 },
        investorFit: ["bootstrapped", "angels", "seed"]
      },
      { 
        id: "m3_balanced", 
        name: "¬£1M ARR", 
        desc: "Reach ¬£1M annual recurring revenue across multiple customers.",
        difficulty: "balanced",
        time: 3, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 80, dev: 78, sci: 68, hr: 55 },
        icon: "üí∞",
        reward: { cash: 250, val: 750 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m3_ambitious", 
        name: "Series B Ready", 
        desc: "Hit metrics that justify a ¬£20M+ Series B raise. Category leader positioning.",
        difficulty: "ambitious",
        time: 2, 
        focus: ["mkt", "dev", "sci"], 
        threshold: { mkt: 88, dev: 85, sci: 72, hr: 60 },
        icon: "üöÄ",
        reward: { cash: 500, val: 1500 },
        investorFit: ["seriesA"]
      }
    ]
  },
  
  quant: {
    m1: [
      { 
        id: "m1_conservative", 
        name: "Backtest Validation", 
        desc: "Build robust backtesting framework with verified performance. Foundation for credibility.",
        difficulty: "conservative",
        time: 6, 
        focus: ["sci", "dev"], 
        threshold: { sci: 35, dev: 28 },
        icon: "üìä",
        reward: { cash: 75, val: 200 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m1_balanced", 
        name: "Financial Regulatory Authority Sandbox Approval", 
        desc: "Gain approval to operate in Financial Regulatory Authority regulatory sandbox. Path to live trading.",
        difficulty: "balanced",
        time: 5, 
        focus: ["sci", "dev", "mkt"], 
        threshold: { sci: 40, dev: 35, mkt: 28 },
        icon: "üèõ",
        reward: { cash: 150, val: 450 },
        investorFit: ["seed", "angels"]
      },
      { 
        id: "m1_ambitious", 
        name: "Live Trading Pilot", 
        desc: "Go live with real money on limited book. Prove it works in production.",
        difficulty: "ambitious",
        time: 4, 
        focus: ["dev", "sci"], 
        threshold: { dev: 45, sci: 42, mkt: 25 },
        icon: "üìà",
        reward: { cash: 300, val: 900 },
        investorFit: ["seriesA", "seed"]
      }
    ],
    m2: [
      { 
        id: "m2_conservative", 
        name: "First Fund Partnership", 
        desc: "Sign partnership agreement with a hedge fund or asset manager.",
        difficulty: "conservative",
        time: 5, 
        focus: ["mkt", "sci"], 
        threshold: { mkt: 55, sci: 55 },
        icon: "ü§ù",
        reward: { cash: 80, val: 300 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m2_balanced", 
        name: "¬£100M AUM", 
        desc: "Reach ¬£100M assets under management or advisory. Meaningful scale.",
        difficulty: "balanced",
        time: 4, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 62, dev: 58 },
        icon: "üí∞",
        reward: { cash: 175, val: 550 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m2_ambitious", 
        name: "Major Bank Integration", 
        desc: "Integrate with a top-tier investment bank's trading infrastructure.",
        difficulty: "ambitious",
        time: 3, 
        focus: ["dev", "mkt", "sci"], 
        threshold: { dev: 68, mkt: 58, sci: 55 },
        icon: "üè¶",
        reward: { cash: 400, val: 1100 },
        investorFit: ["seriesA"]
      }
    ],
    m3: [
      { 
        id: "m3_conservative", 
        name: "Full Regulatory Compliance", 
        desc: "Achieve full Financial Regulatory Authority authorization. No more sandbox limitations.",
        difficulty: "conservative",
        time: 4, 
        focus: ["dev", "sci", "hr"], 
        threshold: { dev: 76, sci: 72, hr: 62, mkt: 58 },
        icon: "‚úÖ",
        reward: { cash: 100, val: 400 },
        investorFit: ["bootstrapped", "angels", "seed"]
      },
      { 
        id: "m3_balanced", 
        name: "¬£500M AUM", 
        desc: "Scale to ¬£500M assets under management. Serious player status.",
        difficulty: "balanced",
        time: 3, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 82, dev: 78, sci: 70, hr: 58 },
        icon: "üìà",
        reward: { cash: 250, val: 750 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m3_ambitious", 
        name: "Acquisition Target", 
        desc: "Become an attractive acquisition target for major financial institutions.",
        difficulty: "ambitious",
        time: 2, 
        focus: ["mkt", "dev", "sci"], 
        threshold: { mkt: 90, dev: 85, sci: 78, hr: 65 },
        icon: "üéØ",
        reward: { cash: 500, val: 1500 },
        investorFit: ["seriesA"]
      }
    ]
  },
  
  dream: {
    m1: [
      { 
        id: "m1_conservative", 
        name: "Private Beta Launch", 
        desc: "Launch with 50+ hand-picked creators. Iterate based on real feedback.",
        difficulty: "conservative",
        time: 6, 
        focus: ["dev"], 
        threshold: { dev: 35 },
        icon: "üß™",
        reward: { cash: 75, val: 200 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m1_balanced", 
        name: "10k Active Users", 
        desc: "Reach 10,000 monthly active users. Prove product-market fit.",
        difficulty: "balanced",
        time: 5, 
        focus: ["dev", "mkt"], 
        threshold: { dev: 40, mkt: 35 },
        icon: "üë•",
        reward: { cash: 150, val: 450 },
        investorFit: ["seed", "angels"]
      },
      { 
        id: "m1_ambitious", 
        name: "Viral Growth (100k Users)", 
        desc: "Explosive growth to 100k users. Social proof and FOMO.",
        difficulty: "ambitious",
        time: 4, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 45, dev: 40 },
        icon: "üî•",
        reward: { cash: 300, val: 900 },
        investorFit: ["seriesA", "seed"]
      }
    ],
    m2: [
      { 
        id: "m2_conservative", 
        name: "Monetization Model Live", 
        desc: "Launch paid tier with first paying subscribers. Revenue before scale.",
        difficulty: "conservative",
        time: 5, 
        focus: ["dev", "mkt"], 
        threshold: { dev: 58, mkt: 52 },
        icon: "üí≥",
        reward: { cash: 80, val: 300 },
        investorFit: ["bootstrapped", "angels"]
      },
      { 
        id: "m2_balanced", 
        name: "First Brand Partnership", 
        desc: "Sign a ¬£100k+ brand or enterprise deal. B2B revenue stream.",
        difficulty: "balanced",
        time: 4, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 62, dev: 55 },
        icon: "ü§ù",
        reward: { cash: 175, val: 550 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m2_ambitious", 
        name: "Platform Integration", 
        desc: "Integrate with major platform (PixelForge, Helix Social, QuickVid). Distribution unlock.",
        difficulty: "ambitious",
        time: 3, 
        focus: ["dev", "mkt"], 
        threshold: { dev: 68, mkt: 62, sci: 42 },
        icon: "üîå",
        reward: { cash: 400, val: 1100 },
        investorFit: ["seriesA"]
      }
    ],
    m3: [
      { 
        id: "m3_conservative", 
        name: "Sustainable Unit Economics", 
        desc: "CAC:LTV ratio proves business model. Path to profitability.",
        difficulty: "conservative",
        time: 4, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 75, dev: 72, hr: 60 },
        icon: "üìä",
        reward: { cash: 100, val: 400 },
        investorFit: ["bootstrapped", "angels", "seed"]
      },
      { 
        id: "m3_balanced", 
        name: "¬£1M ARR", 
        desc: "Hit ¬£1M annual recurring revenue. Real SaaS business.",
        difficulty: "balanced",
        time: 3, 
        focus: ["mkt", "dev"], 
        threshold: { mkt: 82, dev: 78, sci: 65, hr: 58 },
        icon: "üí∞",
        reward: { cash: 250, val: 750 },
        investorFit: ["seed", "seriesA"]
      },
      { 
        id: "m3_ambitious", 
        name: "Category Leader", 
        desc: "Become the #1 player in our niche. Press, users, and mindshare.",
        difficulty: "ambitious",
        time: 2, 
        focus: ["mkt", "dev", "sci"], 
        threshold: { mkt: 90, dev: 82, sci: 70, hr: 62 },
        icon: "üëë",
        reward: { cash: 500, val: 1500 },
        investorFit: ["seriesA"]
      }
    ]
  },
  cyber: {
    m1: [
      { id: "m1_conservative", name: "Threat Detection Prototype", desc: "Build working threat detection system with measurable accuracy.", difficulty: "conservative", time: 6, focus: ["dev"], threshold: { dev: 35 }, icon: "üîç", reward: { cash: 75, val: 200 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m1_balanced", name: "Security Certification", desc: "Achieve Cyber Essentials Plus and begin NCSC engagement.", difficulty: "balanced", time: 5, focus: ["dev", "sci"], threshold: { dev: 40, sci: 30 }, icon: "‚úÖ", reward: { cash: 150, val: 450 }, investorFit: ["seed", "angels"] },
      { id: "m1_ambitious", name: "Government Pilot", desc: "Secure pilot with a government department or critical infrastructure provider.", difficulty: "ambitious", time: 4, focus: ["mkt", "dev"], threshold: { mkt: 40, dev: 38 }, icon: "üèõ", reward: { cash: 300, val: 900 }, investorFit: ["seriesA", "seed"] }
    ],
    m2: [
      { id: "m2_conservative", name: "Enterprise Customer", desc: "Sign first paying enterprise customer with annual contract.", difficulty: "conservative", time: 5, focus: ["mkt"], threshold: { mkt: 55, dev: 50 }, icon: "ü§ù", reward: { cash: 100, val: 300 }, investorFit: ["seed", "angels"] },
      { id: "m2_balanced", name: "SOC Integration", desc: "Integrate with major SIEM/SOC platforms.", difficulty: "balanced", time: 4, focus: ["dev", "mkt"], threshold: { dev: 60, mkt: 55 }, icon: "üîó", reward: { cash: 200, val: 600 }, investorFit: ["seriesA", "seed"] },
      { id: "m2_ambitious", name: "NCSC Approved", desc: "Achieve NCSC assured product status.", difficulty: "ambitious", time: 3, focus: ["sci", "dev", "mkt"], threshold: { sci: 55, dev: 62, mkt: 50 }, icon: "üõ°", reward: { cash: 400, val: 1200 }, investorFit: ["seriesA"] }
    ],
    m3: [
      { id: "m3_conservative", name: "Profitable Operations", desc: "Achieve profitability with sustainable enterprise revenue.", difficulty: "conservative", time: 4, focus: ["mkt", "hr"], threshold: { mkt: 72, dev: 68, hr: 55 }, icon: "üìà", reward: { cash: 150, val: 450 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m3_balanced", name: "Critical Infrastructure", desc: "Protect multiple critical national infrastructure providers.", difficulty: "balanced", time: 3, focus: ["mkt", "dev"], threshold: { mkt: 82, dev: 78, sci: 65, hr: 58 }, icon: "‚ö°", reward: { cash: 250, val: 750 }, investorFit: ["seed", "seriesA"] },
      { id: "m3_ambitious", name: "National Security Partner", desc: "Strategic partnership with National Cyber Agency or major defence contractor.", difficulty: "ambitious", time: 2, focus: ["mkt", "sci"], threshold: { mkt: 90, sci: 75, dev: 72, hr: 62 }, icon: "üéñ", reward: { cash: 500, val: 1500 }, investorFit: ["seriesA"] }
    ]
  },
  terra: {
    m1: [
      { id: "m1_conservative", name: "Climate Model Validation", desc: "Validate predictions against historical data.", difficulty: "conservative", time: 6, focus: ["sci"], threshold: { sci: 35 }, icon: "üå°", reward: { cash: 75, val: 200 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m1_balanced", name: "Research Partnership", desc: "Partner with Met Office or environmental agency.", difficulty: "balanced", time: 5, focus: ["sci", "mkt"], threshold: { sci: 40, mkt: 30 }, icon: "ü§ù", reward: { cash: 150, val: 450 }, investorFit: ["seed", "angels"] },
      { id: "m1_ambitious", name: "Corporate Pilot", desc: "Pilot with major energy company or insurer.", difficulty: "ambitious", time: 4, focus: ["mkt", "dev"], threshold: { mkt: 42, dev: 35 }, icon: "üè¢", reward: { cash: 300, val: 900 }, investorFit: ["seriesA", "seed"] }
    ],
    m2: [
      { id: "m2_conservative", name: "B Corp Certification", desc: "Achieve B Corp status.", difficulty: "conservative", time: 5, focus: ["hr", "mkt"], threshold: { hr: 50, mkt: 48 }, icon: "üå±", reward: { cash: 100, val: 300 }, investorFit: ["seed", "angels"] },
      { id: "m2_balanced", name: "Net Zero Platform", desc: "Launch platform helping companies reduce emissions.", difficulty: "balanced", time: 4, focus: ["dev", "mkt"], threshold: { dev: 60, mkt: 55 }, icon: "üìä", reward: { cash: 200, val: 600 }, investorFit: ["seriesA", "seed"] },
      { id: "m2_ambitious", name: "Government Contract", desc: "Win contract with DEFRA or Environment Agency.", difficulty: "ambitious", time: 3, focus: ["mkt", "sci"], threshold: { mkt: 62, sci: 58, dev: 52 }, icon: "üèõ", reward: { cash: 400, val: 1200 }, investorFit: ["seriesA"] }
    ],
    m3: [
      { id: "m3_conservative", name: "Impact Verified", desc: "Third-party verification of environmental impact.", difficulty: "conservative", time: 4, focus: ["sci", "mkt"], threshold: { sci: 70, mkt: 68, hr: 55 }, icon: "‚úÖ", reward: { cash: 150, val: 450 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m3_balanced", name: "Industry Standard", desc: "Platform becomes standard for carbon accounting.", difficulty: "balanced", time: 3, focus: ["mkt", "dev"], threshold: { mkt: 82, dev: 75, sci: 68, hr: 58 }, icon: "üåç", reward: { cash: 250, val: 750 }, investorFit: ["seed", "seriesA"] },
      { id: "m3_ambitious", name: "Climate Leader", desc: "Recognised as UK's leading climate tech platform.", difficulty: "ambitious", time: 2, focus: ["mkt", "sci"], threshold: { mkt: 90, sci: 78, dev: 72, hr: 62 }, icon: "üèÜ", reward: { cash: 500, val: 1500 }, investorFit: ["seriesA"] }
    ]
  },
  legal: {
    m1: [
      { id: "m1_conservative", name: "Contract Analysis MVP", desc: "Working system that reviews standard contracts.", difficulty: "conservative", time: 6, focus: ["dev"], threshold: { dev: 35 }, icon: "üìÑ", reward: { cash: 75, val: 200 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m1_balanced", name: "Law Firm Pilot", desc: "Pilot deployment with mid-tier law firm.", difficulty: "balanced", time: 5, focus: ["dev", "mkt"], threshold: { dev: 40, mkt: 32 }, icon: "‚öñ", reward: { cash: 150, val: 450 }, investorFit: ["seed", "angels"] },
      { id: "m1_ambitious", name: "Magic Circle Interest", desc: "Formal evaluation by Magic Circle firm.", difficulty: "ambitious", time: 4, focus: ["mkt", "sci"], threshold: { mkt: 45, sci: 35 }, icon: "‚ú®", reward: { cash: 300, val: 900 }, investorFit: ["seriesA", "seed"] }
    ],
    m2: [
      { id: "m2_conservative", name: "Accuracy Benchmark", desc: "Publish accuracy benchmarks beating manual review.", difficulty: "conservative", time: 5, focus: ["sci", "dev"], threshold: { sci: 52, dev: 50 }, icon: "üìä", reward: { cash: 100, val: 300 }, investorFit: ["seed", "angels"] },
      { id: "m2_balanced", name: "In-House Adoption", desc: "Deploy with FTSE 250 in-house legal team.", difficulty: "balanced", time: 4, focus: ["mkt", "dev"], threshold: { mkt: 60, dev: 55 }, icon: "üè¢", reward: { cash: 200, val: 600 }, investorFit: ["seriesA", "seed"] },
      { id: "m2_ambitious", name: "Strategic Partnership", desc: "Partnership with major legal tech or Big 4.", difficulty: "ambitious", time: 3, focus: ["mkt", "dev"], threshold: { mkt: 65, dev: 60, sci: 50 }, icon: "ü§ù", reward: { cash: 400, val: 1200 }, investorFit: ["seriesA"] }
    ],
    m3: [
      { id: "m3_conservative", name: "Profitable Growth", desc: "Sustainable revenue with expanding client base.", difficulty: "conservative", time: 4, focus: ["mkt", "hr"], threshold: { mkt: 75, dev: 68, hr: 55 }, icon: "üìà", reward: { cash: 150, val: 450 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m3_balanced", name: "Market Expansion", desc: "Expand beyond contracts into broader legal workflow.", difficulty: "balanced", time: 3, focus: ["dev", "mkt"], threshold: { dev: 80, mkt: 78, sci: 65, hr: 58 }, icon: "üöÄ", reward: { cash: 250, val: 750 }, investorFit: ["seed", "seriesA"] },
      { id: "m3_ambitious", name: "Industry Transformer", desc: "Fundamentally change how law firms operate.", difficulty: "ambitious", time: 2, focus: ["mkt", "dev", "sci"], threshold: { mkt: 90, dev: 82, sci: 70, hr: 62 }, icon: "‚ö°", reward: { cash: 500, val: 1500 }, investorFit: ["seriesA"] }
    ]
  },
  edu: {
    m1: [
      { id: "m1_conservative", name: "Learning Efficacy Study", desc: "Controlled study showing learning improvements.", difficulty: "conservative", time: 6, focus: ["sci"], threshold: { sci: 35 }, icon: "üìö", reward: { cash: 75, val: 200 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m1_balanced", name: "School Pilot", desc: "Pilot in multiple schools with teacher feedback.", difficulty: "balanced", time: 5, focus: ["dev", "mkt"], threshold: { dev: 38, mkt: 32 }, icon: "üè´", reward: { cash: 150, val: 450 }, investorFit: ["seed", "angels"] },
      { id: "m1_ambitious", name: "MAT Partnership", desc: "Partnership with Multi-Academy Trust.", difficulty: "ambitious", time: 4, focus: ["mkt", "dev"], threshold: { mkt: 45, dev: 38 }, icon: "ü§ù", reward: { cash: 300, val: 900 }, investorFit: ["seriesA", "seed"] }
    ],
    m2: [
      { id: "m2_conservative", name: "Curriculum Alignment", desc: "Full alignment with National Curriculum.", difficulty: "conservative", time: 5, focus: ["sci", "dev"], threshold: { sci: 50, dev: 48 }, icon: "‚úÖ", reward: { cash: 100, val: 300 }, investorFit: ["seed", "angels"] },
      { id: "m2_balanced", name: "10,000 Students", desc: "Platform used by 10,000+ students weekly.", difficulty: "balanced", time: 4, focus: ["mkt", "dev"], threshold: { mkt: 58, dev: 55 }, icon: "üë•", reward: { cash: 200, val: 600 }, investorFit: ["seriesA", "seed"] },
      { id: "m2_ambitious", name: "DfE Recognition", desc: "Featured as exemplar by Department for Education.", difficulty: "ambitious", time: 3, focus: ["mkt", "sci"], threshold: { mkt: 65, sci: 58, dev: 52 }, icon: "üèõ", reward: { cash: 400, val: 1200 }, investorFit: ["seriesA"] }
    ],
    m3: [
      { id: "m3_conservative", name: "Sustainable Schools", desc: "Recurring revenue from loyal school customers.", difficulty: "conservative", time: 4, focus: ["mkt", "hr"], threshold: { mkt: 72, dev: 68, hr: 55 }, icon: "üíö", reward: { cash: 150, val: 450 }, investorFit: ["bootstrapped", "angels"] },
      { id: "m3_balanced", name: "National Rollout", desc: "Available in 1,000+ schools across UK.", difficulty: "balanced", time: 3, focus: ["mkt", "dev"], threshold: { mkt: 82, dev: 75, sci: 65, hr: 58 }, icon: "üá¨üáß", reward: { cash: 250, val: 750 }, investorFit: ["seed", "seriesA"] },
      { id: "m3_ambitious", name: "Education Revolution", desc: "Transforming how a generation learns.", difficulty: "ambitious", time: 2, focus: ["mkt", "sci", "dev"], threshold: { mkt: 90, sci: 75, dev: 78, hr: 62 }, icon: "üåü", reward: { cash: 500, val: 1500 }, investorFit: ["seriesA"] }
    ]
  }
};

// ===== EXECUTIVES - Full details with equity & vesting =====

const EXECUTIVES = {
  research: [
    {
      id: "fatima",
      name: "Dr. Fatima Al-Rashid",
      title: "The Rigorous Scientist",
      avatar: getAvatar("fatima-alrashid-uk"),
      origin: "British-Iraqi ¬∑ Manchester",
      background: "PhD Imperial, postdoc at the Crick Institute. 40+ papers published. Won't compromise on methodology.",
      personality: "Methodical, cautious, mentors well",
      wage: 35,
      equity: 2.5,
      vestingYears: 4,
      cliff: 1,
      bonus: { sci: 4, dev: 1, hr: 1 },
      quote: "Extraordinary claims require extraordinary evidence."
    },
    {
      id: "yuki",
      name: "Dr. Yuki Tanaka",
      title: "The Collaborator",
      avatar: getAvatar("yuki-tanaka-jp"),
      origin: "Japanese ¬∑ Cambridge PhD",
      background: "Formerly RIKEN. Builds bridges between UK, Japan, and Singapore research networks. Patient consensus-builder.",
      personality: "Collaborative, cross-cultural, patient",
      wage: 32,
      equity: 2.0,
      vestingYears: 4,
      cliff: 1,
      bonus: { sci: 3, dev: 2 },
      quote: "The best science happens when we work together."
    },
    {
      id: "kwame",
      name: "Prof. Kwame Mensah",
      title: "The Visionary",
      avatar: getAvatar("kwame-mensah-gh"),
      origin: "British-Ghanaian ¬∑ South London",
      background: "Ex-CortexAI. Chases breakthroughs. Inspirational but sometimes overreaches. Impatient with incrementalism.",
      personality: "Ambitious, bold, inspirational",
      wage: 38,
      equity: 3.5,
      vestingYears: 3,
      cliff: 1,
      bonus: { sci: 5, mkt: 1, hr: -1 },
      quote: "We're not here to make small improvements."
    }
  ],
  dev: [
    {
      id: "aoife",
      name: "Aoife Murphy",
      title: "The Architect",
      avatar: getAvatar("aoife-murphy-ie"),
      origin: "Irish ¬∑ Trinity College Dublin",
      background: "Built platforms at major music streaming and challenger bank startups. Allergic to technical debt. Does things properly or not at all.",
      personality: "Systematic, thorough, quality-obsessed",
      wage: 38,
      equity: 3.0,
      vestingYears: 4,
      cliff: 1,
      bonus: { dev: 4, mkt: 1, hr: 1 },
      quote: "There's fast, and there's fast in six months."
    },
    {
      id: "raj",
      name: "Raj Patel",
      title: "The Pragmatist",
      avatar: getAvatar("raj-patel-uk"),
      origin: "British-Indian ¬∑ Leicester",
      background: "Serial startup CTO. Three exits. Knows when to ship imperfect code and when to hold. Battle-tested.",
      personality: "Pragmatic, commercial, ships fast",
      wage: 36,
      equity: 3.5,
      vestingYears: 3,
      cliff: 1,
      bonus: { dev: 3, mkt: 2, hr: -1 },
      quote: "Done is better than perfect, but broken helps no one."
    },
    {
      id: "wei",
      name: "Wei Chen",
      title: "The Team Builder",
      avatar: getAvatar("wei-chen-cn"),
      origin: "Chinese ¬∑ Edinburgh",
      background: "Led engineering at a unicorn. Believes happy engineers build better software. Sustainable pace advocate.",
      personality: "People-focused, sustainable, culture-first",
      wage: 34,
      equity: 2.5,
      vestingYears: 4,
      cliff: 1,
      bonus: { dev: 3, hr: 2 },
      quote: "Happy engineers build better software. It's not complicated."
    }
  ],
  marketing: [
    {
      id: "priya",
      name: "Priya Sharma",
      title: "The Dealmaker",
      avatar: getAvatar("priya-sharma-uk"),
      origin: "British-Indian ¬∑ Birmingham",
      background: "Enterprise sales at major CRM and database companies. Knows everyone in UK healthcare IT. Relationship-driven closer.",
      personality: "Persistent, networked, closes deals",
      wage: 34,
      equity: 3.0,
      vestingYears: 3,
      cliff: 1,
      bonus: { mkt: 4 },
      quote: "Relationships take years to build and seconds to lose."
    },
    {
      id: "marcus",
      name: "Marcus Thompson",
      title: "The Growth Engineer",
      avatar: getAvatar("marcus-thompson-uk"),
      origin: "Black British ¬∑ Brixton, LSE",
      background: "Grew two D2C brands from zero to eight figures. Data-obsessed. Skeptical of anything you can't measure.",
      personality: "Analytical, experimental, metrics-driven",
      wage: 32,
      equity: 2.5,
      vestingYears: 4,
      cliff: 1,
      bonus: { mkt: 3, dev: 1 },
      quote: "If you can't measure it, you're just guessing."
    },
    {
      id: "emma",
      name: "Emma Bergstr√∂m",
      title: "The Brand Strategist",
      avatar: getAvatar("emma-bergstrom-se"),
      origin: "Swedish ¬∑ 10 years in London",
      background: "Built brands at Oatly and innocent drinks. Long-term thinker. Protects brand integrity fiercely.",
      personality: "Strategic, story-driven, patient",
      wage: 33,
      equity: 2.0,
      vestingYears: 4,
      cliff: 1,
      bonus: { mkt: 3, sci: 1, hr: 1 },
      quote: "A brand is a promise. Break it once, and you're done."
    }
  ]
};

const HR_EXECS = [
  {
    id: "david",
    name: "David Okonkwo",
    title: "The Process Builder",
    avatar: getAvatar("david-okonkwo-ng"),
    origin: "British-Nigerian ¬∑ Leeds",
    background: "HR director at two scale-ups. Knows employment law inside out. Fair but firm.",
    personality: "Methodical, protective, policy-focused",
    wage: 28,
    equity: 1.5,
    vestingYears: 4,
    cliff: 1,
    bonus: { hr: 5, mkt: 1 },
    quote: "Good process protects everyone-company and people."
  },
  {
    id: "sofia",
    name: "Sofia Rodriguez",
    title: "The Culture Champion",
    avatar: getAvatar("sofia-rodriguez-es"),
    origin: "Spanish ¬∑ 12 years in UK",
    background: "Built people functions that actually retained talent. Values-driven. Fights for the team.",
    personality: "Empathetic, values-driven, inclusive",
    wage: 29,
    equity: 1.5,
    vestingYears: 4,
    cliff: 1,
    bonus: { hr: 4, dev: 1 },
    quote: "Culture isn't ping pong tables. It's how you treat people when it's hard."
  },
  {
    id: "aisha",
    name: "Aisha Khan",
    title: "The Talent Magnet",
    avatar: getAvatar("aisha-khan-pk"),
    origin: "British-Pakistani ¬∑ London",
    background: "Recruited for top tech companies and unicorns. Knows where all the best people are. Competitive.",
    personality: "Networked, competitive, talent-obsessed",
    wage: 30,
    equity: 2.0,
    vestingYears: 3,
    cliff: 1,
    bonus: { hr: 4, sci: 1 },
    quote: "In AI, your team is your moat. Let me build you an army."
  }
];

// ===== COMPREHENSIVE UK/AI CHARACTER-VOICED EVENTS =====
// Each exec has 8 events matching their personality and UK AI context

const CHAR_EVENTS = {
  research: {
    // DR. FATIMA AL-RASHID - The Rigorous Scientist
    fatima: [
      {
        intro: "We have preliminary results on the protein binding work. They're promising, but I want to run three more validation experiments before we tell anyone.",
        aside: "I've seen careers destroyed by premature claims. Extraordinary claims require extraordinary evidence.",
        choices: [
          { text: "Run the full validation suite", reaction: "Thank you. This is how real science works.", emoji: "üòä", ap: 4, cost: 35, eff: { sci: 5, mkt: 1 }, mood: 2 },
          { text: "One more experiment, then share", reaction: "A compromise I can accept.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 4, dev: 1 }, mood: 0 },
          { text: "Data's good enough-move forward", reaction: "I want my concerns formally noted.", emoji: "üòü", ap: 1, cost: 10, eff: { sci: 2, mkt: 2 }, mood: -2 }
        ]
      },
      {
        intro: "A Russell Group lab wants to co-supervise a PhD student with us. It requires commitment but builds academic credibility.",
        aside: "This student could become a future hire. The PI has excellent public health system connections.",
        choices: [
          { text: "Fully fund and integrate the PhD", reaction: "I'll ensure proper supervision.", emoji: "üòä", ap: 5, cost: 40, eff: { sci: 6, dev: 2 }, mood: 2 },
          { text: "Support with data and mentoring", reaction: "We can contribute without overcommitting.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 3, dev: 1 }, mood: 0 },
          { text: "Decline-stay focused internally", reaction: "Focus pays off. Internal projects advance.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "The MHRA has offered a pre-submission meeting about our regulatory pathway. This could shape our approach for years.",
        aside: "Getting regulatory clarity early saves years of mistakes. I've seen companies fail by not asking these questions.",
        choices: [
          { text: "Prepare extensively, send senior team", reaction: "I'll coordinate the dossier personally.", emoji: "üòä", ap: 4, cost: 20, eff: { sci: 3, dev: 2, mkt: 2 }, mood: 2 },
          { text: "Attend with standard materials", reaction: "We might leave questions unanswered.", emoji: "üòê", ap: 2, cost: 10, eff: { sci: 2, mkt: 1 }, mood: 0 },
          { text: "Postpone until we have more data", reaction: "Cautious approach pays off.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 2 }, mood: 0 }
        ]
      },
      {
        intro: "A UK rare disease charity wants to partner using their patient registry. Unique data, but complex governance.",
        aside: "Real patient data could differentiate our research. But these are vulnerable populations-we must do this right.",
        choices: [
          { text: "Build formal partnership with ethics board", reaction: "This is how biotech should work with patients.", emoji: "üòä", ap: 4, cost: 30, eff: { sci: 4, mkt: 2, hr: 2 }, mood: 2 },
          { text: "Accept limited data for pilot", reaction: "Test hypotheses without full governance.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 3, mkt: 1 }, mood: 0 },
          { text: "Decline-too complex now", reaction: "Stay lean. Avoid scope creep.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "UKRI has opened a relevant funding call. We could lead a bid with university partners-tight deadline though.",
        aside: "Government grants bring credibility and non-dilutive funding. The overhead is real, but so is the runway.",
        choices: [
          { text: "Lead a full bid with partners", reaction: "I know the process. Let me coordinate.", emoji: "üòä", ap: 4, cost: 30, eff: { sci: 3, mkt: 2, cash: 120 }, mood: 2 },
          { text: "Support a university-led bid", reaction: "Lower effort, shared credit.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2, mkt: 1, cash: 60 }, mood: 0 },
          { text: "Skip this funding round", reaction: "Save energy for the right opportunity.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our research lead wants to publish a paper about our work. The product team thinks keeping our methods secret is what protects us from competitors. This disagreement needs resolving.",
        aside: "Publication builds credibility and helps recruiting. But there are legitimate IP concerns.",
        choices: [
          { text: "Publish with clear IP boundaries", reaction: "We can protect what matters while contributing.", emoji: "üòä", ap: 4, cost: 20, eff: { sci: 4, mkt: 2 }, mood: 2 },
          { text: "Internal report only", reaction: "We document but miss external signal.", emoji: "üòê", ap: 2, cost: 10, eff: { sci: 2, dev: 1 }, mood: 0 },
          { text: "Pause publication-ship first", reaction: "Product focus keeps us competitive.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "A government AI safety roundtable invites us to present concrete failures and mitigations.",
        aside: "Showing vulnerability builds trust. We'd be 'the ones who brought evidence' rather than polished spin.",
        choices: [
          { text: "Bring real red-team data", reaction: "This builds trust with regulators.", emoji: "üòä", ap: 2, cost: 15, eff: { sci: 3, mkt: 2 }, mood: 2 },
          { text: "Share polished talking points", reaction: "Safe, but we earn little.", emoji: "üòê", ap: 2, cost: 10, eff: { mkt: 1 }, mood: 0 },
          { text: "Submit written response only", reaction: "Our position is on record. Efficient approach.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A London biomedical campus invites us to their seminar series on AI in molecular design.",
        aside: "Regular presence builds relationships. We'd become 'the AI people' on campus.",
        choices: [
          { text: "Commit to regular slot, co-organise", reaction: "We'll get early sight of interesting projects.", emoji: "üòä", ap: 4, cost: 20, eff: { sci: 3, dev: 1, mkt: 1 }, mood: 2 },
          { text: "Give a one-off flagship talk", reaction: "Impact without ongoing commitment.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, mkt: 1 }, mood: 0 },
          { text: "Decline-no bandwidth", reaction: "Focus on priorities. Team stays productive.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've made a genuine breakthrough. Now we face a choice: file for a patent to protect it, or publish in a top journal for academic credibility. The catch is timing-once we publish, we lose the right to patent in most countries. But the patent process is slow and expensive.",
        aside: "Patents give us 20 years of exclusive rights to commercialise. Publications give us citations and reputation. In an ideal world we'd do both, but the clock is ticking.",
        choices: [
          { text: "File the patent first, then publish", reaction: "Smart. We protect the commercial value and still get the paper.", emoji: "üòä", ap: 4, cost: 40, eff: { sci: 4, mkt: 3, dev: 2 }, mood: 2 },
          { text: "Publish quickly for academic impact", reaction: "The citations will come. But competitors can now use this freely.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 5, mkt: 1 }, mood: 1 },
          { text: "Keep it as a trade secret for now", reaction: "Protect our edge. Competitors stay guessing.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our patent lawyer has flagged a problem: a large tech company holds patents that might cover techniques we're using. We need to do a 'freedom to operate' analysis-basically checking whether our product might infringe their patents. It's expensive but could save us from a lawsuit later.",
        aside: "Patent disputes can destroy startups. Big companies sometimes use patent threats to eliminate competitors or force acquisitions at low prices. Better to know where we stand.",
        choices: [
          { text: "Full freedom-to-operate analysis", reaction: "Expensive but we'll sleep better. And investors will want to see this.", emoji: "üòä", ap: 3, cost: 45, eff: { sci: 2, mkt: 2, dev: 1 }, mood: 2 },
          { text: "Quick review of the obvious risks", reaction: "Covers the basics. Some uncertainty remains.", emoji: "üôÇ", ap: 2, cost: 20, eff: { sci: 1, mkt: 1 }, mood: 0 },
          { text: "Proceed and deal with issues if they arise", reaction: "Move fast, stay agile.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A university where one of our team used to work is claiming they own some of our intellectual property. They say the early research was done using their facilities and funding, so they have rights to it. Our lawyer thinks we have a strong case, but fighting it will be costly and distracting.",
        aside: "IP ownership disputes are common when founders come from academia. Most universities have policies about what they own, but the boundaries can be fuzzy.",
        choices: [
          { text: "Negotiate a licence agreement", reaction: "Pay them something reasonable and move on. Business is about picking battles.", emoji: "üòä", ap: 3, cost: 35, eff: { sci: 2, mkt: 1, cash: -30 }, mood: 1 },
          { text: "Fight it-we're in the right", reaction: "Could take years and cost a fortune. But principles matter.", emoji: "üòê", ap: 4, cost: 50, eff: { sci: 1, mkt: -1, cash: -40 }, mood: 0 },
          { text: "Redesign around the disputed IP", reaction: "Painful but avoids the legal mess entirely.", emoji: "üòü", ap: 5, cost: 40, eff: { sci: -2, dev: 3 }, mood: -1 }
        ]
      },
      {
        intro: "Our patent attorney has sent the bill for filing our first patent application in the UK. Now comes the hard part: where else do we file? Each country costs ¬£15,000-30,000 in legal fees alone, plus translation costs. The US is essential for fundraising, the EU covers multiple countries in one filing, but China and Japan are where manufacturing happens.",
        aside: "Patents are territorial-a UK patent only protects you in the UK. Missing a key market means competitors can copy you there freely. But filing everywhere is ruinously expensive for a startup.",
        choices: [
          { text: "File in UK, US, EU, China, and Japan", reaction: "Maximum protection. This will cost over ¬£100k but we're covered globally.", emoji: "üòä", ap: 4, cost: 60, eff: { sci: 4, mkt: 3, cash: -80 }, mood: 2 },
          { text: "File in UK, US, and EU only", reaction: "Covers our main markets. We accept some risk in Asia.", emoji: "üôÇ", ap: 3, cost: 40, eff: { sci: 3, mkt: 2, cash: -50 }, mood: 1 },
          { text: "Just UK and US for now", reaction: "Minimal viable protection. We can't afford more right now.", emoji: "üòê", ap: 2, cost: 25, eff: { sci: 2, mkt: 1, cash: -30 }, mood: 0 }
        ]
      },
      {
        intro: "Writing patent claims is an art form. Our scientists understand the technology best, but patent attorneys know how to write claims that will survive legal challenges. The attorney wants ¬£25,000 to draft the application properly. Our Head of Research thinks she could write a first draft herself to save money.",
        aside: "Badly written patents are worse than no patents-they can be easily invalidated or designed around. But good patent attorneys are expensive, and they still need our scientists to explain the technology.",
        choices: [
          { text: "Let the attorney draft from scratch", reaction: "Expensive but professional. The claims will be bulletproof.", emoji: "üòä", ap: 2, cost: 35, eff: { sci: 4, mkt: 2 }, mood: 2 },
          { text: "Scientists draft, attorney reviews and refines", reaction: "Good balance. Saves money but takes more of our team's time.", emoji: "üôÇ", ap: 4, cost: 25, eff: { sci: 3, mkt: 1, hr: -1 }, mood: 1 },
          { text: "Scientists write it, minimal attorney input", reaction: "Risky. The examiner may tear it apart, or competitors will find loopholes.", emoji: "üòê", ap: 3, cost: 15, eff: { sci: 1, mkt: 0 }, mood: -1 }
        ]
      },
      {
        intro: "The patent examiner has rejected our application. They've found 'prior art'-earlier publications that they say make our invention obvious. Our attorney thinks we can argue our way through by narrowing the claims, but that means our patent will protect less. Alternatively, we can provide new experimental data showing our invention is genuinely different.",
        aside: "Patent prosecution is a negotiation. Most applications get rejected initially-it's how you respond that matters. Narrow claims are easier to get granted but easier for competitors to design around.",
        choices: [
          { text: "Fight back with new experimental data", reaction: "More work, but we might keep our broad claims. Worth trying.", emoji: "üòä", ap: 4, cost: 30, eff: { sci: 4, mkt: 2 }, mood: 2 },
          { text: "Narrow the claims as the examiner suggests", reaction: "We get a granted patent, but it protects less territory.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2, mkt: 1 }, mood: 0 },
          { text: "Abandon this application, file a new one", reaction: "Start fresh with better claims. But we've lost time and money.", emoji: "üòê", ap: 3, cost: 25, eff: { sci: 1, mkt: -1, cash: -20 }, mood: -1 }
        ]
      },
      {
        intro: "Our first patent is about to be granted-three years after we filed it. Our attorney is now asking about 'continuation' applications. These let us file new patents based on our original discovery, covering variations and improvements we've developed since. Each continuation costs money, but they extend our protection and can be valuable if someone tries to design around our first patent.",
        aside: "Biotech companies often build 'patent families' with dozens of related patents covering the same core invention from different angles. It's expensive but creates a defensive thicket.",
        choices: [
          { text: "File multiple continuation applications", reaction: "Build a proper patent family. Harder for competitors to work around us.", emoji: "üòä", ap: 3, cost: 40, eff: { sci: 3, mkt: 3, cash: -35 }, mood: 2 },
          { text: "File one continuation covering key improvements", reaction: "Balanced approach. Some additional protection without breaking the bank.", emoji: "üôÇ", ap: 2, cost: 20, eff: { sci: 2, mkt: 1, cash: -15 }, mood: 1 },
          { text: "Just keep the original patent", reaction: "Core protection maintained. Save resources.", emoji: "üôÇ", ap: 1, cost: 5, eff: { sci: 1, cash: 10 }, mood: 0 }
        ]
      },
      {
        intro: "We've spotted a competitor's product that looks suspiciously similar to our patented technology. Proving infringement in biotech is hard-you can't just look at their product, you need to analyse it scientifically. Our attorney estimates ¬£50,000 to investigate properly, and litigation would cost ten times that.",
        aside: "Patent enforcement is where things get really expensive. Big pharma companies have legal teams on staff. Startups often can't afford to enforce their patents even when they're clearly being infringed.",
        choices: [
          { text: "Investigate and send a cease-and-desist letter", reaction: "Find out what they're doing first. A letter might be enough to scare them.", emoji: "üòä", ap: 3, cost: 35, eff: { sci: 2, mkt: 2, cash: -30 }, mood: 1 },
          { text: "Approach them about licensing", reaction: "Turn a threat into revenue. They might prefer to pay than fight.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 1, mkt: 2, cash: 40 }, mood: 2 },
          { text: "Monitor but don't act yet", reaction: "Gather intelligence. Strike when ready.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our granted patents require annual maintenance fees to stay in force-and those fees increase over time. This year it's ¬£5,000 across all our patents. By year ten, it'll be ¬£20,000 per year. Our accountant is asking whether we really need to maintain all of them, or whether some have become less strategically important.",
        aside: "Companies sometimes let patents lapse when they're no longer commercially relevant. But once you stop paying, the invention becomes public domain and anyone can use it.",
        choices: [
          { text: "Maintain all patents-they're all valuable", reaction: "Maximum protection. The cost is worth the security.", emoji: "üòä", ap: 1, cost: 15, eff: { sci: 2, mkt: 1 }, mood: 2 },
          { text: "Review and drop the weakest ones", reaction: "Rational approach. Focus resources on our crown jewels.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 1, mkt: 1 }, mood: 1 },
          { text: "Minimal portfolio-keep only essentials", reaction: "Lean approach. Saves money for product.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, cash: 15 }, mood: 0 }
        ]
      },
      {
        intro: "Testing reveals our AI model is less accurate for some patient populations-it works well for groups heavily represented in our training data, less well for others. This isn't unusual; it's a known challenge in medical AI. Fixing it requires more diverse data, which means more time and partnerships. But the populations it works well for still need help now.",
        aside: "Perfect fairness in AI is often impossible-you're trading off accuracy for different groups. Waiting for perfection means no one gets helped. Launching with known gaps means some get helped more than others. Both positions have ethical weight.",
        choices: [
          { text: "Delay until we can reduce the gap significantly", reaction: "Higher standard. Takes longer. Some patients wait who didn't need to.", emoji: "üòä", ap: 5, cost: 45, eff: { sci: 4, mkt: -1, hr: 1 }, mood: 3 },
          { text: "Launch with clear scope-only for populations where it's validated", reaction: "Honest about limitations. Narrower impact. Some feel excluded.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 2, mkt: 2 }, mood: 1 },
          { text: "Launch broadly with warnings and monitoring", reaction: "Helps more people sooner. Risk of harm if warnings ignored.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 1, mkt: 3 }, mood: -2 }
        ]
      },
      {
        intro: "Training our AI models uses enormous amounts of electricity-and that means carbon emissions. Our latest model took three months of continuous computing, equivalent to several transatlantic flights. We could use renewable-powered data centres, but they're 40% more expensive.",
        aside: "The environmental cost of AI is becoming a real concern. Some researchers now include carbon footprint in their papers. Being sustainable costs more but aligns with our values.",
        choices: [
          { text: "Move to renewable-powered computing", reaction: "Higher costs but we can look our grandchildren in the eye.", emoji: "üòä", ap: 3, cost: 40, eff: { sci: 2, mkt: 2, hr: 1 }, mood: 2 },
          { text: "Buy carbon offsets for our computing", reaction: "Imperfect solution but better than nothing.", emoji: "üôÇ", ap: 2, cost: 20, eff: { sci: 1, mkt: 1 }, mood: 1 },
          { text: "Focus on efficiency, not where power comes from", reaction: "Pragmatic. Keeps costs down.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 1, cash: 10 }, mood: 0 }
        ]
      },
      {
        intro: "We need patient data to train our medical AI. A hospital is offering access to thousands of records, but the consent forms patients signed years ago didn't specifically mention AI. Legally it might be covered, but ethically it's a grey area. Patients didn't know their data would train algorithms.",
        aside: "Data consent is evolving faster than the forms people signed. What was acceptable five years ago may not meet today's ethical standards. Being conservative protects patients and our reputation.",
        choices: [
          { text: "Only use data with explicit AI consent", reaction: "Higher standards than required. Patients trust matters.", emoji: "üòä", ap: 4, cost: 35, eff: { sci: 2, mkt: 2, hr: 1 }, mood: 2 },
          { text: "Use it but anonymise more aggressively", reaction: "Extra precautions reduce risk. Not perfect but defensible.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 3, mkt: 1 }, mood: 1 },
          { text: "Legal says it's fine-proceed", reaction: "I'm uncomfortable. Noting my objection.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 4, mkt: 1 }, mood: -2 }
        ]
      },
      {
        intro: "Our research findings could be used for good or harm. The same technology that helps doctors could help bad actors. Some researchers are calling for us to restrict access to our methods, but that goes against the open science principles we've always championed.",
        aside: "Dual-use research is a genuine dilemma. Openness accelerates progress but also accelerates misuse. There's no perfect answer, only trade-offs.",
        choices: [
          { text: "Restricted access with vetting process", reaction: "Slows legitimate researchers but limits bad actors.", emoji: "üòä", ap: 3, cost: 25, eff: { sci: 2, mkt: 1 }, mood: 1 },
          { text: "Open access with usage monitoring", reaction: "Stay open but watch for misuse. Hard to enforce.", emoji: "üôÇ", ap: 2, cost: 20, eff: { sci: 3, mkt: 1 }, mood: 1 },
          { text: "Fully open-knowledge should be free", reaction: "Community embraces us. Reputation builds.", emoji: "üôÇ", ap: 1, cost: 10, eff: { sci: 4, mkt: 1 }, mood: 1 }
        ]
      },
      {
        intro: "Our AI sometimes gives answers that sound confident but are completely wrong-it essentially makes things up. We can make it more cautious and say 'I'm not sure' more often, but that also makes it less useful. Users want direct answers; constant hedging frustrates them.",
        aside: "There's a fundamental trade-off between confidence and accuracy. An AI that always hedges is useless. An AI that confidently invents things is dangerous. The right balance depends on what it's being used for.",
        choices: [
          { text: "Prioritise accuracy-flag uncertainty clearly", reaction: "Safer outputs. Some users find it annoying.", emoji: "üòä", ap: 3, cost: 25, eff: { sci: 3, mkt: 1 }, mood: 2 },
          { text: "Let users choose how cautious it should be", reaction: "Flexibility but complexity. Most won't understand the setting.", emoji: "üôÇ", ap: 3, cost: 30, eff: { sci: 2, mkt: 2 }, mood: 1 },
          { text: "Optimise for what users like", reaction: "They prefer confident answers. Hope they check important ones.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 1, mkt: 3 }, mood: -1 }
        ]
      },
      {
        intro: "We've developed a capability that's genuinely impressive-and potentially dangerous. It could be used to generate convincing misinformation at scale. Some team members want to publish to advance the science; others think we should keep it quiet or at least delay until we understand the risks better.",
        aside: "There's a heated debate about when to publish powerful AI capabilities. Some say openness lets everyone study risks. Others say publishing before defences exist is reckless. There's no consensus in the field.",
        choices: [
          { text: "Delay publication until we develop safeguards", reaction: "Responsible but others might discover it independently.", emoji: "üòä", ap: 4, cost: 30, eff: { sci: 1, mkt: 2, hr: 1 }, mood: 2 },
          { text: "Publish with a detailed risks section", reaction: "Advance the science, flag the dangers. Some will ignore warnings.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 4, mkt: 1 }, mood: 1 },
          { text: "Publish normally-others will find this anyway", reaction: "Science advances. We're not the last line of defence.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 5, mkt: 0 }, mood: -1 }
        ]
      },
      {
        intro: "A researcher wants to join our team from a major AI lab. She's brilliant, but she's also a prominent voice arguing that AI systems like ours might pose existential risks to humanity. Hiring her would bring credibility and talent, but also internal debate about whether we should be building what we're building.",
        aside: "The AI safety community ranges from 'slow down everything' to 'accelerate carefully'. Having internal critics can improve your work or paralyse it. Intellectual diversity is valuable until it becomes gridlock.",
        choices: [
          { text: "Hire her-we need that perspective", reaction: "Healthy challenge. Some uncomfortable conversations ahead.", emoji: "üòä", ap: 3, cost: 25, eff: { sci: 4, hr: 1 }, mood: 2 },
          { text: "Hire but keep her focused on safety research", reaction: "Channel her concerns productively. She might feel siloed.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 3, hr: 0 }, mood: 1 },
          { text: "Pass-we need believers, not sceptics", reaction: "Focus on aligned partners. Better fit ahead.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our AI makes predictions that affect people's lives-loan decisions, medical diagnoses, hiring recommendations. Users want to know why the AI decided what it did, but our system is so complex that even we can't fully explain individual decisions. We can add features that give plausible-sounding reasons, but they're simplified approximations, not the real answer.",
        aside: "Being able to explain AI decisions is a genuine hard problem. Simple explanations of complex systems are necessarily incomplete. But 'the computer said so' isn't acceptable when the decision affects someone's life. Nobody's really solved this yet.",
        choices: [
          { text: "Invest heavily in making decisions explainable", reaction: "Hard problem. Might slow us down significantly.", emoji: "üòä", ap: 5, cost: 45, eff: { sci: 4, mkt: 2, hr: 1 }, mood: 2 },
          { text: "Add simplified explanations with clear caveats", reaction: "Better than nothing. Users might trust them too much.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 2, mkt: 3 }, mood: 1 },
          { text: "Focus on accuracy-explanations are secondary", reaction: "Right answers matter more than explaining wrong ones. Some disagree.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 3, mkt: 1 }, mood: -1 }
        ]
      }
    ],
    
    // DR. YUKI TANAKA - The Collaborator
    yuki: [
      {
        intro: "Collaborators in Tokyo and Singapore are interested in a joint publication. We share credit but gain their datasets.",
        aside: "Science advances faster together. Their data would strengthen our claims significantly.",
        choices: [
          { text: "Pursue international collaboration", reaction: "Wonderful. I'll arrange calls this week.", emoji: "üòä", ap: 3, cost: 25, eff: { sci: 5, mkt: 2 }, mood: 2 },
          { text: "Share data, keep publication separate", reaction: "That's not how collaboration works. But I'll try.", emoji: "üòï", ap: 3, cost: 20, eff: { sci: 3, mkt: 1 }, mood: -1 },
          { text: "Keep research internal", reaction: "We're losing an opportunity.", emoji: "üòî", ap: 1, cost: 10, eff: { sci: 2 }, mood: -2 }
        ]
      },
      {
        intro: "A university in Seoul has complementary techniques. They propose a technology exchange programme.",
        aside: "Their approach could solve problems we're stuck on. And they want to learn from us too.",
        choices: [
          { text: "Establish formal exchange programme", reaction: "This is how science should work.", emoji: "üòä", ap: 4, cost: 30, eff: { sci: 5, dev: 2 }, mood: 2 },
          { text: "Share methods informally", reaction: "Less structured, but we'll learn.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 3, dev: 1 }, mood: 1 },
          { text: "Protect our techniques", reaction: "We're slowing ourselves down.", emoji: "üòï", ap: 1, cost: 5, eff: { sci: 1 }, mood: -2 }
        ]
      },
      {
        intro: "The Alan Turing Institute invites us to join a responsible AI consortium. Prestigious but requires commitment.",
        aside: "Access to top UK researchers and a seat at important tables. These connections last decades.",
        choices: [
          { text: "Become full industry partner", reaction: "We gain access to the best minds in UK AI.", emoji: "üòä", ap: 5, cost: 40, eff: { sci: 4, mkt: 2, hr: 1 }, mood: 2 },
          { text: "Join as associate, limited commitment", reaction: "We're in the room, if not always central.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 2, mkt: 1 }, mood: 0 },
          { text: "Decline-focus resources elsewhere", reaction: "Prioritise wisely. Team stays focused.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A European research consortium invites us to their Horizon grant application. Obligations, but substantial funding.",
        aside: "Consortium work is slow but opens doors across Europe. The funding is significant.",
        choices: [
          { text: "Join as full partner, lead work package", reaction: "This establishes us as serious European players.", emoji: "üòä", ap: 4, cost: 20, eff: { sci: 4, mkt: 2, cash: 80 }, mood: 2 },
          { text: "Join as junior partner", reaction: "Less visibility, but valuable connections.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, mkt: 1, cash: 40 }, mood: 0 },
          { text: "Decline-too many strings", reaction: "Stay independent. Full control preserved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A visiting professor from Imperial wants a sabbatical with us. Brilliant, but needs significant support.",
        aside: "Having her here would raise our profile and teach us new approaches.",
        choices: [
          { text: "Host with dedicated resources", reaction: "This will elevate everyone's work.", emoji: "üòä", ap: 4, cost: 35, eff: { sci: 5, hr: 1 }, mood: 2 },
          { text: "Welcome with limited support", reaction: "She's resourceful. She'll manage.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 3 }, mood: 0 },
          { text: "Suggest another time", reaction: "Relationship maintained. Door stays open.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've been invited to a workshop bridging UK and Asian research networks. Relationship-building, not immediate results.",
        aside: "These connections pay off over years, not quarters. But they do pay off.",
        choices: [
          { text: "Send team, host dinner afterwards", reaction: "Relationship-building at its best.", emoji: "üòä", ap: 3, cost: 20, eff: { sci: 2, mkt: 3 }, mood: 2 },
          { text: "Present virtually to save costs", reaction: "Present but won't build same connections.", emoji: "üòê", ap: 1, cost: 5, eff: { sci: 1, mkt: 1 }, mood: 0 },
          { text: "Send apologies-too busy", reaction: "Focus on what matters. They understand.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A UK university proposes a Knowledge Transfer Partnership placing an associate with us.",
        aside: "KTPs bridge academia and industry. Government subsidises the salary.",
        choices: [
          { text: "Co-fund a strategic KTP project", reaction: "Perfect bridge into academic networks.", emoji: "üòä", ap: 4, cost: 30, eff: { sci: 3, dev: 2, mkt: 1 }, mood: 2 },
          { text: "Support with minimal budget", reaction: "Light bridge with limited commitment.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2 }, mood: 0 },
          { text: "Decline-avoid complexity", reaction: "Keep things simple. Focus pays off.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A data-sharing MoU with a UK university would give us access to valuable clinical datasets.",
        aside: "Proper governance takes time but builds lasting partnerships. Their data is unique.",
        choices: [
          { text: "Negotiate rigorous privacy-first MoU", reaction: "Access without terrifying our lawyers.", emoji: "üòä", ap: 4, cost: 15, eff: { sci: 3, dev: 1, hr: 1 }, mood: 2 },
          { text: "Agree narrow pilot-scale MoU", reaction: "Test the relationship first.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2 }, mood: 0 },
          { text: "Use public data only", reaction: "Safe and compliant. No regulatory risk.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 1, hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've been invited to present at a major AI conference. The audience will include potential customers, investors, and collaborators-but also competitors. How much do we reveal? A vague talk won't impress anyone, but a detailed one hands our methods to rivals.",
        aside: "Conferences are where reputations are made. But I've seen companies give away their secrets on stage and regret it within months.",
        choices: [
          { text: "Present high-level vision, keep details private", reaction: "Safe but forgettable. We won't stand out.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 1, mkt: 2 }, mood: 0 },
          { text: "Share enough to impress, hold back key insights", reaction: "The art of strategic disclosure. Takes careful preparation.", emoji: "üòä", ap: 3, cost: 25, eff: { sci: 3, mkt: 3 }, mood: 2 },
          { text: "Be completely open-transparency builds trust", reaction: "Bold. Competitors take notes, but so do future partners.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 4, mkt: 2, dev: -1 }, mood: 1 }
        ]
      },
      {
        intro: "A PhD student at a partner university has made a breakthrough using our data. She wants to publish immediately. The problem is, her paper would reveal techniques we haven't patented yet-and once it's public, we lose the right to patent in most countries.",
        aside: "Academic incentives favour fast publication. Commercial incentives favour controlled disclosure. These worlds don't always align.",
        choices: [
          { text: "Ask her to delay while we file patents", reaction: "She won't be happy-publication timing matters for her career. But we need to protect ourselves.", emoji: "üòê", ap: 3, cost: 30, eff: { sci: 2, mkt: 2, cash: -25 }, mood: 0 },
          { text: "Let her publish, accept the loss of patent rights", reaction: "Good for the relationship. Great for credibility.", emoji: "üôÇ", ap: 1, cost: 10, eff: { sci: 4, mkt: 1 }, mood: 1 },
          { text: "Collaborate on a joint filing before publication", reaction: "Complex but everyone wins. Takes coordination.", emoji: "üòä", ap: 4, cost: 40, eff: { sci: 4, mkt: 3, cash: -30 }, mood: 2 }
        ]
      },
      {
        intro: "Our approach to a key problem is genuinely novel, and we're not sure whether to patent it or keep it secret. Patents give us 20 years of protection, but require publishing exactly how it works. Trade secrets last forever-unless someone figures it out or an employee leaks it.",
        aside: "The choice depends on whether competitors could reverse-engineer our innovation. If they can work it out by studying our product, a trade secret is worthless. If it's truly hidden in our process, secrecy might be better.",
        choices: [
          { text: "Patent it-we need enforceable rights", reaction: "Competitors will read our patent, but they can't legally use it for 20 years.", emoji: "üòä", ap: 3, cost: 35, eff: { sci: 3, mkt: 2, cash: -30 }, mood: 2 },
          { text: "Keep it as a trade secret", reaction: "Hidden forever, or until someone reverse-engineers it or talks.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, mkt: 1, hr: -1 }, mood: 1 },
          { text: "File a patent but keep the best bits as trade secrets", reaction: "Hybrid approach. Patent the architecture, hide the special sauce.", emoji: "üòä", ap: 4, cost: 40, eff: { sci: 4, mkt: 2, cash: -35 }, mood: 2 }
        ]
      },
      {
        intro: "A journalist from a major tech publication wants to write a feature about our technology. Great exposure, but she's asking detailed questions about how our system works. Our PR advisor says be open; our CTO says we're giving away competitive intelligence.",
        aside: "Press coverage can be transformative for a startup. But journalists want interesting details, and interesting details are often exactly what competitors want to know.",
        choices: [
          { text: "Be open-good press is worth more than secrecy", reaction: "Great article. Competitors read it too, but so do thousands of potential customers.", emoji: "üòä", ap: 2, cost: 15, eff: { sci: 1, mkt: 5, dev: -1 }, mood: 2 },
          { text: "Carefully stage-manage what we reveal", reaction: "She might write a less enthusiastic piece, but we control the narrative.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 0, mkt: 3 }, mood: 1 },
          { text: "Decline the interview", reaction: "Protect our secrets. Stay mysterious.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're considering posting a preprint of our research before formal peer review. It would establish priority-proving we had the idea first-but it also means competitors see our work months before we've published in a proper journal. They could scoop our follow-up research.",
        aside: "Preprints have become standard in AI research. Move too slowly and someone else publishes first. Move too fast and you give away your roadmap.",
        choices: [
          { text: "Post the preprint immediately", reaction: "Establish priority. Competitors see it, but so does everyone else.", emoji: "üòä", ap: 2, cost: 10, eff: { sci: 4, mkt: 2 }, mood: 2 },
          { text: "Wait for peer review and formal publication", reaction: "More prestigious, but someone might publish similar work first.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 3, mkt: 1 }, mood: 1 },
          { text: "Post a limited version, hold back key details", reaction: "Claim priority without revealing everything. Some call this bad form.", emoji: "üòê", ap: 2, cost: 10, eff: { sci: 2, mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're collaborating with researchers at a university whose government restricts academic freedom and surveils its own citizens. The scientists themselves are brilliant and share our values-some are quietly pushing for reform from within. But our partnership gives prestige to an institution that's part of the state apparatus.",
        aside: "The 'engage or isolate' debate has no easy answers. Cutting ties abandons reformers inside the system. Continuing means being used for legitimacy. Different team members see this genuinely differently based on their own backgrounds and values.",
        choices: [
          { text: "Continue-support the reformers inside", reaction: "Engagement over isolation. We trust our collaborators' judgment about their own situation.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 4, mkt: -1, hr: -1 }, mood: 1 },
          { text: "Personal ties only, no institutional branding", reaction: "Work with individuals, avoid legitimising institutions. Complicated in practice.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 3, mkt: 0 }, mood: 0 },
          { text: "Pause until conditions improve", reaction: "Principled but may never resume. Our collaborators understand but are disappointed.", emoji: "üòä", ap: 2, cost: 10, eff: { sci: -1, mkt: 1, hr: 1 }, mood: 1 }
        ]
      },
      {
        intro: "A wealthy donor wants to fund our research, but they made their money in an industry we find ethically questionable. Their name would be on our lab. Some team members are strongly opposed; others say money is money and we can do good work with it.",
        aside: "Research funding always has strings-sometimes visible, sometimes not. Whose money we accept shapes how we're perceived and who wants to work with us.",
        choices: [
          { text: "Accept the funding with thanks", reaction: "We can do important work. People will forget the source.", emoji: "üôÇ", ap: 2, cost: 5, eff: { sci: 4, hr: -1, cash: 80 }, mood: 0 },
          { text: "Accept but don't use their name", reaction: "Take the money, limit the association. Awkward conversation ahead.", emoji: "üòê", ap: 2, cost: 10, eff: { sci: 3, cash: 60 }, mood: 0 },
          { text: "Decline and seek other funding", reaction: "Principled but painful. The team respects this.", emoji: "üòä", ap: 3, cost: 20, eff: { sci: 1, hr: 2, mkt: 1 }, mood: 2 }
        ]
      },
      {
        intro: "Flying to conferences burns enormous carbon. Our team attends a dozen international conferences a year. We could switch to virtual attendance for most events, but networking happens in hallways and over dinners-not on video calls.",
        aside: "Academic careers are built on in-person connections. But the climate cost of constant flying is hard to ignore. Some conferences now offer hybrid options.",
        choices: [
          { text: "Limit to two in-person conferences per year", reaction: "Significant cut. We'll miss some opportunities but set an example.", emoji: "üòä", ap: 2, cost: 10, eff: { sci: -1, hr: 1, mkt: 1 }, mood: 2 },
          { text: "Virtual when possible, fly when essential", reaction: "Case-by-case. More complicated but flexible.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2, mkt: 1 }, mood: 1 },
          { text: "Attend everything-careers depend on it", reaction: "Networking matters. The planet will have to wait.", emoji: "üòê", ap: 2, cost: 25, eff: { sci: 4, mkt: 2 }, mood: -1 }
        ]
      }
    ],
    
    kwame: [
      {
        intro: "The results aren't just good-they're potentially breakthrough territory. I want to pivot half the team onto this immediately.",
        aside: "Yes, it's risky. But this is why we started this company, isn't it?",
        choices: [
          { text: "Go all-in on the breakthrough", reaction: "Now we're talking. Let's make history.", emoji: "üî•", ap: 5, cost: 45, eff: { sci: 7, hr: -1, dev: -1 }, mood: 3 },
          { text: "Dedicated team, keep other work going", reaction: "Half measures. But it's a start.", emoji: "üòê", ap: 4, cost: 30, eff: { sci: 5 }, mood: 0 },
          { text: "Stick to the current roadmap", reaction: "We'll look back at this with regret.", emoji: "üò§", ap: 1, cost: 15, eff: { sci: 3, dev: 2 }, mood: -2 }
        ]
      },
      {
        intro: "There's a top-tier science journal paper opportunity. We'd need to drop everything for six weeks, but if we land it...",
        aside: "A top journal paper changes everything. Hiring, funding, credibility-transformed overnight.",
        choices: [
          { text: "All hands on Nature submission", reaction: "This is what we came here to do!", emoji: "üî•", ap: 5, cost: 40, eff: { sci: 8, mkt: 4, dev: -2 }, mood: 3 },
          { text: "Try without stopping other work", reaction: "We might not make it, but we'll try.", emoji: "üòê", ap: 4, cost: 25, eff: { sci: 4, mkt: 2 }, mood: 0 },
          { text: "Target more achievable journal", reaction: "Playing it safe. I don't like it.", emoji: "üò§", ap: 2, cost: 15, eff: { sci: 3, mkt: 1 }, mood: -2 }
        ]
      },
      {
        intro: "I've identified a completely new research direction. Tangential to our core, but could be massive if I'm right.",
        aside: "The biggest discoveries come from following intuition. Let me explore this.",
        choices: [
          { text: "Fund the moonshot exploration", reaction: "You won't regret this. I can feel it.", emoji: "üî•", ap: 5, cost: 50, eff: { sci: 6, dev: -1 }, mood: 3 },
          { text: "Limited budget for initial exploration", reaction: "I'll prove the concept, then we talk.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 3 }, mood: 1 },
          { text: "Focus on current direction", reaction: "Killing the future to serve the present.", emoji: "üò§", ap: 1, cost: 5, eff: { sci: 1, dev: 1 }, mood: -2 }
        ]
      },
      {
        intro: "CortexAI just published in our space. We could respond with our findings now, or wait until more complete.",
        aside: "First mover advantage is real. We need to be in this conversation NOW.",
        choices: [
          { text: "Fast-track our publication to respond", reaction: "Let's show them what we've got.", emoji: "üî•", ap: 4, cost: 30, eff: { sci: 5, mkt: 4, hr: -1 }, mood: 2 },
          { text: "Position as complementary, take time", reaction: "We'll be seen as second. But okay.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 3, mkt: 2 }, mood: 0 },
          { text: "Ignore them, our timeline", reaction: "Stay focused on our plan. Execute well.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A major conference talk opportunity. They want me to present our vision for AI in healthcare.",
        aside: "The world should know what we're building. And the recruiting benefits alone...",
        choices: [
          { text: "Prepare inspiring, ambitious talk", reaction: "I'll make them believe in our mission.", emoji: "üî•", ap: 4, cost: 20, eff: { sci: 2, mkt: 5, hr: 2 }, mood: 2 },
          { text: "Give solid, grounded presentation", reaction: "Safe choice. Won't change many minds.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 1, mkt: 3 }, mood: 0 },
          { text: "Decline-too much going on", reaction: "Prioritise well. Team stays effective.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A senior researcher at CortexAI is interested in joining. Expensive but exceptional.",
        aside: "One hire can transform a research team. She's that calibre.",
        choices: [
          { text: "Make aggressive offer with equity", reaction: "Our credibility jumps overnight.", emoji: "üî•", ap: 4, cost: 30, eff: { sci: 5, mkt: 2 }, mood: 2 },
          { text: "Offer consulting arrangement first", reaction: "Part-time advice. Full commitment uncertain.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 2, mkt: 1 }, mood: 0 },
          { text: "Pass-can't compete on comp", reaction: "Stay disciplined on costs. Find better fits.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "AI Research Summit has sponsorship slots. Expensive but visible to the entire AI research community.",
        aside: "Our logo everywhere. Strong candidates approach us directly. This is how you build a research brand.",
        choices: [
          { text: "Gold sponsor with recruiting booth", reaction: "Time to make some noise.", emoji: "üî•", ap: 2, cost: 50, eff: { sci: 2, mkt: 3, hr: 2 }, mood: 2 },
          { text: "Silver sponsor, lower profile", reaction: "Visible without breaking the bank.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 1, mkt: 2 }, mood: 0 },
          { text: "Just attend, no sponsorship", reaction: "Learn and network. Low-cost presence.", emoji: "üôÇ", ap: 1, cost: 10, eff: { sci: 2 }, mood: 0 }
        ]
      },
      {
        intro: "We could open-source a useful internal tool. Builds community but competitors benefit too.",
        aside: "Open source builds reputation and attracts talent. The best people want to work in the open.",
        choices: [
          { text: "Open source with community engagement", reaction: "CodeRepo stars and useful PRs incoming.", emoji: "üî•", ap: 4, cost: 15, eff: { sci: 3, mkt: 3, dev: 1 }, mood: 2 },
          { text: "Release read-only, no support", reaction: "Visible without maintenance burden.", emoji: "üôÇ", ap: 2, cost: 5, eff: { sci: 2, mkt: 1 }, mood: 0 },
          { text: "Keep it proprietary", reaction: "Competitive edge preserved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "I want to release our training dataset publicly. It would establish us as leaders, attract researchers to work with us, and accelerate the whole field. Our commercial team is horrified-the data took years to collect and is our key competitive advantage.",
        aside: "Open data attracts talent and citations. Proprietary data attracts revenue. The AI community increasingly expects openness, but investors expect defensible advantages.",
        choices: [
          { text: "Release the full dataset openly", reaction: "The community celebrates. Competitors celebrate too. We become famous.", emoji: "üî•", ap: 3, cost: 20, eff: { sci: 6, mkt: 4, dev: -2 }, mood: 3 },
          { text: "Release a subset, keep the best parts private", reaction: "Goodwill without giving away the crown jewels.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 4, mkt: 2 }, mood: 1 },
          { text: "Keep it proprietary-it's our moat", reaction: "Defensible business. But we won't be the community's darling.", emoji: "üòê", ap: 1, cost: 5, eff: { sci: 1, mkt: 1, dev: 1 }, mood: -1 }
        ]
      },
      {
        intro: "We've developed a benchmark that measures AI performance on our problem domain. Publishing it would establish us as the authority-everyone would compare their models using our test. But it would also help competitors know exactly what to optimise for.",
        aside: "Whoever defines the benchmark often shapes the entire field. It's power, but it also helps everyone-including rivals-improve faster.",
        choices: [
          { text: "Publish the benchmark and host a leaderboard", reaction: "We become the standard. Everyone knows our name. Everyone catches up.", emoji: "üî•", ap: 3, cost: 25, eff: { sci: 5, mkt: 5 }, mood: 3 },
          { text: "Use it internally, publish later when we're further ahead", reaction: "Keep our lead a bit longer. Miss the thought leadership moment.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, mkt: 1, dev: 1 }, mood: 0 },
          { text: "Keep it completely internal", reaction: "Protect our edge. Move faster.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "A major tech lab has published a paper that overlaps with our unpublished research. Their version is good but not as good as ours. Do we rush out a paper showing our superior results, or stay quiet and let them think they're ahead? If we publish, they'll know exactly where we are and can catch up. If we don't, they might waste time on an inferior approach.",
        aside: "Strategic disclosure is a game. Sometimes revealing strength deters competitors. Sometimes it just gives them a target to aim for.",
        choices: [
          { text: "Publish immediately-assert dominance", reaction: "Everyone knows we're ahead. The race is on.", emoji: "üî•", ap: 3, cost: 25, eff: { sci: 5, mkt: 4, dev: -1 }, mood: 2 },
          { text: "Stay quiet and extend our lead", reaction: "They don't know what we know. Use the time wisely.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, dev: 3 }, mood: 1 },
          { text: "Publish partially-hint at more without revealing all", reaction: "Intimidation tactics. They know we're ahead but not by how much.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: 3, mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "A major pharma company wants to license our AI models. As part of due diligence, they want to examine our training data, model architecture, and evaluation methods in detail. If the deal goes through, it's transformative revenue. If it doesn't, they've seen everything.",
        aside: "Due diligence is standard for big deals. But there's always a risk they're really just gathering competitive intelligence. The NDA offers some protection, but proving a breach is almost impossible.",
        choices: [
          { text: "Full disclosure under NDA", reaction: "They see everything. The deal either happens or we've educated a potential competitor.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: -1, mkt: 3, cash: 80 }, mood: 0 },
          { text: "Staged disclosure-reveal more as deal progresses", reaction: "Build trust gradually. Some companies walk away at this stage.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 0, mkt: 2, cash: 50 }, mood: 1 },
          { text: "Demonstrate results only, protect methods", reaction: "They see what our system does, not how. Some buyers won't accept this.", emoji: "üòä", ap: 2, cost: 15, eff: { sci: 1, mkt: 1, cash: 30 }, mood: 2 }
        ]
      },
      {
        intro: "Three of our scientists want to give a technical talk at a workshop where the audience is mostly from competing companies. They say it's important for their professional development and for attracting talent. Our IP lawyer is nervous.",
        aside: "Scientists build reputations through sharing. But what builds their careers might hurt the company. Finding the balance is constant tension.",
        choices: [
          { text: "Let them present with minimal restrictions", reaction: "They shine. Competitors take notes. We attract great candidates.", emoji: "üî•", ap: 2, cost: 15, eff: { sci: 3, mkt: 2, hr: 2 }, mood: 2 },
          { text: "Approve but review all slides carefully first", reaction: "Takes my time but controls the message.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 2, mkt: 2, hr: 1 }, mood: 1 },
          { text: "Block the talk-too risky", reaction: "IP protected. Team understands the stakes.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our AI will change how work is done in our target industry. Some tasks will be automated entirely; others will be transformed. In the long run, history suggests new jobs emerge-but in the short run, specific people lose specific jobs. The transition is where the pain concentrates, even if the destination is better.",
        aside: "The 'lump of labour' fallacy says automation doesn't destroy jobs overall-but that's cold comfort to someone whose skills are suddenly obsolete. Companies rarely think about transitions; economists rarely think about individuals.",
        choices: [
          { text: "Partner with customers on transition planning", reaction: "Help them manage the change. Costs time, builds loyalty, unusual.", emoji: "üòä", ap: 3, cost: 30, eff: { sci: 1, mkt: 3, hr: 1 }, mood: 2 },
          { text: "Position as 'amplifying workers, not replacing them'", reaction: "Probably true in some cases. Marketing spin in others.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 2, mkt: 1 }, mood: 1 },
          { text: "Build the best product and let the market adapt", reaction: "Standard approach. The transition is someone else's problem.", emoji: "üòê", ap: 1, cost: 10, eff: { sci: 3, mkt: 2 }, mood: -1 }
        ]
      },
      {
        intro: "A ministry of health wants to license our AI for disease prediction. The science would genuinely help patients. But this government restricts press freedom and has used technology for surveillance before. Our contract would be for healthcare only-but once they have the technology, we can't control how it's used or what it's combined with.",
        aside: "Every major tech company faces decisions like this. The healthcare ministry isn't the security ministry-but they're part of the same government. Some argue engagement creates leverage for reform; others say it provides tools and legitimacy.",
        choices: [
          { text: "Decline-we can't guarantee it won't be misused", reaction: "Principled stand. Patients who might have benefited won't. Someone else may take the contract.", emoji: "üòä", ap: 2, cost: 10, eff: { sci: -1, mkt: 2, hr: 1 }, mood: 2 },
          { text: "Accept with audit rights and use restrictions", reaction: "Try to build in safeguards. Enforcement is another matter.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2, mkt: 0, cash: 60 }, mood: 0 },
          { text: "Accept-healthcare is healthcare", reaction: "Help the patients, not the politics. A defensible position that some will attack.", emoji: "üòê", ap: 2, cost: 10, eff: { sci: 3, mkt: -1, cash: 80 }, mood: -1 }
        ]
      },
      {
        intro: "We're planning our next big research push. We could focus on making our AI more powerful-which investors want-or on making it more efficient, using less energy to achieve the same results. Efficiency is less exciting but better for the planet.",
        aside: "The AI industry has an energy problem nobody wants to talk about. Bigger models need more power. At some point, sustainability has to matter.",
        choices: [
          { text: "Prioritise efficiency over capability", reaction: "Sustainable path. Investors might grumble.", emoji: "üòä", ap: 3, cost: 25, eff: { sci: 3, mkt: 1, hr: 1 }, mood: 2 },
          { text: "Balance both-efficiency enables capability", reaction: "Try to have it both ways. Spreads us thin.", emoji: "üôÇ", ap: 4, cost: 35, eff: { sci: 4, mkt: 2 }, mood: 1 },
          { text: "Capability first-that's what gets funded", reaction: "Keep up with the arms race. Energy bill someone else's problem.", emoji: "üòê", ap: 3, cost: 30, eff: { sci: 5, mkt: 3 }, mood: 0 }
        ]
      },
      {
        intro: "The UK government is developing AI regulations and wants industry input. We could engage seriously-attending consultations, submitting detailed responses, helping shape rules that might govern our industry for decades. Or we could focus on building and let the big companies worry about policy.",
        aside: "Regulation is coming whether we participate or not. Small companies often ignore policy until it constrains them. But early engagement can shape rules in ways that work for innovators, not just incumbents.",
        choices: [
          { text: "Engage seriously with the policy process", reaction: "Shape the rules. Time away from product.", emoji: "üî•", ap: 4, cost: 30, eff: { sci: 2, mkt: 3 }, mood: 2 },
          { text: "Join an industry group that lobbies collectively", reaction: "Pooled voice. Less direct influence.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 1, mkt: 2 }, mood: 1 },
          { text: "Focus on building-policy is for later", reaction: "Product first. Smart prioritisation.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 2, sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A major AI company just released something significantly more capable than ours. The reaction is split-some celebrate the advance, others worry it's creating pressure for everyone to move fast and cut corners. Our board wants to know: do we accelerate to keep up, or take a more measured path?",
        aside: "AI development feels like a race. If you slow down, others don't. But rushing to release systems you don't fully understand has real risks. The field is genuinely divided on what responsible development looks like.",
        choices: [
          { text: "Accelerate-falling behind helps no one", reaction: "Stay competitive. Hope we can be careful at speed.", emoji: "üî•", ap: 4, cost: 40, eff: { sci: 5, mkt: 3, hr: -1 }, mood: 1 },
          { text: "Maintain our pace with more safety investment", reaction: "Balanced approach. Might not be enough for either goal.", emoji: "üôÇ", ap: 3, cost: 30, eff: { sci: 3, mkt: 2 }, mood: 1 },
          { text: "Slow down and focus on understanding what we have", reaction: "Responsible but others capture the market.", emoji: "üòê", ap: 2, cost: 20, eff: { sci: 2, mkt: -1, hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've been invited to sign a voluntary commitment on AI safety-things like testing for dangerous capabilities before release, sharing safety research, and reporting serious incidents. Other companies are signing; some prominent figures are calling it toothless PR. Do we sign?",
        aside: "Voluntary commitments are either the foundation of responsible norms or empty gestures depending on who you ask. Signing costs little but might constrain future choices. Not signing looks bad but preserves flexibility.",
        choices: [
          { text: "Sign and take the commitments seriously", reaction: "Public commitment. Hold ourselves accountable.", emoji: "üî•", ap: 2, cost: 15, eff: { sci: 2, mkt: 3, hr: 1 }, mood: 2 },
          { text: "Sign but interpret flexibly", reaction: "Look responsible. Keep options open. Somewhat cynical.", emoji: "üôÇ", ap: 1, cost: 10, eff: { sci: 1, mkt: 2 }, mood: 0 },
          { text: "Don't sign-focus on actions not statements", reaction: "Show don't tell. Authentic approach.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our investors want us to pursue a capability that would be genuinely useful but could also cause harm if misused-think AI that can write very convincing text, or analyse video in ways that enable surveillance. The business case is strong. The potential for misuse is real.",
        aside: "Most powerful technologies can be used for good or harm. The question isn't whether something could be misused-almost anything can-but whether the benefits justify the risks, and whether you can design to minimise harm.",
        choices: [
          { text: "Build it with safeguards and use restrictions", reaction: "Try to capture benefits while limiting harms. Imperfect but thoughtful.", emoji: "üî•", ap: 4, cost: 35, eff: { sci: 4, mkt: 3 }, mood: 1 },
          { text: "Build it and let the market decide", reaction: "Not our job to police usage. Common but increasingly criticised view.", emoji: "üôÇ", ap: 3, cost: 25, eff: { sci: 4, mkt: 4, hr: -1 }, mood: 0 },
          { text: "Decline to build it-too risky", reaction: "Someone else will. But we keep our conscience clean.", emoji: "üòê", ap: 2, cost: 15, eff: { sci: -1, mkt: 1, hr: 1 }, mood: 1 }
        ]
      },
      {
        intro: "We're pitching to investors next week. Our product works, but it's not as polished as competitors'. Our advisor says we should demo a version that's been 'enhanced' for the presentation-smoother than what customers actually experience. Everyone does it, he says. Investors expect the best-case scenario.",
        aside: "The line between a polished demo and a misleading one is genuinely blurry. Every startup shows their best side. But some 'best sides' are closer to fiction than others. Theranos started with a demo that didn't quite work.",
        choices: [
          { text: "Show exactly what we have-warts and all", reaction: "Honest. Some investors respect it. Others fund the company with the slicker demo.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 1, hr: 2, cash: 40 }, mood: 2 },
          { text: "Polish heavily but don't fake functionality", reaction: "Best foot forward. The demo works; it's just... optimised.", emoji: "üôÇ", ap: 2, cost: 20, eff: { mkt: 3, cash: 80 }, mood: 1 },
          { text: "Make it look as good as possible-we'll catch up", reaction: "The Silicon Valley way. Hope we can deliver what we just showed.", emoji: "üòê", ap: 2, cost: 25, eff: { mkt: 4, cash: 120, hr: -1 }, mood: -1 }
        ]
      },
      {
        intro: "A journalist wants to write about us for a major tech publication. She's enthusiastic and hasn't asked hard questions about our actual customer numbers or revenue. We could let her write the glowing piece, or we could volunteer context that might make it more balanced-and less useful for recruiting and fundraising.",
        aside: "Favourable press can be transformative for a startup. Correcting a journalist's assumptions feels like shooting yourself in the foot. But puff pieces can come back to haunt you when reality emerges.",
        choices: [
          { text: "Volunteer accurate context", reaction: "Honest. Article is more measured. Still positive, less viral.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 2, hr: 1 }, mood: 2 },
          { text: "Answer questions honestly but don't volunteer", reaction: "Professional approach. Integrity maintained.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 3, hr: 1 }, mood: 1 },
          { text: "Let the story run-we need the exposure", reaction: "Great press. Momentum builds.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 4 }, mood: 0 }
        ]
      },
      {
        intro: "We're about to announce a 'partnership' with a major company. In reality, we've had one meeting and they said they'd 'explore opportunities'. Our PR firm wants to put out a release saying we're 'working together'-technically true but massively overstated. It would help our next funding round enormously.",
        aside: "Startups announce 'partnerships' constantly. Most are exploratory conversations dressed up as strategic alliances. Everyone knows this. But it still works-until someone asks the 'partner' and they say 'who?'",
        choices: [
          { text: "Announce only what's actually agreed", reaction: "Honest. Less impressive. Won't get picked up.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 1, hr: 1 }, mood: 2 },
          { text: "Soft language-'exploring collaboration'", reaction: "Technically accurate. Sounds better than it is.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3 }, mood: 0 },
          { text: "Call it a partnership-everyone does", reaction: "Great headline. Doors open.", emoji: "üôÇ", ap: 1, cost: 15, eff: { mkt: 4, cash: 30 }, mood: 0 }
        ]
      },
      {
        intro: "Our runway is six months. We're telling recruits it's twelve. We're telling investors we're 'well-funded'. We're telling customers we're 'growing fast'. None of this is technically lying-but none of it is quite true either. A senior hire is asking pointed questions about our financial position.",
        aside: "Startups live in a state of perpetual optimism about their own survival. Admitting fragility scares away the people and money you need to not be fragile. But recruits who join under false pretences may have given up other offers.",
        choices: [
          { text: "Be honest about our position", reaction: "Some candidates and customers walk away. The ones who stay really believe.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: -1, hr: 2 }, mood: 2 },
          { text: "Optimistic but not misleading", reaction: "Emphasise the opportunity, acknowledge the risk. Fair.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2, hr: 1 }, mood: 1 },
          { text: "Keep up the confident front", reaction: "Confidence attracts customers.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 3 }, mood: 0 }
        ]
      }
    ]
  },
  
  dev: {
    // AOIFE MURPHY - The Architect
    aoife: [
      {
        intro: "The way our system is built will cope with maybe two more big customers. After that, things will start crashing and slowing down. We need to either rebuild the core structure now, or accept we'll face serious problems later.",
        aside: "Adding new features to a shaky foundation just means more things that can break. I've watched this story play out before at other companies.",
        choices: [
          { text: "Rebuild the core structure properly", reaction: "Grand. I'll put together a proper plan.", emoji: "üòä", ap: 5, cost: 50, eff: { dev: 6, mkt: -2 }, mood: 2 },
          { text: "Fix only the worst problems", reaction: "Not ideal, but we can make it work.", emoji: "üòê", ap: 3, cost: 25, eff: { dev: 3 }, mood: 0 },
          { text: "Keep adding features, fix later", reaction: "I want 'later' in writing.", emoji: "üòí", ap: 1, cost: 15, eff: { dev: 1, mkt: 3 }, mood: -2 }
        ]
      },
      {
        intro: "Remember all those times we said 'we'll fix it properly later'? Later is now. Every quick fix and workaround we've built is slowing us down. Simple changes take three times as long because the code is a tangled mess.",
        aside: "I've watched good engineers quit over this. Nobody wants to work in a codebase held together with string and prayers.",
        choices: [
          { text: "Dedicate two weeks to fixing it properly", reaction: "The team will thank us. So will future us.", emoji: "üòä", ap: 4, cost: 30, eff: { dev: 5, hr: 1 }, mood: 2 },
          { text: "Split time between fixes and features", reaction: "Compromise. I can work with that.", emoji: "üôÇ", ap: 3, cost: 20, eff: { dev: 3, mkt: 1 }, mood: 0 },
          { text: "Just fix things when they break", reaction: "We're making it worse. Note that.", emoji: "üòí", ap: 1, cost: 10, eff: { dev: 1, mkt: 2 }, mood: -2 }
        ]
      },
      {
        intro: "Every time we update our software, someone has to manually copy files, run checks, and pray nothing breaks. Last week's 3am emergency? That was a typo in a manual step. We need to automate this entire process.",
        aside: "Machines don't get tired or make typos at 3am. We should let them handle the boring, repetitive work.",
        choices: [
          { text: "Build a fully automated update system", reaction: "This pays for itself in months.", emoji: "üòä", ap: 4, cost: 35, eff: { dev: 4, hr: 1 }, mood: 2 },
          { text: "Automate just the riskiest parts", reaction: "Better than nothing. We'll build on this.", emoji: "üôÇ", ap: 3, cost: 20, eff: { dev: 3 }, mood: 0 },
          { text: "Keep doing it manually", reaction: "Until it breaks. At the worst time.", emoji: "üòí", ap: 1, cost: 5, eff: { dev: 1 }, mood: -2 }
        ]
      },
      {
        intro: "A large UK company wants to hire us for a custom project-they want our AI adapted to work in their specific systems. We could build it in a way that creates tools we can sell to others, or just do exactly what they need and move on.",
        aside: "Custom projects pay well, but they can distract us from our main product. The smart approach is to build things that help this client AND become part of our product for everyone else.",
        choices: [
          { text: "Build it so we can reuse it later", reaction: "Revenue now, and features everyone can use.", emoji: "üòä", ap: 4, cost: 30, eff: { dev: 3, mkt: 2, cash: 90 }, mood: 2 },
          { text: "Just build what they need", reaction: "Quick money, but we can't use this work again.", emoji: "üòê", ap: 3, cost: 20, eff: { dev: 1, cash: 80 }, mood: 0 },
          { text: "Decline-stay focused on our product", reaction: "Product focus pays off. Ship faster.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Another UK startup wants to connect their product to ours so their customers can use our AI. It would mean more users for us, but also more support calls and we'd need to coordinate whenever either of us makes changes.",
        aside: "Partnerships can help us reach customers we'd never find alone. But every connection we build is another thing we have to maintain.",
        choices: [
          { text: "Build a proper connection with full support", reaction: "Share customers and learn from their edge cases.", emoji: "üòä", ap: 4, cost: 30, eff: { dev: 3, mkt: 2, cash: 60 }, mood: 2 },
          { text: "Build a basic version first to test it", reaction: "Test whether it works without drowning in requests.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2, mkt: 1, cash: 30 }, mood: 0 },
          { text: "Decline-keep things simple", reaction: "Our roadmap stays clear. Execute well.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our research data is scattered across dozens of spreadsheets, random folders, and the personal laptops of stressed PhD students. Last month we wasted a week recreating an experiment because nobody could find the original results.",
        aside: "A proper system would let us find past experiments instantly and repeat them exactly. Right now, when someone leaves, their knowledge walks out the door with them.",
        choices: [
          { text: "Build a proper data management system", reaction: "Chaos subsides. We'll discover datasets we'd forgotten.", emoji: "üòä", ap: 4, cost: 60, eff: { dev: 6, sci: 2 }, mood: 2 },
          { text: "Hire someone to organise the worst bits", reaction: "Better, but we'll revisit this.", emoji: "üôÇ", ap: 2, cost: 30, eff: { dev: 3, sci: 1 }, mood: 0 },
          { text: "Leave it for after the next deadline", reaction: "Prioritise the deadline. Team stays focused.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A UK supermarket wants our robots to work differently at night-slower movements, quieter motors, different routes when shelf-stackers are around. We could build a settings system that any customer can adjust, or just write special code for this one client.",
        aside: "The quick fix works for them, but next month another customer will want something different. If we keep doing one-off fixes, eventually our code becomes an unmaintainable mess.",
        choices: [
          { text: "Build a proper settings system", reaction: "Adapt to each store without rewriting code every time.", emoji: "üòä", ap: 5, cost: 50, eff: { dev: 5, mkt: 2, cash: 40 }, mood: 2 },
          { text: "Write custom code just for them", reaction: "Works for now. The mess grows.", emoji: "üòê", ap: 3, cost: 25, eff: { dev: 3, mkt: 1, cash: 20 }, mood: 0 },
          { text: "Tell them our product works one way", reaction: "Clear positioning. Integrity preserved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1, hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A UK competitor just launched a feature that's very similar to something we were planning to build. Customers are asking if we have it too. We could rush to catch up, focus on doing something different instead, or stick to our original plan.",
        aside: "Reacting to competitors can distract us from what makes us special. But ignoring them completely might mean losing customers who want that feature.",
        choices: [
          { text: "Rush to build our own version", reaction: "Ship a better version. Show side-by-side comparisons.", emoji: "üòä", ap: 4, cost: 30, eff: { dev: 3, mkt: 2 }, mood: 2 },
          { text: "Focus on what makes us different", reaction: "Lean into our strengths instead of chasing features.", emoji: "üôÇ", ap: 3, cost: 20, eff: { dev: 2, mkt: 1 }, mood: 1 },
          { text: "Stick to our original plan", reaction: "Disciplined execution. Stay focused.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We need to decide how to license our code. Open source could build a community and attract developers, but we'd be giving away our work for free. Keeping it proprietary protects our investment but limits how quickly we can grow. There are also different types of open source licenses with very different rules.",
        aside: "Some open source licenses let anyone use your code for anything, including competitors. Others require anyone who modifies it to share their changes. The choice matters more than people realise.",
        choices: [
          { text: "Permissive open source (like MIT)", reaction: "Maximum adoption. Anyone can use it, even competitors building commercial products.", emoji: "üòä", ap: 3, cost: 15, eff: { dev: 4, mkt: 3, sci: 1 }, mood: 2 },
          { text: "Copyleft open source (like GPL)", reaction: "Derivatives must also be open source. Protects the commons but scares some businesses.", emoji: "üôÇ", ap: 3, cost: 15, eff: { dev: 3, mkt: 2, sci: 2 }, mood: 1 },
          { text: "Keep it proprietary", reaction: "Full control. Slower community growth but we own everything.", emoji: "üòê", ap: 2, cost: 10, eff: { dev: 2, mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our company name is getting recognised, but we haven't registered it as a trademark. A lawyer is warning us that someone else could register it first-or a similar name could cause confusion in the market. Trademark registration takes time and money, and we'd need to decide which countries to register in.",
        aside: "Trademarks protect your brand name and logo. Without registration, you have limited legal options if someone copies your name. But registering everywhere is expensive.",
        choices: [
          { text: "Register trademark in UK, EU, and US", reaction: "Covers our main markets. We're protected where it matters.", emoji: "üòä", ap: 3, cost: 35, eff: { mkt: 3, dev: 1 }, mood: 2 },
          { text: "Just register in the UK for now", reaction: "Affordable protection in our home market. We can expand later.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Defer-we have bigger priorities", reaction: "Focus on product. Brand can wait.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A potential supplier wants us to sign a mutual NDA-a non-disclosure agreement-before they'll share details of their technology. It means both sides promise to keep each other's secrets confidential. Seems reasonable, but our lawyer wants to review the terms carefully.",
        aside: "NDAs are standard in business, but the details matter. How long does confidentiality last? What counts as confidential? Can we hire their staff? These clauses can come back to bite you.",
        choices: [
          { text: "Review carefully and negotiate terms", reaction: "Takes time but protects us from nasty surprises.", emoji: "üòä", ap: 3, cost: 20, eff: { dev: 2, mkt: 1 }, mood: 2 },
          { text: "Sign their standard agreement", reaction: "Quick and easy. Hope there's nothing unusual in there.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, mkt: 1 }, mood: 0 },
          { text: "Decline and find another supplier", reaction: "Avoid the complexity. But we lose this opportunity.", emoji: "üòê", ap: 2, cost: 10, eff: { dev: 0, mkt: -1 }, mood: -1 }
        ]
      },
      {
        intro: "A large potential customer wants to see a demo of our product, but first they're asking us to sign a one-way NDA. We'd promise to keep their information confidential, but they wouldn't promise the same about ours. It feels unbalanced, but this is apparently standard practice for big corporations.",
        aside: "Large companies often insist on one-way NDAs because they talk to many vendors. But it means if you show them your innovations, you have no legal protection if they share your ideas.",
        choices: [
          { text: "Push for a mutual NDA instead", reaction: "Fair is fair. Some big companies will agree if you push.", emoji: "üòä", ap: 2, cost: 10, eff: { dev: 2, mkt: 1 }, mood: 2 },
          { text: "Sign but limit what we reveal", reaction: "Play the game, but keep our best secrets hidden.", emoji: "üôÇ", ap: 2, cost: 5, eff: { dev: 1, mkt: 2 }, mood: 0 },
          { text: "Sign and share everything", reaction: "Full transparency wins trust.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 3 }, mood: 0 }
        ]
      },
      {
        intro: "A senior engineer is leaving to join a competitor. Our employment contracts include a non-compete clause that says employees can't work for competitors for 12 months after leaving. Our lawyer says we could enforce it, but it would be expensive, create bad publicity, and might not even hold up in court.",
        aside: "Non-compete clauses are controversial. UK courts often refuse to enforce them unless they're reasonable in scope and duration. But the threat alone can deter people.",
        choices: [
          { text: "Enforce the non-compete", reaction: "Send a message. But lawyers get rich and we look bad.", emoji: "üòê", ap: 3, cost: 40, eff: { hr: -2, dev: 1, mkt: -1 }, mood: -1 },
          { text: "Negotiate a deal-garden leave", reaction: "Pay them to stay home for a few months. Expensive but cleaner.", emoji: "üôÇ", ap: 2, cost: 25, eff: { hr: 1, dev: 1, cash: -20 }, mood: 1 },
          { text: "Let them go without a fight", reaction: "Take the high road. They might even come back one day.", emoji: "üòä", ap: 1, cost: 5, eff: { hr: 2, mkt: 1 }, mood: 2 }
        ]
      },
      {
        intro: "We've discovered that a smaller company is using code that looks very similar to ours in their product. We think they might have copied it-possibly from an ex-employee or from code we shared during a partnership discussion. Our lawyer says we could sue for copyright infringement.",
        aside: "Copyright automatically protects original code. But proving someone copied it is hard, and lawsuits are expensive and distracting. Sometimes a strongly-worded letter is enough.",
        choices: [
          { text: "Send a cease and desist letter", reaction: "Put them on notice. Often enough to make them stop.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 2, mkt: 1 }, mood: 2 },
          { text: "Sue for copyright infringement", reaction: "Full legal action. Expensive, slow, but sends a strong message.", emoji: "üòê", ap: 4, cost: 50, eff: { dev: 1, mkt: 2, cash: -40 }, mood: 0 },
          { text: "Let it go-focus on our own work", reaction: "Outcompete them with better product.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our robots use a clever new gripper mechanism. The question is: can we patent it? Our attorney says mechanical inventions are straightforward to patent, but the software controlling the gripper is trickier. In Europe, 'software as such' can't be patented, but 'software with a technical effect' sometimes can. The US is more permissive but the rules keep changing.",
        aside: "Robotics companies often file separate patents for hardware and software. The mechanical parts are usually easier to protect. The AI and algorithms are harder-and that's often where the real value lies.",
        choices: [
          { text: "Patent both hardware and software aspects", reaction: "Cover all angles. The software patent might be challenged, but it's worth trying.", emoji: "üòä", ap: 4, cost: 45, eff: { dev: 4, mkt: 2, cash: -40 }, mood: 2 },
          { text: "Patent the hardware, keep software as trade secret", reaction: "Protects what we can. The code stays hidden instead of published in a patent.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 3, mkt: 1, cash: -20 }, mood: 1 },
          { text: "Rely on speed and trade secrets instead", reaction: "Move fast. Stay ahead.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "We're entering a market dominated by large industrial automation companies. They have thousands of patents-a 'patent thicket' that's almost impossible to navigate without infringing something. Our lawyer warns that building any robot arm probably infringes someone's patent somewhere. The question is whether anyone will notice, and whether they'll care about a small startup.",
        aside: "Big companies sometimes ignore small competitors, but they also use patent threats to force acquisitions at low prices. Once you're successful enough to be noticed, you become a target.",
        choices: [
          { text: "Do a full patent landscape analysis", reaction: "Expensive but we'll know exactly where the landmines are.", emoji: "üòä", ap: 4, cost: 50, eff: { dev: 3, mkt: 2, cash: -45 }, mood: 1 },
          { text: "Design around the obvious problem patents", reaction: "Avoid the worst risks. Some uncertainty remains.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 2, mkt: 1 }, mood: 0 },
          { text: "Move fast and hope nobody sues", reaction: "The startup way. Works until it doesn't.", emoji: "üòê", ap: 1, cost: 5, eff: { dev: 1, mkt: 2 }, mood: -1 }
        ]
      },
      {
        intro: "One of our engineers has invented an improvement to our path-planning algorithm. Should we patent it? Patents require public disclosure-our competitors will read exactly how it works. The alternative is keeping it as a trade secret, like Coca-Cola's formula. But if a competitor independently invents the same thing and patents it, they could block us from using our own invention.",
        aside: "The patent vs trade secret decision depends on whether competitors could reverse-engineer your innovation. If they can figure it out by examining your product, a trade secret won't help.",
        choices: [
          { text: "Patent it-disclosure is worth the protection", reaction: "Twenty years of exclusive rights. Competitors know how it works but can't use it.", emoji: "üòä", ap: 3, cost: 30, eff: { dev: 3, mkt: 2, cash: -25 }, mood: 2 },
          { text: "Keep it as a trade secret", reaction: "Stays hidden forever-or until someone leaks it or figures it out.", emoji: "üôÇ", ap: 2, cost: 10, eff: { dev: 2, mkt: 1 }, mood: 1 },
          { text: "Publish it to prevent anyone patenting it", reaction: "Defensive publishing. We can't own it, but neither can anyone else.", emoji: "üòê", ap: 2, cost: 5, eff: { dev: 1, sci: 2, mkt: 0 }, mood: 0 }
        ]
      },
      {
        intro: "A customer sent us photos of a product from a Shenzhen manufacturer that looks suspiciously like our robot design, selling at half our price. International patent enforcement is always difficult-different legal systems, language barriers, local courts that may favour local companies. China has improved its IP courts significantly, but the process is still slow, expensive, and uncertain.",
        aside: "Cross-border IP enforcement is genuinely hard everywhere. The question isn't whether the system is perfect-it isn't-but whether enforcement is worth the cost and distraction. Some companies find success; many don't.",
        choices: [
          { text: "Pursue enforcement through Chinese IP courts", reaction: "Long process. Better odds than a decade ago, but still uncertain.", emoji: "üòê", ap: 4, cost: 60, eff: { dev: 1, mkt: 2, cash: -55 }, mood: 0 },
          { text: "Focus on markets where we have stronger protections", reaction: "Pick battles we can win. Accept losses elsewhere.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 1, mkt: 1 }, mood: 1 },
          { text: "Compete on quality, service, and speed instead", reaction: "Accept copycats exist everywhere. Win on everything else.", emoji: "üòä", ap: 2, cost: 10, eff: { dev: 2, mkt: 2 }, mood: 2 }
        ]
      },
      {
        intro: "Our investors are asking about our patent portfolio before the next funding round. They want to see a strong 'IP moat' that protects our technology from competitors. Our current portfolio has three granted patents and two pending applications. The investors' IP advisor thinks we need at least ten patents to look serious to later-stage investors.",
        aside: "Some investors count patents like trophies. Others care more about whether the patents actually protect something valuable. Quality matters more than quantity, but quantity is easier to measure.",
        choices: [
          { text: "File several new patent applications", reaction: "Bulks up the portfolio for investors. Expensive but looks impressive.", emoji: "üòä", ap: 3, cost: 50, eff: { dev: 2, mkt: 3, cash: -45 }, mood: 2 },
          { text: "Focus on strengthening existing patents", reaction: "Quality over quantity. Harder to explain to non-experts.", emoji: "üôÇ", ap: 2, cost: 25, eff: { dev: 2, mkt: 1, cash: -20 }, mood: 1 },
          { text: "Push back-our tech speaks for itself", reaction: "Confident stance. Serious investors respect it.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've received a letter from a company we've never heard of claiming we infringe their patent. Looking them up, they appear to be a 'patent troll'-a company that buys up patents purely to threaten other businesses with litigation. They're demanding ¬£200,000 to go away. Our lawyer says fighting them would cost more than settling, even if we'd probably win.",
        aside: "Patent trolls are a tax on innovation. They target companies that can afford to settle but can't afford to fight. Many founders quietly pay them off rather than face years of distraction.",
        choices: [
          { text: "Fight it on principle", reaction: "Expensive and distracting, but we won't be easy prey.", emoji: "üòê", ap: 5, cost: 70, eff: { dev: -2, mkt: 1, cash: -60 }, mood: -1 },
          { text: "Negotiate a smaller settlement", reaction: "Painful but pragmatic. They'll probably take less to avoid court.", emoji: "üôÇ", ap: 2, cost: 30, eff: { dev: 0, mkt: 0, cash: -80 }, mood: 0 },
          { text: "Join a defensive patent pool", reaction: "Pay into a group that fights trolls collectively. Helps everyone.", emoji: "üòä", ap: 2, cost: 20, eff: { dev: 1, mkt: 1, cash: -15 }, mood: 2 }
        ]
      },
      {
        intro: "Our CTO wants to dedicate one of our best engineers to 'patent mining'-systematically reviewing everything we've built to find patentable inventions we haven't protected yet. It would take her off product development for two months, but she knows the technology better than anyone and could probably identify a dozen filings.",
        aside: "Most companies patent less than they could because engineers hate the paperwork and want to build things instead. Dedicated patent mining often uncovers valuable IP that would otherwise be lost.",
        choices: [
          { text: "Go ahead-two months of her time", reaction: "Systematic approach. We'll find things we didn't know we had.", emoji: "üòä", ap: 5, cost: 40, eff: { dev: -1, sci: 2, mkt: 2, hr: -1 }, mood: 1 },
          { text: "One month, focused on highest priorities", reaction: "Balance between coverage and keeping the product moving.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 0, sci: 1, mkt: 1 }, mood: 1 },
          { text: "Add patent review to regular sprint process", reaction: "Systematic approach. IP protected.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 1, sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've found a way to make our software work on older, cheaper devices-not just the latest phones and computers. This matters for healthcare workers using clinic tablets in rural Indonesia, teachers in underfunded UK schools, and field researchers everywhere. But supporting diverse hardware means more testing, more bugs, and slower feature development.",
        aside: "Device constraints exist everywhere-budget-conscious users in wealthy countries, infrastructure limitations in remote areas, organisations that can't refresh hardware often. The question is whether we build for the users we have or the users we wish we had.",
        choices: [
          { text: "Support a wide range of devices", reaction: "More complex to build. Reaches people others ignore.", emoji: "üòä", ap: 4, cost: 35, eff: { dev: 2, mkt: 4, hr: 1 }, mood: 2 },
          { text: "Core features on old devices, full experience on new", reaction: "Tiered approach. Everyone gets something useful.", emoji: "üôÇ", ap: 3, cost: 30, eff: { dev: 1, mkt: 3 }, mood: 1 },
          { text: "Optimise for modern devices only", reaction: "Simpler to build. Excludes people we could have helped.", emoji: "üòê", ap: 2, cost: 15, eff: { dev: 2, mkt: 1 }, mood: -1 }
        ]
      },
      {
        intro: "Our servers run constantly, burning electricity even when nobody's using the product. We could redesign to scale down when quiet and scale up when busy-it would cut our energy use by 60% but cost three months of engineering time to rebuild.",
        aside: "Most software wastes enormous amounts of energy running at full power around the clock. Efficient design is better for the planet and, eventually, cheaper.",
        choices: [
          { text: "Rebuild for efficiency", reaction: "Three months now saves energy forever. And cuts our bills.", emoji: "üòä", ap: 5, cost: 45, eff: { dev: 3, mkt: 1, cash: -20 }, mood: 2 },
          { text: "Gradual improvements over time", reaction: "Chip away at it. Less disruptive, slower progress.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 1, mkt: 0 }, mood: 1 },
          { text: "Energy costs aren't our biggest problem", reaction: "Focus on core priorities. Practical choice.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "We've discovered our product is being used in ways we didn't intend and don't like-nothing illegal, but ethically uncomfortable. We could add restrictions that prevent this use, but some paying customers would leave. Or we could ignore it since we can't control what people do with our tools.",
        aside: "Once you ship a product, you lose control of how it's used. But you can design to encourage good uses and discourage bad ones.",
        choices: [
          { text: "Add restrictions-values matter more than revenue", reaction: "We lose some customers. We keep our integrity.", emoji: "üòä", ap: 3, cost: 25, eff: { dev: 1, mkt: 1, hr: 1, cash: -30 }, mood: 2 },
          { text: "Discourage the use without blocking it", reaction: "Softer approach. Some will ignore us.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 1, mkt: 1 }, mood: 1 },
          { text: "Not our responsibility how people use it", reaction: "Focus on core product. Let customers decide.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, cash: 10 }, mood: 0 }
        ]
      },
      {
        intro: "A team member has noticed our product isn't accessible to users with disabilities-people who use screen readers or can't use a mouse can't use our software at all. Fixing it properly would take significant effort, and we don't think disabled users are a big part of our market.",
        aside: "Accessibility is often treated as optional. But it's both legally required in many places and simply the right thing to do. Everyone deserves to use technology.",
        choices: [
          { text: "Full accessibility redesign", reaction: "Significant investment. We'll be proud of the result.", emoji: "üòä", ap: 4, cost: 40, eff: { dev: 2, mkt: 2, hr: 2 }, mood: 2 },
          { text: "Basic accessibility fixes", reaction: "Better than nothing. Not perfect.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 1, mkt: 1 }, mood: 1 },
          { text: "Add to backlog for later", reaction: "Noted for future. Stay focused now.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Before we release our AI, we should probably write up what it can and can't do-what data we trained it on, where it's known to fail, what biases we've found. Creating proper documentation takes time. We could ship now and write it up later, or delay release to do it right.",
        aside: "Good documentation helps users understand what they're getting and helps researchers spot problems. It's increasingly expected for responsible AI releases. But it's extra work, and the pressure to ship is real.",
        choices: [
          { text: "Delay release for proper documentation", reaction: "Responsible approach. Competitors don't wait.", emoji: "üòä", ap: 3, cost: 25, eff: { dev: 2, sci: 2, mkt: 1 }, mood: 2 },
          { text: "Ship with basic docs, improve over time", reaction: "Better than nothing. Commit to updating it.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2, sci: 1, mkt: 2 }, mood: 1 },
          { text: "Ship now, document if anyone asks", reaction: "Speed to market. Customers happy.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 2, mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "Our AI can be tricked into producing harmful outputs if users phrase their requests cleverly-asking for dangerous information disguised as fiction, for example. We can add safety filters, but they slow down responses and sometimes block legitimate requests. Tighter safety means worse usability; looser safety means more ways to cause harm.",
        aside: "Every AI system can be manipulated. The question is how much inconvenience you're willing to impose on ordinary users to make manipulation harder. There's no perfect answer.",
        choices: [
          { text: "Strong safety filters-prioritise preventing harm", reaction: "Some users frustrated. Fewer harmful outputs.", emoji: "üòä", ap: 3, cost: 30, eff: { dev: 2, mkt: -1, sci: 1 }, mood: 2 },
          { text: "Balanced approach-block obvious harms", reaction: "Most manipulation prevented. Clever tricks might get through.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 2, mkt: 2 }, mood: 1 },
          { text: "Minimal filters-trust users", reaction: "Fast and flexible. Users love the freedom.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 2, mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "We're considering whether to hire people to deliberately try to break our AI before we release it-finding ways it could be misused or fail dangerously. This kind of stress-testing takes weeks and might find problems that delay our launch. But it might also find problems before our users and the press do.",
        aside: "Having outsiders try to break your system before launch is becoming standard practice at major AI companies. Finding your own problems is better than having journalists or bad actors find them for you. But it costs time and money.",
        choices: [
          { text: "Thorough stress-testing before release", reaction: "Find problems before users do. Might delay launch.", emoji: "üòä", ap: 4, cost: 35, eff: { dev: 3, sci: 2, mkt: 1 }, mood: 2 },
          { text: "Quick internal security review", reaction: "Better than nothing. Probably miss things.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2, mkt: 2 }, mood: 1 },
          { text: "Ship and monitor for problems", reaction: "Learn from real usage. Iterate fast.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 2, mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "Our AI makes decisions that affect people, but we don't keep records of why it made each decision. If someone challenges an outcome-say, why they were rejected for a loan-we can't explain what happened. Adding proper record-keeping would slow things down and require significant storage.",
        aside: "Being able to show why decisions were made is increasingly required by regulators and expected by customers. But it's expensive to add after the fact. The question is whether to invest now or hope you don't need it.",
        choices: [
          { text: "Build comprehensive decision records", reaction: "Ready for regulators. Significant engineering investment.", emoji: "üòä", ap: 4, cost: 40, eff: { dev: 2, mkt: 2, sci: 1 }, mood: 2 },
          { text: "Log key decisions only", reaction: "Partial coverage. Better than nothing.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 2, mkt: 1 }, mood: 1 },
          { text: "Add logging when customers require it", reaction: "Customer-driven development. Efficient.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 2, mkt: 2 }, mood: 0 }
        ]
      }
    ],
    
    // RAJ PATEL - The Pragmatist
    raj: [
      {
        intro: "Look, our platform isn't perfect-there are rough edges and things I'd love to fix. But I've shipped products in worse shape, and they found customers. The question is: do we polish what we have, or build what customers are actually asking for?",
        aside: "I've watched startups spend so long perfecting their product that they ran out of money before anyone could use it. Sometimes 'good enough' wins.",
        choices: [
          { text: "Build what customers want now", reaction: "Good call. Demo-ready in two weeks.", emoji: "üëç", ap: 3, cost: 20, eff: { dev: 2, mkt: 4 }, mood: 2 },
          { text: "Quick fixes first, then features", reaction: "Fair enough. Let me prioritise.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 3, mkt: 2 }, mood: 1 },
          { text: "Fix the platform properly first", reaction: "That's a lot of money to spend before we see any revenue.", emoji: "üò¨", ap: 5, cost: 45, eff: { dev: 5, mkt: -1 }, mood: -1 }
        ]
      },
      {
        intro: "A customer wants something we weren't planning to build. It's not on our roadmap, but they're offering good money and need it quickly. Saying yes means reshuffling our priorities.",
        aside: "Custom work can fund everything else. But every time we say yes to something off-plan, we delay everything on the plan.",
        choices: [
          { text: "Take the deal, shuffle the priorities", reaction: "Money talks. Let me make it work.", emoji: "üëç", ap: 4, cost: 30, eff: { dev: 1, mkt: 2, cash: 80 }, mood: 2 },
          { text: "Negotiate a version we can manage", reaction: "Find a version that works for everyone.", emoji: "üôÇ", ap: 3, cost: 20, eff: { dev: 2, mkt: 1, cash: 50 }, mood: 1 },
          { text: "Say no-stick to the plan", reaction: "Hope the plan pays the bills.", emoji: "ü§∑", ap: 1, cost: 5, eff: { dev: 2 }, mood: -1 }
        ]
      },
      {
        intro: "A UK investment firm wants a simple screen where their staff can see, at a glance, how much money is at risk each day. Right now they're drowning in spreadsheets and can't easily show regulators what's happening.",
        aside: "When clients can understand our outputs easily, they trust us more. And when regulators can see things clearly, everyone sleeps better.",
        choices: [
          { text: "Build a clear, visual dashboard", reaction: "Clients understand. No more midnight spreadsheet emails.", emoji: "üëç", ap: 4, cost: 35, eff: { dev: 4, mkt: 3, cash: 50 }, mood: 2 },
          { text: "Just let them download the data", reaction: "Technically works. Not exactly impressive.", emoji: "üòê", ap: 2, cost: 15, eff: { dev: 2, mkt: 1, cash: 20 }, mood: 0 },
          { text: "Tell them to use our internal tools", reaction: "Keep it simple. Focus on core product.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our sales team is complaining that when they show the product to potential customers, the system is full of test data, error messages, and yesterday's experiments. They want a clean version that always looks professional and never has embarrassing glitches during a pitch.",
        aside: "First impressions matter. Demos close deals. But keeping a separate 'show version' running takes engineering time away from building actual features.",
        choices: [
          { text: "Set up an automatic clean demo system", reaction: "Worth it. Good demos sell.", emoji: "üëç", ap: 4, cost: 30, eff: { dev: 2, mkt: 3 }, mood: 2 },
          { text: "Manually tidy up before big meetings", reaction: "More work for us, but cheaper.", emoji: "üòê", ap: 2, cost: 15, eff: { dev: 1, mkt: 2 }, mood: 0 },
          { text: "Just use the real system with test accounts", reaction: "Show them the real thing. Authentic demo.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "We've got a growing list of small problems that customers keep mentioning. Nothing that stops the product working, but little annoyances that add up: a button that's in the wrong place, a confusing error message, a page that loads slowly. Death by a thousand paper cuts.",
        aside: "Each small problem seems minor, but together they make customers feel like the product isn't quite polished. Fixing them all takes time away from building new things.",
        choices: [
          { text: "Spend a week fixing all of them", reaction: "Customer experience matters. Good call.", emoji: "üëç", ap: 3, cost: 20, eff: { dev: 3, mkt: 2 }, mood: 2 },
          { text: "Fix the ten worst, leave the rest", reaction: "Practical. Address the main offenders.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2, mkt: 1 }, mood: 1 },
          { text: "Keep building new features instead", reaction: "Innovation attracts new customers.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 2, mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our app is becoming popular with UK teenagers, and we're seeing more and more posts that push boundaries-some inappropriate content is slipping through our filters. Parents are starting to notice, and the press might be next.",
        aside: "Content problems can explode overnight. One viral story about harmful content and our reputation is damaged. But proper moderation takes real resources.",
        choices: [
          { text: "Full safety system overhaul", reaction: "Parents and press will thank us.", emoji: "üëç", ap: 4, cost: 35, eff: { dev: 3, hr: 2, mkt: 1 }, mood: 2 },
          { text: "Fix the worst problems, review later", reaction: "Firefighting mode. But we're understaffed.", emoji: "üòê", ap: 3, cost: 20, eff: { dev: 2, hr: 1 }, mood: 0 },
          { text: "Just rely on users reporting problems", reaction: "Users give real feedback. Learn fast.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A UK bank wants to use our AI to test what would happen to their investments if things went wrong-like a stock market crash or interest rates spiking. They want their own staff to be able to set up these 'what if' tests themselves, rather than asking us every time.",
        aside: "If they can do it themselves, we get fewer support requests. But if we give them too much control, they might break something or get confusing results.",
        choices: [
          { text: "Build a full 'what if' testing tool", reaction: "Their risk team feels in control. Fewer emails for us.", emoji: "üëç", ap: 5, cost: 40, eff: { dev: 3, mkt: 2 }, mood: 2 },
          { text: "Give them ready-made tests they can tweak", reaction: "Balance between flexibility and keeping things safe.", emoji: "üôÇ", ap: 3, cost: 20, eff: { dev: 2, mkt: 1 }, mood: 0 },
          { text: "Keep it so only we can set up tests", reaction: "Control quality. Ensure proper setup.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1, sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Marketing agencies across the UK are interested in our creative tool, but they're asking for ready-made starting points-professional templates they can quickly customise for client pitches rather than starting from scratch every time.",
        aside: "Good templates make it easy for agencies to adopt us. They'll use us more often if getting started is quick and the results look professional.",
        choices: [
          { text: "Design professional template packs", reaction: "Agencies use us for client pitches.", emoji: "üëç", ap: 4, cost: 30, eff: { dev: 2, mkt: 3 }, mood: 2 },
          { text: "Let users share templates with each other", reaction: "Community contributes. Quality varies.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2, mkt: 2 }, mood: 0 },
          { text: "Let agencies create their own", reaction: "Ecosystem grows. Partners extend our reach.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our product has a powerful API that developers love. A community member wants to write detailed documentation and tutorials explaining exactly how it works. Great for adoption, but it's also a roadmap for competitors to copy our approach.",
        aside: "Good documentation attracts developers. But it also teaches competitors exactly how we built everything. The best documentation reveals your thinking, not just your code.",
        choices: [
          { text: "Encourage it-openness builds ecosystem", reaction: "Developer love increases. So does competitive insight leakage.", emoji: "üòä", ap: 2, cost: 10, eff: { dev: 3, mkt: 4 }, mood: 2 },
          { text: "Provide official docs, discourage deep dives", reaction: "Controlled narrative. Some developers frustrated.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 2, mkt: 2 }, mood: 0 },
          { text: "Keep documentation minimal-our support is the product", reaction: "Premium experience. Personal touch.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A potential enterprise customer wants a detailed technical architecture review before signing. Their security team wants to understand exactly how we handle their data-encryption, storage, access controls, everything. It's reasonable for their compliance needs, but it's also a complete blueprint of our system.",
        aside: "Enterprise sales require transparency about security. But architecture documents are valuable intelligence. Some companies have 'borrowed' ideas during sales processes that never closed.",
        choices: [
          { text: "Full architecture disclosure under NDA", reaction: "They trust us. If the deal dies, they know everything.", emoji: "üôÇ", ap: 3, cost: 20, eff: { dev: 0, mkt: 3, cash: 60 }, mood: 1 },
          { text: "Third-party security audit instead", reaction: "Independent verification. Costs money but protects our secrets.", emoji: "üòä", ap: 2, cost: 30, eff: { dev: 1, mkt: 2, cash: 45 }, mood: 2 },
          { text: "High-level overview only", reaction: "Some enterprises walk away. Others accept it.", emoji: "üòê", ap: 1, cost: 10, eff: { dev: 1, mkt: 1, cash: 30 }, mood: 0 }
        ]
      },
      {
        intro: "We've built an internal tool that makes our developers twice as productive. Other companies would pay good money for it. But selling it means explaining how it works, supporting it, and helping competitors become more productive too.",
        aside: "Internal tools can become products-TeamChat started as an internal chat tool. But there's a reason most companies keep their best tools secret.",
        choices: [
          { text: "Productise and sell it", reaction: "New revenue stream. Competitors also get faster. Worth the trade-off?", emoji: "üòä", ap: 4, cost: 35, eff: { dev: 2, mkt: 3, cash: 50 }, mood: 2 },
          { text: "Open source it for community goodwill", reaction: "No revenue but massive developer love. Hiring becomes easier.", emoji: "üôÇ", ap: 3, cost: 15, eff: { dev: 1, mkt: 4, hr: 2 }, mood: 2 },
          { text: "Keep it internal-it's our secret weapon", reaction: "Competitive advantage stays ours.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 2, mkt: 1 }, mood: 1 }
        ]
      },
      {
        intro: "A competitor's engineer is interviewing with us. She's brilliant, and during the interview she's mentioned several technical approaches they use. Hiring her would bring that knowledge to us-but we'd hate it if our engineers did the same thing when they left.",
        aside: "Knowledge walks on two legs. Non-competes are hard to enforce, and people naturally bring what they've learned. The ethics are murky.",
        choices: [
          { text: "Hire her and debrief on their approaches", reaction: "Their knowledge becomes ours. If they hire our people, turnabout is fair play.", emoji: "üòê", ap: 3, cost: 35, eff: { dev: 4, mkt: 1, hr: -1 }, mood: 0 },
          { text: "Hire her but don't ask about previous work", reaction: "We get her skills, not their secrets. Ethical high ground.", emoji: "üòä", ap: 3, cost: 35, eff: { dev: 3, hr: 1 }, mood: 2 },
          { text: "Don't hire-too much legal risk", reaction: "Risk avoided. Clean hands.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've been asked to write a guest post for a major tech blog explaining how we solved a difficult engineering problem. It would be great publicity and recruiting material. Our solution is genuinely clever-which is exactly why our CTO is worried about publishing it.",
        aside: "Technical blog posts attract talent and establish credibility. They also educate competitors. The best companies share just enough to impress without giving away the recipe.",
        choices: [
          { text: "Write a detailed technical deep-dive", reaction: "Engineers love it. Competitors study it. We're seen as thought leaders.", emoji: "üòä", ap: 3, cost: 20, eff: { dev: 1, mkt: 4, hr: 2 }, mood: 2 },
          { text: "Write about the problem, vague on the solution", reaction: "Shows we're smart without showing how. Some readers frustrated.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 0, mkt: 2, hr: 1 }, mood: 1 },
          { text: "Decline the opportunity", reaction: "Keep methods secret. Competitive edge preserved.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Marketing wants us to add features that keep users on the app longer-notifications that pull them back, streaks that punish missing a day, design tricks that make it hard to leave. It would boost our engagement numbers, but some of these tactics feel manipulative.",
        aside: "The tech industry has perfected the art of grabbing attention. Some of these patterns are genuinely helpful; others exploit human psychology. The line isn't always clear.",
        choices: [
          { text: "Reject manipulative patterns entirely", reaction: "Engagement suffers. Conscience clear.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 1, mkt: -1, hr: 1 }, mood: 2 },
          { text: "Use gentle nudges, not dark patterns", reaction: "Encourage use without manipulation. Middle ground.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 2, mkt: 2 }, mood: 1 },
          { text: "Use whatever works-competitors do", reaction: "Everyone does this. We need the numbers.", emoji: "üòê", ap: 2, cost: 15, eff: { dev: 2, mkt: 4 }, mood: -1 }
        ]
      },
      {
        intro: "We collect a lot of user data because it helps us improve the product. But we're collecting more than we strictly need, and storing it indefinitely. A privacy-focused approach would collect less and delete it sooner, but we might lose insights that help us build better features.",
        aside: "Data is valuable, but it's also a liability. Every piece of data you store is data that could be breached, subpoenaed, or misused. Collecting less is often safer.",
        choices: [
          { text: "Collect minimum data, delete after 90 days", reaction: "Privacy-first approach. We lose some insights.", emoji: "üòä", ap: 3, cost: 25, eff: { dev: 1, mkt: 1, hr: 1 }, mood: 2 },
          { text: "Collect what we need, anonymise after a year", reaction: "Balance between utility and privacy.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 2, mkt: 2 }, mood: 1 },
          { text: "Collect everything-data is valuable", reaction: "Maximum insight for product improvement.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 3, mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "User testing reveals our product is hard to use for people who aren't already familiar with similar tools-whether that's someone's first time using this kind of software, or someone who just processes information differently. Clearer labels, larger text, and simpler flows would help them, but our power users might find it cluttered.",
        aside: "Intuitive to who? What feels obvious to one person is confusing to another. Good design works for the widest range of people, but that takes more effort than designing for people like yourself.",
        choices: [
          { text: "Redesign for clarity and accessibility", reaction: "More work. Helps more people. Often improves things for everyone.", emoji: "üòä", ap: 4, cost: 35, eff: { dev: 2, mkt: 4 }, mood: 2 },
          { text: "Offer a simplified mode alongside the full version", reaction: "Two experiences to maintain. Serves different needs.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 1, mkt: 2 }, mood: 1 },
          { text: "Keep optimising for our current users", reaction: "They're happy. Potential users we never reach stay invisible.", emoji: "üòê", ap: 1, cost: 10, eff: { dev: 1, mkt: 1 }, mood: -1 }
        ]
      },
      {
        intro: "Our app encourages frequent use in ways that might not be healthy. Some users are clearly spending too much time on it. We could add features that remind people to take breaks or limit daily use, but that would deliberately reduce engagement-the opposite of what we usually optimise for.",
        aside: "Tech companies rarely design for less usage. But some are starting to add wellbeing features. It's good for users and increasingly expected.",
        choices: [
          { text: "Add meaningful wellbeing features", reaction: "Help people use us healthily. Revolutionary concept.", emoji: "üòä", ap: 3, cost: 25, eff: { dev: 1, mkt: 2, hr: 1 }, mood: 2 },
          { text: "Add basic time reminders", reaction: "Minimum gesture toward wellbeing.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 1, mkt: 1 }, mood: 1 },
          { text: "That's their responsibility, not ours", reaction: "Adults can manage themselves. Our job is building good products.", emoji: "üòê", ap: 1, cost: 5, eff: { dev: 1, mkt: 1 }, mood: -1 }
        ]
      }
    ],
    
    // WEI CHEN - The Team Builder
    wei: [
      {
        intro: "Team's been working hard, but I'm seeing strain. Are we setting sustainable pace?",
        aside: "I've watched burnout kill companies. Code doesn't matter if people are gone.",
        choices: [
          { text: "Sustainable pace, protect the team", reaction: "Thank you. We'll deliver, just humanely.", emoji: "üôè", ap: 3, cost: 20, eff: { dev: 3, hr: 3 }, mood: 3 },
          { text: "One hard push, then we rest", reaction: "Holding you to 'then we rest'.", emoji: "üòê", ap: 4, cost: 30, eff: { dev: 4, hr: -1 }, mood: 0 },
          { text: "Push through-crunch time", reaction: "Start thinking about backfills.", emoji: "üòî", ap: 4, cost: 25, eff: { dev: 4, hr: -3 }, mood: -2 }
        ]
      },
      {
        intro: "Senior engineer wants a four-day week. She's excellent and I don't want to lose her.",
        aside: "Flexibility retains talent. Rigidity loses it. Simple as that.",
        choices: [
          { text: "Approve and create flexible policy", reaction: "This attracts talent, not just retains.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 2, hr: 4 }, mood: 2 },
          { text: "Approve as individual exception", reaction: "Others will ask. Be ready.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 1, hr: 2 }, mood: 1 },
          { text: "Decline-need full commitment", reaction: "High standards attract committed people.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Team wants new tools to improve workflow. Learning curve and licence costs.",
        aside: "Happy developers with good tools ship better code. Investment usually pays off.",
        choices: [
          { text: "Approve new tooling with training", reaction: "Investing in the team. Smart.", emoji: "üòä", ap: 3, cost: 25, eff: { dev: 4, hr: 2 }, mood: 2 },
          { text: "Pilot with one team first", reaction: "Measured approach. Let's see.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2, hr: 1 }, mood: 1 },
          { text: "Stick with current tools", reaction: "Team knows the stack. Productivity maintained.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "Need two more engineers. I'd rather find right cultural fits than rush.",
        aside: "Bad hire costs more than slow hire. Culture is hard to rebuild.",
        choices: [
          { text: "Quality over speed-take time", reaction: "Find people who make everyone better.", emoji: "üòä", ap: 3, cost: 20, eff: { dev: 2, hr: 3 }, mood: 2 },
          { text: "Set deadline but prioritise fit", reaction: "Balanced. I can work with that.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 3, hr: 1 }, mood: 1 },
          { text: "Hire fast-need capacity", reaction: "Might regret this. But I hear you.", emoji: "üòê", ap: 2, cost: 30, eff: { dev: 4, hr: -1 }, mood: -1 }
        ]
      },
      {
        intro: "Engineer made a significant production mistake. Recoverable, but how do we handle it?",
        aside: "Blame cultures kill innovation. Learning cultures build resilience.",
        choices: [
          { text: "Blameless post-mortem, fix systems", reaction: "This builds trust and improvement.", emoji: "üòä", ap: 2, cost: 10, eff: { dev: 3, hr: 3 }, mood: 2 },
          { text: "Private feedback, public learning", reaction: "Fair to individual, useful to team.", emoji: "üôÇ", ap: 2, cost: 5, eff: { dev: 2, hr: 1 }, mood: 1 },
          { text: "Make example to prevent repeats", reaction: "Clear standards set. Message received.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "Remote work debate. Some want full remote, others want office energy.",
        aside: "No policy fits everyone. But inconsistency breeds resentment.",
        choices: [
          { text: "Hybrid with team choice", reaction: "Trust teams to decide what works.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 3, hr: 3 }, mood: 2 },
          { text: "Fixed office days for collaboration", reaction: "Structure helps. Some will grumble.", emoji: "üôÇ", ap: 2, cost: 10, eff: { dev: 2, hr: 1 }, mood: 0 },
          { text: "Full return to office", reaction: "Collaboration improves. Culture strengthens.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Engineers want 20% time for personal projects. Classic big tech policy.",
        aside: "Side projects spark innovation. But deadlines don't wait.",
        choices: [
          { text: "Implement 20% time policy", reaction: "Innovation needs space. Thank you.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 2, hr: 3, sci: 1 }, mood: 2 },
          { text: "Hackathon quarterly instead", reaction: "Concentrated bursts. Can work.", emoji: "üôÇ", ap: 2, cost: 10, eff: { dev: 2, hr: 2 }, mood: 1 },
          { text: "Focus on core roadmap only", reaction: "Disciplined execution. Ship what matters.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "Graduate hiring programme? We've only hired experienced people so far.",
        aside: "Juniors bring energy and fresh thinking. Seniors spend time mentoring. Balance.",
        choices: [
          { text: "Create structured grad programme", reaction: "Fresh talent. Some will be brilliant.", emoji: "üòä", ap: 4, cost: 20, eff: { dev: 1, hr: 3, sci: 1 }, mood: 2 },
          { text: "Hire juniors opportunistically", reaction: "Good ones without programme overhead.", emoji: "üôÇ", ap: 2, cost: 10, eff: { dev: 2, hr: 1 }, mood: 1 },
          { text: "Keep hiring experienced only", reaction: "Quality standards maintained. Team stays strong.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1, dev: 1 }, mood: 0 }
        ]
      }
    ]
  },
  
  marketing: {
    // PRIYA SHARMA - The Dealmaker
    priya: [
      {
        intro: "I've got us in front of the public health system trust's CIO next Tuesday. Budget before year-end, but competitors circling.",
        aside: "I've built this relationship for eight months. This is our shot.",
        choices: [
          { text: "Full pitch-whatever it takes", reaction: "Clear my week. We're winning this.", emoji: "üí™", ap: 4, cost: 30, eff: { mkt: 5, cash: 120 }, mood: 2 },
          { text: "Solid pitch within scope", reaction: "Conservative, but I'll make it work.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 3, cash: 60 }, mood: 0 },
          { text: "We're not ready-wait", reaction: "Better to be ready. Product quality first.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "A UK logistics firm wants a pilot. Not paying much, but the logo would be transformative.",
        aside: "Enterprise sales is all about references. This unlocks ten more deals.",
        choices: [
          { text: "Run pilot at cost", reaction: "Investment in the pipeline. Smart.", emoji: "üí™", ap: 5, cost: 40, eff: { mkt: 5, cash: -20 }, mood: 2 },
          { text: "Negotiate middle ground", reaction: "We'll find something that works.", emoji: "üôÇ", ap: 3, cost: 25, eff: { mkt: 3, cash: 20 }, mood: 1 },
          { text: "Full price or nothing", reaction: "Hold the line. Protect margins.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 1, cash: 50 }, mood: 0 }
        ]
      },
      {
        intro: "Biggest customer up for renewal. Happy but asking for discount. Competitors circling.",
        aside: "Retention is cheaper than acquisition. But we need to value ourselves.",
        choices: [
          { text: "Defend pricing with added value", reaction: "I'll show them what they'd lose.", emoji: "üí™", ap: 2, cost: 15, eff: { mkt: 3, cash: 80 }, mood: 2 },
          { text: "Small discount for multi-year", reaction: "Lock-in has value. Fair trade.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 2, cash: 60 }, mood: 1 },
          { text: "Match competitor discount", reaction: "Keep them, but devalue ourselves.", emoji: "üòê", ap: 1, cost: 5, eff: { mkt: 1, cash: 40 }, mood: -1 }
        ]
      },
      {
        intro: "Industry dinner next week at the Savoy. All the right buyers. Expensive tickets.",
        aside: "Networking matters. This is where UK deals actually start.",
        choices: [
          { text: "Full presence, host side meeting", reaction: "Leave this to me. Business cards loaded.", emoji: "üí™", ap: 4, cost: 30, eff: { mkt: 4 }, mood: 2 },
          { text: "Just attend, work the room", reaction: "Lower key but I'll connect.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Skip it-too expensive", reaction: "Save budget for better opportunities.", emoji: "üôÇ", ap: 1, cost: 0, eff: { cash: 15 }, mood: 0 }
        ]
      },
      {
        intro: "An important customer is frustrated and threatening to cancel. Some of their complaints are fair-we did mess up. Others seem like they expected something we never promised.",
        aside: "How we handle angry customers defines who we are. Turn this around and they could become our biggest advocate. Handle it badly and they'll tell everyone.",
        choices: [
          { text: "Go all-out to fix everything", reaction: "Turn this into our best advocate.", emoji: "üí™", ap: 4, cost: 25, eff: { mkt: 3, hr: 1 }, mood: 2 },
          { text: "Fix the things that were our fault", reaction: "Fair response. Should stabilise.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Push back on the unreasonable demands", reaction: "Risky. Sometimes they need to hear it.", emoji: "üò¨", ap: 2, cost: 10, eff: { mkt: 0, cash: 20 }, mood: -1 }
        ]
      },
      {
        intro: "Royal College conference next month. Invited to present alongside clinicians.",
        aside: "The public health system network is everything. This is where trust gets built.",
        choices: [
          { text: "Send scientist plus clinician champion", reaction: "Talk goes down well. Stand coffee less so.", emoji: "üí™", ap: 4, cost: 20, eff: { mkt: 4, sci: 2 }, mood: 2 },
          { text: "Modest stand only", reaction: "Collect lanyards and handful of leads.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 0 },
          { text: "Skip-focus on direct meetings", reaction: "Quality over quantity. Deepen key relationships.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "public health system Innovation Accelerator has a slot. Pitch for place on their programme.",
        aside: "NIA opens doors across the public health system. Worth the effort.",
        choices: [
          { text: "Careful, evidence-heavy pitch", reaction: "Impress clinicians and policy people alike.", emoji: "üí™", ap: 4, cost: 15, eff: { mkt: 3, sci: 1 }, mood: 2 },
          { text: "Reuse investor deck with tweaks", reaction: "Scrape through Q&A. Don't stand out.", emoji: "üòê", ap: 2, cost: 5, eff: { mkt: 1 }, mood: 0 },
          { text: "Decline-admin looks heavy", reaction: "Avoid bureaucracy. Stay nimble.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Major UK retailer offers joint press release about our robots in their warehouses.",
        aside: "Their brand validates ours. This will circulate in logistics industry chat groups.",
        choices: [
          { text: "Agree and film short joint video", reaction: "Video circulates everywhere.", emoji: "üí™", ap: 4, cost: 20, eff: { mkt: 3 }, mood: 2 },
          { text: "Simple written statement", reaction: "Safe, tidy, moderately visible.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 2 }, mood: 0 },
          { text: "Keep partnership quiet", reaction: "Strategic discretion. Flexibility preserved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A FTSE 100 company wants to explore a 'strategic partnership'. They've asked for a detailed presentation on our technology, roadmap, and business model. This could lead to investment, acquisition, or a major contract-or they could just be gathering intelligence before building it themselves.",
        aside: "Large companies do this constantly. Some partnerships are genuine. Others are fishing expeditions. The problem is you can't tell which until you've already revealed everything.",
        choices: [
          { text: "Full disclosure-bet on the relationship", reaction: "They see everything. Either this becomes transformative or we've educated a future competitor.", emoji: "üòê", ap: 3, cost: 25, eff: { mkt: 4, cash: 100, dev: -1 }, mood: 1 },
          { text: "Staged disclosure-reveal more as they commit", reaction: "Trust but verify. Some corporates hate this dance.", emoji: "üòä", ap: 4, cost: 30, eff: { mkt: 3, cash: 60 }, mood: 2 },
          { text: "Surface-level only until term sheet", reaction: "Protect ourselves, but they might lose interest.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 1, cash: 30 }, mood: 0 }
        ]
      },
      {
        intro: "We're in 'customer discovery' calls with a large bank. They're asking detailed questions about exactly how we'd solve their problems-workflow, integration, pricing, timeline. It feels less like buying and more like a free consulting session. But walking away means no sale.",
        aside: "Enterprise buyers often extract detailed proposals from multiple vendors, then build internally or give the best ideas to their preferred supplier. It's exhausting but standard practice.",
        choices: [
          { text: "Give them the full solution design", reaction: "If they buy, it's a big deal. If not, they have our playbook.", emoji: "üòê", ap: 3, cost: 25, eff: { mkt: 3, cash: 80, dev: -1 }, mood: 0 },
          { text: "High-level approach, details after commitment", reaction: "Some buyers respect this. Others move to competitors who'll do free work.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 2, cash: 40 }, mood: 2 },
          { text: "Charge for detailed scoping work", reaction: "Filters serious buyers. Loses tyre-kickers who might've converted.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 1, cash: 25 }, mood: 1 }
        ]
      },
      {
        intro: "A corporate venture capital arm wants to invest. Great validation, but their parent company competes in an adjacent market and could easily enter ours. Their term sheet includes information rights that would give them visibility into our metrics, strategy, and product roadmap.",
        aside: "Corporate VCs can be amazing partners-or Trojan horses. The investment might be genuine, or it might be cheap intelligence gathering with an option to acquire or crush you later.",
        choices: [
          { text: "Accept-the benefits outweigh the risks", reaction: "Access to their network and expertise. Hope they play fair.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 4, cash: 150, dev: -1 }, mood: 1 },
          { text: "Negotiate limited information rights", reaction: "Try to get the money without the surveillance. They might walk.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 3, cash: 120 }, mood: 2 },
          { text: "Decline and seek independent VCs", reaction: "Cleaner cap table, less strategic value, possibly harder to raise.", emoji: "üòê", ap: 2, cost: 20, eff: { mkt: 1, cash: 80 }, mood: 0 }
        ]
      },
      {
        intro: "Our sales team has been asked to demo our product to a potential customer's 'evaluation committee'. The committee includes fifteen people-far more than needed. Some are clearly from their internal tech team. They're taking detailed notes and asking very specific technical questions.",
        aside: "Sometimes large committees are bureaucracy. Sometimes they're cover for bringing engineers to reverse-engineer your demo. Hard to refuse without looking difficult.",
        choices: [
          { text: "Full demo to everyone", reaction: "Cooperate and hope for the best. They see everything.", emoji: "üòê", ap: 2, cost: 15, eff: { mkt: 3, dev: -1 }, mood: 0 },
          { text: "Limit technical detail, focus on outcomes", reaction: "Show what it does, not how. Some evaluators frustrated.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Request smaller, appropriate audience", reaction: "Reasonable ask. They might see us as difficult.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A large consulting firm wants to partner with us-they'll recommend our product to their clients in exchange for a referral fee. But first, they need to 'understand our technology deeply' so they can explain it. They want a full day with our technical team.",
        aside: "Consultants work with everyone in an industry. What they learn from you might inform advice they give your competitors. But their recommendations can drive serious enterprise deals.",
        choices: [
          { text: "Full technical deep-dive", reaction: "They become effective advocates. And they know all our secrets.", emoji: "üòê", ap: 4, cost: 30, eff: { mkt: 5, dev: -1, cash: 60 }, mood: 1 },
          { text: "Business-level training only", reaction: "They can sell the benefits but stumble on technical questions.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, cash: 30 }, mood: 1 },
          { text: "Decline the partnership", reaction: "Control our secrets. Stay independent.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're negotiating a pilot with a large company. They want us to share our source code into escrow 'for business continuity'-so they can access it if we go bust. Reasonable on the surface, but their lawyers will review the escrow contents, and 'going bust' is broadly defined.",
        aside: "Source code escrow is standard in enterprise deals. But it's also a legal way to get access to your code. Once it's in escrow, the security depends on lawyers and contracts, not technology.",
        choices: [
          { text: "Agree to standard escrow terms", reaction: "Close the deal. Trust the legal protections.", emoji: "üôÇ", ap: 2, cost: 20, eff: { mkt: 3, cash: 70 }, mood: 1 },
          { text: "Negotiate narrow release conditions", reaction: "Protect ourselves. Delays the deal, frustrates their legal team.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 2, cash: 50 }, mood: 2 },
          { text: "Refuse escrow entirely", reaction: "Some enterprises won't proceed without it. This might kill the deal.", emoji: "üòê", ap: 2, cost: 15, eff: { mkt: 0, cash: 20 }, mood: -1 }
        ]
      },
      {
        intro: "A potential acquirer wants to begin due diligence. They'll need access to our code, our customer data, our financial models, and interviews with key staff. If the deal happens, we're set. If it falls through, they've seen everything-and they're already in our market.",
        aside: "Acquisition due diligence is the ultimate disclosure paradox. You have to show everything to get the deal done. But half of all acquisitions fall through after due diligence.",
        choices: [
          { text: "Open the books completely", reaction: "Standard process. They either buy us or they don't.", emoji: "üòê", ap: 4, cost: 40, eff: { mkt: 2, cash: 200, dev: -2, hr: -1 }, mood: 0 },
          { text: "Phased disclosure tied to offer price", reaction: "More protection, but signals distrust. Some buyers walk.", emoji: "üòä", ap: 4, cost: 35, eff: { mkt: 1, cash: 150, dev: -1 }, mood: 1 },
          { text: "Insist on break fee if they walk", reaction: "Compensation if they back out. Many buyers refuse this term.", emoji: "üôÇ", ap: 3, cost: 30, eff: { mkt: 1, cash: 100 }, mood: 1 }
        ]
      },
      {
        intro: "We've been invited to pitch at a large corporation's 'innovation day'. Great exposure to senior executives, but we'll be presenting alongside our direct competitors. The format encourages detailed demos. Everyone watches everyone else's pitch.",
        aside: "Innovation days are speed-dating for corporates. They get to compare solutions side-by-side. You get to learn about competitors too-if you're paying attention.",
        choices: [
          { text: "Go all-in with impressive demo", reaction: "Stand out from the crowd. Competitors see our best features.", emoji: "üí™", ap: 3, cost: 25, eff: { mkt: 4, dev: -1 }, mood: 2 },
          { text: "Solid presentation, hold back innovations", reaction: "Competitive but not revealing. Might not win.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Decline and request private meeting", reaction: "Avoid the circus. They might not accommodate.", emoji: "üòê", ap: 2, cost: 10, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Three other UK AI startups have approached us about forming an alliance. We'd share resources-maybe a joint sales team for big deals, shared computer systems, even recommending each other to customers. Together we'd look more credible to large buyers than any of us alone. But we'd also be tying ourselves to companies that might fail, change direction, or become competitors.",
        aside: "Startup alliances can punch above their weight. But they're fragile-everyone's priorities shift, funding situations change, and today's partner might be tomorrow's competitor.",
        choices: [
          { text: "Join the alliance fully", reaction: "Strength in numbers. We sink or swim together.", emoji: "üí™", ap: 4, cost: 30, eff: { mkt: 4, dev: 2, hr: -1 }, mood: 2 },
          { text: "Join loosely-recommend each other only", reaction: "Low commitment. Benefits without deep entanglement.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 2, dev: 1 }, mood: 1 },
          { text: "Decline-we'll build our own credibility", reaction: "Independence preserved. Earn it ourselves.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A group of startups is trying to create common rules for how companies in our industry share information with each other. If it works, customers wouldn't be trapped with one vendor anymore-they could easily switch between us. We'd all benefit from a bigger market. But creating industry standards is slow, political, and most attempts fail. Our time could go toward our own product instead.",
        aside: "Common standards create bigger markets. But most attempts die in endless meetings, and even successful ones take years. The question is whether the collective benefit is worth the individual cost.",
        choices: [
          { text: "Lead the standards effort", reaction: "Shape the future. Distract from our product. If it works, we're kingmakers.", emoji: "üí™", ap: 5, cost: 40, eff: { mkt: 4, dev: -2, sci: 2 }, mood: 2 },
          { text: "Participate but don't lead", reaction: "Stay informed, influence direction, limited commitment.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2, dev: 0, sci: 1 }, mood: 1 },
          { text: "Wait and adopt if it succeeds", reaction: "Smart timing. Let others take the risk.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Another startup has proposed we build a connection between our products so they work together seamlessly. Their customers would benefit from our AI; our customers would benefit from their data. But we'd need to share technical details, coordinate our plans, and trust them not to copy our approach.",
        aside: "Connecting deeply with other startups can create powerful combined offerings. But both sides need to stay healthy, maintain trust, and keep pulling in the same direction-a lot can go wrong.",
        choices: [
          { text: "Build a deep connection together", reaction: "Powerful together. Dependent on each other's success and honesty.", emoji: "üí™", ap: 4, cost: 35, eff: { mkt: 4, dev: 2, cash: 30 }, mood: 2 },
          { text: "Simple connection-easy to undo", reaction: "Works but not magic. Either side can walk away.", emoji: "üôÇ", ap: 2, cost: 20, eff: { mkt: 2, dev: 1, cash: 15 }, mood: 1 },
          { text: "Decline-too risky to depend on them", reaction: "Our product stands alone. Full control.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We've been asked to split the cost of building a shared system with two other startups-a common way to process and move data that all three companies would use. It would cost each of us ¬£30k, but building it alone would cost ¬£80k. The catch: if any company fails or changes direction, the others are stuck maintaining their share.",
        aside: "Sharing costs makes sense when everyone's going the same direction. But startups change constantly. What happens when one partner gets bought, runs out of money, or decides they don't need this anymore?",
        choices: [
          { text: "Share the cost with the others", reaction: "Cheaper together. Hope everyone stays committed.", emoji: "üí™", ap: 3, cost: 25, eff: { dev: 3, cash: -30 }, mood: 1 },
          { text: "Build our own-keep control", reaction: "More expensive but no dependency on others.", emoji: "üôÇ", ap: 4, cost: 40, eff: { dev: 2, cash: -60 }, mood: 0 },
          { text: "Use ready-made solutions instead", reaction: "Less tailored to our needs, but simple.", emoji: "üòê", ap: 2, cost: 15, eff: { dev: 1, cash: -25 }, mood: 0 }
        ]
      },
      {
        intro: "A startup accelerator is creating a group of companies that would sell together-shared booth at trade shows, joint customer success stories, combined sales pitches for large deals. It's cheaper than doing it alone and more impressive to buyers. But we'd be associated with companies we don't control.",
        aside: "Selling together can open doors none of you could open alone. But your reputation becomes linked to theirs. If one company does badly, it reflects on everyone.",
        choices: [
          { text: "Join the group fully", reaction: "United front. Hope everyone maintains quality.", emoji: "üí™", ap: 3, cost: 20, eff: { mkt: 5, hr: -1 }, mood: 2 },
          { text: "Join for events only", reaction: "Shared presence, separate identities.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3 }, mood: 1 },
          { text: "Build our own brand independently", reaction: "Complete control. More expensive, slower.", emoji: "üòê", ap: 1, cost: 25, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Several startups in our space are talking about jointly lobbying the government on AI regulation. Together we could afford professional lobbyists and present a united industry voice. Separately, none of us have the resources or credibility. But agreeing on policy positions among competitors is complicated.",
        aside: "Collective lobbying shapes regulation before it shapes you. But getting competitors to agree on anything is hard, and whatever you advocate will be public-potentially alienating customers or investors who disagree.",
        choices: [
          { text: "Lead the lobbying coalition", reaction: "Shape the rules. Spend time on politics instead of product.", emoji: "üí™", ap: 4, cost: 35, eff: { mkt: 3, sci: 2, dev: -1 }, mood: 1 },
          { text: "Participate and contribute", reaction: "Voice in the room without leading. Share the cost and influence.", emoji: "üôÇ", ap: 2, cost: 20, eff: { mkt: 2, sci: 1 }, mood: 1 },
          { text: "Stay out of politics", reaction: "Focus on product. Let others lobby.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, sci: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A new platform-not yet dominant but growing fast-wants us as an early partner. We'd get first access, featured placement, and a say in how they build things. But the platform might fail, leaving us with wasted work. Or it might take off and we'd be locked in as a favoured partner from the start.",
        aside: "Early bets on new platforms can be transformative-like being one of the first apps on a major social network or team chat platform. They can also be expensive dead ends. Timing is everything.",
        choices: [
          { text: "Bet early on the new platform", reaction: "High risk, but potential to be first in line.", emoji: "üí™", ap: 4, cost: 35, eff: { mkt: 4, dev: 2 }, mood: 2 },
          { text: "Wait and see if it takes off", reaction: "Lower risk. Might miss the best position.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 1, dev: 1 }, mood: 0 },
          { text: "Focus on established platforms only", reaction: "Reliable approach. Proven returns.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "A competitor has proposed we team up to win a customer that neither of us could win alone-the contract is simply too big for any single startup. We'd split the work and the money. It could be the start of ongoing collaboration or just a one-off necessity. Either way, we'd be sharing a customer relationship with a rival.",
        aside: "Teaming up with competitors is surprisingly common when deals are too large for any one company. But it requires trusting companies you normally fight for the same customers.",
        choices: [
          { text: "Partner for this deal", reaction: "Win together what we couldn't win alone. Complicated relationship.", emoji: "üí™", ap: 3, cost: 25, eff: { mkt: 4, cash: 60, hr: -1 }, mood: 2 },
          { text: "Decline and bid solo", reaction: "Long shot alone. At least we keep full control.", emoji: "üôÇ", ap: 2, cost: 20, eff: { mkt: 1, cash: 20 }, mood: 0 },
          { text: "Pass on this opportunity", reaction: "Avoid complexity. Stay focused.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A potential customer wants to use our AI for something we're uncomfortable with-not illegal, but ethically questionable. They're a significant contract. Our terms of service are vague enough that we could technically allow it, but some team members think we shouldn't.",
        aside: "You can't always control how your product is used, but you can choose who you sell to. Saying no to revenue is hard. Saying yes to the wrong use case can define your company.",
        choices: [
          { text: "Decline the contract-values matter", reaction: "Walk away from money. Keep our integrity.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 1, hr: 2, cash: -30 }, mood: 2 },
          { text: "Accept with use restrictions in the contract", reaction: "Try to limit the problematic use. Hard to enforce.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2, cash: 60 }, mood: 0 },
          { text: "Accept-it's their responsibility how they use it", reaction: "Revenue now. Reputation questions later.", emoji: "üòê", ap: 2, cost: 10, eff: { mkt: 2, cash: 80, hr: -1 }, mood: -1 }
        ]
      },
      {
        intro: "We're being asked to build AI for a customer that makes decisions about people-hiring, lending, insurance pricing. They want the AI to optimise for their business metrics. But their metrics might encode biases or create unfair outcomes. Do we build what they want, push back, or walk away?",
        aside: "AI that affects life outcomes is high-stakes. You might be building a tool that discriminates, even unintentionally. Some companies build whatever they're paid to; others refuse high-risk applications entirely.",
        choices: [
          { text: "Engage but insist on fairness auditing", reaction: "Do the work responsibly. Adds cost and complexity for everyone.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 2, sci: 2, cash: 40 }, mood: 2 },
          { text: "Build what they want with standard disclaimers", reaction: "Their use case, their responsibility. Hope nothing goes wrong.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, cash: 70 }, mood: 0 },
          { text: "Decline high-risk applications entirely", reaction: "Clear ethics. Team proud of our standards.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A defence contractor wants to license our AI. The application is logistics and planning-nothing lethal. But it's part of a military supply chain, and our technology could eventually end up in weapons systems. Some employees would resign; others see defence as a legitimate customer.",
        aside: "The defence sector is a genuine ethical divide. Some see it as protecting democracy; others won't participate at any level. There's no consensus view-even within single companies.",
        choices: [
          { text: "Accept-logistics isn't weapons", reaction: "Draw the line at direct harm. Some staff uncomfortable.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2, cash: 100, hr: -2 }, mood: 0 },
          { text: "Decline all defence work", reaction: "Clear policy. Lose a lucrative sector. Some staff relieved.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: -1, hr: 2 }, mood: 1 },
          { text: "Case-by-case review", reaction: "Flexibility but constant internal debates.", emoji: "üòê", ap: 2, cost: 15, eff: { mkt: 1, cash: 50 }, mood: 0 }
        ]
      },
      {
        intro: "A buyer wants to use our AI to automate content moderation for their social platform-taking down posts, banning users, flagging content. Our AI will make consequential decisions about speech. It will make mistakes. Some mistakes will be high-profile.",
        aside: "Content moderation is one of the hardest AI applications. False positives silence legitimate speech; false negatives let harm through. There's no way to get it right, only trade-offs about what kind of wrong you prefer.",
        choices: [
          { text: "Accept with human review requirements", reaction: "AI flags, humans decide. Slower but fewer disasters.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 2, sci: 1, cash: 50 }, mood: 2 },
          { text: "Accept as purely assistive tool", reaction: "Recommend, don't decide. Less liability, less value.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2, cash: 40 }, mood: 1 },
          { text: "Decline-too high-risk for our reputation", reaction: "Protect our brand. Right decision.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A big prospect is about to sign. In the final meeting, they ask if we can do something we can't actually do yet. It's on our roadmap, maybe two months out. If we say no, we lose the deal. If we say yes, we're promising something that doesn't exist.",
        aside: "Selling the roadmap is standard startup practice. But there's a spectrum from 'coming soon' to 'we haven't started building it'. Promising features that don't exist can win deals-or destroy trust when you can't deliver.",
        choices: [
          { text: "Be honest-it's not ready yet", reaction: "Might lose the deal. Keep our integrity.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: -1, hr: 2 }, mood: 2 },
          { text: "Commit to delivery with a realistic timeline", reaction: "Promise it for a specific date. Pressure on the team.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 3, dev: -1, cash: 60 }, mood: 1 },
          { text: "Say yes and figure it out later", reaction: "Win the deal. Scramble to deliver. Hope we can.", emoji: "üòê", ap: 2, cost: 15, eff: { mkt: 4, dev: -2, cash: 80, hr: -1 }, mood: -1 }
        ]
      },
      {
        intro: "We're in a competitive pitch. Our product is genuinely better at some things, worse at others. The buyer is clearly comparing us to our main competitor. We could give a balanced comparison, or we could emphasise only where we win and hope they don't dig into where we lose.",
        aside: "Every sales pitch emphasises strengths. But there's a difference between 'best foot forward' and 'actively misleading'. Customers who buy based on misleading comparisons often become angry ex-customers.",
        choices: [
          { text: "Balanced comparison-strengths and limitations", reaction: "Honest. Might lose to someone who oversells.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 2, hr: 2 }, mood: 2 },
          { text: "Focus on our strengths, don't mention weaknesses", reaction: "Standard practice. Hope they don't ask the right questions.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, cash: 50 }, mood: 0 },
          { text: "Imply competitor weaknesses we can't prove", reaction: "Aggressive. Might backfire badly if they check.", emoji: "üòê", ap: 2, cost: 15, eff: { mkt: 4, cash: 70, hr: -2 }, mood: -1 }
        ]
      },
      {
        intro: "A prospect asks for references. Our two happy customers are tired of taking calls-we've used them for every pitch this quarter. Our three unhappy customers would give honest but damaging feedback. We could ask the happy ones again, find creative ways to avoid giving references, or be honest about our mixed track record.",
        aside: "References are social proof. Everyone cherry-picks their best ones. But sophisticated buyers know this and sometimes insist on talking to customers you didn't choose. What happens when they find the unhappy ones?",
        choices: [
          { text: "Offer balanced references including critics", reaction: "Brave. Shows confidence in addressing problems.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 1, hr: 2 }, mood: 2 },
          { text: "Use the happy ones again, apologise for asking", reaction: "Standard practice. Hope they don't get tired of us.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, cash: 40 }, mood: 0 },
          { text: "Delay and deflect on references", reaction: "Buy time to close the deal.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 2 }, mood: 0 }
        ]
      }
    ],
    
    // MARCUS THOMPSON - The Growth Engineer
    marcus: [
      {
        intro: "I've been tracking the numbers. When big companies try our product, only 12 out of every 100 actually become paying customers. The problem isn't our sales pitch-it's that new users get confused in their first week. If we made the getting-started experience smoother, I reckon we'd convert 20 out of 100 instead.",
        aside: "Chasing new deals is exciting, but fixing why people give up is often more valuable. The maths doesn't lie.",
        choices: [
          { text: "Fix the new user experience first", reaction: "Smart. Let me show you the data.", emoji: "üìä", ap: 3, cost: 20, eff: { dev: 2, mkt: 2 }, mood: 2 },
          { text: "Work on both at the same time", reaction: "Ambitious. I'll make it work.", emoji: "üôÇ", ap: 4, cost: 35, eff: { mkt: 4, dev: 1 }, mood: 1 },
          { text: "Focus on big deals-we need a name", reaction: "Big logos look good. But they don't compound.", emoji: "ü§∑", ap: 3, cost: 25, eff: { mkt: 4, cash: 80 }, mood: -1 }
        ]
      },
      {
        intro: "I've been testing different ways to attract customers. Paid adverts work quickly but eat through our budget. Writing helpful articles and building our reputation takes months to pay off, but those customers find us for free and keep coming.",
        aside: "It's the classic trade-off: pay for customers now, or invest time in building a reputation that attracts them for free later.",
        choices: [
          { text: "Focus on building our reputation", reaction: "Patience. Pays off in six months.", emoji: "üìä", ap: 3, cost: 25, eff: { mkt: 3, sci: 1 }, mood: 2 },
          { text: "Do a mix of both", reaction: "Hedge our bets. Sensible.", emoji: "üôÇ", ap: 2, cost: 30, eff: { mkt: 4 }, mood: 1 },
          { text: "Spend on ads for quick results", reaction: "Buy growth now. Figure out the economics later.", emoji: "ü§∑", ap: 2, cost: 35, eff: { mkt: 5, cash: -20 }, mood: -1 }
        ]
      },
      {
        intro: "I want to test two different versions of our pricing page to see which one gets more people to sign up. We'd show half our visitors one version and half the other, then see which performs better. Could boost sign-ups, or might just confuse people.",
        aside: "At our size, even a small improvement in sign-ups makes a real difference to revenue. But we need to test properly to know what's actually working.",
        choices: [
          { text: "Run a proper test with enough visitors", reaction: "Data will tell us what works.", emoji: "üìä", ap: 2, cost: 15, eff: { mkt: 3, dev: 1 }, mood: 2 },
          { text: "Quick test, pick a winner fast", reaction: "Faster learning, less certainty.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 2 }, mood: 1 },
          { text: "Just pick what feels right", reaction: "Could be right. Could be expensive.", emoji: "ü§∑", ap: 1, cost: 5, eff: { mkt: 1 }, mood: -1 }
        ]
      },
      {
        intro: "We're spending money on adverts, social media, and conferences, but we have no idea which ones actually bring in customers. Someone signs up and we can't tell if they came from our CareerHub post, a search engine, or a friend's recommendation.",
        aside: "We're flying blind. We can't stop wasting money on things that don't work if we don't know what's working in the first place.",
        choices: [
          { text: "Build proper tracking systems", reaction: "Finally we'll know what's working.", emoji: "üìä", ap: 4, cost: 30, eff: { mkt: 3, dev: 2 }, mood: 2 },
          { text: "Add basic tracking to the main channels", reaction: "Better than nothing. Not perfect.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2, dev: 1 }, mood: 0 },
          { text: "Accept we won't have perfect data", reaction: "Flying blind. It's a choice.", emoji: "ü§∑", ap: 1, cost: 5, eff: { mkt: 1 }, mood: -1 }
        ]
      },
      {
        intro: "I've analysed how much different customers spend with us over time. Large companies pay us ten times more than small businesses, and they stick around longer too. The question is: should we focus all our energy on big companies, or keep serving everyone?",
        aside: "Focusing means saying no to some customers. But spreading ourselves thin means we might not serve anyone well.",
        choices: [
          { text: "Focus on large companies", reaction: "Go where the money is. Smart.", emoji: "üìä", ap: 3, cost: 20, eff: { mkt: 4, cash: 40 }, mood: 2 },
          { text: "Build different products for each", reaction: "More work, more options.", emoji: "üôÇ", ap: 4, cost: 35, eff: { mkt: 3, dev: 2 }, mood: 0 },
          { text: "Keep serving everyone equally", reaction: "Spreading thin. But diversified.", emoji: "ü§∑", ap: 1, cost: 15, eff: { mkt: 2 }, mood: -1 }
        ]
      },
      {
        intro: "UK fintech community event. Could present case study showing our impact.",
        aside: "Showing real results beats marketing claims every time.",
        choices: [
          { text: "Detailed case study presentation", reaction: "Numbers speak louder than promises.", emoji: "üìä", ap: 4, cost: 25, eff: { mkt: 4, sci: 1 }, mood: 2 },
          { text: "Panel participation", reaction: "Lower effort, still visible.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Skip-focus on direct sales", reaction: "Direct relationships matter more.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "What if we let people use a basic version of our product for free? Some of them would eventually upgrade to paid. It could attract lots of users who'd never have talked to our sales team-but it might also mean people who would have paid now get it free instead.",
        aside: "Some companies grow massively by giving away a free version. Others just lose money. We need to figure out which we'd be.",
        choices: [
          { text: "Launch a free version with paid upgrades", reaction: "Attract lots of users. Convert some later.", emoji: "üìä", ap: 4, cost: 20, eff: { mkt: 4, cash: -20 }, mood: 2 },
          { text: "Offer a time-limited free trial instead", reaction: "More controlled. Less viral.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 0 },
          { text: "Stick with salespeople finding customers", reaction: "More personal. Harder to scale.", emoji: "ü§∑", ap: 1, cost: 10, eff: { mkt: 1, cash: 20 }, mood: -1 }
        ]
      },
      {
        intro: "'State of AI in UK fintech' report could establish thought leadership.",
        aside: "Original research gets cited. Gets us into conversations we want.",
        choices: [
          { text: "Data-rich serious report", reaction: "Quoted in slide decks and policy notes.", emoji: "üìä", ap: 4, cost: 25, eff: { mkt: 3, sci: 2 }, mood: 2 },
          { text: "Lighter summary version", reaction: "Easy Tube read. CareerHub shares.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Keep insights proprietary", reaction: "Competitive edge maintained.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "CloudForce CRM wants us to build on their platform. We'd get access to their millions of business customers through their app store, but we'd have to follow their rules, pay their fees (20-30% of revenue), and our product would only work inside CloudForce. If they change their policies or decide to build something similar, we're vulnerable.",
        aside: "Building on big companies' platforms offers easy access to customers but creates dependency. Some of the most successful startups were built on platforms. Some were also destroyed by them overnight.",
        choices: [
          { text: "Go all-in on CloudForce", reaction: "Their customers become ours. Our fate becomes theirs.", emoji: "üìä", ap: 4, cost: 35, eff: { mkt: 5, dev: 2, cash: 60 }, mood: 2 },
          { text: "Build for CloudForce but keep standalone version", reaction: "Hedged bet. More work, but not locked in.", emoji: "üôÇ", ap: 4, cost: 45, eff: { mkt: 3, dev: 1, cash: 40 }, mood: 1 },
          { text: "Stay independent-find customers ourselves", reaction: "Freedom, but we find customers the hard way.", emoji: "ü§∑", ap: 2, cost: 15, eff: { mkt: 1, dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Orion Tech has changed App Marketplace rules again. The new policy affects how we can offer subscriptions and could reduce our revenue by 15%. We can comply and take the hit, try to work around the rules (risky), or move our business model outside the app entirely.",
        aside: "When you build on someone else's platform, you play by their rules-and those rules can change without warning. App Store changes have killed companies overnight.",
        choices: [
          { text: "Comply and absorb the revenue hit", reaction: "Safe but painful. We stay on the platform.", emoji: "üòê", ap: 2, cost: 15, eff: { mkt: 1, cash: -30 }, mood: 0 },
          { text: "Restructure to work around the rules", reaction: "Creative interpretation. Hope Orion Tech doesn't notice or care.", emoji: "ü§∑", ap: 3, cost: 25, eff: { mkt: 2, cash: -10, dev: -1 }, mood: -1 },
          { text: "Move subscriptions outside the app", reaction: "Keep revenue but worse user experience. Orion Tech won't promote us.", emoji: "üìä", ap: 3, cost: 30, eff: { mkt: -1, cash: 20, dev: 1 }, mood: 1 }
        ]
      },
      {
        intro: "Titan Cloud has launched a product that competes directly with ours. They're offering it free for small users and cheap for everyone else. The problem is, we run our entire business on Titan's servers. Staying means paying money to a company that's now our competitor; leaving means months of work moving everything somewhere else.",
        aside: "The big tech companies increasingly compete with the startups that depend on them. Cloud providers have all launched products that crushed smaller companies built on their platforms.",
        choices: [
          { text: "Move to a different provider", reaction: "Expensive and distracting, but we stop funding our competitor.", emoji: "üìä", ap: 5, cost: 60, eff: { dev: -2, mkt: 1, cash: -40 }, mood: 1 },
          { text: "Spread across multiple providers", reaction: "More complicated to manage, but we're not dependent on anyone.", emoji: "üôÇ", ap: 4, cost: 45, eff: { dev: 1, mkt: 1, cash: -30 }, mood: 1 },
          { text: "Stay and compete on quality", reaction: "Hope we can stand out. They have more resources.", emoji: "ü§∑", ap: 2, cost: 15, eff: { dev: 1, mkt: -1 }, mood: -1 }
        ]
      },
      {
        intro: "Nexus Corp wants to feature us in their online store for business software and include us in bundles they sell to large companies. Great exposure, but they want exclusivity-we couldn't also sell through other enterprise marketplaces. The deal would double our list of potential big customers but tie us to one partner.",
        aside: "Exclusive deals offer guaranteed visibility but limit options. If the relationship sours or Nexus's business declines, you've put all your eggs in one basket.",
        choices: [
          { text: "Accept exclusivity for the exposure", reaction: "Nexus Corp's sales team sells for us. We're married now.", emoji: "üìä", ap: 3, cost: 25, eff: { mkt: 5, cash: 80, dev: -1 }, mood: 2 },
          { text: "Negotiate non-exclusive with less promotion", reaction: "Keep options open. Less support from Nexus.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 3, cash: 40 }, mood: 1 },
          { text: "Decline and stay independent", reaction: "No special treatment. Complete freedom.", emoji: "ü§∑", ap: 2, cost: 10, eff: { mkt: 1, cash: 20 }, mood: 0 }
        ]
      },
      {
        intro: "A service we rely on-run by a major tech company-has announced it's no longer free. What cost us nothing will now cost ¬£50,000 per year. We've built our entire product using their service. The alternative is spending six months building our own replacement.",
        aside: "When you build on top of someone else's service, you're at their mercy. They often start free to attract users, then charge once everyone depends on them.",
        choices: [
          { text: "Pay the new price and continue", reaction: "Absorb the cost. We're stuck with them.", emoji: "üòê", ap: 2, cost: 20, eff: { dev: 0, cash: -50 }, mood: -1 },
          { text: "Start building our own replacement", reaction: "Six months of work, but we control our own destiny.", emoji: "üìä", ap: 5, cost: 50, eff: { dev: 3, mkt: -1, cash: -30 }, mood: 1 },
          { text: "Negotiate-we're a big customer", reaction: "Worth a try. They might offer better terms.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 0, mkt: 1, cash: -25 }, mood: 1 }
        ]
      },
      {
        intro: "A major platform wants us to connect more tightly with them-using their login system, their payment processing, their tracking tools. It would make things smoother for users, but each connection makes us more dependent on them. They're essentially asking us to become part of their world.",
        aside: "Tighter connections create a better product but make it harder to leave. The more you weave yourself into their systems, the more painful it becomes to untangle.",
        choices: [
          { text: "Full connection-best experience for users", reaction: "Seamless product. We're deeply embedded now.", emoji: "üìä", ap: 3, cost: 30, eff: { dev: 3, mkt: 3, hr: -1 }, mood: 2 },
          { text: "Connect selectively-keep some independence", reaction: "Good enough experience. Some escape routes remain.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 2, mkt: 2 }, mood: 1 },
          { text: "Minimal connection-stay able to move", reaction: "Less polished but we're not trapped.", emoji: "ü§∑", ap: 2, cost: 15, eff: { dev: 1, mkt: 0 }, mood: 0 }
        ]
      }
    ],
    
    // EMMA BERGSTR√ñM - The Brand Strategist
    emma: [
      {
        intro: "Our brand says 'responsible AI'. But are we walking the talk? This matters for trust.",
        aside: "Brand is a promise. Breaking it costs more than building it.",
        choices: [
          { text: "Substance-heavy responsibility campaign", reaction: "Win trust from skeptical creatives.", emoji: "üòä", ap: 4, cost: 25, eff: { mkt: 3, hr: 1 }, mood: 2 },
          { text: "Lighter awareness campaign", reaction: "Gets attention. Won't convince critics.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 0 },
          { text: "Let product speak for itself", reaction: "Quality wins. Customers notice.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Time for a rebrand? Current identity was done quickly. Doesn't reflect where we are.",
        aside: "Rebrand is expensive and risky. But so is looking like a startup forever.",
        choices: [
          { text: "Full rebrand with agency", reaction: "Investment in how world sees us.", emoji: "üòä", ap: 5, cost: 40, eff: { mkt: 4, hr: 1 }, mood: 2 },
          { text: "Brand refresh-evolution not revolution", reaction: "Update without losing recognition.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 2 }, mood: 1 },
          { text: "Keep current identity", reaction: "Brand consistency. Recognition builds.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Financial Times journalist wants access for profile piece. Opportunity and risk.",
        aside: "Press can make or break perception. FT audience is exactly who we want.",
        choices: [
          { text: "Full access, authentic story", reaction: "Trust them to see us fairly.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 4 }, mood: 2 },
          { text: "Controlled access, managed narrative", reaction: "Less authentic, more predictable.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 0 },
          { text: "Decline-too risky", reaction: "Play it safe. Protect our reputation.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "London Tech Week sponsorship opportunity. High visibility, high cost, unclear ROI.",
        aside: "Not everything valuable can be measured. Be thoughtful about brand moments.",
        choices: [
          { text: "Premium sponsorship, strong presence", reaction: "Big statement. Make it count.", emoji: "üòä", ap: 5, cost: 45, eff: { mkt: 4 }, mood: 1 },
          { text: "Smaller presence, quality focus", reaction: "Less noise, more signal.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 2 }, mood: 1 },
          { text: "Skip this one", reaction: "Save energy for the right moment.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Competitors getting aggressive with claims. Should we respond or stay above it?",
        aside: "Brand is long game. Don't let competitors dictate strategy.",
        choices: [
          { text: "Rise above, focus on strengths", reaction: "Dignity wins long-term.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 2, hr: 1 }, mood: 2 },
          { text: "Subtle comparison content", reaction: "Tasteful differentiation.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 3 }, mood: 0 },
          { text: "Direct competitive response", reaction: "Gets us in the mud. Sometimes necessary.", emoji: "üòê", ap: 3, cost: 25, eff: { mkt: 3, hr: -1 }, mood: -1 }
        ]
      },
      {
        intro: "UK art school wants student programme using our creative AI tools.",
        aside: "Students become professionals. Early adoption becomes habit.",
        choices: [
          { text: "Fund structured programme", reaction: "Inventive, chaotic use cases.", emoji: "üòä", ap: 4, cost: 25, eff: { mkt: 3, sci: 1 }, mood: 2 },
          { text: "Free licenses, minimal support", reaction: "Students enjoy. Fewer learnings.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 2 }, mood: 0 },
          { text: "Focus on existing creators", reaction: "Deepen relationships. Quality over quantity.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "The board wants us to write up our clinical evidence-a proper document explaining what our product does and the research behind it. The question is: do we make it detailed and scientific, or polished and exciting?",
        aside: "Doctors want to see rigorous evidence and honest limitations. Investors want confident success stories. Hard to please both.",
        choices: [
          { text: "Write a detailed, careful document", reaction: "Clinicians quietly approve.", emoji: "üòä", ap: 4, cost: 25, eff: { mkt: 3, sci: 2 }, mood: 2 },
          { text: "Make it polished and optimistic", reaction: "Investors love it. Our ethics advisor winces.", emoji: "üòê", ap: 3, cost: 20, eff: { mkt: 3, sci: -1 }, mood: 0 },
          { text: "Wait until we have more results", reaction: "Stronger story when ready.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 2 }, mood: 0 }
        ]
      },
      {
        intro: "London PR agency pitching us. Top-tier tech specialists. Not cheap.",
        aside: "PR opens doors media training can't. Question is timing.",
        choices: [
          { text: "Hire top-tier agency", reaction: "Press mentions increase. Inbox fills.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 3 }, mood: 2 },
          { text: "Smaller specialist agency", reaction: "Targeted coverage. Lower retainers.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Keep comms in-house", reaction: "Move slowly. Stay authentic.", emoji: "üòê", ap: 1, cost: 0, eff: { mkt: 1 }, mood: -1 }
        ]
      },
      {
        intro: "Our CTO has been invited to speak on a podcast popular with developers. She's brilliant but unfiltered-she says what she thinks. Last time she did an interview, she accidentally confirmed a feature we hadn't announced and criticised a competitor by name.",
        aside: "Authentic voices build trust. But uncontrolled messaging can cause problems. Some founders never let anyone but themselves speak publicly.",
        choices: [
          { text: "Let her speak freely-authenticity matters", reaction: "Developers love her honesty. Hope she doesn't reveal anything sensitive.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 4, hr: 1, dev: -1 }, mood: 2 },
          { text: "Brief her carefully on what to avoid", reaction: "Prepared but might sound rehearsed.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3 }, mood: 1 },
          { text: "Decline or send someone else", reaction: "Delegate wisely. Focus on priorities.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "An industry analyst wants to write about us in their market report. These reports influence enterprise buyers, but they ask very detailed questions about our technology, market share, pricing, and roadmap. Competitors subscribe to these reports too.",
        aside: "Analyst coverage is incredibly valuable for enterprise sales. But analyst reports are read by everyone in the industry, including competitors.",
        choices: [
          { text: "Full briefing with detailed answers", reaction: "Comprehensive coverage. The whole market learns about us.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 5, dev: -1 }, mood: 2 },
          { text: "Careful briefing, some questions deflected", reaction: "Decent coverage, some gaps. Analyst slightly frustrated.", emoji: "üòä", ap: 3, cost: 20, eff: { mkt: 3 }, mood: 1 },
          { text: "Decline to participate", reaction: "Stay out of the spotlight. Focus on product.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our junior sales rep was at a trade show and got talking to someone who turned out to be a competitor. She enthusiastically explained our new features, pricing model, and upcoming roadmap. She didn't realise who she was talking to until too late.",
        aside: "Competitors often gather intelligence at trade shows by chatting with junior staff. Training helps, but enthusiasm is hard to contain.",
        choices: [
          { text: "Train all staff on information security", reaction: "Formal process. Changes the culture.", emoji: "üòä", ap: 3, cost: 20, eff: { mkt: 1, hr: 2, dev: 1 }, mood: 2 },
          { text: "Restrict who attends external events", reaction: "Controlled but limits team development.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 0, hr: -1 }, mood: 0 },
          { text: "Accept it-information spreads anyway", reaction: "Pragmatic. Focus on execution.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A journalist wants to interview three of our engineers for a 'day in the life' piece about AI startups. Great PR, but engineers often share details about problems they're working on, technical approaches, and even frustrations with the product.",
        aside: "Human interest stories require access. But engineers speak engineer-they describe problems in detail and share what they're building. That's often more than we'd tell competitors directly.",
        choices: [
          { text: "Allow interviews with media training first", reaction: "Authentic but prepared. Takes time from engineering.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 4, hr: 1, dev: -1 }, mood: 2 },
          { text: "Approve but have comms person present", reaction: "Safety net. Might feel less authentic.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3 }, mood: 1 },
          { text: "Decline or offer exec interviews only", reaction: "Controlled message. Protect the team.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're about to announce a partnership with a major tech company. Both PR teams are drafting the press release. Their team wants to include technical details that would help their narrative but reveal more about our capabilities than we'd normally share publicly.",
        aside: "Joint announcements mean shared control. What benefits their story might expose our secrets. Once it's in a press release, it's public forever.",
        choices: [
          { text: "Push back on sensitive details", reaction: "They're annoyed but our secrets stay private.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 3, dev: 1 }, mood: 2 },
          { text: "Accept their draft for the relationship", reaction: "Smooth partnership. More revealed than ideal.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 4, dev: -1 }, mood: 1 },
          { text: "Insist on separate announcements", reaction: "Full control. Less impressive than joint announcement.", emoji: "üòê", ap: 2, cost: 10, eff: { mkt: 2 }, mood: 0 }
        ]
      },
      {
        intro: "Marketing wants to claim our product is 'sustainable' and 'eco-friendly'. We've made some genuine improvements-more efficient code, greener hosting-but we're not carbon neutral. Is it honest to market ourselves as green, or is it greenwashing?",
        aside: "Sustainability claims attract customers and talent. But exaggerated claims can backfire badly if journalists or activists dig deeper. Authenticity matters more than ever.",
        choices: [
          { text: "Only claim what we can fully prove", reaction: "Modest claims. Completely defensible.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 2, hr: 1 }, mood: 2 },
          { text: "Highlight progress while acknowledging gaps", reaction: "Honest about the journey. Shows self-awareness.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, hr: 1 }, mood: 1 },
          { text: "Use green messaging-everyone does", reaction: "Market expects it. Customers respond.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 3 }, mood: 0 }
        ]
      },
      {
        intro: "Our advertising could target people who are vulnerable to our product-those with addictive tendencies, people in financial distress, or teenagers who might not make good decisions. It would be effective marketing, but it feels predatory.",
        aside: "Targeted advertising is powerful precisely because it finds people when they're most susceptible. Where's the line between good marketing and exploitation?",
        choices: [
          { text: "Exclude vulnerable groups from targeting", reaction: "Less effective. More ethical. Sleep better.", emoji: "üòä", ap: 2, cost: 20, eff: { mkt: 1, hr: 1 }, mood: 2 },
          { text: "General targeting only-no personal data", reaction: "Less precise. Harder to exploit anyone.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Use all legal targeting options", reaction: "Maximum efficiency. Legal doesn't mean ethical.", emoji: "üòê", ap: 1, cost: 10, eff: { mkt: 4 }, mood: -1 }
        ]
      },
      {
        intro: "A charity has asked us to donate our product for free to help their cause. It's genuinely worthy work, but we're stretched thin and giving away our product devalues it. Also, their work is mildly politically controversial-some customers might not approve.",
        aside: "Corporate giving is expected, but choosing causes is tricky. Supporting one thing can alienate people who disagree. Staying neutral pleases no one.",
        choices: [
          { text: "Full donation and public partnership", reaction: "Visible support. Some customers uncomfortable.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 3, hr: 2, cash: -20 }, mood: 2 },
          { text: "Quiet donation without publicity", reaction: "Help without controversy. No marketing benefit.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 1, cash: -15 }, mood: 1 },
          { text: "Politely decline-not the right fit", reaction: "Know our strengths. Stay focused.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're planning a big marketing event-maybe a conference or product launch. We could make it in-person for maximum impact, or virtual for lower carbon footprint. In-person events build relationships but require hundreds of people to fly in.",
        aside: "Events are powerful for building community. But the environmental cost of flying hundreds of people to one place is significant. Virtual events reach more people with less impact.",
        choices: [
          { text: "Virtual event-minimise travel", reaction: "Smaller carbon footprint. Less personal connection.", emoji: "üòä", ap: 3, cost: 20, eff: { mkt: 2, hr: 1 }, mood: 2 },
          { text: "Regional events-reduce long-distance travel", reaction: "Compromise. More work, less flying.", emoji: "üôÇ", ap: 4, cost: 35, eff: { mkt: 3 }, mood: 1 },
          { text: "Big in-person event-nothing beats face-to-face", reaction: "Maximum impact. Maximum emissions.", emoji: "üòê", ap: 3, cost: 40, eff: { mkt: 5, hr: -1 }, mood: 0 }
        ]
      },
      {
        intro: "Marketing wants to describe our AI as 'intelligent', 'thinking', or 'understanding'. These words help people grasp what it does, but they're also misleading-the system doesn't actually think or understand in any meaningful sense. More accurate language is less compelling.",
        aside: "AI marketing is full of human-like language that makes software sound like a person. It sells, but it also creates unrealistic expectations and obscures what these systems actually are. The field is increasingly criticised for hype.",
        choices: [
          { text: "Use accurate technical language", reaction: "Harder to sell. Builds trust with informed buyers.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 1, sci: 2 }, mood: 2 },
          { text: "Accessible language with clear caveats", reaction: "Help people understand while being honest. Balance.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, sci: 1 }, mood: 1 },
          { text: "Use whatever language sells", reaction: "Effective marketing. Customers engaged.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 4 }, mood: 0 }
        ]
      },
      {
        intro: "Our demo shows our AI working flawlessly, but real-world performance is messier-it fails maybe 15% of the time. Sales wants to show the perfect demo; some team members think we should show realistic performance including failures.",
        aside: "Demos are always polished versions of reality. But AI demos have been particularly criticised for showing capabilities that don't generalise. Setting realistic expectations builds trust; overselling creates disappointed customers.",
        choices: [
          { text: "Show realistic performance including failures", reaction: "Honest. Lose some deals to companies that oversell.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 1, hr: 2 }, mood: 2 },
          { text: "Polished demo with clear performance caveats", reaction: "Best foot forward with honesty. Industry standard.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, hr: 1 }, mood: 1 },
          { text: "Show the best case-everyone else does", reaction: "Win more deals. Standard practice.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 4 }, mood: 0 }
        ]
      },
      {
        intro: "A journalist is writing about AI risks and wants our comment. We could engage thoughtfully and show we take safety seriously, or we could decline and avoid being associated with the 'doom' narrative. Our comments might be taken out of context either way.",
        aside: "AI companies are caught between seeming dismissive of risks and seeming to validate existential fears. Thoughtful engagement can help the discourse or backfire spectacularly depending on framing.",
        choices: [
          { text: "Engage thoughtfully with nuanced answers", reaction: "Contribute to serious discourse. Risk misrepresentation.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: 2, sci: 1 }, mood: 2 },
          { text: "Provide a brief, careful statement", reaction: "On record but minimal. Less interesting to journalists.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 1 }, mood: 1 },
          { text: "Decline to comment on risks", reaction: "Stay neutral. Let the tech speak.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We have 500 users. Marketing wants to say we have 'thousands of users' by counting everyone who ever created an account, including test accounts and people who signed up once and never returned. Technically defensible. Obviously misleading.",
        aside: "Vanity metrics are everywhere in startups. 'Users' can mean anything from 'paying customers' to 'people who clicked a link once'. Everyone knows this, but inflated numbers still impress investors and journalists.",
        choices: [
          { text: "Report only meaningful metrics", reaction: "Smaller numbers. More credible to sophisticated buyers.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 1, hr: 2 }, mood: 2 },
          { text: "Use industry-standard definitions", reaction: "Match what others report. Comparable but still fuzzy.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 2 }, mood: 1 },
          { text: "Pick the biggest defensible number", reaction: "Looks impressive. Technically accurate.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 3 }, mood: 0 }
        ]
      },
      {
        intro: "A competitor just announced a feature we've been working on. They shipped first. Marketing wants to put out a release saying we're 'launching' the same feature-but ours won't actually be ready for two months. We'd be announcing vaporware to avoid looking like we're behind.",
        aside: "Announcing products before they exist is a time-honoured tech tradition. It can freeze the market while you catch up. It can also destroy trust when customers realise they can't actually buy what you announced.",
        choices: [
          { text: "Only announce what's ready", reaction: "Look behind. Ship when we ship.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: -1, hr: 2, dev: 1 }, mood: 2 },
          { text: "Announce a 'preview' with honest timeline", reaction: "Signal we're coming. Set realistic expectations.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
          { text: "Announce as if it's ready now", reaction: "Build anticipation. Lock in customers.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 3 }, mood: 0 }
        ]
      },
      {
        intro: "Our website says we use 'cutting-edge AI' and 'machine learning'. In reality, our core product is mostly traditional software with a small ML component. Our AI positioning has helped us get meetings and coverage. Changing it now would undermine our story.",
        aside: "AI washing is rampant-companies rebrand ordinary software as 'AI-powered' for the hype. Some have actual AI; many don't. Sophisticated buyers are increasingly sceptical. But the positioning still opens doors.",
        choices: [
          { text: "Describe our technology accurately", reaction: "Less exciting. More honest. Some doors close.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: -1, hr: 2, sci: 1 }, mood: 2 },
          { text: "AI-assisted-accurate but positioned", reaction: "We do use some AI. Emphasise it appropriately.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2, sci: 0 }, mood: 1 },
          { text: "Keep the AI story-it's working", reaction: "Ride the wave. Brand resonates.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 4 }, mood: 0 }
        ]
      },
      {
        intro: "We published a case study claiming our product helped a customer increase efficiency by 40%. That's what they told us. We didn't verify it independently-and when we dig in, their methodology is questionable. The case study is all over our website and sales materials.",
        aside: "Customer success stories are marketing gold. But customers sometimes exaggerate, misattribute, or just get the numbers wrong. Once it's published, pulling it is embarrassing; leaving it up is risky.",
        choices: [
          { text: "Pull it and verify future claims", reaction: "Embarrassing. Establishes a standard.", emoji: "üòä", ap: 2, cost: 15, eff: { mkt: -1, hr: 2 }, mood: 2 },
          { text: "Add caveats and soften the claims", reaction: "Water it down. Less impressive, more defensible.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 1 }, mood: 1 },
          { text: "Leave it-it's what they told us", reaction: "Trust the customer. Move forward.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      }
    ]
  },
  
  hr: {
    // DAVID OKONKWO - The Process Builder
    david: [
      {
        intro: "We've grown without updating policies. Inconsistencies in how managers handle things. Creating resentment.",
        aside: "Not bureaucracy. Preventing lawsuits and unfairness.",
        choices: [
          { text: "Proper policy refresh with input", reaction: "Draft something fair. Get buy-in.", emoji: "üòä", ap: 2, cost: 15, eff: { hr: 4, dev: 1 }, mood: 2 },
          { text: "Quick fixes to urgent gaps", reaction: "Not ideal. Prioritise what's risky.", emoji: "üòê", ap: 1, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Stay informal-we're small", reaction: "Move fast. No bureaucracy.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Brilliant candidate needs Skilled Worker visa sponsorship. Expensive, bureaucratic, but she's perfect.",
        aside: "Immigration compliance is complex. But UK talent market is tight.",
        choices: [
          { text: "Sponsor and hire", reaction: "Paperwork painful but worth it.", emoji: "üòä", ap: 3, cost: 20, eff: { hr: 3, sci: 2 }, mood: 2 },
          { text: "Contractor while sorting visa", reaction: "Workaround. Might work.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 1, sci: 1 }, mood: 0 },
          { text: "Pass on this candidate", reaction: "Wait for the right fit. Standards matter.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We need to set up a proper way for employees to own shares in the company. There's a government-approved scheme that gives big tax savings, but it's complicated and expensive to set up properly. The simpler option costs employees more in tax when they eventually sell.",
        aside: "People join startups partly hoping for a big payout if things go well. Getting the share scheme right helps us keep our best people.",
        choices: [
          { text: "Set up the tax-efficient scheme properly", reaction: "Worth the investment. Employees benefit.", emoji: "üòä", ap: 4, cost: 25, eff: { hr: 5 }, mood: 2 },
          { text: "Use the simpler but less tax-friendly option", reaction: "Faster to set up, but employees pay more tax.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Put off the equity discussion for now", reaction: "Focus on product first. Deal with it later.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Two team leads in open conflict. Affecting collaboration across teams.",
        aside: "Conflicts don't resolve themselves. Early intervention prevents escalation.",
        choices: [
          { text: "Professional mediation, clear process", reaction: "Proper approach. Both feel heard.", emoji: "üòä", ap: 4, cost: 15, eff: { hr: 4, dev: 1 }, mood: 2 },
          { text: "Founder-led conversation", reaction: "Personal touch. Might work.", emoji: "üòê", ap: 2, cost: 5, eff: { hr: 2 }, mood: 0 },
          { text: "Let them work it out", reaction: "Empowerment builds problem-solving culture.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "First redundancy needed. Must do it properly under UK employment law.",
        aside: "How we handle this defines us. Everyone watching.",
        choices: [
          { text: "Full support: notice, outplacement", reaction: "Painful but right. Team notices.", emoji: "üòä", ap: 4, cost: 20, eff: { hr: 2 }, mood: 2 },
          { text: "Statutory minimum, clean exit", reaction: "Legal but not generous.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 0 }, mood: 0 },
          { text: "Pressure them to resign", reaction: "Quick resolution. Move forward.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "GDPR audit due. Our employee data handling needs review.",
        aside: "ICO fines are real. But proper compliance protects everyone.",
        choices: [
          { text: "Full audit with external help", reaction: "Clean bill of health. Worth it.", emoji: "üòä", ap: 4, cost: 20, eff: { hr: 3, dev: 1 }, mood: 2 },
          { text: "Internal review, fix obvious issues", reaction: "Better than nothing. Some gaps remain.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Defer until asked", reaction: "Focus on product now. Deal with it later.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Parental leave policy needs updating. UK statutory is minimum. What's our standard?",
        aside: "Generous leave attracts and retains. Shows values in action.",
        choices: [
          { text: "Enhanced parental leave policy", reaction: "Attracts parents. Shows we mean it.", emoji: "üòä", ap: 2, cost: 15, eff: { hr: 4 }, mood: 2 },
          { text: "Modest enhancement to statutory", reaction: "Better than minimum. Middle ground.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Stick with statutory minimum", reaction: "Keep costs lean. Competitive salaries matter more.", emoji: "üôÇ", ap: 1, cost: 0, eff: { cash: 10 }, mood: 0 }
        ]
      },
      {
        intro: "Performance review process inconsistent. Some managers formal, others never do them.",
        aside: "Fair feedback helps everyone improve. Inconsistency breeds resentment.",
        choices: [
          { text: "Standardised review process", reaction: "Clear expectations for everyone.", emoji: "üòä", ap: 2, cost: 15, eff: { hr: 3, dev: 1 }, mood: 2 },
          { text: "Light framework, manager discretion", reaction: "Guidance without bureaucracy.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Trust managers to handle it", reaction: "Empower leadership. Build management skills.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We need to decide what employees can say publicly about their work. Some companies require all external communication to be pre-approved. Others let people tweet freely. Engineers want to share what they're building; our lawyers worry about accidental disclosure.",
        aside: "Overly restrictive policies kill morale and hurt recruiting. But one careless tweet can reveal product plans or create legal problems.",
        choices: [
          { text: "Strict approval for anything work-related", reaction: "Maximum control. Engineers frustrated. Slower recruiting.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: -1, dev: 1, mkt: 1 }, mood: -1 },
          { text: "Guidelines with common-sense rules", reaction: "Balance freedom with awareness. Most people will be sensible.", emoji: "üòä", ap: 3, cost: 20, eff: { hr: 2, mkt: 2 }, mood: 2 },
          { text: "Trust people-we hired adults", reaction: "Maximum freedom. Adults deliver.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 3, mkt: 3 }, mood: 1 }
        ]
      },
      {
        intro: "An employee has been posting detailed technical content on their personal blog-debugging stories, architectural decisions, and lessons learned. It's great for their personal brand and our recruiting, but some posts come close to revealing proprietary approaches.",
        aside: "Technical blogging attracts talent and builds reputation. But there's a fine line between 'sharing knowledge' and 'documenting our competitive advantage for everyone to read'.",
        choices: [
          { text: "Ask them to run posts by us first", reaction: "Content improves and stays safe. They feel micromanaged.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 0, mkt: 2, dev: 1 }, mood: 0 },
          { text: "Have a conversation about boundaries", reaction: "Trust-based approach. Depends on their judgment.", emoji: "üòä", ap: 2, cost: 10, eff: { hr: 1, mkt: 3 }, mood: 1 },
          { text: "Ask them to stop blogging about work", reaction: "Protect IP. Clear boundaries.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We want to hire from a competitor, and candidates naturally mention what they worked on during interviews. How much should we let them reveal? We'd hate it if our employees did this in reverse, but their knowledge of competitor approaches is valuable.",
        aside: "Interview confidentiality cuts both ways. If we extract information during hiring, competitors will do the same when our people interview elsewhere.",
        choices: [
          { text: "Don't ask about proprietary work", reaction: "Ethical high ground. Miss some useful intelligence.", emoji: "üòä", ap: 2, cost: 10, eff: { hr: 2, dev: 0 }, mood: 2 },
          { text: "Ask about their role, not specific secrets", reaction: "Reasonable middle ground. Learn from their experience without extracting IP.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 1, dev: 1 }, mood: 1 },
          { text: "Let candidates share what they want", reaction: "Respect autonomy. Build trust.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A departing employee has accepted a job at a competitor. During their notice period, they still have access to our systems, attend meetings, and hear about upcoming plans. Standard practice is to work the notice period, but there's obvious risk.",
        aside: "Garden leave-paying them to stay home-is expensive but prevents knowledge transfer. Working notice periods are normal but create a strange situation.",
        choices: [
          { text: "Garden leave-pay them to stay home", reaction: "Clean separation. Expensive but no access risk.", emoji: "üòä", ap: 2, cost: 25, eff: { hr: 1, dev: 1, cash: -20 }, mood: 1 },
          { text: "Restricted access, limited to handover", reaction: "Partial protection. Slightly awkward.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 0, dev: 1 }, mood: 0 },
          { text: "Normal notice period", reaction: "Fair process. Professional transition.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're updating our employment contracts. The legal team wants to add a clause requiring employees to assign all inventions to the company-including things they create in their own time if it's 'related to company business'. Engineers hate these clauses.",
        aside: "IP assignment clauses protect the company but can feel overreaching. Top talent often has side projects and might reject offers with broad assignment clauses.",
        choices: [
          { text: "Broad assignment clause-protect everything", reaction: "Maximum legal protection. Some candidates will decline.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: -2, dev: 2 }, mood: -1 },
          { text: "Work-time and work-resources only", reaction: "Reasonable boundary. Personal projects stay personal.", emoji: "üòä", ap: 2, cost: 10, eff: { hr: 2, dev: 1 }, mood: 2 },
          { text: "Case-by-case for senior hires", reaction: "Flexible but inconsistent. Some negotiation on each offer.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 1, dev: 1 }, mood: 1 }
        ]
      },
      {
        intro: "Looking at our hiring over the past year, we've mostly hired people from the same few universities, with similar backgrounds and experiences. Whether you call it a diversity problem or just a narrow pipeline, we're probably missing good candidates we never even see. Changing this means rethinking where we look, how we evaluate, and what we're actually optimising for.",
        aside: "Hiring is full of unconscious patterns. Some argue for structured changes; others worry about lowering standards or creating new unfairnesses. The research on team composition is real but contested. There's no approach that everyone agrees is fair.",
        choices: [
          { text: "Redesign the hiring process systematically", reaction: "Significant investment. Opens up who we see and how we evaluate.", emoji: "üòä", ap: 4, cost: 30, eff: { hr: 4, dev: 1, mkt: 1 }, mood: 2 },
          { text: "Expand where we look, keep evaluation the same", reaction: "Wider net. Same filter. May or may not change outcomes.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 2 }, mood: 1 },
          { text: "Focus on the candidates in front of us", reaction: "Work with what's available. Get hiring.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "The Immigration Authority wants to audit our sponsor licence. As a visa sponsor, we're required to keep meticulous records-copies of passports, attendance monitoring, contact details, and we must report within 10 days if a sponsored employee stops coming to work, changes role, or leaves. Our record-keeping has been... informal. We have two weeks to prepare.",
        aside: "Sponsor licence compliance is serious. Failed audits can mean losing the licence, which would mean all your sponsored employees losing their right to work. The Immigration Authority isn't forgiving about sloppy paperwork.",
        choices: [
          { text: "Emergency audit prep-get everything in order", reaction: "All hands on deck. Find the gaps, fix them fast.", emoji: "üòä", ap: 4, cost: 30, eff: { hr: 3, dev: -1 }, mood: 1 },
          { text: "Hire immigration consultants to help", reaction: "Expensive but they know exactly what auditors look for.", emoji: "üôÇ", ap: 2, cost: 40, eff: { hr: 2, cash: -25 }, mood: 1 },
          { text: "Do our best with what we have", reaction: "Make it work. Resourceful approach.", emoji: "üôÇ", ap: 1, cost: 10, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our sponsored data scientist has handed in his notice-he's moving to a competitor. Under visa rules, we must report this to the Immigration Authority within 10 working days, which will trigger curtailment of his visa. He's asked us to delay reporting so he has more time to get his new sponsor lined up. Technically, not reporting on time puts our licence at risk.",
        aside: "The reporting rules exist so the Immigration Authority knows where sponsored workers are. But they create an awkward situation when someone leaves-the departing employee wants flexibility, the company needs to protect its licence.",
        choices: [
          { text: "Report on time-protect our licence", reaction: "By the book. He'll have 60 days to find a new sponsor or leave.", emoji: "üòä", ap: 1, cost: 5, eff: { hr: 1 }, mood: 1 },
          { text: "Delay a few days to help him transition", reaction: "Human gesture. Loyalty earned.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 2 }, mood: 1 },
          { text: "Wait until absolutely required-give him maximum time", reaction: "Compassionate approach. He appreciates it.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We want to promote a sponsored employee from Developer to Tech Lead. Under Skilled Worker rules, significant role changes require notifying the Immigration Authority and sometimes a new visa application. The bureaucracy might take months and cost another few thousand pounds, during which her status is uncertain. Or we could keep her job title technically the same and just give her more responsibility.",
        aside: "Visa categories are rigid; careers are fluid. Many companies quietly stretch job descriptions to avoid constant visa updates. It's technically non-compliant but extremely common.",
        choices: [
          { text: "Do it properly-new visa application", reaction: "Expensive and slow, but fully compliant. She deserves the real title.", emoji: "üòä", ap: 3, cost: 25, eff: { hr: 2, dev: 1, cash: -15 }, mood: 2 },
          { text: "Expand responsibilities without changing title", reaction: "Common workaround. Not entirely kosher. Probably fine.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1, dev: 1 }, mood: 0 },
          { text: "Wait until her visa renewal to make the change", reaction: "Smooth transition. Less disruption.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Some employees want to use our office space for political organising-hosting meetings for a local campaign. They say it's part of being an engaged citizen. Others worry it politicises the workplace and makes people who disagree uncomfortable.",
        aside: "Workplaces are communities. But they're also places where people with different views have to work together. Political activity can unite or divide.",
        choices: [
          { text: "Allow after-hours use for any legal cause", reaction: "Neutral policy. Some tension inevitable.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 1 }, mood: 1 },
          { text: "Keep the office politically neutral", reaction: "Professional environment. Everyone included.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 },
          { text: "Provide paid time for civic engagement", reaction: "Support democracy broadly. Generous but complicated.", emoji: "üòä", ap: 3, cost: 20, eff: { hr: 2, mkt: 1 }, mood: 2 }
        ]
      },
      {
        intro: "We're deciding on our office policy. Full-time in office would help collaboration but means everyone has to commute. Full remote saves commuting emissions and gives flexibility but loses the spontaneous interactions. Hybrid is complicated to manage.",
        aside: "Remote work dramatically reduces commuting emissions. It also changes how teams work together. There's no perfect answer-just trade-offs.",
        choices: [
          { text: "Remote-first with optional office days", reaction: "Maximum flexibility. Lower carbon footprint. Culture changes.", emoji: "üòä", ap: 2, cost: 15, eff: { hr: 3, dev: 1 }, mood: 2 },
          { text: "Hybrid with required team days", reaction: "Balance in-person and remote. Commuting reduced but not eliminated.", emoji: "üôÇ", ap: 2, cost: 20, eff: { hr: 2, dev: 1 }, mood: 1 },
          { text: "Full-time in office", reaction: "Best for collaboration. Everyone commutes every day.", emoji: "üòê", ap: 2, cost: 25, eff: { hr: -1, dev: 2 }, mood: -1 }
        ]
      },
      {
        intro: "An employee is going through a personal crisis and their work has suffered. They've used up their sick leave and need more time. Strictly by policy, we'd put them on unpaid leave or start managing them out. But they've been loyal and this is temporary.",
        aside: "Policies exist for good reasons, but life is complicated. How we treat people in hard times defines our culture. Others are watching.",
        choices: [
          { text: "Extend paid leave beyond policy", reaction: "Generous. Sets a precedent. The team notices.", emoji: "üòä", ap: 2, cost: 25, eff: { hr: 4, cash: -15 }, mood: 2 },
          { text: "Unpaid leave with job guarantee", reaction: "By the book but humane. They can come back.", emoji: "üôÇ", ap: 1, cost: 10, eff: { hr: 2 }, mood: 1 },
          { text: "Follow policy strictly", reaction: "Consistent. Fair. By the book.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A former employee just posted a scathing WorkReview review. Some of it is unfair-they were let go for performance-but some criticisms are legitimate. The review mentions specific managers by name and calls our culture 'toxic'. Candidates are asking about it in interviews.",
        aside: "WorkReview reviews live forever. Responding can help or make things worse. Some companies try to bury bad reviews with fake good ones. Candidates aren't stupid-they can spot patterns.",
        choices: [
          { text: "Respond professionally and address valid points", reaction: "Shows we listen. Doesn't make the review disappear.", emoji: "üòä", ap: 2, cost: 10, eff: { hr: 2, mkt: 1 }, mood: 2 },
          { text: "Ignore it-engaging just draws attention", reaction: "Don't feed the trolls. It fades.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 },
          { text: "Ask current employees to post positive reviews", reaction: "Obvious astroturfing. Often backfires.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: -1, mkt: -1 }, mood: -1 }
        ]
      },
      {
        intro: "We've noticed our WorkReview rating has dropped from 4.2 to 3.4 over six months. Three recent reviews mention the same issues: unclear promotion criteria, favouritism, and founders who don't listen to feedback. The reviews aren't coordinated-these are independent people saying similar things.",
        aside: "When multiple people say the same thing, it's usually true. WorkReview can be an early warning system if you're willing to hear it. Or you can dismiss it as disgruntled employees.",
        choices: [
          { text: "Take it seriously-investigate the patterns", reaction: "Uncomfortable conversations ahead. Might find real problems.", emoji: "üòä", ap: 3, cost: 20, eff: { hr: 4, dev: 1 }, mood: 2 },
          { text: "Address the specific criticisms publicly", reaction: "Show we're listening. Words need to become actions.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 2 }, mood: 1 },
          { text: "Dismiss it-unhappy people always complain", reaction: "Focus on the work. Don't get distracted.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A departing employee-one we're sad to lose-asks if we'd like her to leave a WorkReview review. She had a genuinely good experience and wants to help with recruiting. It feels a bit awkward to say yes, but authentic positive reviews are valuable.",
        aside: "There's nothing wrong with happy employees sharing their experience. But asking feels transactional. The best employer brands come from people who want to recommend you without being asked.",
        choices: [
          { text: "Thank her but don't ask for anything specific", reaction: "If she posts, it'll be genuine. If she doesn't, that's fine too.", emoji: "üòä", ap: 1, cost: 5, eff: { hr: 2 }, mood: 2 },
          { text: "Say yes and suggest what to mention", reaction: "Probably still authentic, but now it's coached.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1, mkt: 1 }, mood: 0 },
          { text: "Ask all happy leavers to post reviews", reaction: "Systematic approach. Starts to feel manufactured.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 0, mkt: 2 }, mood: -1 }
        ]
      },
      {
        intro: "An anonymous WorkReview review contains details that could only come from someone currently on the team. It's critical but not unfair-they're frustrated about real issues. Some managers want to figure out who wrote it. Others think that would be a terrible idea.",
        aside: "Anonymous feedback exists because people fear retaliation. Hunting for the author proves they were right to be anonymous. But knowing there's a deeply unhappy person on your team, and not knowing who, is uncomfortable.",
        choices: [
          { text: "Don't investigate-address the issues raised", reaction: "Trust the feedback, not the identity. Hardest but right.", emoji: "üòä", ap: 3, cost: 20, eff: { hr: 4 }, mood: 2 },
          { text: "General team discussion about the concerns", reaction: "Acknowledge without hunting. See if anyone opens up.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 1 },
          { text: "Try to identify the author", reaction: "Witch hunt. Even if you find them, then what?", emoji: "üòê", ap: 2, cost: 10, eff: { hr: -3 }, mood: -2 }
        ]
      },
      {
        intro: "We just got our first really positive WorkReview review from a recent hire. She loves the culture, praises her manager, says it's the best job she's had. Marketing wants to quote it on our careers page. She didn't know we'd use it publicly when she wrote it.",
        aside: "WorkReview reviews are public, so technically anyone can quote them. But using someone's words in your marketing without asking feels different. And if she ever has a bad experience, that quote will be awkward.",
        choices: [
          { text: "Ask her permission before using it", reaction: "Respectful. She might say yes, might say no.", emoji: "üòä", ap: 1, cost: 5, eff: { hr: 2, mkt: 1 }, mood: 2 },
          { text: "Use it-it's public anyway", reaction: "Authentic testimonial. Customers relate.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1, mkt: 2 }, mood: 1 },
          { text: "Don't use reviews in marketing", reaction: "Ethical stance. Candidates respect it.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 2 }, mood: 1 }
        ]
      }
    ],
    
    // SOFIA RODRIGUEZ - The Culture Champion
    sofia: [
      {
        intro: "Done one-on-ones. People tired. Two engineers updated CareerHubs. Need to talk about how we're working.",
        aside: "Move fast, but lose good people if we don't change something.",
        choices: [
          { text: "Team reset-offsite and honest talk", reaction: "Thank you. Exactly what we need.", emoji: "üôè", ap: 4, cost: 30, eff: { hr: 6, dev: 1 }, mood: 3 },
          { text: "Address individuals at risk", reaction: "Start. Let me identify who.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 3 }, mood: 1 },
          { text: "Push through-milestone first", reaction: "Team delivers under pressure.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "Several people struggling with stress and anxiety. Support options limited.",
        aside: "Mental health isn't separate from performance. Connected.",
        choices: [
          { text: "Mental health benefits and training", reaction: "Finally. People feel supported.", emoji: "üôè", ap: 3, cost: 20, eff: { hr: 5 }, mood: 2 },
          { text: "Quiet EAP access", reaction: "Something better than nothing.", emoji: "üôÇ", ap: 1, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Encourage self-management", reaction: "Trust the team. Build autonomy.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Defining company values. Could be meaningful or performative.",
        aside: "Real values guide hard decisions. Fake values worse than none.",
        choices: [
          { text: "Facilitated workshop, genuine input", reaction: "Discover who we really are.", emoji: "üôè", ap: 2, cost: 15, eff: { hr: 4, mkt: 1 }, mood: 2 },
          { text: "Founders draft, team comments", reaction: "Top-down. At least there'll be values.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Skip-culture is how we act", reaction: "Actions speak louder. Lead by example.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Diversity in hiring pipeline poor. Need to do something.",
        aside: "Diverse teams perform better. And it's right thing to do.",
        choices: [
          { text: "Structured DEI initiative", reaction: "Systemic change. Takes time but works.", emoji: "üôè", ap: 4, cost: 20, eff: { hr: 4, mkt: 1 }, mood: 2 },
          { text: "Expand sourcing channels", reaction: "Good start. Pipeline first.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 1 },
          { text: "Hire best available", reaction: "Focus on quality. Standards maintained.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Long-serving employee asking for sabbatical. No policy exists.",
        aside: "Flexibility prevents burnout. This person has given a lot.",
        choices: [
          { text: "Approve and create policy", reaction: "Return refreshed. Others see path.", emoji: "üôè", ap: 2, cost: 10, eff: { hr: 4 }, mood: 2 },
          { text: "Approve as one-off", reaction: "Get break. Future unclear.", emoji: "üôÇ", ap: 2, cost: 5, eff: { hr: 2 }, mood: 1 },
          { text: "Decline-business needs", reaction: "Team stays together. Project continues.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Working parents struggling with childcare costs. London is brutal.",
        aside: "Childcare support increasingly expected. Helps retention.",
        choices: [
          { text: "Childcare benefit programme", reaction: "Meaningful help. Shows we care.", emoji: "üôè", ap: 3, cost: 20, eff: { hr: 4 }, mood: 2 },
          { text: "Flexible hours for parents", reaction: "Costs less. Still helps.", emoji: "üôÇ", ap: 2, cost: 5, eff: { hr: 2 }, mood: 1 },
          { text: "Keep compensation-focused", reaction: "Competitive pay speaks loudest.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Exit interviews showing pattern: lack of growth opportunities cited.",
        aside: "People leave managers and lack of growth. Fix what we can.",
        choices: [
          { text: "Learning budget and career framework", reaction: "Investment in growth. Retention follows.", emoji: "üôè", ap: 4, cost: 25, eff: { hr: 5, dev: 1 }, mood: 2 },
          { text: "Manager training on development", reaction: "Fix the conversations first.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 3 }, mood: 1 },
          { text: "Accept some attrition as normal", reaction: "Natural turnover. Fresh perspectives come in.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Anonymous survey results in. Psychological safety scores low in two teams.",
        aside: "Can't innovate if people fear speaking up. Need to address this.",
        choices: [
          { text: "Direct intervention with teams", reaction: "Surface issues. Work through them.", emoji: "üôè", ap: 4, cost: 15, eff: { hr: 4, dev: 1 }, mood: 2 },
          { text: "Manager coaching privately", reaction: "Change behaviour quietly.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Monitor and see if improves", reaction: "Gather data. Make informed decisions.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Some employees are pushing for us to take a public stand on a social issue-climate change, inequality, or a political cause. They say silence is complicity. Others just want to do their jobs without the company being political.",
        aside: "Corporate activism is expected by some, rejected by others. Taking a stand can attract talent and customers who agree, while alienating those who don't.",
        choices: [
          { text: "Take a clear public stand", reaction: "We believe in something. Some applaud, others leave.", emoji: "üôè", ap: 3, cost: 20, eff: { hr: 2, mkt: 2 }, mood: 1 },
          { text: "Support causes quietly, no public stance", reaction: "Do good without controversy. Feels cowardly to some.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 1, mkt: 0 }, mood: 0 },
          { text: "Stay neutral-we're a business", reaction: "Focus on product. Avoid politics.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our office produces a lot of waste-disposable cups, food packaging, electronic waste. Some employees want to make the office more sustainable with composting, reusables, and better recycling. It would cost money and require changing habits.",
        aside: "Small actions add up. They also signal what we value as a company. People notice whether we practice what we preach.",
        choices: [
          { text: "Full sustainability overhaul", reaction: "Walk the talk. Initial hassle, lasting benefits.", emoji: "üôè", ap: 3, cost: 25, eff: { hr: 3, mkt: 1 }, mood: 2 },
          { text: "Basic recycling improvements", reaction: "Better than nothing. Easy wins.", emoji: "üôÇ", ap: 1, cost: 10, eff: { hr: 1 }, mood: 1 },
          { text: "Leave it to individual choice", reaction: "Respect autonomy. Some lead by example.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A team leader has been accused of creating a toxic environment-not harassment exactly, but constant criticism, favouritism, and making people feel small. They're also one of our best performers and hard to replace.",
        aside: "Brilliant jerks are a common dilemma. They deliver results but damage everyone around them. What you tolerate defines your culture.",
        choices: [
          { text: "Remove them from leadership", reaction: "Clear message. They might leave. Culture improves.", emoji: "üôè", ap: 3, cost: 25, eff: { hr: 4, dev: -1 }, mood: 2 },
          { text: "Intensive coaching and monitoring", reaction: "Give them a chance. Others watching closely.", emoji: "üôÇ", ap: 3, cost: 20, eff: { hr: 1, dev: 1 }, mood: 0 },
          { text: "They deliver-overlook it", reaction: "Results matter. Team gets it done.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 2 }, mood: 0 }
        ]
      },
      {
        intro: "We're deciding whether to offer benefits to employees' families-health coverage for partners, parental leave for all parents, support for elderly care. It's expensive but makes us more attractive and helps people bring their whole selves to work.",
        aside: "Family-friendly policies cost money upfront but improve retention and loyalty. People remember how you treat them during major life moments.",
        choices: [
          { text: "Comprehensive family benefits", reaction: "Significant investment. Loyalty follows.", emoji: "üôè", ap: 3, cost: 35, eff: { hr: 5, mkt: 1 }, mood: 2 },
          { text: "Parental leave only", reaction: "Focus on the essentials. Good start.", emoji: "üôÇ", ap: 2, cost: 20, eff: { hr: 3 }, mood: 1 },
          { text: "Statutory minimum only", reaction: "Lean approach. Save for salaries.", emoji: "üôÇ", ap: 1, cost: 5, eff: { cash: 10 }, mood: 0 }
        ]
      },
      {
        intro: "Someone posted on WorkReview that our 'collaborative culture' is actually 'death by committee' and decisions take forever. Another says 'work-life balance' means 'work all the time, balance never'. These are our own values language being thrown back at us. It stings because there's truth in it.",
        aside: "When your stated values don't match lived experience, people notice. WorkReview becomes a place where the gap between aspiration and reality gets called out. Painful but useful.",
        choices: [
          { text: "Honest reflection-are our values real?", reaction: "Hard conversations. Might need to change how we work, not just what we say.", emoji: "üôè", ap: 3, cost: 20, eff: { hr: 4, dev: 1 }, mood: 2 },
          { text: "Clarify what our values actually mean", reaction: "Reframe expectations. Doesn't fix the underlying issues.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 1 },
          { text: "Some people will never be happy", reaction: "Focus on the majority who are engaged.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our WorkReview reviews show a pattern: people love their immediate teams but feel disconnected from leadership. 'Great colleagues, invisible founders.' We've been so focused on product that we've neglected internal communication.",
        aside: "Culture doesn't scale automatically. What worked at 10 people breaks at 50. Leaders who were accessible become distant without meaning to. WorkReview often spots this before leadership does.",
        choices: [
          { text: "Regular all-hands and founder office hours", reaction: "Time investment. Rebuilds connection.", emoji: "üôè", ap: 3, cost: 15, eff: { hr: 4 }, mood: 2 },
          { text: "Better internal comms and updates", reaction: "Information helps. Not the same as presence.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 1 },
          { text: "We're busy building-they'll understand", reaction: "Product focus. Team gets it.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A glowing WorkReview review just appeared-but I'm pretty sure it was written by a manager about their own team. The praise is suspiciously specific and the timing is right after I mentioned we needed better reviews. It's not technically fake, but it's not organic either.",
        aside: "The line between encouraging reviews and manufacturing them is blurry. Managers who write reviews of their own teams aren't lying exactly, but it undermines the whole point of independent feedback.",
        choices: [
          { text: "Have a quiet word-don't do this", reaction: "Awkward conversation. Sets a standard.", emoji: "üôè", ap: 2, cost: 10, eff: { hr: 2 }, mood: 2 },
          { text: "Let it go-no proof it's them", reaction: "Diplomatic approach. Keep options open.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 },
          { text: "If it helps recruiting, who cares?", reaction: "Pragmatic. Attracts talent.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1, mkt: 1 }, mood: 0 }
        ]
      }
    ],
    
    // AISHA KHAN - The Talent Magnet
    aisha: [
      {
        intro: "Retention concerns, I know. But two engineers from CortexAI interested. Headcount approved?",
        aside: "Fix retention yes. But these candidates won't wait. Everyone courting them.",
        choices: [
          { text: "Hire the stars-upgrade team", reaction: "On it. These two exceptional.", emoji: "üéØ", ap: 5, cost: 40, eff: { sci: 4, dev: 2, hr: -1 }, mood: 2 },
          { text: "Retention first, hiring after", reaction: "Might lose window. Keep them warm.", emoji: "üòê", ap: 3, cost: 20, eff: { hr: 4 }, mood: -1 },
          { text: "Both-hire and fix retention", reaction: "Big investment. If committed, let's go.", emoji: "üíº", ap: 5, cost: 55, eff: { sci: 3, hr: 3, dev: 1 }, mood: 1 }
        ]
      },
      {
        intro: "Competitor's senior PM unhappy, reached out. Valuable experience.",
        aside: "Talent markets competitive. When opportunity knocks...",
        choices: [
          { text: "Move fast, make offer", reaction: "Hiring A-players. How we win.", emoji: "üéØ", ap: 2, cost: 30, eff: { mkt: 3, dev: 2 }, mood: 2 },
          { text: "Interview properly, take time", reaction: "Process matters. Speed too.", emoji: "üòê", ap: 3, cost: 20, eff: { mkt: 2, dev: 1 }, mood: 0 },
          { text: "Pass-poaching creates bad blood", reaction: "Maintain good industry relationships.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Losing candidates at offer stage. Comp competitive but not top of London market.",
        aside: "In this talent market, 'competitive' might not be enough.",
        choices: [
          { text: "Increase base to top quartile", reaction: "Money talks. Pipeline improves.", emoji: "üéØ", ap: 2, cost: 30, eff: { hr: 4 }, mood: 2 },
          { text: "Improve equity and benefits", reaction: "Total package approach. Can work.", emoji: "üòê", ap: 3, cost: 20, eff: { hr: 2 }, mood: 0 },
          { text: "Sell the mission harder", reaction: "Purpose-driven team. Committed people stay.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Recruiter pushing expensive candidates. Good, but we could find equivalent ourselves.",
        aside: "Recruiter fees add up. So does time-to-hire. Trade-off.",
        choices: [
          { text: "Pay fee, get talent", reaction: "Time is money. Let's move.", emoji: "üéØ", ap: 2, cost: 35, eff: { hr: 2, dev: 2 }, mood: 1 },
          { text: "Build own sourcing capability", reaction: "Investment now, savings later.", emoji: "üòê", ap: 4, cost: 25, eff: { hr: 3 }, mood: 1 },
          { text: "Rely on inbound applications", reaction: "Efficient. Good candidates find us.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Employer brand invisible. Great candidates don't know we exist.",
        aside: "Recruiting is marketing. Need to be where talent looks.",
        choices: [
          { text: "Employer branding campaign", reaction: "Make noise. Get on radar.", emoji: "üéØ", ap: 4, cost: 30, eff: { hr: 4, mkt: 2 }, mood: 2 },
          { text: "Tech community content strategy", reaction: "Slow build but authentic.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: 2, mkt: 1 }, mood: 1 },
          { text: "Focus on direct outreach", reaction: "One by one. Doesn't scale.", emoji: "ü§∑", ap: 1, cost: 10, eff: { hr: 1 }, mood: -1 }
        ]
      },
      {
        intro: "Imperial College career fair next month. Prime graduate talent.",
        aside: "Top UK university. Computer science grads in demand everywhere.",
        choices: [
          { text: "Premium booth and presentations", reaction: "Stand out. Best grads notice.", emoji: "üéØ", ap: 4, cost: 25, eff: { hr: 3, sci: 1 }, mood: 2 },
          { text: "Simple presence, network", reaction: "There but not flashy.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: 2 }, mood: 0 },
          { text: "Skip-focus on experienced hires", reaction: "Hire ready-to-contribute talent.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Technical hiring bar debate. Lower for speed or maintain for quality?",
        aside: "One bad hire costs three good ones in time and morale.",
        choices: [
          { text: "Maintain bar, invest in pipeline", reaction: "Quality compounds. Worth the wait.", emoji: "üéØ", ap: 3, cost: 20, eff: { hr: 3, dev: 2 }, mood: 2 },
          { text: "Slightly lower bar with mentorship", reaction: "Grow talent internally. More work.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: 2, dev: 1 }, mood: 0 },
          { text: "Lower bar-need bodies", reaction: "Technical debt in human form.", emoji: "ü§∑", ap: 3, cost: 25, eff: { hr: 1, dev: -1 }, mood: -1 }
        ]
      },
      {
        intro: "Key engineer being poached by American startup. Can we counter-offer?",
        aside: "Counter-offers tricky. But losing her is worse.",
        choices: [
          { text: "Strong counter with promotion path", reaction: "Fight for our people.", emoji: "üéØ", ap: 3, cost: 25, eff: { hr: 2, dev: 2 }, mood: 2 },
          { text: "Match offer, discuss concerns", reaction: "Address why she's looking.", emoji: "üòê", ap: 3, cost: 20, eff: { hr: 1, dev: 1 }, mood: 0 },
          { text: "Let her go gracefully", reaction: "Part on good terms. Stay connected.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our best candidate for the senior ML role needs a Skilled Worker visa. We're not a licensed sponsor yet. Becoming one takes 8-12 weeks, costs about ¬£1,500, and requires ongoing compliance-keeping records, reporting changes, passing audits. Or we only hire people who already have the right to work here.",
        aside: "The UK visa system is a real barrier to hiring. Many startups avoid it entirely, which limits their talent pool. Others see sponsorship as a competitive advantage-it opens up candidates others can't hire.",
        choices: [
          { text: "Apply for sponsor licence-invest in the capability", reaction: "Takes time but opens up the world. Worth it for the right talent.", emoji: "üéØ", ap: 4, cost: 30, eff: { hr: 4, dev: 2 }, mood: 2 },
          { text: "Ask the candidate to wait while we apply", reaction: "Risky. Good candidates have options. Some will wait, many won't.", emoji: "üòê", ap: 3, cost: 20, eff: { hr: 2, dev: 1 }, mood: 0 },
          { text: "Only hire people with existing right to work", reaction: "Simpler process. Faster hiring.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A brilliant engineer we want to hire is on a Graduate visa with 18 months left. If we sponsor her for a Skilled Worker visa now, it costs us about ¬£5,000 and locks her in somewhat. If we wait, she might find another sponsor, or we might discover it's not a good fit after all.",
        aside: "Graduate visas give international students two years to work after finishing their degree-but no path to settlement. Sponsoring someone is an investment and a commitment. Some companies wait to be sure; others act fast to secure talent.",
        choices: [
          { text: "Sponsor her now-secure the talent", reaction: "Commitment both ways. She knows we're invested in her.", emoji: "üéØ", ap: 3, cost: 30, eff: { hr: 3, dev: 2 }, mood: 2 },
          { text: "Hire now, discuss sponsorship at 6 months", reaction: "Trial period. She might not wait-others will sponsor faster.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: 2, dev: 1 }, mood: 0 },
          { text: "Only hire if she finds her own visa solution", reaction: "Shows resourcefulness. She figures it out.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "The salary threshold for Skilled Worker visas just went up again-now ¬£38,700 for most roles, or the 'going rate' for the job, whichever is higher. Our junior developer roles pay ¬£35,000, which was fine last year. Now we can't sponsor anyone for those positions unless we raise salaries or find a workaround.",
        aside: "Immigration policy keeps changing. The salary thresholds are meant to ensure migrants aren't undercutting local workers, but they also make it hard to hire junior international talent. Some companies restructure roles; others just don't hire internationally for those positions.",
        choices: [
          { text: "Raise salaries to meet threshold", reaction: "More expensive but we can sponsor. Might need to raise for everyone.", emoji: "üéØ", ap: 2, cost: 25, eff: { hr: 3, cash: -30 }, mood: 1 },
          { text: "Restructure roles to qualify for lower thresholds", reaction: "Some roles have different rules. Takes creativity and compliance risk.", emoji: "üòê", ap: 3, cost: 15, eff: { hr: 2 }, mood: 0 },
          { text: "Only hire UK/settled workers for junior roles", reaction: "Simpler compliance. Focus sponsorship on senior roles.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "One of our EU developers came to the UK before Brexit and applied for settled status, but his application has been stuck in a backlog for over a year. He has a 'certificate of application' that lets him keep working, but he's nervous about travelling, renting a flat, or even opening a bank account. The uncertainty is affecting his work.",
        aside: "Millions of EU citizens applied for settled status. Most got it quickly, but some are stuck in limbo-technically legal but unable to prove it easily. It's a strange bureaucratic purgatory that affects real people's lives.",
        choices: [
          { text: "Help him escalate with immigration lawyers", reaction: "Company investment in his situation. Shows we care.", emoji: "üéØ", ap: 2, cost: 20, eff: { hr: 2, dev: 1 }, mood: 2 },
          { text: "Write a strong employer support letter", reaction: "Sometimes helps. Sometimes doesn't. Worth trying.", emoji: "üòê", ap: 1, cost: 5, eff: { hr: 1 }, mood: 1 },
          { text: "Reassure him but this is his issue to manage", reaction: "Trust him. He handles it.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "Our Head of Product is Brazilian, here on a Skilled Worker visa we sponsor. She's been offered a chance to lead a project in our potential S√£o Paulo office for six months. But leaving the UK for that long might affect her path to settlement-she needs to be physically present in the UK for a certain number of days. She's torn between the career opportunity and her immigration timeline.",
        aside: "Visa rules create invisible constraints on careers. Time out of the country can reset settlement clocks. Some employees turn down opportunities to protect their immigration status. It's a factor that never appears in org charts.",
        choices: [
          { text: "Find a way to structure it that protects her status", reaction: "Creative solution. Might involve more trips back and forth.", emoji: "üéØ", ap: 3, cost: 25, eff: { hr: 2, mkt: 2 }, mood: 2 },
          { text: "Let her choose-explain the trade-offs clearly", reaction: "Informed decision. Might lose her to the project or to frustration.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 1, mkt: 1 }, mood: 0 },
          { text: "Send someone with simpler immigration status", reaction: "Easier logistics. Trip goes smoothly.", emoji: "üôÇ", ap: 1, cost: 10, eff: { mkt: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're recruiting a senior engineer. She asks about our runway and funding situation. Honestly, we have eight months of cash and no guarantee of the next round. Our standard pitch makes things sound more secure than they are. She has competing offers from stable companies.",
        aside: "Recruiting is selling. But candidates make life decisions based on what you tell them. Some will leave secure jobs to join you. If the startup fails in six months, was your pitch fair?",
        choices: [
          { text: "Be transparent about our situation", reaction: "She might walk. If she joins, she knows what she's signing up for.", emoji: "üéØ", ap: 2, cost: 10, eff: { hr: 1 }, mood: 2 },
          { text: "Optimistic but hint at startup risk", reaction: "Acknowledge uncertainty without dwelling on it. Normal.", emoji: "üòê", ap: 2, cost: 10, eff: { hr: 2 }, mood: 1 },
          { text: "Stick to the confident pitch", reaction: "Win the hire. Hope we don't let her down.", emoji: "ü§∑", ap: 1, cost: 10, eff: { hr: 3, dev: 1 }, mood: -1 }
        ]
      },
      {
        intro: "A candidate asks about work-life balance. The honest answer is that we're in crunch mode and will be for months-60-hour weeks are common. Our jobs page talks about 'flexibility' and 'sustainable pace'. He's choosing between us and a corporate job with predictable hours.",
        aside: "Startups often demand more than they admit in interviews. People join expecting one thing, find another. Some thrive on the intensity; others burn out and leave bitter.",
        choices: [
          { text: "Be honest about current intensity", reaction: "Might lose him. Whoever joins knows the deal.", emoji: "üéØ", ap: 2, cost: 10, eff: { hr: 1 }, mood: 2 },
          { text: "Frame it as 'startup energy, flexible structure'", reaction: "Technically true. Omits the 60-hour weeks.", emoji: "üòê", ap: 1, cost: 10, eff: { hr: 2 }, mood: 0 },
          { text: "Sell the opportunity, downplay the hours", reaction: "Win the hire. Hope he adapts. Or doesn't notice until he's in.", emoji: "ü§∑", ap: 1, cost: 10, eff: { hr: 3, dev: 1 }, mood: -1 }
        ]
      },
      {
        intro: "We're losing a bidding war for a great candidate. To win, we'd have to offer a title and salary we've never paid before-she'd be the highest-paid person outside the founders. Current team would eventually find out. She's worth it, but the internal equity issues are real.",
        aside: "Paying market rate for new hires while existing team is below market is a time bomb. Do you win the talent war now and deal with retention problems later?",
        choices: [
          { text: "Pass-not worth the internal disruption", reaction: "Keep team harmony. Internal equity preserved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
          { text: "Make the offer, plan to level up existing comp", reaction: "Win the hire. Commit to fixing the broader problem.", emoji: "üòê", ap: 3, cost: 30, eff: { hr: 2, dev: 2, cash: -40 }, mood: 1 },
          { text: "Make the offer, keep it confidential", reaction: "Win now. Hope nobody talks. They always talk.", emoji: "ü§∑", ap: 2, cost: 25, eff: { hr: 2, dev: 2 }, mood: -1 }
        ]
      },
      {
        intro: "Our WorkReview rating is 3.1 stars. Candidates are asking about it. The reviews mention long hours, unclear career paths, and 'bro culture'. Some of this is outdated-we've changed-but the old reviews drag down the average. New candidates see it before they see us.",
        aside: "First impressions happen on WorkReview before you ever meet a candidate. A low rating means your best prospects might never apply. But you can't delete history, only write new chapters.",
        choices: [
          { text: "Address it head-on in interviews", reaction: "Acknowledge the past, explain what's changed. Honest.", emoji: "üéØ", ap: 2, cost: 10, eff: { hr: 3 }, mood: 2 },
          { text: "Encourage recent hires to share their experience", reaction: "Fresh voices. If they're genuinely happy, it'll show.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: 2, mkt: 1 }, mood: 1 },
          { text: "Hope candidates don't check WorkReview", reaction: "Focus on in-person experience instead.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "A candidate just withdrew from our process. When we asked why, she said she'd read our WorkReview reviews and was concerned about what former employees said about management. She was our top choice for a critical role. This is the third time this quarter.",
        aside: "WorkReview is now part of the recruiting funnel whether you like it or not. Candidates self-select out before you can make your case. The reviews are doing your screening-just not in your favour.",
        choices: [
          { text: "Fix the underlying issues reviews mention", reaction: "Hard work. Only real solution.", emoji: "üéØ", ap: 4, cost: 30, eff: { hr: 4, dev: 1 }, mood: 2 },
          { text: "Better employer branding to counter narrative", reaction: "Tell our story louder. Doesn't change the reviews.", emoji: "üòê", ap: 3, cost: 25, eff: { hr: 2, mkt: 2 }, mood: 1 },
          { text: "Focus on candidates who don't check reviews", reaction: "Less research-focused candidates. Faster hiring.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
        ]
      },
      {
        intro: "We're about to make three offers to great candidates. Before we do, I checked WorkReview and noticed a new review from someone who just left. It's detailed, specific, and damning-mentions the exact team two of our candidates would join. If they see it before accepting, we might lose them.",
        aside: "Timing matters. A bad review right before offers go out can tank your close rate. You can't suppress it, but you can try to get ahead of it.",
        choices: [
          { text: "Proactively address it with the candidates", reaction: "Awkward but honest. They'll find it anyway.", emoji: "üéØ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 2 },
          { text: "Accelerate the offers-beat the review", reaction: "Hope they sign before they search. Risky.", emoji: "üòê", ap: 2, cost: 15, eff: { hr: 1 }, mood: 0 },
          { text: "Nothing we can do-proceed normally", reaction: "Focus on what we control.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
        ]
      }
    ]
  }
};

// ===== GENERIC EVENTS - Can appear for any executive =====
// These are cross-functional events that work across all ventures and departments

const GENERIC_EVENTS = {
  // Events that can appear for any department
  all: [
    {
      intro: "Board meeting next week. They want a progress update from each department.",
      aside: "Board visibility is a double-edged sword. Under-promise or inspire confidence?",
      choices: [
        { text: "Comprehensive, honest presentation", reaction: "They appreciate the transparency.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 2, hr: 1 }, mood: 2 },
        { text: "Highlight wins, minimise concerns", reaction: "Bought us time. For now.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 1 }, mood: 0 },
        { text: "Send written update, skip presenting", reaction: "Efficient communication. Time saved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "A key vendor just raised their prices 40%. We rely on them heavily.",
      aside: "Switching costs are real. But so is margin erosion.",
      choices: [
        { text: "Negotiate hard, threaten to switch", reaction: "Got it down to 20%. Worth the fight.", emoji: "üòä", ap: 2, cost: 5, eff: { dev: 1, cash: 30 }, mood: 2 },
        { text: "Accept increase, budget accordingly", reaction: "Stable relationship. Planning clarity.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 },
        { text: "Start migration to alternative", reaction: "Painful but necessary. Six month project.", emoji: "üôÇ", ap: 4, cost: 25, eff: { dev: 2 }, mood: 1 }
      ]
    },
    {
      intro: "Office lease renewal coming up. Stay, downsize, or go fully remote?",
      aside: "Real estate is expensive. But some people need the office.",
      choices: [
        { text: "Renew with flexible terms", reaction: "Stability with optionality.", emoji: "üòä", ap: 2, cost: 15, eff: { hr: 2 }, mood: 1 },
        { text: "Downsize to smaller space", reaction: "Tighter. But savings are real.", emoji: "üôÇ", ap: 2, cost: 0, eff: { hr: 1, cash: 40 }, mood: 0 },
        { text: "Go fully remote", reaction: "Access global talent. Save on rent.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1, cash: 60 }, mood: 0 }
      ]
    },
    {
      intro: "Competitor just raised a massive round. Press is calling them the market leader.",
      aside: "Funding announcements create perception. Perception affects deals.",
      choices: [
        { text: "Counter with our own PR push", reaction: "Get our story out there.", emoji: "üòä", ap: 3, cost: 20, eff: { mkt: 3 }, mood: 2 },
        { text: "Focus internally, ignore the noise", reaction: "Heads down. Ship product.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 },
        { text: "Accelerate our own fundraising", reaction: "Capital is a competitive weapon.", emoji: "üòê", ap: 4, cost: 15, eff: { mkt: 2, cash: 100 }, mood: 1 }
      ]
    },
    {
      intro: "CloudScale bill came in 50% higher than expected. Cloud costs spiralling.",
      aside: "Scale is expensive. But optimisation takes engineering time.",
      choices: [
        { text: "Dedicated cost optimisation sprint", reaction: "Found waste we didn't know existed.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 1, cash: 40 }, mood: 2 },
        { text: "Quick wins only, stay focused", reaction: "Some savings. Could do more.", emoji: "üôÇ", ap: 1, cost: 5, eff: { cash: 15 }, mood: 0 },
        { text: "Accept it as cost of growth", reaction: "Investment in scale. Revenue follows.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
      ]
    }
  ],
  
  // Research-specific generic events
  research: [
    {
      intro: "Promising researcher applying, but they want to keep publishing openly.",
      aside: "Open science versus competitive advantage. Classic tension.",
      choices: [
        { text: "Hire with publication rights", reaction: "Attract talent. Share some secrets.", emoji: "üòä", ap: 3, cost: 20, eff: { sci: 3, mkt: 1 }, mood: 2 },
        { text: "Negotiate delayed publication", reaction: "Compromise. Six month embargo.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2 }, mood: 1 },
        { text: "Insist on full IP control", reaction: "Protect our assets. Worth the fight.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "University offering sponsored PhD students. Cheap talent, slow timelines.",
      aside: "PhDs are brilliant but have their own priorities.",
      choices: [
        { text: "Take two sponsored students", reaction: "Fresh thinking. Publication pressure.", emoji: "üòä", ap: 2, cost: 10, eff: { sci: 2, hr: 1 }, mood: 2 },
        { text: "One student, clear project scope", reaction: "Manageable commitment.", emoji: "üôÇ", ap: 1, cost: 5, eff: { sci: 1 }, mood: 1 },
        { text: "Decline-need full-time focus", reaction: "Prioritise the product. Stay focused.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Lab equipment breaking down. Repair or upgrade to newer tech?",
      aside: "Old equipment limits what we can do. New equipment limits budget.",
      choices: [
        { text: "Full upgrade to latest equipment", reaction: "Capabilities expanded significantly.", emoji: "üòä", ap: 5, cost: 50, eff: { sci: 4, dev: 1 }, mood: 2 },
        { text: "Repair and extend life", reaction: "Keeps us running. For now.", emoji: "üôÇ", ap: 3, cost: 20, eff: { sci: 1 }, mood: 0 },
        { text: "Work around the limitations", reaction: "Creativity from constraint. Team innovates.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Ethics review flagged concerns about our data collection practices.",
      aside: "Better to fix now than face questions later.",
      choices: [
        { text: "Full ethics audit and remediation", reaction: "Clean practices. Clear conscience.", emoji: "üòä", ap: 4, cost: 20, eff: { sci: 2, hr: 2, mkt: 1 }, mood: 2 },
        { text: "Address specific concerns raised", reaction: "Minimum viable compliance.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 1 }, mood: 0 },
        { text: "Push back on the review", reaction: "Stand our ground. Reviewer respects it.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Conference abstract deadline tomorrow. Submit preliminary results?",
      aside: "Early visibility versus looking foolish if results don't hold.",
      choices: [
        { text: "Submit with appropriate caveats", reaction: "Get the conversation started.", emoji: "üòä", ap: 2, cost: 10, eff: { sci: 2, mkt: 1 }, mood: 2 },
        { text: "Wait for next conference cycle", reaction: "More solid. Less timely.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 1 }, mood: 0 },
        { text: "Skip conferences, focus on product", reaction: "Ship faster. Product speaks for itself.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    // NEW: University engagement events
    {
      intro: "The computer science department at our local university wants to set up a Knowledge Transfer Partnership. Government co-funds it.",
      aside: "KTPs are brilliant value-Innovate UK pays most of the salary. We get a dedicated associate for two years.",
      choices: [
        { text: "Full KTP with research project", reaction: "Two years of focused work. Grant covers 60% of costs.", emoji: "üòä", ap: 4, cost: 25, eff: { sci: 4, dev: 2, cash: 40 }, mood: 2 },
        { text: "Informal collaboration first", reaction: "Test the relationship before committing.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, dev: 1 }, mood: 0 },
        { text: "Too much admin-pass", reaction: "Avoid bureaucracy. Focus on product.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Applications are open for summer interns. We could take students from various universities-good talent pipeline.",
      aside: "Interns are cheap and eager. Some become brilliant hires. Others need a lot of hand-holding.",
      choices: [
        { text: "Structured programme with 4 interns", reaction: "Busy summer. One or two will be stars.", emoji: "üòä", ap: 4, cost: 30, eff: { sci: 3, dev: 2, hr: 2 }, mood: 2 },
        { text: "Take 1-2 interns informally", reaction: "Manageable. Less pipeline impact.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2, hr: 1 }, mood: 0 },
        { text: "Skip this year-too busy", reaction: "Focus on priorities. Next year.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "A Warwick Business School MSc team wants to do their consultancy project with us. Free strategy work, but needs time to brief and manage.",
      aside: "These students are sharp and motivated. Last cohort's report on a competitor was genuinely useful.",
      choices: [
        { text: "Full engagement with exec access", reaction: "They deliver serious competitor analysis.", emoji: "üòä", ap: 3, cost: 15, eff: { sci: 2, mkt: 3 }, mood: 2 },
        { text: "Limited scope project", reaction: "Useful output. Less of our time.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 1, mkt: 2 }, mood: 0 },
        { text: "Decline-not the right time", reaction: "Wait for better timing.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "A sandwich year student from Nottingham wants to do their placement with us. 12 months of dedicated help at junior salary.",
      aside: "Placement students become part of the team. By month six, they're genuinely productive.",
      choices: [
        { text: "Take them on with development plan", reaction: "A year of growing contribution. Often convert to grad hire.", emoji: "üòä", ap: 3, cost: 20, eff: { sci: 2, dev: 2, hr: 1 }, mood: 2 },
        { text: "Six-month trial placement", reaction: "Test fit before full commitment.", emoji: "üôÇ", ap: 2, cost: 12, eff: { sci: 1, dev: 1 }, mood: 0 },
        { text: "Can't commit to supervision", reaction: "Focus resources. Better fits ahead.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Three final year students want us to propose dissertation projects. Real problems for them, potential solutions for us.",
      aside: "Some projects go nowhere. But occasionally you get breakthrough ideas from fresh eyes.",
      choices: [
        { text: "Propose three meaty projects", reaction: "One might solve a real problem. All build our reputation.", emoji: "üòä", ap: 3, cost: 15, eff: { sci: 3, dev: 1, hr: 1 }, mood: 2 },
        { text: "One project, well-supervised", reaction: "Quality over quantity.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2 }, mood: 0 },
        { text: "No bandwidth for supervision", reaction: "Focus on core priorities.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Our new approach could be published as open source. Builds reputation but competitors benefit too.",
      aside: "Open source is how you become the standard. But we give away some advantage.",
      choices: [
        { text: "Full open source with blog post", reaction: "Community builds on our work. We get credit.", emoji: "üòä", ap: 3, cost: 20, eff: { sci: 4, mkt: 3, dev: -1 }, mood: 2 },
        { text: "Partial release-core stays proprietary", reaction: "Share the edges, keep the secret sauce.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2, mkt: 2 }, mood: 0 },
        { text: "Keep everything proprietary", reaction: "Protect our edge. Competitors guess.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Our research intern has offers from CortexAI and us. We can't match salaries but can offer ownership and impact.",
      aside: "Big Tech throws money at PhDs. We throw interesting problems and equity.",
      choices: [
        { text: "Compelling offer with equity and autonomy", reaction: "They choose us. Ownership matters to them.", emoji: "üòä", ap: 3, cost: 30, eff: { sci: 3, hr: 2 }, mood: 2 },
        { text: "Match what we can, emphasise mission", reaction: "50/50 chance. Worth trying.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 2, hr: 1 }, mood: 0 },
        { text: "Accept we'll lose this one", reaction: "Pick battles wisely. Save resources.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "A local college runs degree apprenticeships in data science. We could sponsor students-they work 4 days, study 1 day.",
      aside: "Apprentices are loyal and learn our way of working. Four-year commitment though.",
      choices: [
        { text: "Sponsor two apprentices", reaction: "Building talent from scratch. They'll bleed our colours.", emoji: "üòä", ap: 4, cost: 25, eff: { sci: 2, dev: 2, hr: 3 }, mood: 2 },
        { text: "One apprentice to start", reaction: "Test the programme. Lower risk.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 1, dev: 1, hr: 1 }, mood: 0 },
        { text: "Too long-term for us now", reaction: "Focus on immediate needs. Practical.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Sheffield Hallam is hosting an industry research day. Small investment to present, chance to meet practical researchers.",
      aside: "Not the prestige universities, but these researchers solve real problems. Less ego too.",
      choices: [
        { text: "Present and sponsor networking drinks", reaction: "Found three researchers working on exactly our problems.", emoji: "üòä", ap: 3, cost: 15, eff: { sci: 3, hr: 2 }, mood: 2 },
        { text: "Attend without presenting", reaction: "Scout the talent. Stay under the radar.", emoji: "üôÇ", ap: 2, cost: 8, eff: { sci: 1, hr: 1 }, mood: 0 },
        { text: "Skip-focus on Russell Group", reaction: "Target top tier. Quality over quantity.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 1 }, mood: 0 }
      ]
    },
    // FUN: Humorous research events
    {
      intro: "Someone trained our model on the entire archive of British baking shows. It now describes everything in terms of 'soggy bottoms' and 'good crumb structure'.",
      aside: "The interns thought it was hilarious. The demo to investors is on Thursday.",
      choices: [
        { text: "Lean into it-baking metaphors for everyone", reaction: "Investors charmed. 'A lovely rise in your Series A.'", emoji: "üéÇ", ap: 2, cost: 5, eff: { sci: 1, mkt: 3 }, mood: 2 },
        { text: "Emergency rollback to serious model", reaction: "Crisis averted. Interns disappointed.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, dev: 1 }, mood: 0 },
        { text: "Keep both versions, A/B test", reaction: "Turns out users prefer the baking version.", emoji: "ü§î", ap: 3, cost: 15, eff: { sci: 2, mkt: 2 }, mood: 1 }
      ]
    },
    {
      intro: "A researcher has been coming in at 3am 'when the GPU cluster is quiet'. Security is concerned. So is their spouse.",
      aside: "Dedication or obsession? The line blurs in research.",
      choices: [
        { text: "Intervention: enforce normal hours", reaction: "They grumble but sleep improves. So does their work.", emoji: "üòä", ap: 2, cost: 5, eff: { sci: 1, hr: 2 }, mood: 1 },
        { text: "Give them a camp bed and snacks", reaction: "Breakthrough achieved. HR sends concerned emails.", emoji: "üõè", ap: 2, cost: 8, eff: { sci: 4, hr: -1 }, mood: 0 },
        { text: "Allocate dedicated GPU time instead", reaction: "Problem solved with scheduling. Novel concept.", emoji: "üôÇ", ap: 3, cost: 15, eff: { sci: 3, dev: 1 }, mood: 2 }
      ]
    },
    {
      intro: "The research team's TeamChat channel has devolved into an elaborate debate about whether a hot dog is a sandwich.",
      aside: "Productivity is down. But team bonding is... up?",
      choices: [
        { text: "Join the debate with a formal position paper", reaction: "Your 'Cylindrical Meat Taxonomy' becomes a meme. Team loves it.", emoji: "üå≠", ap: 1, cost: 0, eff: { hr: 3, mkt: 1 }, mood: 2 },
        { text: "Gently redirect to actual work", reaction: "Adults behaving professionally. Briefly.", emoji: "üôÇ", ap: 1, cost: 0, eff: { sci: 1, hr: 1 }, mood: 0 },
        { text: "Create a #random channel for nonsense", reaction: "Chaos contained. Science resumes.", emoji: "üòä", ap: 1, cost: 0, eff: { sci: 2, hr: 2 }, mood: 1 }
      ]
    }
  ],
  
  // Dev-specific generic events
  dev: [
    {
      intro: "Security audit found vulnerabilities. None exploited yet, but concerning.",
      aside: "Security debt is invisible until it isn't.",
      choices: [
        { text: "Full security remediation sprint", reaction: "Sleep better at night.", emoji: "üòä", ap: 4, cost: 30, eff: { dev: 3, hr: 1 }, mood: 2 },
        { text: "Fix critical issues, monitor rest", reaction: "Risk managed, not eliminated.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2 }, mood: 0 },
        { text: "Accept risk, keep shipping", reaction: "Move fast. Ship product.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Team wants to rewrite a core component. Current one works but is painful.",
      aside: "Rewrites are seductive. Often take longer than expected.",
      choices: [
        { text: "Approve focused rewrite", reaction: "Technical debt paid down.", emoji: "üòä", ap: 4, cost: 25, eff: { dev: 4, hr: 1 }, mood: 2 },
        { text: "Incremental refactoring instead", reaction: "Slower but safer.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 2 }, mood: 0 },
        { text: "Keep current implementation", reaction: "Stability preserved. Team adapts.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Open source dependency has a concerning maintainer situation.",
      aside: "Supply chain risk is real. But building everything yourself is worse.",
      choices: [
        { text: "Fork and maintain internally", reaction: "Control but overhead.", emoji: "üòä", ap: 4, cost: 20, eff: { dev: 2 }, mood: 1 },
        { text: "Contribute to keep project alive", reaction: "Community goodwill. Some risk remains.", emoji: "üôÇ", ap: 2, cost: 10, eff: { dev: 1, mkt: 1 }, mood: 1 },
        { text: "Monitor and hope", reaction: "Gather data. Make informed decision later.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Production incident last night. Systems recovered, but root cause unclear.",
      aside: "Incidents are learning opportunities. If we actually learn.",
      choices: [
        { text: "Full post-mortem, systemic fixes", reaction: "Won't happen again. Probably.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 3, hr: 1 }, mood: 2 },
        { text: "Quick fix, move on", reaction: "Patched. Root cause lingers.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 },
        { text: "Blame individual, close ticket", reaction: "Clear accountability. Issue resolved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "New framework everyone's excited about. Migration would be significant.",
      aside: "Shiny object syndrome is real. But so is technical stagnation.",
      choices: [
        { text: "Pilot on new project first", reaction: "Learn before committing.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 2, hr: 1 }, mood: 2 },
        { text: "Wait for it to mature", reaction: "Let others find the bugs.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 },
        { text: "Full migration now", reaction: "Ambitious. Possibly reckless.", emoji: "üòê", ap: 4, cost: 35, eff: { dev: 3, hr: -1 }, mood: 0 }
      ]
    },
    // NEW: Complementors and partner relationship events
    {
      intro: "A popular tool that lets non-programmers build apps wants to connect with our product. Their 50,000 users could start using our AI, but we'd have to help them when things go wrong.",
      aside: "Partnerships like this are how platforms grow. But if their users have a bad experience, they'll blame us.",
      choices: [
        { text: "Build a proper connection with full support", reaction: "Their 50k users can now access us.", emoji: "üòä", ap: 4, cost: 35, eff: { dev: 3, mkt: 4, cash: 30 }, mood: 2 },
        { text: "Let them connect, but minimal help", reaction: "They can build, we won't hand-hold.", emoji: "üôÇ", ap: 2, cost: 15, eff: { dev: 1, mkt: 2, cash: 15 }, mood: 0 },
        { text: "Decline-focus on our own product", reaction: "Control preserved. Stay focused.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "CloudScale wants us in their marketplace. Co-marketing budget available, but they take 20% of revenue.",
      aside: "Enterprise buyers trust the marketplace. The margin hit hurts though.",
      choices: [
        { text: "Full marketplace integration", reaction: "Enterprise procurement unlocked. CloudScale logo helps.", emoji: "üòä", ap: 4, cost: 40, eff: { dev: 2, mkt: 4, cash: 60 }, mood: 2 },
        { text: "Listed but not featured", reaction: "Present but not promoted.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 1, mkt: 2, cash: 20 }, mood: 0 },
        { text: "Stay independent", reaction: "Full control. Better margins.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1, cash: 10 }, mood: 0 }
      ]
    },
    {
      intro: "A company we see as a competitor wants to integrate. Their product complements ours in unexpected ways.",
      aside: "Coopetition is tricky. But together we solve a problem neither can alone.",
      choices: [
        { text: "Strategic partnership with clear boundaries", reaction: "Frenemies who serve customers better.", emoji: "üòä", ap: 4, cost: 30, eff: { dev: 3, mkt: 3 }, mood: 2 },
        { text: "Technical integration only", reaction: "Works together, no joint marketing.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 2, mkt: 1 }, mood: 0 },
        { text: "Keep distance", reaction: "Clean strategy. Independence preserved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Stratton Consulting wants to train consultants on our platform. They'd sell implementation services to enterprises.",
      aside: "SIs open enterprise doors. But they also set customer expectations we might not meet.",
      choices: [
        { text: "Formal SI partner programme", reaction: "Certified consultants selling us to FTSE 100.", emoji: "üòä", ap: 5, cost: 45, eff: { dev: 2, mkt: 5, cash: 80 }, mood: 2 },
        { text: "Informal training, no certification", reaction: "They can learn, no guarantees either way.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 1, mkt: 2, cash: 30 }, mood: 0 },
        { text: "Direct sales only", reaction: "Control the customer experience.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Developers are asking for a proper SDK and documentation. It's infrastructure work with no direct revenue.",
      aside: "Developer love compounds. But it's hard to measure and easy to deprioritise.",
      choices: [
        { text: "Full SDK with examples and docs", reaction: "Developers build things we never imagined.", emoji: "üòä", ap: 4, cost: 35, eff: { dev: 4, mkt: 2 }, mood: 2 },
        { text: "Improved docs, basic SDK", reaction: "Better than nothing. Not inspiring.", emoji: "üôÇ", ap: 2, cost: 20, eff: { dev: 2, mkt: 1 }, mood: 0 },
        { text: "Focus on enterprise, not developers", reaction: "Enterprise deals. Bigger contracts.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 2 }, mood: 0 }
      ]
    },
    {
      intro: "SiliconCore wants to feature us as an optimisation case study. Free hardware credits, but we'd be in their marketing.",
      aside: "GPU credits are expensive. Being seen as a 'SiliconCore shop' has implications.",
      choices: [
        { text: "Deep partnership with co-engineering", reaction: "Optimised for their silicon. Their events feature us.", emoji: "üòä", ap: 4, cost: 20, eff: { dev: 4, sci: 2, cash: 50 }, mood: 2 },
        { text: "Accept credits, minimal commitment", reaction: "Free compute. Light branding.", emoji: "üôÇ", ap: 2, cost: 10, eff: { dev: 2, cash: 25 }, mood: 0 },
        { text: "Stay hardware-agnostic", reaction: "Flexibility preserved. Pay full price.", emoji: "üòê", ap: 1, cost: 0, eff: { dev: 1 }, mood: -1 }
      ]
    },
    // FUN: Humorous dev events
    {
      intro: "Someone committed 'TODO: fix this later' to production. That was 18 months ago. It's now load-bearing.",
      aside: "Every codebase has its demons. This one has documentation.",
      choices: [
        { text: "Heroic refactoring sprint", reaction: "It's fixed! Also, three other things broke. Then got fixed.", emoji: "üòä", ap: 4, cost: 25, eff: { dev: 4 }, mood: 2 },
        { text: "Add more TODOs explaining the first TODO", reaction: "Future archaeologists will understand. Team laughs.", emoji: "üìù", ap: 1, cost: 0, eff: { hr: 2 }, mood: 1 },
        { text: "Rename it to 'WONTFIX: this is fine'", reaction: "Technically not lying anymore. Team laughs.", emoji: "üî•", ap: 1, cost: 0, eff: { hr: 2 }, mood: 1 }
      ]
    },
    {
      intro: "The deploy pipeline broke at 5pm Friday. Lead dev says they can fix it 'real quick'. It's now 11pm.",
      aside: "Some lessons are only learned the hard way. This is one of them.",
      choices: [
        { text: "Call it-everyone go home", reaction: "Fresh eyes Monday. Team appreciates it.", emoji: "üçï", ap: 1, cost: 10, eff: { hr: 3 }, mood: 2 },
        { text: "All-hands crisis mode", reaction: "Fixed at 2am. Team bonds over shared trauma.", emoji: "üí™", ap: 3, cost: 15, eff: { dev: 3, hr: -1 }, mood: 0 },
        { text: "Rollback and pretend this didn't happen", reaction: "Nobody mentions Friday. Ever.", emoji: "üôà", ap: 2, cost: 5, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Intern pushed directly to main branch. In their defence, the tutorial they followed was from 2015.",
      aside: "The staging environment exists for a reason. Now everyone knows that reason.",
      choices: [
        { text: "Blameless post-mortem, fix permissions", reaction: "Learning opportunity. Intern mortified but grows.", emoji: "üòä", ap: 2, cost: 5, eff: { dev: 2, hr: 2 }, mood: 2 },
        { text: "Quietly revert and update onboarding docs", reaction: "What push? There was no push.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1, hr: 1 }, mood: 0 },
        { text: "Make it a team-wide teaching moment", reaction: "Intern presents 'How I Broke Production' at Friday demos.", emoji: "üé§", ap: 2, cost: 0, eff: { dev: 1, hr: 3 }, mood: 2 }
      ]
    },
    {
      intro: "The AI has started responding to customer queries with 'As an AI language model, I cannot...' We don't use that model.",
      aside: "It's learned this from training data. Customers are confused. So are we.",
      choices: [
        { text: "Emergency prompt engineering", reaction: "Crisis averted. AI now says 'Happy to help!'", emoji: "ü§ñ", ap: 2, cost: 10, eff: { dev: 2, mkt: 1 }, mood: 1 },
        { text: "Add it to the brand voice as quirky", reaction: "Surprisingly, users find it endearing.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 2, hr: 1 }, mood: 1 },
        { text: "Fine-tune on better data", reaction: "Proper fix. Takes a week. Worth it.", emoji: "üòä", ap: 4, cost: 25, eff: { dev: 4, sci: 2 }, mood: 2 }
      ]
    }
  ],
  
  // Marketing-specific generic events
  marketing: [
    {
      intro: "Influencer offering to promote us. Big following, unclear authenticity.",
      aside: "Influencer marketing works. When it's authentic.",
      choices: [
        { text: "Paid partnership with clear terms", reaction: "Reach expanded. Brand associated.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 3 }, mood: 2 },
        { text: "Smaller micro-influencer campaign", reaction: "More authentic. Less reach.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
        { text: "Focus on organic growth", reaction: "Slower but more sustainable.", emoji: "üòê", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Customer asking for case study. Great story, but they want approval rights.",
      aside: "Case studies sell. But approval processes can water them down.",
      choices: [
        { text: "Agree to approval, get the story", reaction: "Good enough. Better than nothing.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 3 }, mood: 1 },
        { text: "Anonymous case study instead", reaction: "Less credible. More control.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 1 }, mood: 0 },
        { text: "Wait for less restrictive customer", reaction: "Better fit coming. Patience pays.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Website needs refresh. Current design feels dated.",
      aside: "First impressions matter. But redesigns are rabbit holes.",
      choices: [
        { text: "Full redesign with agency", reaction: "Modern and professional.", emoji: "üòä", ap: 4, cost: 35, eff: { mkt: 4 }, mood: 2 },
        { text: "Refresh key pages in-house", reaction: "Better. Not perfect.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 1 },
        { text: "Leave it, focus on product", reaction: "Substance over style. Ship first.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Trade publication offering sponsored content. Reach is good, feels inauthentic.",
      aside: "Paid media has its place. Audience knows the difference.",
      choices: [
        { text: "Quality sponsored article", reaction: "Reach achieved. Some skepticism.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 2 }, mood: 1 },
        { text: "Pitch earned coverage instead", reaction: "Harder to get. More credible.", emoji: "üòä", ap: 2, cost: 10, eff: { mkt: 3 }, mood: 2 },
        { text: "Skip trade publications", reaction: "Focus on direct channels.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Negative review appeared online. Unfair but visible.",
      aside: "Can't win every customer. But silence looks like agreement.",
      choices: [
        { text: "Thoughtful public response", reaction: "Showed we care. Others noticed.", emoji: "üòä", ap: 2, cost: 5, eff: { mkt: 2, hr: 1 }, mood: 2 },
        { text: "Private outreach to reviewer", reaction: "Addressed offline. Review remains.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 1 }, mood: 0 },
        { text: "Ignore it", reaction: "Don't dignify it with a response.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Opportunity to sponsor a UK AI community TeamChat. Thousands of potential customers.",
      aside: "Community presence builds trust over time. Not immediate sales.",
      choices: [
        { text: "Sponsor plus active participation", reaction: "Become known as helpful, not salesy.", emoji: "üòä", ap: 4, cost: 20, eff: { mkt: 4, hr: 1 }, mood: 2 },
        { text: "Sponsor with logo placement only", reaction: "Visible but not engaged.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 0 },
        { text: "Skip-focus on direct outreach", reaction: "Personal touch matters more.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Open source project using our tech gaining traction. Could amplify or stay quiet.",
      aside: "Open source credibility is earned, not bought. Developers talk.",
      choices: [
        { text: "Actively support with resources", reaction: "Developers notice. Word spreads.", emoji: "üòä", ap: 4, cost: 25, eff: { mkt: 3, dev: 2 }, mood: 2 },
        { text: "Public endorsement and retweets", reaction: "Low effort visibility boost.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 2 }, mood: 1 },
        { text: "Let it grow organically", reaction: "Miss chance to build relationship.", emoji: "üòê", ap: 1, cost: 0, eff: { mkt: 1 }, mood: -1 }
      ]
    },
    {
      intro: "Local AI meetup wants us to host and speak. Time commitment but builds reputation.",
      aside: "Grassroots reputation compounds. The people you meet today hire you tomorrow.",
      choices: [
        { text: "Host, speak, and sponsor drinks", reaction: "Become the local AI hub.", emoji: "üòä", ap: 4, cost: 20, eff: { mkt: 3, hr: 2 }, mood: 2 },
        { text: "Just give a talk", reaction: "Share knowledge without overcommitting.", emoji: "üôÇ", ap: 2, cost: 5, eff: { mkt: 2 }, mood: 1 },
        { text: "Decline-too busy", reaction: "Focus on priorities. Protect time.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Podcast invitation from respected UK tech host. Good reach, requires prep.",
      aside: "Founder voice builds trust. But every word is on record.",
      choices: [
        { text: "Accept with thorough preparation", reaction: "Compelling story. Clips circulate.", emoji: "üòä", ap: 3, cost: 10, eff: { mkt: 4 }, mood: 2 },
        { text: "Accept, wing it", reaction: "Authentic but rough edges show.", emoji: "üôÇ", ap: 2, cost: 5, eff: { mkt: 2 }, mood: 0 },
        { text: "Decline-not ready for spotlight", reaction: "Wait until we're ready. Better story later.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Customer success story going viral on CareerHub. Could amplify or let it breathe.",
      aside: "Organic virality is gold. Heavy-handed amplification kills it.",
      choices: [
        { text: "Gentle reshare with gratitude", reaction: "Authentic engagement. Keeps momentum.", emoji: "üòä", ap: 1, cost: 0, eff: { mkt: 3 }, mood: 2 },
        { text: "Full marketing push behind it", reaction: "Feels forced. Some backlash.", emoji: "üòê", ap: 3, cost: 15, eff: { mkt: 2 }, mood: 0 },
        { text: "Stay quiet, let customer shine", reaction: "Humble. But miss the wave.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
      ]
    },
    // NEW: External actor engagement events (non-university)
    {
      intro: "Gartner wants to brief us for their AI market report. How we present determines our 'quadrant' position.",
      aside: "Enterprise buyers read Gartner religiously. Getting this right matters.",
      choices: [
        { text: "Full executive briefing with demos", reaction: "Analyst impressed. Mentions us favourably.", emoji: "üòä", ap: 4, cost: 30, eff: { mkt: 5, cash: 40 }, mood: 2 },
        { text: "Standard briefing call", reaction: "We're in the report. Not highlighted.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 2 }, mood: 0 },
        { text: "Skip-analysts don't understand us", reaction: "Focus on customers who get it.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Cabinet Office is running an AI procurement framework. Getting on it means access to all government buyers.",
      aside: "Public sector moves slowly but pays reliably. Security clearances take time.",
      choices: [
        { text: "Full framework application", reaction: "Months of paperwork. Door opens to billions in spend.", emoji: "üòä", ap: 5, cost: 40, eff: { mkt: 3, hr: 1, cash: 100 }, mood: 2 },
        { text: "Partner with approved supplier", reaction: "Ride their accreditation. Share the revenue.", emoji: "üôÇ", ap: 3, cost: 25, eff: { mkt: 2, cash: 50 }, mood: 0 },
        { text: "Focus on private sector", reaction: "Faster sales cycles. Revenue builds.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1, cash: 10 }, mood: 0 }
      ]
    },
    {
      intro: "The UK AI Industry Association wants us to join. Lobbying access and peer networking, but membership fees and time.",
      aside: "Policy shapes our market. Being in the room when rules are written matters.",
      choices: [
        { text: "Active membership with committee roles", reaction: "Shape the conversation. Know what's coming.", emoji: "üòä", ap: 4, cost: 35, eff: { mkt: 3, sci: 1, hr: 1 }, mood: 2 },
        { text: "Basic membership only", reaction: "Newsletter and events. No influence.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 1 }, mood: 0 },
        { text: "Stay outside associations", reaction: "Independent. Focus on customers.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "The Financial Times wants an exclusive on our funding round. Great coverage, but other outlets will be annoyed.",
      aside: "FT readers are decision-makers. Exclusives build relationships with journalists.",
      choices: [
        { text: "Give FT the exclusive with CEO interview", reaction: "Front page of tech section. Inbox explodes.", emoji: "üòä", ap: 3, cost: 20, eff: { mkt: 5, hr: 1 }, mood: 2 },
        { text: "Broad press release to all outlets", reaction: "Fair coverage everywhere. No headline.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3 }, mood: 0 },
        { text: "Stay quiet about the round", reaction: "Stealth preserved. Surprise competitors.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "A major public health system Trust wants to pilot our solution. Prestige and case study value, but public health system procurement is complex.",
      aside: "public health system validation is gold for UK healthtech. The pilot could take a year to close.",
      choices: [
        { text: "Commit resources to public health system pilot", reaction: "Slow burn. Massive credibility if it works.", emoji: "üòä", ap: 5, cost: 50, eff: { mkt: 4, sci: 2, cash: -20 }, mood: 2 },
        { text: "Limited pilot with clear boundaries", reaction: "Test the waters. Manage expectations.", emoji: "üôÇ", ap: 3, cost: 25, eff: { mkt: 2, sci: 1 }, mood: 0 },
        { text: "Decline-private sector focus", reaction: "Faster revenue. Simpler sales.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 0 }
      ]
    },
    {
      intro: "We've been nominated for 'AI Startup of the Year'. Winning requires a strong submission and attending the gala.",
      aside: "Awards are marketing. But the right award on the website converts prospects.",
      choices: [
        { text: "Full submission with case studies", reaction: "Win or shortlist. Either way, we're visible.", emoji: "üòä", ap: 3, cost: 25, eff: { mkt: 4, hr: 1 }, mood: 2 },
        { text: "Basic submission", reaction: "In the running. Not favourites.", emoji: "üôÇ", ap: 2, cost: 10, eff: { mkt: 2 }, mood: 0 },
        { text: "Skip awards circuit", reaction: "Focus on customers, not trophies.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "A FTSE 100 company's venture arm wants to invest. Strategic value but they'd want board observer rights.",
      aside: "Corporate VCs open doors to their parent company. They also have agendas.",
      choices: [
        { text: "Accept investment with commercial deal", reaction: "Money plus customer. Worth the complexity.", emoji: "üòä", ap: 4, cost: 0, eff: { mkt: 3, cash: 150 }, mood: 2 },
        { text: "Commercial partnership, no investment", reaction: "Keep cap table clean. Still get the deal.", emoji: "üôÇ", ap: 3, cost: 10, eff: { mkt: 2, cash: 60 }, mood: 0 },
        { text: "Decline-stay independent", reaction: "Pure focus. Full control.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "A German distributor wants exclusive rights for DACH region. They know the market but exclusivity is risky.",
      aside: "Local partners accelerate international. Bad partners block you from markets.",
      choices: [
        { text: "Non-exclusive partnership with targets", reaction: "They earn exclusivity by performing.", emoji: "üòä", ap: 4, cost: 30, eff: { mkt: 4, cash: 50 }, mood: 2 },
        { text: "Exclusive with exit clause", reaction: "They get the chance. Clock is ticking.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 3, cash: 30 }, mood: 0 },
        { text: "Go direct when ready", reaction: "Control the brand. Slower expansion.", emoji: "üòê", ap: 1, cost: 0, eff: { mkt: 1 }, mood: -1 }
      ]
    },
    // FUN: Humorous marketing events
    {
      intro: "Company CareerHub went viral. Unfortunately, it's because of a typo that made our AI product sound... adult.",
      aside: "There's no such thing as bad publicity. Except this. This might be bad publicity.",
      choices: [
        { text: "Lean in with self-deprecating humour", reaction: "Thread goes more viral. Brand seems human.", emoji: "üòÇ", ap: 1, cost: 0, eff: { mkt: 4, hr: 1 }, mood: 2 },
        { text: "Delete and issue professional correction", reaction: "Screenshots live forever. But we tried.", emoji: "üôÇ", ap: 1, cost: 5, eff: { mkt: 1 }, mood: 0 },
        { text: "Pretend it was intentional guerrilla marketing", reaction: "Spin it well. Customers amused.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 2 }, mood: 0 }
      ]
    },
    {
      intro: "A B-list celebrity wants to invest and become 'brand ambassador'. Their agent is very pushy.",
      aside: "They have 2 million followers. Also several ongoing controversies.",
      choices: [
        { text: "Politely decline with good wishes", reaction: "Stay focused. Maintain relationship.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "Small investment, no ambassador role", reaction: "Money in, drama out. Reasonable.", emoji: "üôÇ", ap: 2, cost: 0, eff: { mkt: 1, cash: 30 }, mood: 0 },
        { text: "Full partnership-YOLO", reaction: "Followers up! Also, tabloid mentions. Mixed bag.", emoji: "üé∞", ap: 3, cost: 10, eff: { mkt: 5, hr: -2 }, mood: 0 }
      ]
    },
    {
      intro: "Competitor's marketing director just followed everyone on your team on CareerHub. Everyone.",
      aside: "Are they recruiting? Spying? Just lonely?",
      choices: [
        { text: "Block and brief the team", reaction: "Fortress mentality engaged.", emoji: "üè∞", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "Follow them back aggressively", reaction: "Now everyone's awkwardly watching everyone.", emoji: "üëÄ", ap: 1, cost: 0, eff: { mkt: 1 }, mood: 1 },
        { text: "Post obviously fake roadmap hints", reaction: "If they're watching, give them something to think about.", emoji: "üé≠", ap: 2, cost: 5, eff: { mkt: 2 }, mood: 2 }
      ]
    },
    {
      intro: "Your demo video accidentally included 3 seconds of the CEO's music app playing '70s disco hits.",
      aside: "It's on a video platform. Comments are... supportive.",
      choices: [
        { text: "Re-upload the clean version", reaction: "Professional. The internet remembers anyway.", emoji: "üôÇ", ap: 2, cost: 5, eff: { mkt: 1 }, mood: 0 },
        { text: "Embrace it-add disco to company culture", reaction: "Friday playlist now mandatory. Morale surprisingly high.", emoji: "üíÉ", ap: 1, cost: 0, eff: { mkt: 3, hr: 2 }, mood: 2 },
        { text: "CEO addresses it directly on CareerHub", reaction: "'Yes, I love disco. Moving on.' Legend status achieved.", emoji: "üòä", ap: 1, cost: 0, eff: { mkt: 4, hr: 2 }, mood: 2 }
      ]
    }
  ],
  
  // HR-specific generic events  
  hr: [
    {
      intro: "The team's been hinting about the sad instant coffee situation. Someone left a printout of fancy espresso machine prices on your desk.",
      aside: "A proper latte machine costs as much as a junior dev's monthly salary. But the queue at the coffee shop costs time and money too.",
      choices: [
        { text: "Get the fancy La Marzocca with training", reaction: "Barista-quality flat whites. Team genuinely delighted.", emoji: "‚òï", ap: 2, cost: 15, eff: { hr: 4 }, mood: 2 },
        { text: "Sensible bean-to-cup machine", reaction: "Decent coffee. Nobody's writing poems about it.", emoji: "üôÇ", ap: 1, cost: 8, eff: { hr: 2 }, mood: 1 },
        { text: "Upgrade the instant coffee selection", reaction: "Small perk appreciated.", emoji: "üôÇ", ap: 1, cost: 2, eff: { hr: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Two team members dating. No policy, no problems yet.",
      aside: "Relationships happen. Policies prevent problems.",
      choices: [
        { text: "Create clear relationship policy", reaction: "Awkward but necessary.", emoji: "üòä", ap: 2, cost: 5, eff: { hr: 2 }, mood: 1 },
        { text: "Quiet word about professionalism", reaction: "Informal. Might not stick.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "Ignore unless issues arise", reaction: "No news is good news. Focus elsewhere.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Someone's personal social media causing internal tension.",
      aside: "Personal views, professional consequences. Grey area.",
      choices: [
        { text: "Create social media guidelines", reaction: "Clear expectations going forward.", emoji: "üòä", ap: 2, cost: 5, eff: { hr: 2, mkt: 1 }, mood: 1 },
        { text: "Private conversation about impact", reaction: "Direct. Might feel intrusive.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "Stay out of personal matters", reaction: "Respect boundaries. Focus on work.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "End of year approaching. Bonus expectations high, budget tight.",
      aside: "Promises made need keeping. Or explaining.",
      choices: [
        { text: "Stretch for meaningful bonuses", reaction: "Retention protected. Cash impacted.", emoji: "üòä", ap: 2, cost: 30, eff: { hr: 4 }, mood: 2 },
        { text: "Smaller bonuses, clear communication", reaction: "Disappointed but understand.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 1 }, mood: 0 },
        { text: "Skip bonuses, promise next year", reaction: "Preserve runway. Team understands.", emoji: "üôÇ", ap: 1, cost: 0, eff: { cash: 20 }, mood: 0 }
      ]
    },
    {
      intro: "Overheard complaints about meeting overload. Calendars are packed.",
      aside: "Meetings multiply. Productivity suffers.",
      choices: [
        { text: "Meeting audit and no-meeting days", reaction: "Calendar breathing room.", emoji: "üòä", ap: 2, cost: 5, eff: { hr: 3, dev: 1 }, mood: 2 },
        { text: "Encourage meeting hygiene", reaction: "Some improvement.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 1 },
        { text: "Trust teams to manage themselves", reaction: "Autonomy builds ownership.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
      ]
    },
    // NEW: Additional HR events
    {
      intro: "Remote work debate heating up. Some want full flexibility, others miss the office energy.",
      aside: "There's no policy that makes everyone happy. But clarity helps.",
      choices: [
        { text: "Flexible hybrid with core days", reaction: "Most people find a rhythm that works.", emoji: "üòä", ap: 2, cost: 10, eff: { hr: 3, dev: 1 }, mood: 2 },
        { text: "Team-by-team autonomy", reaction: "Some inconsistency, but teams own it.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 2 }, mood: 1 },
        { text: "Mandate office attendance", reaction: "Clear expectations. Collaboration improves.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Star performer asking for a raise. Deserved, but outside the budget cycle.",
      aside: "Lose them and you lose months of momentum. Pay them and others will ask too.",
      choices: [
        { text: "Match the ask with clear expectations", reaction: "They're staying. Worth every penny.", emoji: "üòä", ap: 2, cost: 20, eff: { hr: 3, dev: 1 }, mood: 2 },
        { text: "Partial raise plus equity top-up", reaction: "Creative package. They appreciate the effort.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 1 },
        { text: "Promise to revisit at review time", reaction: "Fair timeline. They appreciate honesty.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Team member's mental health visibly struggling. Performance slipping.",
      aside: "People aren't machines. But you're also running a business.",
      choices: [
        { text: "Supportive conversation, offer flexibility", reaction: "They open up. Workload adjusted.", emoji: "üòä", ap: 2, cost: 10, eff: { hr: 4 }, mood: 2 },
        { text: "Point to EAP and give space", reaction: "Professional distance. Some improvement.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 2 }, mood: 0 },
        { text: "Focus on performance expectations", reaction: "Clear standards. They step up.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Friday drinks tradition getting stale. Attendance dropping.",
      aside: "Social rituals matter. But forcing fun never works.",
      choices: [
        { text: "Mix it up-activities, lunches, variety", reaction: "Board games night surprisingly popular.", emoji: "üòä", ap: 2, cost: 10, eff: { hr: 3 }, mood: 2 },
        { text: "Ask the team what they'd prefer", reaction: "Survey reveals... people want earlier finish times.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 2 }, mood: 1 },
        { text: "Keep the tradition, reduce frequency", reaction: "Those who come enjoy it more.", emoji: "üòê", ap: 1, cost: 5, eff: { hr: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Parental leave request from a key team member. Timing is terrible.",
      aside: "You can't say no. You can decide how to handle it.",
      choices: [
        { text: "Generous leave with full support", reaction: "They'll move mountains for you when they return.", emoji: "üòä", ap: 3, cost: 25, eff: { hr: 4, dev: -1 }, mood: 2 },
        { text: "Statutory minimum with clear handover", reaction: "Legally compliant. Not inspiring.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 1, dev: -1 }, mood: 0 },
        { text: "Pressure for early return", reaction: "They return energised. Needed the push.", emoji: "üôÇ", ap: 1, cost: 5, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Anonymous feedback survey results are in. Some stinging comments.",
      aside: "Feedback is a gift. Even when it's wrapped in frustration.",
      choices: [
        { text: "All-hands to discuss openly", reaction: "Vulnerable but builds trust.", emoji: "üòä", ap: 3, cost: 5, eff: { hr: 4 }, mood: 2 },
        { text: "Action plan shared privately", reaction: "Changes happen. Connection to feedback unclear.", emoji: "üôÇ", ap: 2, cost: 5, eff: { hr: 2 }, mood: 0 },
        { text: "Thank people, move on quietly", reaction: "Acknowledged. Team moves forward.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Diversity numbers aren't great. Board noticed.",
      aside: "Tokenism doesn't work. Systemic change takes time.",
      choices: [
        { text: "Comprehensive D&I programme", reaction: "Pipeline improves. Culture shifts slowly.", emoji: "üòä", ap: 4, cost: 25, eff: { hr: 3, mkt: 1 }, mood: 2 },
        { text: "Expand recruiting channels", reaction: "More diverse candidates. Conversion TBD.", emoji: "üôÇ", ap: 2, cost: 10, eff: { hr: 2 }, mood: 1 },
        { text: "Focus on meritocracy messaging", reaction: "Performance culture reinforced.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Team's been working weekends for a month. Burnout risk is real.",
      aside: "Crunch delivers short-term results. Long-term, people break.",
      choices: [
        { text: "Mandatory week off after milestone", reaction: "People return refreshed. Momentum preserved.", emoji: "üòä", ap: 2, cost: 15, eff: { hr: 4, dev: 1 }, mood: 2 },
        { text: "Reduce scope, protect weekends", reaction: "Slower progress. Sustainable pace.", emoji: "üôÇ", ap: 2, cost: 5, eff: { hr: 2, dev: -1 }, mood: 1 },
        { text: "Push through, promise rest later", reaction: "Team rises to the challenge.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Exit interview reveals manager problems. Not the first complaint.",
      aside: "Bad managers are expensive. So is losing good managers.",
      choices: [
        { text: "Coaching and development plan", reaction: "Manager improves. Team notices effort.", emoji: "üòä", ap: 3, cost: 15, eff: { hr: 3 }, mood: 1 },
        { text: "Move them to individual contributor", reaction: "Pride hurt. Skills preserved.", emoji: "üôÇ", ap: 2, cost: 5, eff: { hr: 2, dev: 1 }, mood: 0 },
        { text: "Part ways with generous terms", reaction: "Clean break. Some shock in the team.", emoji: "üòê", ap: 2, cost: 25, eff: { hr: 1, dev: -1 }, mood: -1 }
      ]
    },
    {
      intro: "Office dog proposal gaining signatures. Some allergies and preferences in the mix.",
      aside: "Dogs boost morale for dog people. Others less enthused.",
      choices: [
        { text: "Trial office dog days", reaction: "Surprisingly popular. Even skeptics pet the dog.", emoji: "üêï", ap: 1, cost: 5, eff: { hr: 3 }, mood: 2 },
        { text: "Create dog-friendly zone", reaction: "Compromise. Dog lovers happy, others unbothered.", emoji: "üôÇ", ap: 1, cost: 3, eff: { hr: 2 }, mood: 1 },
        { text: "Politely decline citing allergies", reaction: "Inclusive policy. Everyone comfortable.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Salary benchmarking reveals you're behind market on some roles.",
      aside: "Underpaying works until people check WorkReview.",
      choices: [
        { text: "Market adjustment for affected roles", reaction: "Retention improves. Budget takes hit.", emoji: "üòä", ap: 3, cost: 35, eff: { hr: 4 }, mood: 2 },
        { text: "Increase for flight risks only", reaction: "Some feel undervalued. Others stay.", emoji: "üôÇ", ap: 2, cost: 15, eff: { hr: 1 }, mood: 0 },
        { text: "Emphasise equity and mission", reaction: "Mission-driven people energised.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Learning and development budget cut by finance. Team noticed.",
      aside: "Training feels like a luxury until people stagnate.",
      choices: [
        { text: "Protect budget, cut elsewhere", reaction: "People feel invested in.", emoji: "üòä", ap: 2, cost: 15, eff: { hr: 3, sci: 1 }, mood: 2 },
        { text: "Internal knowledge sharing instead", reaction: "Cheaper. Actually quite good.", emoji: "üôÇ", ap: 2, cost: 5, eff: { hr: 2 }, mood: 1 },
        { text: "Accept the cuts for now", reaction: "Lean but sustainable. Team adapts.", emoji: "üôÇ", ap: 1, cost: 0, eff: { cash: 15 }, mood: 0 }
      ]
    },
    // FUN: Humorous HR events
    {
      intro: "The office thermostat has become a battleground. Passive-aggressive Post-it notes are appearing.",
      aside: "The thermostat wars have claimed greater companies than this one.",
      choices: [
        { text: "Install smart climate zones", reaction: "Peace in our time. Expensive peace.", emoji: "‚ùÑ", ap: 2, cost: 12, eff: { hr: 3 }, mood: 2 },
        { text: "CEO declares 21¬∞C law", reaction: "Controversial. But decisive.", emoji: "üå°", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "Distribute branded hoodies and fans", reaction: "Dress code chaos. But warm chaos.", emoji: "üß•", ap: 1, cost: 8, eff: { hr: 2, mkt: 1 }, mood: 1 }
      ]
    },
    {
      intro: "Someone's been microwaving fish in the kitchen. Repeatedly. HR inbox is full.",
      aside: "Some problems have no good solutions. Only least-bad ones.",
      choices: [
        { text: "Gentle all-hands about kitchen etiquette", reaction: "Fish microwaving stops. Resentment lingers.", emoji: "üêü", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "Install a second microwave in a 'zone'", reaction: "The Fish Zone is born. Problem contained.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 2 }, mood: 1 },
        { text: "Anonymous fish amnesty", reaction: "Nobody confesses. Fish incidents decrease mysteriously.", emoji: "ü§´", ap: 1, cost: 0, eff: { hr: 1 }, mood: 1 }
      ]
    },
    {
      intro: "Secret Santa got weird. Someone gave their manager a self-help book about 'leadership presence'.",
      aside: "It was meant to be ¬£10 and fun. It became neither.",
      choices: [
        { text: "Laugh it off at the party", reaction: "Manager reads the book. Actually finds it useful.", emoji: "üìö", ap: 1, cost: 0, eff: { hr: 2 }, mood: 1 },
        { text: "Abolish Secret Santa forever", reaction: "Less stress. Team grateful.", emoji: "üéÖ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "Next year: strict gift guidelines", reaction: "Takes the fun out. But also the drama.", emoji: "üìã", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 }
      ]
    },
    {
      intro: "Team discovered the CEO's secret video channel. It's mostly them reviewing motorway service stations.",
      aside: "Everyone's pretending they haven't seen it. They have all seen it.",
      choices: [
        { text: "Own it-make it a company thing", reaction: "CEO now reviews service stations for team travel. Iconic.", emoji: "üõ£", ap: 1, cost: 0, eff: { hr: 3, mkt: 2 }, mood: 2 },
        { text: "Never speak of it", reaction: "Team bonds over shared silence.", emoji: "ü§ê", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0 },
        { text: "CEO addresses it in all-hands", reaction: "Turns out Leigh Delamere services are 4/5 stars.", emoji: "‚≠ê", ap: 1, cost: 0, eff: { hr: 4 }, mood: 2 }
      ]
    },
    {
      intro: "Someone printed 500 pages of their novel on the office printer. It's actually quite good.",
      aside: "Technically a fireable offence. But the prose is genuinely compelling.",
      choices: [
        { text: "Quiet word about appropriate use", reaction: "They apologise. Offer you an early copy.", emoji: "üìñ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 1 },
        { text: "Expense it as 'creative culture'", reaction: "Finance confused but compliant.", emoji: "üôÇ", ap: 1, cost: 5, eff: { hr: 2 }, mood: 1 },
        { text: "Start an office book club with it", reaction: "Chapter 7 discussion gets heated. Bonding achieved.", emoji: "üìö", ap: 2, cost: 5, eff: { hr: 3 }, mood: 2 }
      ]
    }
  ]
};

// ===== RIVALS & MARKET =====

const RIVALS = {
  aether: [
    { name: "GenomixAI", style: "methodical", logo: "üß¨", desc: "Academic spinout, strong science", scores: { sci: 15, dev: 10, mkt: 12 }, status: "active", funded: "Seed" },
    { name: "DeepCure", style: "aggressive", logo: "üíä", desc: "VC-backed, moving fast", scores: { sci: 12, dev: 15, mkt: 18 }, status: "active", funded: "Series A" },
    { name: "OxBio", style: "cautious", logo: "üî¨", desc: "Oxford spinout, deep research", scores: { sci: 20, dev: 8, mkt: 5 }, status: "active", funded: "Grant-funded" }
  ],
  vanguard: [
    { name: "AutoMate", style: "methodical", logo: "ü§ñ", desc: "Enterprise focus, steady growth", scores: { sci: 12, dev: 18, mkt: 10 }, status: "active", funded: "Series A" },
    { name: "SwiftBot", style: "aggressive", logo: "‚ö°", desc: "Accelerator-backed, blitzscaling", scores: { sci: 8, dev: 14, mkt: 20 }, status: "active", funded: "Series B" },
    { name: "LogisAI", style: "cautious", logo: "üì¶", desc: "Bootstrapped, profitable", scores: { sci: 10, dev: 12, mkt: 15 }, status: "active", funded: "Bootstrapped" }
  ],
  quant: [
    { name: "AlphaEdge", style: "aggressive", logo: "üìà", desc: "Ex-hedge fund founders", scores: { sci: 18, dev: 15, mkt: 12 }, status: "active", funded: "Series A" },
    { name: "RiskWise", style: "cautious", logo: "üõ°", desc: "Compliance-first approach", scores: { sci: 14, dev: 12, mkt: 10 }, status: "active", funded: "Seed" },
    { name: "QuantLabs", style: "methodical", logo: "üßÆ", desc: "PhD-heavy research team", scores: { sci: 20, dev: 10, mkt: 8 }, status: "active", funded: "Grant-funded" }
  ],
  dream: [
    { name: "PixelGen", style: "aggressive", logo: "üé®", desc: "Viral growth, influencer buzz", scores: { sci: 10, dev: 15, mkt: 25 }, status: "active", funded: "Series A" },
    { name: "Artisan", style: "methodical", logo: "üñº", desc: "Premium B2B positioning", scores: { sci: 12, dev: 18, mkt: 15 }, status: "active", funded: "Seed" },
    { name: "NeuralCanvas", style: "cautious", logo: "üé≠", desc: "Artist-friendly, ethical focus", scores: { sci: 18, dev: 14, mkt: 12 }, status: "active", funded: "Bootstrapped" }
  ],
  cyber: [
    { name: "SentinelAI", style: "aggressive", logo: "üõ°", desc: "Ex-National Cyber Agency founders, government contracts", scores: { sci: 16, dev: 14, mkt: 18 }, status: "active", funded: "Series A" },
    { name: "ThreatWatch", style: "methodical", logo: "üëÅ", desc: "Enterprise SOC focus, steady growth", scores: { sci: 12, dev: 18, mkt: 14 }, status: "active", funded: "Series B" },
    { name: "CyberMind", style: "cautious", logo: "üîê", desc: "Academic spinout, research-led", scores: { sci: 20, dev: 10, mkt: 8 }, status: "active", funded: "Grant-funded" }
  ],
  terra: [
    { name: "ClimateOS", style: "aggressive", logo: "üåç", desc: "VC darling, massive funding", scores: { sci: 14, dev: 16, mkt: 20 }, status: "active", funded: "Series B" },
    { name: "GreenMind", style: "methodical", logo: "üå±", desc: "B Corp certified, mission-driven", scores: { sci: 16, dev: 14, mkt: 12 }, status: "active", funded: "Seed" },
    { name: "EcoPredict", style: "cautious", logo: "üìä", desc: "Met Office spinout, deep science", scores: { sci: 22, dev: 10, mkt: 6 }, status: "active", funded: "Grant-funded" }
  ],
  legal: [
    { name: "ContractIQ", style: "aggressive", logo: "‚öñ", desc: "US-backed, blitzing UK market", scores: { sci: 10, dev: 18, mkt: 22 }, status: "active", funded: "Series A" },
    { name: "LexisAI", style: "methodical", logo: "üìú", desc: "Magic Circle partnerships", scores: { sci: 14, dev: 16, mkt: 16 }, status: "active", funded: "Series A" },
    { name: "CaseLab", style: "cautious", logo: "üîç", desc: "Academic roots, research focus", scores: { sci: 20, dev: 12, mkt: 8 }, status: "active", funded: "Seed" }
  ],
  edu: [
    { name: "LearnFlow", style: "aggressive", logo: "üéì", desc: "Consumer app, viral growth", scores: { sci: 8, dev: 16, mkt: 24 }, status: "active", funded: "Series B" },
    { name: "ClassMind", style: "methodical", logo: "üìö", desc: "School partnerships, B2B focus", scores: { sci: 14, dev: 18, mkt: 14 }, status: "active", funded: "Series A" },
    { name: "CogniLearn", style: "cautious", logo: "üß†", desc: "Learning science research", scores: { sci: 22, dev: 10, mkt: 6 }, status: "active", funded: "Grant-funded" }
  ]
};

// ===== COMPETITIVE EVENTS - Reference rivals dynamically =====
const COMPETITIVE_EVENTS = {
  research: [
    {
      id: "rival_breakthrough",
      intro: "Bad news. {rival} just announced a breakthrough in our core research area. The press is all over them.",
      aside: "We can't let them control the narrative. But chasing headlines isn't science.",
      choices: [
        { text: "Accelerate our own announcement", reaction: "We'll need to cut some validation steps.", emoji: "üò¨", ap: 3, cost: 30, eff: { sci: 2, mkt: 4 }, mood: 0, rivalEffect: { slow: false } },
        { text: "Publish a detailed rebuttal", reaction: "Point out the gaps in their work.", emoji: "üôÇ", ap: 2, cost: 15, eff: { sci: 3, mkt: 1 }, mood: 1, rivalEffect: { slow: true, amount: 2 } },
        { text: "Stay focused on our roadmap", reaction: "Let them have the spotlight. We'll have the substance.", emoji: "üòä", ap: 1, cost: 0, eff: { sci: 2 }, mood: 2, rivalEffect: { slow: false } }
      ]
    },
    {
      id: "poach_researcher",
      intro: "{rival}'s lead researcher just quit. Word is they're open to offers. This could be a game-changer.",
      aside: "They know {rival}'s roadmap inside out. But poaching creates bad blood in this small industry.",
      choices: [
        { text: "Make an aggressive offer", reaction: "We'll pay above market. This is worth it.", emoji: "üéØ", ap: 3, cost: 50, eff: { sci: 5, hr: 2 }, mood: 1, rivalEffect: { slow: true, amount: 4 } },
        { text: "Reach out casually", reaction: "See if there's mutual interest first.", emoji: "üôÇ", ap: 2, cost: 10, eff: { sci: 2, hr: 1 }, mood: 0, rivalEffect: { slow: true, amount: 1 } },
        { text: "Let them come to us", reaction: "Focus on product. Strong attracts strong.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0, rivalEffect: { slow: false } }
      ]
    }
  ],
  dev: [
    {
      id: "rival_launch",
      intro: "{rival} just launched a feature we had on our roadmap. They beat us to market.",
      aside: "First-mover advantage is real. But fast followers can learn from their mistakes.",
      choices: [
        { text: "Rush our version out", reaction: "Ship it now, iterate later.", emoji: "üò¨", ap: 4, cost: 40, eff: { dev: 3, mkt: 2, hr: -1 }, mood: -1, rivalEffect: { slow: false } },
        { text: "Learn from their launch, improve ours", reaction: "Their reviews will be our roadmap.", emoji: "üôÇ", ap: 3, cost: 25, eff: { dev: 4, mkt: 1 }, mood: 1, rivalEffect: { slow: false } },
        { text: "Pivot to a different feature", reaction: "Find blue ocean instead of competing head-on.", emoji: "üòä", ap: 2, cost: 15, eff: { dev: 3 }, mood: 1, rivalEffect: { slow: false } }
      ]
    },
    {
      id: "talent_war",
      intro: "Our senior developer got an offer from {rival}. They're offering 40% more equity.",
      aside: "Losing them would set us back months. But we can't match that equity without diluting everyone.",
      choices: [
        { text: "Counter with promotion and equity", reaction: "We value you. Here's proof.", emoji: "üòä", ap: 2, cost: 30, eff: { dev: 2, hr: 2, equity: -2 }, mood: 2, rivalEffect: { slow: true, amount: 1 } },
        { text: "Wish them well, backfill quickly", reaction: "People come and go. The mission continues.", emoji: "üòê", ap: 2, cost: 20, eff: { dev: -2, hr: -1 }, mood: -1, rivalEffect: { slow: false } },
        { text: "Guilt trip about loyalty", reaction: "Emotional appeal works. They stay.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0, rivalEffect: { slow: false } }
      ]
    }
  ],
  marketing: [
    {
      id: "conference_clash",
      intro: "{rival} is the headline sponsor at the conference we're attending. Their booth is twice our size.",
      aside: "We can't outspend them. But we can be smarter.",
      choices: [
        { text: "Host an exclusive side event", reaction: "Intimate dinners beat crowded booths.", emoji: "üòä", ap: 4, cost: 40, eff: { mkt: 5, sci: 1 }, mood: 2, rivalEffect: { slow: true, amount: 2 } },
        { text: "Focus on quality demos", reaction: "Let the product speak.", emoji: "üôÇ", ap: 2, cost: 15, eff: { mkt: 3, dev: 1 }, mood: 1, rivalEffect: { slow: false } },
        { text: "Skip this one, pick our battles", reaction: "Strategic patience. Save resources.", emoji: "üôÇ", ap: 1, cost: 0, eff: { cash: 10 }, mood: 0, rivalEffect: { slow: false } }
      ]
    },
    {
      id: "rival_press",
      intro: "A journalist wants our comment on {rival}'s funding round. They raised twice what we did.",
      aside: "Whatever we say will be quoted. No comment looks defensive. Praise looks weak.",
      choices: [
        { text: "Congratulate and differentiate", reaction: "We're focused on different things.", emoji: "üôÇ", ap: 1, cost: 0, eff: { mkt: 2 }, mood: 1, rivalEffect: { slow: false } },
        { text: "Subtly question their approach", reaction: "Money isn't everything. Execution matters.", emoji: "üòè", ap: 2, cost: 10, eff: { mkt: 3, sci: -1 }, mood: 0, rivalEffect: { slow: true, amount: 1 } },
        { text: "No comment", reaction: "Let the work speak for itself. Professional.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0, rivalEffect: { slow: false } }
      ]
    },
    {
      id: "client_competition",
      intro: "A key prospect is evaluating us against {rival}. They want a bake-off next week.",
      aside: "Head-to-head comparisons are risky. But winning this would be a huge reference.",
      choices: [
        { text: "All hands on deck for the demo", reaction: "Cancel everything. We're winning this.", emoji: "üéØ", ap: 5, cost: 50, eff: { mkt: 6, dev: 2, cash: 80 }, mood: 2, rivalEffect: { slow: true, amount: 3 } },
        { text: "Standard demo, highlight our strengths", reaction: "We'll show what makes us different.", emoji: "üôÇ", ap: 3, cost: 20, eff: { mkt: 3, cash: 40 }, mood: 1, rivalEffect: { slow: false } },
        { text: "Decline the bake-off", reaction: "Compete on our terms, not theirs.", emoji: "üôÇ", ap: 1, cost: 0, eff: { dev: 1 }, mood: 0, rivalEffect: { slow: false } }
      ]
    }
  ],
  hr: [
    {
      id: "rival_layoffs",
      intro: "{rival} just laid off 30% of their team. Good engineers are suddenly available.",
      aside: "Their loss could be our gain. But we need to move fast-everyone's circling.",
      choices: [
        { text: "Hiring spree-grab the best", reaction: "Spin up interviews immediately.", emoji: "üéØ", ap: 4, cost: 60, eff: { hr: 5, dev: 3, sci: 2 }, mood: 2, rivalEffect: { slow: true, amount: 5 } },
        { text: "Cherry-pick a few stars", reaction: "Quality over quantity.", emoji: "üôÇ", ap: 2, cost: 30, eff: { hr: 2, dev: 2 }, mood: 1, rivalEffect: { slow: true, amount: 2 } },
        { text: "Stay disciplined on headcount", reaction: "Lean team. Cash preserved.", emoji: "üôÇ", ap: 1, cost: 0, eff: { cash: 15 }, mood: 0, rivalEffect: { slow: false } }
      ]
    },
    {
      id: "salary_benchmark",
      intro: "Industry salary data is out. {rival} is paying 20% above market. Our team is talking.",
      aside: "We can't match Big Tech salaries. But we have equity, mission, and culture.",
      choices: [
        { text: "Raise salaries across the board", reaction: "Retention is worth it.", emoji: "üòä", ap: 2, cost: 0, eff: { hr: 4, burn: 15 }, mood: 2, rivalEffect: { slow: false } },
        { text: "Improve equity and perks instead", reaction: "Long-term value over short-term cash.", emoji: "üôÇ", ap: 2, cost: 20, eff: { hr: 2, equity: -2 }, mood: 1, rivalEffect: { slow: false } },
        { text: "Trust our culture to retain people", reaction: "Mission-driven team stays. Stronger core.", emoji: "üôÇ", ap: 1, cost: 0, eff: { hr: 1 }, mood: 0, rivalEffect: { slow: false } }
      ]
    }
  ]
};

const MARKETS = [
  { id: "hype", name: "AI Hype", desc: "Funding flows freely.", type: "positive" },
  { id: "winter", name: "AI Winter", desc: "VCs tighten purse strings.", type: "negative" },
  { id: "regulation", name: "Regulation Wave", desc: "New compliance requirements.", type: "negative" },
  { id: "talent", name: "Talent War", desc: "Big Tech hoovering talent.", type: "negative" },
  { id: "boom", name: "Boom Times", desc: "Enterprise budgets healthy.", type: "positive" },
  { id: "recession", name: "Recession", desc: "Budgets frozen.", type: "negative" },
  { id: "stable", name: "Stable", desc: "Business as usual.", type: "neutral" }
];

const NEWS = {
  hype: ["Horizon Labs valued at $150B ‚Ä¢", "Every startup now 'AI company' ‚Ä¢", "AI funding hits all-time high ‚Ä¢"],
  winter: ["Investors skeptical of AI ‚Ä¢", "'AI fatigue' hits buyers ‚Ä¢", "70% of AI projects fail ‚Ä¢"],
  stable: ["UK tech shows steady growth ‚Ä¢", "AI adoption continues ‚Ä¢", "London retains hub status ‚Ä¢"],
  default: ["What does AI mean for workers? ‚Ä¢", "Race to build AGI ‚Ä¢", "AI: threat or opportunity? ‚Ä¢"]
};

// ===== SHOCKS - Rare events that reshape the game =====
const SHOCKS = {
  // ECONOMIC SHOCKS
  economic: [
    { 
      id: "gov_ai_fund",
      headline: "Government Announces ¬£2B AI Investment Fund", 
      text: "The Chancellor unveils a major initiative to support UK AI companies. Grant opportunities and tax incentives are available for qualifying startups.", 
      type: "positive",
      icon: "üèõ",
      effects: { val: 100 }, 
      choices: [
        { text: "Chase government contracts (bureaucracy ahead)", ap: 2, eff: { mkt: 5, cash: 150, dev: -1 } },
        { text: "Apply for research grants", ap: 2, eff: { sci: 5, cash: 80 } },
        { text: "Stay focused on commercial growth", ap: 1, eff: { dev: 3 } }
      ]
    },
    { 
      id: "recession",
      headline: "Economic Recession Hits UK Markets", 
      text: "GDP contracts sharply. Enterprise customers are freezing budgets and VCs are pulling back from new investments.", 
      type: "negative",
      icon: "üìâ",
      effects: { val: -150, cash: -50 }, 
      choices: [
        { text: "Cut costs aggressively to extend runway", ap: 1, eff: { burn: -20, cash: 20, dev: 1 } },
        { text: "Double down on sales to distressed companies", ap: 2, eff: { mkt: 4, cash: 50 } },
        { text: "Pivot to cost-saving solutions for customers", ap: 3, eff: { dev: 4, mkt: 3 } }
      ]
    },
    { 
      id: "interest_rates",
      headline: "Bank of England Raises Rates to 7%", 
      text: "Borrowing costs surge. VC funding dries up as investors seek safer returns. Runway is everything now.", 
      type: "negative",
      icon: "üè¶",
      effects: { val: -100 }, 
      choices: [
        { text: "Seek bridge funding from existing investors", ap: 2, eff: { cash: 100, equity: -5 } },
        { text: "Focus on profitability over growth", ap: 2, eff: { mkt: 3, burn: -15 } },
        { text: "Ride it out and stay the course", ap: 1, eff: { dev: 1 } }
      ]
    },
    {
      id: "tech_boom",
      headline: "AI Stocks Surge After Breakthrough Demo",
      text: "A viral AI demonstration sends tech stocks soaring. Investors are throwing money at anything AI-related. Valuations are through the roof.",
      type: "positive",
      icon: "üöÄ",
      effects: { val: 200 },
      choices: [
        { text: "Raise funding now at peak valuations", ap: 2, eff: { cash: 200, equity: -8 } },
        { text: "Acquire a struggling competitor", ap: 3, eff: { sci: 4, dev: 4, cash: -150 } },
        { text: "Stay focused, bubbles pop", ap: 1, eff: { hr: 2 } }
      ]
    }
  ],
  
  // TECHNOLOGICAL SHOCKS  
  technological: [
    { 
      id: "open_source_model",
      headline: "Helix Social Releases Powerful Open-Source AI Model", 
      text: "A new open-source model matches proprietary systems. Your technology moat may be eroding.", 
      type: "negative",
      icon: "üîì",
      effects: { sci: -3 }, 
      choices: [
        { text: "Embrace it-build on top of the open model", ap: 2, eff: { dev: 5, sci: -2 } },
        { text: "Double down on proprietary research", ap: 3, eff: { sci: 6, cash: -50 } },
        { text: "Pivot to services and implementation", ap: 2, eff: { mkt: 4, dev: 2 } }
      ]
    },
    { 
      id: "compute_breakthrough",
      headline: "New Chip Architecture Cuts AI Training Costs 80%", 
      text: "SiliconCore announces next-gen GPUs with dramatically improved efficiency. Compute costs are about to plummet.", 
      type: "positive",
      icon: "üíª",
      effects: { burn: -10 }, 
      choices: [
        { text: "Pre-order new hardware aggressively", ap: 2, eff: { sci: 4, dev: 3, cash: -80 } },
        { text: "Train larger, more ambitious models", ap: 3, eff: { sci: 6, burn: 10 } },
        { text: "Bank the savings, extend runway", ap: 1, eff: { cash: 40 } }
      ]
    },
    {
      id: "quantum_threat",
      headline: "Quantum Computing Breakthrough Threatens Encryption",
      text: "Researchers demonstrate quantum advantage on cryptographic problems. Security-focused AI companies are in the spotlight.",
      type: "mixed",
      icon: "‚öõ",
      effects: {},
      choices: [
        { text: "Pivot to quantum-safe solutions", ap: 3, eff: { sci: 5, mkt: 3, dev: -2 } },
        { text: "Partner with quantum security startup", ap: 2, eff: { sci: 3, cash: -60 } },
        { text: "Monitor but stay focused", ap: 1, eff: { dev: 2 } }
      ]
    },
    {
      id: "data_goldmine",
      headline: "Major Dataset Becomes Publicly Available",
      text: "A tech giant releases a massive, high-quality training dataset. Companies that move fast can gain significant advantages.",
      type: "positive", 
      icon: "üìä",
      effects: { sci: 2 },
      choices: [
        { text: "All hands on deck-retrain everything", ap: 3, eff: { sci: 6, dev: 4, hr: -2 } },
        { text: "Carefully integrate into existing pipeline", ap: 2, eff: { sci: 3, dev: 2 } },
        { text: "Our proprietary data is our moat", ap: 1, eff: { mkt: 2 } }
      ]
    },
    {
      id: "gpt6_launch",
      headline: "Horizon Labs Releases Atlas-6: Unprecedented Capabilities",
      text: "The new model demonstrates near-human reasoning. The AI landscape is shifting overnight. VCs are asking if your approach is obsolete.",
      type: "mixed",
      icon: "ü§ñ",
      effects: { val: -50, mkt: -2 },
      choices: [
        { text: "Build on top of Atlas-6, pivot to applications", ap: 3, eff: { dev: 6, sci: -4, mkt: 4 } },
        { text: "Double down on our unique approach", ap: 2, eff: { sci: 5, mkt: -1 } },
        { text: "Partner with Horizon Labs for API access", ap: 2, eff: { dev: 4, cash: -40, burn: 5 } }
      ]
    },
    {
      id: "ai_safety_incident",
      headline: "Major AI Safety Incident Makes Headlines",
      text: "An AI system causes a high-profile failure. Public trust in AI plummets. Regulators are demanding answers.",
      type: "negative",
      icon: "‚ö†",
      effects: { mkt: -4, val: -75 },
      choices: [
        { text: "Lead on safety-publish our safeguards", ap: 3, eff: { sci: 2, mkt: 5, hr: 2 } },
        { text: "Quietly strengthen internal testing", ap: 2, eff: { dev: 3, sci: 2 } },
        { text: "Distance ourselves from the incident", ap: 1, eff: { mkt: 1 } }
      ]
    },
    {
      id: "synthetic_data",
      headline: "Synthetic Data Breakthrough Changes Training",
      text: "Researchers prove models can be trained effectively on AI-generated data. The data moat is evaporating.",
      type: "mixed",
      icon: "üß™",
      effects: { sci: -2 },
      choices: [
        { text: "Build synthetic data pipeline immediately", ap: 3, eff: { sci: 5, dev: 3, cash: -30 } },
        { text: "Focus on real-world data partnerships", ap: 2, eff: { mkt: 3, sci: 2 } },
        { text: "Combine synthetic + real for best of both", ap: 2, eff: { sci: 4, dev: 2 } }
      ]
    },
    {
      id: "agent_paradigm",
      headline: "AI Agents Take Over: New Computing Paradigm",
      text: "Autonomous AI agents are suddenly everywhere. Companies without agent capabilities are seen as behind.",
      type: "mixed",
      icon: "üïπ",
      effects: { },
      choices: [
        { text: "Pivot hard to agent-first architecture", ap: 4, eff: { dev: 6, sci: 2, hr: -2 } },
        { text: "Add agent layer to existing product", ap: 2, eff: { dev: 3, mkt: 2 } },
        { text: "Focus on our core strengths", ap: 1, eff: { dev: 2 } }
      ]
    }
  ],
  
  // REGULATORY SHOCKS
  regulatory: [
    { 
      id: "ai_regulation",
      headline: "EU AI Act Comes Into Force", 
      text: "Sweeping new regulations require extensive compliance documentation. High-risk AI systems face strict requirements.", 
      type: "negative",
      icon: "‚öñ",
      effects: { dev: -2 }, 
      choices: [
        { text: "Hire compliance team and get certified", ap: 2, eff: { hr: 3, cash: -60, mkt: 2 } },
        { text: "Focus on low-risk applications only", ap: 2, eff: { dev: -3, mkt: 3 } },
        { text: "Exit EU market, focus on UK/US", ap: 1, eff: { dev: 2, mkt: 1 } }
      ]
    },
    {
      id: "data_privacy",
      headline: "ICO Launches AI Data Usage Investigation",
      text: "The Information Commissioner is scrutinizing how AI companies use training data. Several startups have received enforcement notices.",
      type: "negative",
      icon: "üîç",
      effects: { hr: -2 },
      choices: [
        { text: "Proactively audit and document everything", ap: 2, eff: { dev: -2, hr: 3, cash: -30 } },
        { text: "Engage lawyers and prepare defence", ap: 2, eff: { cash: -50 } },
        { text: "Switch to fully licensed datasets", ap: 3, eff: { sci: -3, cash: -40, hr: 2 } }
      ]
    },
    {
      id: "nhs_approval",
      headline: "public health system Announces Fast-Track AI Approval Pathway",
      text: "New regulations create an accelerated route for AI medical devices. Healthcare AI companies can now reach market faster.",
      type: "positive",
      icon: "üè•",
      effects: { mkt: 3 },
      choices: [
        { text: "Prioritise public health system certification immediately", ap: 3, eff: { mkt: 6, sci: 2, cash: -40 } },
        { text: "Partner with established medical device company", ap: 2, eff: { mkt: 4, equity: -3 } },
        { text: "Continue current roadmap", ap: 1, eff: { dev: 2 } }
      ]
    }
  ],
  
  // TALENT SHOCKS
  talent: [
    { 
      id: "key_departure",
      headline: "Key Team Member Poached by Big Tech", 
      text: "Your head of engineering just accepted a ¬£400k package at Titan Tech's AI division. The team is shaken.", 
      type: "negative",
      icon: "üö™",
      effects: { hr: -4, dev: -2 }, 
      choices: [
        { text: "Counter-offer with equity and title bump", ap: 2, eff: { hr: 3, equity: -2, cash: -30 } },
        { text: "Wish them well, promote from within", ap: 2, eff: { hr: 2, dev: -1 } },
        { text: "Use it as a wake-up call on culture", ap: 2, eff: { hr: 4, burn: 5 } }
      ]
    },
    {
      id: "talent_flood",
      headline: "Major Tech Company Announces UK Layoffs",
      text: "A Big Tech company is cutting 2,000 UK jobs. Suddenly, world-class talent is available.",
      type: "positive",
      icon: "üë•",
      effects: { hr: 3 },
      choices: [
        { text: "Hire aggressively while we can", ap: 2, eff: { sci: 3, dev: 3, burn: 25, cash: -40 } },
        { text: "Cherry-pick a few senior leaders", ap: 2, eff: { sci: 2, dev: 2, burn: 10 } },
        { text: "Our team chemistry is more important", ap: 1, eff: { hr: 2 } }
      ]
    },
    {
      id: "visa_changes",
      headline: "Government Tightens Tech Visa Rules",
      text: "New immigration rules make it harder to hire international talent. The talent pool just shrunk significantly.",
      type: "negative",
      icon: "üõÇ",
      effects: { hr: -3 },
      choices: [
        { text: "Open a remote hub in EU", ap: 2, eff: { burn: 15, hr: 2, dev: 2 } },
        { text: "Focus on UK university partnerships", ap: 2, eff: { sci: 3, hr: 2 } },
        { text: "Pay premium for remaining UK talent", ap: 1, eff: { burn: 10, hr: 1 } }
      ]
    }
  ],
  
  // COMPETITIVE SHOCKS
  competitive: [
    {
      id: "competitor_funding",
      headline: "Rival Raises ¬£50M Series B",
      text: "Your closest competitor just announced a massive funding round. They're planning aggressive expansion and talent acquisition.",
      type: "negative",
      icon: "üí∞",
      effects: { hr: -2, mkt: -2 },
      choices: [
        { text: "Announce our own funding round", ap: 2, eff: { cash: 150, equity: -12, mkt: 3 } },
        { text: "Focus on what makes us different", ap: 2, eff: { dev: 3, sci: 2 } },
        { text: "Approach them about acquisition talks", ap: 1, eff: { val: 50 } }
      ]
    },
    {
      id: "competitor_failure",
      headline: "Major Competitor Shuts Down",
      text: "A well-funded rival has run out of runway and is closing. Their customers and talent are suddenly available.",
      type: "positive",
      icon: "üì∞",
      effects: { mkt: 3 },
      choices: [
        { text: "Acqui-hire their best engineers", ap: 2, eff: { dev: 4, sci: 2, burn: 20 } },
        { text: "Aggressively pursue their customers", ap: 2, eff: { mkt: 5, cash: 30 } },
        { text: "Buy their IP and assets cheap", ap: 3, eff: { sci: 5, dev: 3, cash: -80 } }
      ]
    },
    {
      id: "big_tech_entry",
      headline: "Titan Tech Announces Competing Product",
      text: "Titan Tech just unveiled a product that directly competes with yours. They're offering it for free.",
      type: "negative",
      icon: "üî¥",
      effects: { val: -100, mkt: -3 },
      choices: [
        { text: "Pivot to enterprise where big tech is weak", ap: 3, eff: { mkt: 4, dev: 3, sci: -2 } },
        { text: "Go niche-own a vertical they'll ignore", ap: 2, eff: { mkt: 3, sci: 2 } },
        { text: "Compete on service and customization", ap: 2, eff: { mkt: 2, hr: 3 } }
      ]
    }
  ]
};

// Flatten shocks for random selection
const ALL_SHOCKS = Object.values(SHOCKS).flat();

// ===== CONFERENCE MINI-GAME DATA =====
const CONFERENCES = {
  aether: [
    { name: "BioTech World London", location: "ExCeL Centre" },
    { name: "public health system Innovation Expo", location: "Manchester Central" },
    { name: "Life Sciences Summit", location: "Edinburgh ICC" }
  ],
  vanguard: [
    { name: "Robotics & Automation Show", location: "NEC Birmingham" },
    { name: "Manufacturing Technology Expo", location: "Coventry Arena" },
    { name: "Industry 4.0 Summit", location: "London Olympia" }
  ],
  quant: [
    { name: "FinTech Connect", location: "ExCeL Centre" },
    { name: "Quant Summit Europe", location: "The Barbican" },
    { name: "AI in Finance Conference", location: "Canary Wharf" }
  ],
  dream: [
    { name: "Creative Tech Week", location: "Shoreditch" },
    { name: "Games Developer Conference UK", location: "Brighton Centre" },
    { name: "AI & Creativity Summit", location: "Kings Cross" }
  ]
};

// Delegate types with different values and difficulty
// Delegate types - now with SVG little people (faster speeds for 45s game)
const DELEGATE_TYPES = [
  { type: "student", name: "Student", speed: 4, value: 1, interest: 25, 
    color: "#94a3b8", headColor: "#fef3c7", bodyColor: "#64748b", irritable: 0.1 },
  { type: "developer", name: "Developer", speed: 3.5, value: 2, interest: 40, 
    color: "#60a5fa", headColor: "#fde68a", bodyColor: "#3b82f6", irritable: 0.15 },
  { type: "manager", name: "Manager", speed: 3, value: 3, interest: 55, 
    color: "#f59e0b", headColor: "#fecaca", bodyColor: "#374151", irritable: 0.25 },
  { type: "executive", name: "Executive", speed: 2.5, value: 5, interest: 70, 
    color: "#8b5cf6", headColor: "#fef3c7", bodyColor: "#1f2937", irritable: 0.35 },
  { type: "investor", name: "Investor", speed: 2, value: 8, interest: 80, 
    color: "#10b981", headColor: "#fde68a", bodyColor: "#065f46", irritable: 0.4 },
  { type: "journalist", name: "Journalist", speed: 3.8, value: 4, interest: 45, 
    color: "#ec4899", headColor: "#fecaca", bodyColor: "#db2777", irritable: 0.2 },
  { type: "competitor", name: "Competitor", speed: 3, value: -2, interest: 35, 
    color: "#ef4444", headColor: "#d1d5db", bodyColor: "#7f1d1d", irritable: 0 }
];

// Generate SVG for a delegate
function getDelegateSVG(type, mood = 'neutral') {
  const d = DELEGATE_TYPES.find(t => t.type === type) || DELEGATE_TYPES[0];
  const faceColor = mood === 'interested' ? '#4ade80' : mood === 'disgusted' ? '#f87171' : d.headColor;
  const expression = mood === 'interested' ? 'M7,10 Q10,12 13,10' : // smile
                     mood === 'disgusted' ? 'M7,11 Q10,9 13,11' : // frown
                     'M7,10 L13,10'; // neutral
  return `<svg width="24" height="30" viewBox="0 0 20 28">
    <ellipse cx="10" cy="7" rx="5" ry="5" fill="${faceColor}"/>
    <circle cx="7" cy="6" r="1" fill="#1f2937"/>
    <circle cx="13" cy="6" r="1" fill="#1f2937"/>
    <path d="${expression}" stroke="#1f2937" stroke-width="1" fill="none"/>
    <path d="M5 28 L7 14 L13 14 L15 28" fill="${d.bodyColor}"/>
    <ellipse cx="6" cy="28" rx="2" ry="1" fill="#1f2937"/>
    <ellipse cx="14" cy="28" rx="2" ry="1" fill="#1f2937"/>
  </svg>`;
}

// Conference costs scale with milestone number
const CONF_COSTS = {
  1: { swag: 20, coffee: 50, demo: 150, talk: 400, budget: 1500 },
  2: { swag: 40, coffee: 100, demo: 300, talk: 800, budget: 3000 },
  3: { swag: 80, coffee: 200, demo: 600, talk: 1500, budget: 6000 }
};

// ===== SOUND MANAGER =====

class SoundManager {
  constructor() {
    this.audioContext = null;
    this.enabled = true;
  }
  
  init() {
    if (!this.audioContext) {
      this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
    }
    if (this.audioContext.state === 'suspended') {
      this.audioContext.resume();
    }
  }
  
  playTone(frequency, duration, type = 'sine', volume = 0.3, delay = 0) {
    if (!this.enabled) return;
    this.init();
    
    const osc = this.audioContext.createOscillator();
    const gain = this.audioContext.createGain();
    
    osc.type = type;
    osc.frequency.value = frequency;
    osc.connect(gain);
    gain.connect(this.audioContext.destination);
    
    const startTime = this.audioContext.currentTime + delay;
    gain.gain.setValueAtTime(volume, startTime);
    gain.gain.exponentialRampToValueAtTime(0.01, startTime + duration);
    
    osc.start(startTime);
    osc.stop(startTime + duration);
  }
  
  // Department selection sounds - each has a unique character
  playResearch() {
    // Scientific "discovery" sound - ascending crystalline tones
    this.playTone(523, 0.1, 'sine', 0.25); // C5
    this.playTone(659, 0.1, 'sine', 0.25, 0.08); // E5
    this.playTone(784, 0.15, 'sine', 0.3, 0.16); // G5
  }
  
  playProduct() {
    // Technical "build" sound - digital blips
    this.playTone(440, 0.08, 'square', 0.15); // A4
    this.playTone(554, 0.08, 'square', 0.15, 0.06); // C#5
    this.playTone(659, 0.12, 'square', 0.2, 0.12); // E5
  }
  
  playSales() {
    // Confident "deal" sound - bold brass-like
    this.playTone(349, 0.1, 'sawtooth', 0.12); // F4
    this.playTone(440, 0.1, 'sawtooth', 0.12, 0.08); // A4
    this.playTone(523, 0.15, 'sawtooth', 0.15, 0.16); // C5
  }
  
  playHR() {
    // Warm "people" sound - soft harmonious
    this.playTone(392, 0.12, 'sine', 0.2); // G4
    this.playTone(494, 0.12, 'sine', 0.2, 0.1); // B4
    this.playTone(587, 0.15, 'sine', 0.25, 0.2); // D5
  }
  
  // End of quarter - satisfying completion chime
  playQuarterEnd() {
    this.playTone(523, 0.15, 'sine', 0.3); // C5
    this.playTone(659, 0.15, 'sine', 0.3, 0.12); // E5
    this.playTone(784, 0.15, 'sine', 0.3, 0.24); // G5
    this.playTone(1047, 0.25, 'sine', 0.35, 0.36); // C6
  }
  
  // Milestone achieved - triumphant fanfare
  playMilestoneComplete() {
    // First chord
    this.playTone(523, 0.2, 'sine', 0.25); // C5
    this.playTone(659, 0.2, 'sine', 0.25); // E5
    this.playTone(784, 0.2, 'sine', 0.25); // G5
    // Rising sequence
    this.playTone(698, 0.15, 'sine', 0.3, 0.25); // F5
    this.playTone(784, 0.15, 'sine', 0.3, 0.35); // G5
    this.playTone(880, 0.15, 'sine', 0.3, 0.45); // A5
    // Final triumphant chord
    this.playTone(1047, 0.4, 'sine', 0.35, 0.55); // C6
    this.playTone(1319, 0.4, 'sine', 0.3, 0.55); // E6
    this.playTone(1568, 0.4, 'sine', 0.25, 0.55); // G6
  }
  
  // Victory - epic success fanfare
  playVictory() {
    // Majestic opening
    this.playTone(523, 0.2, 'sine', 0.3); // C5
    this.playTone(659, 0.2, 'sine', 0.3, 0.15); // E5
    this.playTone(784, 0.2, 'sine', 0.3, 0.3); // G5
    // Ascending triumph
    this.playTone(880, 0.15, 'sine', 0.3, 0.5); // A5
    this.playTone(988, 0.15, 'sine', 0.3, 0.6); // B5
    this.playTone(1047, 0.3, 'sine', 0.35, 0.7); // C6
    // Final glorious chord with harmonics
    this.playTone(1047, 0.6, 'sine', 0.35, 0.95); // C6
    this.playTone(1319, 0.6, 'sine', 0.3, 0.95); // E6
    this.playTone(1568, 0.6, 'sine', 0.3, 0.95); // G6
    this.playTone(2093, 0.6, 'sine', 0.2, 0.95); // C7
    // Sparkle overtones
    this.playTone(2637, 0.3, 'sine', 0.1, 1.1); // E7
    this.playTone(3136, 0.3, 'sine', 0.08, 1.2); // G7
  }
  
  // Failure - somber descending tones
  playFailure() {
    // Descending minor sequence
    this.playTone(440, 0.25, 'sine', 0.3); // A4
    this.playTone(392, 0.25, 'sine', 0.28, 0.2); // G4
    this.playTone(349, 0.25, 'sine', 0.25, 0.4); // F4
    this.playTone(330, 0.4, 'sine', 0.22, 0.6); // E4
    // Final low dissonant chord
    this.playTone(220, 0.6, 'sine', 0.25, 0.9); // A3
    this.playTone(233, 0.6, 'sine', 0.15, 0.9); // Bb3 (dissonant)
    this.playTone(277, 0.6, 'sine', 0.2, 0.9); // C#4
  }
  
  // Funding received - cash register / coin sound
  playFunding() {
    this.playTone(1319, 0.08, 'sine', 0.3); // E6
    this.playTone(1568, 0.08, 'sine', 0.3, 0.06); // G6
    this.playTone(1976, 0.1, 'sine', 0.35, 0.12); // B6
    this.playTone(2093, 0.15, 'sine', 0.3, 0.18); // C7
    // Coin "ching"
    this.playTone(4186, 0.08, 'sine', 0.15, 0.25);
    this.playTone(5274, 0.1, 'sine', 0.1, 0.28);
  }
  
  // Button click - subtle UI feedback
  playClick() {
    this.playTone(800, 0.05, 'sine', 0.15);
  }
  
  // Warning - attention needed
  playWarning() {
    this.playTone(440, 0.15, 'square', 0.2);
    this.playTone(349, 0.2, 'square', 0.2, 0.15);
  }
  
  // Shock event - dramatic alert
  playShock() {
    this.playTone(220, 0.1, 'sawtooth', 0.2);
    this.playTone(277, 0.1, 'sawtooth', 0.2, 0.08);
    this.playTone(220, 0.15, 'sawtooth', 0.25, 0.16);
    this.playTone(185, 0.25, 'sawtooth', 0.2, 0.28);
  }
  
  // Milestone choice - strategic decision moment
  playMilestoneChoice() {
    // Dramatic "important decision" fanfare
    this.playTone(392, 0.15, 'sine', 0.25); // G4
    this.playTone(494, 0.15, 'sine', 0.25, 0.1); // B4
    this.playTone(587, 0.15, 'sine', 0.25, 0.2); // D5
    // Suspenseful hold
    this.playTone(523, 0.25, 'sine', 0.3, 0.35); // C5
    this.playTone(659, 0.25, 'sine', 0.25, 0.35); // E5
    this.playTone(784, 0.25, 'sine', 0.2, 0.35); // G5
    // Questioning rise
    this.playTone(880, 0.2, 'sine', 0.2, 0.55); // A5
    this.playTone(988, 0.3, 'sine', 0.22, 0.65); // B5
  }
  
  // === SETUP PHASE SOUNDS ===
  
  // Company/venture selection - exciting "opportunity" sound
  playVentureSelect() {
    // Bright, hopeful ascending arpeggio
    this.playTone(392, 0.1, 'sine', 0.2); // G4
    this.playTone(494, 0.1, 'sine', 0.22, 0.07); // B4
    this.playTone(587, 0.1, 'sine', 0.24, 0.14); // D5
    this.playTone(784, 0.15, 'sine', 0.28, 0.21); // G5
    // Sparkle on top
    this.playTone(1175, 0.12, 'sine', 0.15, 0.3); // D6
  }
  
  // Location selection - "placing pin on map" sound
  playLocationSelect() {
    // Soft "pop" with geographic feel
    this.playTone(600, 0.06, 'sine', 0.25);
    this.playTone(800, 0.08, 'sine', 0.2, 0.04);
    this.playTone(1000, 0.1, 'triangle', 0.18, 0.08);
    // Confirmation tone
    this.playTone(523, 0.12, 'sine', 0.22, 0.15); // C5
    this.playTone(659, 0.15, 'sine', 0.2, 0.22); // E5
  }
  
  // Funding path selection - different sounds for each type
  playFundingSelect(fundingType = 'default') {
    if (fundingType === 'bootstrap') {
      this.playBootstrapSound();
    } else if (fundingType === 'angel') {
      this.playAngelSound();
    } else if (fundingType === 'vc') {
      this.playVCSound();
    } else {
      // Default fallback
      this.playAngelSound();
    }
  }
  
  // Bootstrap - humble, self-reliant sound (piggy bank / single coins)
  playBootstrapSound() {
    // Piggy bank shake
    this.playTone(300, 0.05, 'triangle', 0.15);
    this.playTone(350, 0.05, 'triangle', 0.12, 0.06);
    this.playTone(280, 0.05, 'triangle', 0.1, 0.12);
    
    // A few modest coins dropping
    this.playTone(2200, 0.03, 'sine', 0.12, 0.18);
    this.playTone(2500, 0.03, 'sine', 0.1, 0.24);
    this.playTone(2300, 0.03, 'sine', 0.08, 0.30);
    
    // Determined, humble resolution - minor key undertone
    this.playTone(392, 0.12, 'sine', 0.18, 0.36); // G4
    this.playTone(466, 0.12, 'sine', 0.16, 0.42); // Bb4
    this.playTone(523, 0.18, 'sine', 0.2, 0.48); // C5
    
    // Single "I've got this" chime
    this.playTone(784, 0.15, 'sine', 0.15, 0.6); // G5
  }
  
  // Angel investment - warm, personal, encouraging sound
  playAngelSound() {
    // Gentle handshake / connection tone
    this.playTone(349, 0.08, 'sine', 0.15); // F4
    this.playTone(440, 0.08, 'sine', 0.15, 0.06); // A4
    
    // Coins with a personal touch - moderate amount
    this.playTone(2400, 0.04, 'sine', 0.14, 0.12);
    this.playTone(2700, 0.04, 'sine', 0.13, 0.17);
    this.playTone(2500, 0.04, 'sine', 0.12, 0.22);
    this.playTone(2900, 0.04, 'sine', 0.11, 0.27);
    
    // Warm, supportive rising chord
    this.playTone(523, 0.1, 'sine', 0.2, 0.32); // C5
    this.playTone(659, 0.1, 'sine', 0.2, 0.32); // E5
    this.playTone(784, 0.1, 'sine', 0.18, 0.32); // G5
    
    // Encouraging ascending resolution
    this.playTone(880, 0.12, 'sine', 0.22, 0.42); // A5
    this.playTone(1047, 0.15, 'sine', 0.2, 0.5); // C6
    
    // Friendly sparkle
    this.playTone(1568, 0.1, 'sine', 0.12, 0.6); // G6
    this.playTone(2093, 0.12, 'sine', 0.1, 0.65); // C7
  }
  
  // VC investment - big, impressive, Wall Street fanfare
  playVCSound() {
    // Impressive door opening / boardroom entrance
    this.playTone(150, 0.1, 'sawtooth', 0.1);
    this.playTone(200, 0.08, 'sawtooth', 0.12, 0.08);
    
    // Cash register drawer - bigger mechanism
    this.playTone(220, 0.1, 'square', 0.12, 0.15);
    this.playTone(280, 0.08, 'square', 0.1, 0.2);
    
    // LOTS of coins - money raining down
    this.playTone(2400, 0.04, 'sine', 0.16, 0.25);
    this.playTone(2800, 0.04, 'sine', 0.15, 0.28);
    this.playTone(3200, 0.04, 'sine', 0.14, 0.31);
    this.playTone(2600, 0.04, 'sine', 0.14, 0.34);
    this.playTone(3000, 0.04, 'sine', 0.13, 0.37);
    this.playTone(2700, 0.04, 'sine', 0.13, 0.40);
    this.playTone(3100, 0.04, 'sine', 0.12, 0.43);
    this.playTone(2500, 0.04, 'sine', 0.12, 0.46);
    this.playTone(2900, 0.04, 'sine', 0.11, 0.49);
    this.playTone(3300, 0.04, 'sine', 0.1, 0.52);
    
    // Power chord - confident, corporate
    this.playTone(440, 0.15, 'sine', 0.22, 0.55); // A4
    this.playTone(554, 0.15, 'sine', 0.22, 0.55); // C#5
    this.playTone(659, 0.15, 'sine', 0.2, 0.55); // E5
    
    // Rising fanfare - "big deal" energy
    this.playTone(880, 0.1, 'sine', 0.24, 0.68); // A5
    this.playTone(1047, 0.1, 'sine', 0.24, 0.74); // C6
    this.playTone(1319, 0.1, 'sine', 0.24, 0.80); // E6
    
    // Triumphant "CHA-CHING!" finale
    this.playTone(1760, 0.18, 'sine', 0.28, 0.88); // A6
    this.playTone(2093, 0.18, 'sine', 0.25, 0.88); // C7
    this.playTone(2637, 0.18, 'sine', 0.22, 0.88); // E7
    
    // Grand bell / celebration
    this.playTone(3520, 0.15, 'sine', 0.15, 0.98); // A7
    this.playTone(4186, 0.12, 'sine', 0.12, 1.02); // C8
    this.playTone(5274, 0.15, 'sine', 0.1, 1.06); // E8 - sparkle
    
    // Extra prestige shimmer
    this.playTone(6272, 0.1, 'sine', 0.06, 1.12); // G8
  }
  
  // Staff/executive hire - "welcome aboard" sound
  playHireSelect() {
    // Warm, welcoming chord progression
    this.playTone(349, 0.12, 'sine', 0.2); // F4
    this.playTone(440, 0.12, 'sine', 0.2); // A4
    this.playTone(523, 0.12, 'sine', 0.2); // C5
    // Rising confirmation
    this.playTone(523, 0.1, 'sine', 0.22, 0.12); // C5
    this.playTone(587, 0.1, 'sine', 0.22, 0.18); // D5
    this.playTone(659, 0.15, 'sine', 0.25, 0.24); // E5
    // Handshake "done deal" tone
    this.playTone(784, 0.2, 'sine', 0.2, 0.35); // G5
  }
  
  // Navigation/page turn in setup - subtle whoosh
  playPageTurn() {
    // Soft swoosh sound
    this.playTone(300, 0.08, 'sine', 0.1);
    this.playTone(400, 0.06, 'sine', 0.12, 0.03);
    this.playTone(500, 0.05, 'sine', 0.1, 0.06);
    this.playTone(600, 0.04, 'sine', 0.08, 0.08);
  }
  
  // Setup complete - "ready to launch" fanfare
  playSetupComplete() {
    // Building anticipation
    this.playTone(392, 0.12, 'sine', 0.22); // G4
    this.playTone(440, 0.12, 'sine', 0.22, 0.1); // A4
    this.playTone(494, 0.12, 'sine', 0.22, 0.2); // B4
    // Triumphant resolution
    this.playTone(523, 0.2, 'sine', 0.28, 0.32); // C5
    this.playTone(659, 0.2, 'sine', 0.26, 0.32); // E5
    this.playTone(784, 0.2, 'sine', 0.24, 0.32); // G5
    // Final flourish
    this.playTone(1047, 0.3, 'sine', 0.25, 0.5); // C6
    this.playTone(1319, 0.3, 'sine', 0.2, 0.55); // E6
  }
  
  // Rocket launch - dramatic whoosh with ignition and ascending power (~3.5 seconds)
  playRocketLaunch() {
    if (!this.enabled) return;
    this.init();
    
    const ctx = this.audioContext;
    const now = ctx.currentTime;
    
    // Create noise for rocket rumble/whoosh
    const bufferSize = ctx.sampleRate * 4;
    const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
    const output = noiseBuffer.getChannelData(0);
    for (let i = 0; i < bufferSize; i++) {
      output[i] = Math.random() * 2 - 1;
    }
    
    // Noise source for rumble
    const noise = ctx.createBufferSource();
    noise.buffer = noiseBuffer;
    
    // Filter for rocket rumble character - slower sweep for longer sound
    const filter = ctx.createBiquadFilter();
    filter.type = 'lowpass';
    filter.frequency.setValueAtTime(100, now);
    filter.frequency.exponentialRampToValueAtTime(300, now + 0.5);
    filter.frequency.exponentialRampToValueAtTime(600, now + 1.2);
    filter.frequency.exponentialRampToValueAtTime(1500, now + 2.5);
    filter.frequency.exponentialRampToValueAtTime(3000, now + 3.2);
    
    // Gain envelope for rumble - longer sustain
    const rumbleGain = ctx.createGain();
    rumbleGain.gain.setValueAtTime(0, now);
    rumbleGain.gain.linearRampToValueAtTime(0.25, now + 0.15);
    rumbleGain.gain.linearRampToValueAtTime(0.35, now + 0.6);
    rumbleGain.gain.linearRampToValueAtTime(0.4, now + 1.5);
    rumbleGain.gain.linearRampToValueAtTime(0.3, now + 2.5);
    rumbleGain.gain.exponentialRampToValueAtTime(0.01, now + 3.5);
    
    noise.connect(filter);
    filter.connect(rumbleGain);
    rumbleGain.connect(ctx.destination);
    
    noise.start(now);
    noise.stop(now + 3.5);
    
    // Add deep sub-bass rumble for power
    const subOsc = ctx.createOscillator();
    const subGain = ctx.createGain();
    subOsc.type = 'sine';
    subOsc.frequency.setValueAtTime(40, now);
    subOsc.frequency.linearRampToValueAtTime(60, now + 2.0);
    subGain.gain.setValueAtTime(0, now);
    subGain.gain.linearRampToValueAtTime(0.3, now + 0.3);
    subGain.gain.linearRampToValueAtTime(0.35, now + 1.5);
    subGain.gain.exponentialRampToValueAtTime(0.01, now + 3.0);
    
    subOsc.connect(subGain);
    subGain.connect(ctx.destination);
    subOsc.start(now);
    subOsc.stop(now + 3.0);
    
    // Add ascending tone for "lift-off" feel - longer sweep
    const liftOsc = ctx.createOscillator();
    const liftGain = ctx.createGain();
    liftOsc.type = 'sawtooth';
    liftOsc.frequency.setValueAtTime(60, now + 0.3);
    liftOsc.frequency.exponentialRampToValueAtTime(150, now + 1.5);
    liftOsc.frequency.exponentialRampToValueAtTime(400, now + 2.8);
    liftGain.gain.setValueAtTime(0, now);
    liftGain.gain.linearRampToValueAtTime(0.12, now + 0.5);
    liftGain.gain.linearRampToValueAtTime(0.18, now + 1.5);
    liftGain.gain.linearRampToValueAtTime(0.15, now + 2.5);
    liftGain.gain.exponentialRampToValueAtTime(0.01, now + 3.2);
    
    liftOsc.connect(liftGain);
    liftGain.connect(ctx.destination);
    liftOsc.start(now + 0.3);
    liftOsc.stop(now + 3.2);
    
    // Second harmonic layer for richness
    const liftOsc2 = ctx.createOscillator();
    const liftGain2 = ctx.createGain();
    liftOsc2.type = 'triangle';
    liftOsc2.frequency.setValueAtTime(120, now + 0.5);
    liftOsc2.frequency.exponentialRampToValueAtTime(300, now + 1.8);
    liftOsc2.frequency.exponentialRampToValueAtTime(600, now + 3.0);
    liftGain2.gain.setValueAtTime(0, now);
    liftGain2.gain.linearRampToValueAtTime(0.08, now + 0.8);
    liftGain2.gain.linearRampToValueAtTime(0.1, now + 2.0);
    liftGain2.gain.exponentialRampToValueAtTime(0.01, now + 3.2);
    
    liftOsc2.connect(liftGain2);
    liftGain2.connect(ctx.destination);
    liftOsc2.start(now + 0.5);
    liftOsc2.stop(now + 3.2);
    
    // Ignition sequence - multiple pops
    this.playTone(80, 0.12, 'square', 0.35, 0);
    this.playTone(120, 0.1, 'square', 0.25, 0.08);
    this.playTone(100, 0.08, 'square', 0.2, 0.15);
    
    // Triumphant tones as rocket clears - later and more elaborate
    this.playTone(392, 0.25, 'sine', 0.2, 2.2); // G4
    this.playTone(523, 0.25, 'sine', 0.22, 2.4); // C5
    this.playTone(659, 0.25, 'sine', 0.22, 2.6); // E5
    this.playTone(784, 0.35, 'sine', 0.25, 2.8); // G5
    this.playTone(1047, 0.4, 'sine', 0.2, 3.0); // C6
  }
  
  // === ENDING SOUNDS ===
  
  // Beach ending - gentle waves and peaceful ambiance
  playBeachEnding() {
    if (!this.enabled) return;
    this.init();
    
    const ctx = this.audioContext;
    const now = ctx.currentTime;
    
    // Create wave-like noise
    const bufferSize = ctx.sampleRate * 8;
    const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
    const output = noiseBuffer.getChannelData(0);
    for (let i = 0; i < bufferSize; i++) {
      output[i] = Math.random() * 2 - 1;
    }
    
    // Multiple wave cycles
    for (let wave = 0; wave < 3; wave++) {
      const waveStart = now + wave * 2.5;
      
      const noise = ctx.createBufferSource();
      noise.buffer = noiseBuffer;
      
      // Bandpass filter for ocean character
      const filter = ctx.createBiquadFilter();
      filter.type = 'bandpass';
      filter.frequency.value = 800;
      filter.Q.value = 0.5;
      
      // Wave envelope - crescendo then fade
      const waveGain = ctx.createGain();
      waveGain.gain.setValueAtTime(0, waveStart);
      waveGain.gain.linearRampToValueAtTime(0.15, waveStart + 0.8);
      waveGain.gain.linearRampToValueAtTime(0.2, waveStart + 1.2);
      waveGain.gain.exponentialRampToValueAtTime(0.01, waveStart + 2.2);
      
      noise.connect(filter);
      filter.connect(waveGain);
      waveGain.connect(ctx.destination);
      
      noise.start(waveStart);
      noise.stop(waveStart + 2.5);
    }
    
    // Peaceful wind chime tones
    const chimes = [523, 659, 784, 1047, 1319];
    chimes.forEach((freq, i) => {
      this.playTone(freq, 1.5, 'sine', 0.08, 0.5 + i * 0.7);
    });
  }
  
  // Serial entrepreneur - energetic startup sounds
  playSerialEnding() {
    if (!this.enabled) return;
    this.init();
    
    // Rapid ascending pattern - excitement
    const notes = [262, 330, 392, 523, 659, 784, 1047];
    notes.forEach((freq, i) => {
      this.playTone(freq, 0.15, 'sine', 0.2, i * 0.1);
    });
    
    // Keyboard typing sounds (rapid clicks)
    for (let i = 0; i < 8; i++) {
      this.playTone(800 + Math.random() * 400, 0.03, 'square', 0.1, 1.2 + i * 0.08);
    }
    
    // Startup "ding" notification
    this.playTone(880, 0.1, 'sine', 0.25, 2.0);
    this.playTone(1175, 0.15, 'sine', 0.3, 2.1);
    
    // Energy surge at the end
    this.playTone(523, 0.3, 'sine', 0.2, 2.5);
    this.playTone(659, 0.3, 'sine', 0.2, 2.5);
    this.playTone(784, 0.3, 'sine', 0.2, 2.5);
    this.playTone(1047, 0.5, 'sine', 0.25, 2.7);
  }
  
  // Hyper-scale - powerful growth sounds
  playScaleEnding() {
    if (!this.enabled) return;
    this.init();
    
    // Deep power bass
    this.playTone(65, 0.8, 'sine', 0.3);
    this.playTone(82, 0.8, 'sine', 0.25, 0.1);
    
    // Rising scale showing growth
    const scale = [262, 294, 330, 392, 440, 523, 659, 784, 880, 1047];
    scale.forEach((freq, i) => {
      this.playTone(freq, 0.2, 'sine', 0.15 + i * 0.02, 0.3 + i * 0.15);
    });
    
    // Epic chord at peak
    this.playTone(523, 0.6, 'sine', 0.25, 2.0);
    this.playTone(659, 0.6, 'sine', 0.25, 2.0);
    this.playTone(784, 0.6, 'sine', 0.25, 2.0);
    this.playTone(1047, 0.6, 'sine', 0.25, 2.0);
    this.playTone(1319, 0.8, 'sine', 0.2, 2.1);
    
    // Sparkle at the top
    this.playTone(2093, 0.3, 'sine', 0.1, 2.4);
    this.playTone(2637, 0.3, 'sine', 0.08, 2.5);
  }
  
  // Acquisition - corporate deal sounds
  playAcquisitionEnding() {
    if (!this.enabled) return;
    this.init();
    
    // Formal, professional tones
    this.playTone(262, 0.3, 'sine', 0.2);
    this.playTone(330, 0.3, 'sine', 0.2, 0.25);
    this.playTone(392, 0.4, 'sine', 0.22, 0.5);
    
    // Handshake/deal sound - confident
    this.playTone(523, 0.15, 'sine', 0.25, 1.0);
    this.playTone(659, 0.15, 'sine', 0.25, 1.1);
    
    // Cash register / big deal
    this.playTone(1319, 0.08, 'sine', 0.3, 1.5);
    this.playTone(1568, 0.08, 'sine', 0.3, 1.55);
    this.playTone(1976, 0.1, 'sine', 0.35, 1.6);
    this.playTone(2093, 0.15, 'sine', 0.3, 1.65);
    
    // Satisfied resolution chord
    this.playTone(392, 0.5, 'sine', 0.2, 2.0);
    this.playTone(494, 0.5, 'sine', 0.2, 2.0);
    this.playTone(587, 0.5, 'sine', 0.2, 2.0);
    this.playTone(784, 0.6, 'sine', 0.22, 2.1);
  }
  
  toggle() {
    this.enabled = !this.enabled;
    return this.enabled;
  }
}

const soundManager = new SoundManager();

// ===== GAME CLASS =====

class Game {
  constructor() {
    this.turn = 1;
    this.company = null;
    this.location = null; // Selected city
    this.founder = null; // Player character
    this.funding = null;
    this.funder = null;
    this.fundingStage = null;
    // Multi-funder tracking: array of { funder, relationship, isLead }
    this.investors = [];
    this.funderAdvices = []; // Current quarter's advice from all funders
    this.hiringStep = 0; // Wizard step for hiring modal
    this.team = { research: null, dev: null, marketing: null, hr: null };
    this.moods = { research: 1, dev: 1, marketing: 1, hr: 1 };
    // Starting metrics boosted for better early game balance
    this.metrics = { cash: 0, val: 0, equity: 100, staff: 0, burn: 0, sci: 15, dev: 15, mkt: 15, hr: 50 };
    this.maxAP = 5;
    this.bankedAP = 0; // Carryover AP from previous quarters (max 2)
    this.maxBankedAP = 2; // Cap on how much can be banked
    // Staffing system
    this.integratingStaff = 0; // Staff hired this quarter (still integrating)
    this.staffAPPenalty = 0; // AP penalty from integrating staff this quarter
    this.fundingAPCost = 0; // AP cost from fundraising this quarter
    this.milestone = null;
    this.milestoneProgress = 0;
    this.completedMilestones = [];
    this.rivals = [];
    this.market = MARKETS.find(m => m.id === "stable");
    this.currentDomain = "research";
    this.choices = {};
    this.equityGrants = [];
    this.currentEvents = {}; // Track which event each exec is presenting this quarter
    this.usedEvents = new Set(); // Track which events have been used
    this.lastRaiseTurn = -4; // Can raise immediately at start
    // Shock event tracking
    this.usedShocks = new Set(); // Track which shocks have occurred
    this.pendingShock = null; // Currently displayed shock
    // Conference mini-game tracking
    this.conferencesAttended = 0; // How many conferences attended
    this.lastConferenceMilestone = 0; // Which milestone we last had a conference for
    // Extreme mode - harder difficulty with less information
    this.extremeMode = false;
    // Tutorial type - 'beginner' or 'experienced'
    this.tutorialType = 'experienced';
    // Volatility system - adds randomness to outcomes
    this.baseVolatility = 0.15; // 15% variance in normal mode
    this.extremeVolatility = 0.20; // 20% variance in extreme mode
    // Journey tracking for narrative case study
    this.journeyEvents = []; // All significant events
    this.quarterSummaries = []; // Summary of each quarter's decisions
    this.peakValuation = 0; // Highest valuation reached
    this.lowestCash = Infinity; // Lowest cash point
    this.funderAdviceFollowed = 0; // Times player followed funder advice
    this.funderAdviceIgnored = 0; // Times player ignored funder advice
    this.domainInvestments = { research: 0, dev: 0, marketing: 0, hr: 0 }; // AP spent per domain
    this.aggressiveChoices = 0; // High-risk/high-reward choices
    this.conservativeChoices = 0; // Safe/steady choices
    
    // Pass/skip tracking for disengaged play detection
    this.totalPasses = 0; // Total passes across all quarters
    this.consecutiveHighPassQuarters = 0; // Quarters in a row with 3+ passes
    this.passWarningShown = false; // Whether we've warned the player
    
    this.init();
  }

  // Apply volatility to an effect value
  // For research, uses skewed distribution with higher upside potential
  applyVolatility(baseValue, isResearch = false) {
    if (baseValue === 0) return 0;
    
    // Milestone-based volatility scaling
    // M1: Higher volatility (early stage uncertainty)
    // M2: Medium volatility
    // M3: Lower volatility (more mature/predictable)
    const milestoneCount = this.completedMilestones?.length || 0;
    let milestoneMultiplier;
    if (milestoneCount === 0) {
      milestoneMultiplier = 1.5; // 50% more volatile during M1
    } else if (milestoneCount === 1) {
      milestoneMultiplier = 1.2; // 20% more volatile during M2
    } else {
      milestoneMultiplier = 1.0; // Normal volatility during M3
    }
    
    const baseVolatility = this.extremeMode ? this.extremeVolatility : this.baseVolatility;
    const volatility = baseVolatility * milestoneMultiplier;
    
    let adjusted;
    
    if (isResearch && baseValue > 0) {
      // Research has skewed distribution: more upside potential, some downside risk
      // During M1, research is even MORE volatile with bigger swings
      const roll = Math.random();
      
      // M1 has enhanced breakthrough chances (12%) and setback chances (12%)
      const breakthroughChance = milestoneCount === 0 ? 0.12 : 0.10;
      const strongChance = milestoneCount === 0 ? 0.27 : 0.25;
      const normalChance = milestoneCount === 0 ? 0.65 : 0.70;
      const disappointChance = milestoneCount === 0 ? 0.88 : 0.90;
      
      if (roll < breakthroughChance) {
        // Breakthrough! +50% to +120% bonus (bigger during M1)
        const maxBonus = milestoneCount === 0 ? 1.2 : 1.0;
        const breakthroughBonus = 0.5 + Math.random() * (maxBonus - 0.5);
        adjusted = baseValue * (1 + breakthroughBonus);
      } else if (roll < strongChance) {
        // Strong result +20% to +50%
        const strongBonus = 0.2 + Math.random() * 0.3;
        adjusted = baseValue * (1 + strongBonus);
      } else if (roll < normalChance) {
        // Normal variance (¬±volatility)
        const variance = (Math.random() * 2 - 1) * volatility;
        adjusted = baseValue * (1 + variance);
      } else if (roll < disappointChance) {
        // Disappointing -10% to -35% (worse during M1)
        const maxDisappointment = milestoneCount === 0 ? 0.35 : 0.30;
        const disappointment = 0.1 + Math.random() * (maxDisappointment - 0.1);
        adjusted = baseValue * (1 - disappointment);
      } else {
        // Setback -30% to -60% (worse during M1)
        const maxSetback = milestoneCount === 0 ? 0.6 : 0.5;
        const setback = 0.3 + Math.random() * (maxSetback - 0.3);
        adjusted = baseValue * (1 - setback);
      }
    } else {
      // Standard symmetric volatility for non-research (still milestone-scaled)
      const variance = (Math.random() * 2 - 1) * volatility;
      adjusted = baseValue * (1 + variance);
    }
    
    // Round to nearest integer, but preserve sign and ensure at least ¬±1 for non-zero base
    if (baseValue > 0) {
      return Math.max(1, Math.round(adjusted));
    } else {
      return Math.min(-1, Math.round(adjusted));
    }
  }

  init() {
    // Venture selection
    const vg = document.getElementById("ventureGrid");
    vg.innerHTML = COMPANIES.map(c => `
      <button data-id="${c.id}" class="hire-card border-2 border-slate-200 rounded-xl p-5 text-left bg-white hover:border-[${c.color}]">
        <div class="flex items-start gap-3 mb-2">
          <div class="w-12 h-12 flex-shrink-0">${LOGOS[c.id]}</div>
          <div>
            <div class="text-xs text-slate-500 uppercase tracking-wide">${c.archetype}</div>
            <div class="text-lg font-bold text-slate-800">${c.name}</div>
          </div>
        </div>
        <p class="text-sm text-slate-600">${c.desc}</p>
      </button>
    `).join("");
    vg.querySelectorAll("button").forEach(b => b.onclick = () => this.selectVenture(b.dataset.id));

    // Funding stage selection
    this.renderFundingStages();

    // Buttons
    document.getElementById("confirmMilestoneBtn").onclick = () => this.confirmMilestone();
    document.getElementById("commitBtn").onclick = () => this.commitTurn();
    document.getElementById("hireBtn").onclick = () => this.changeStaff(1);
    document.getElementById("fireBtn").onclick = () => this.changeStaff(-1);
    document.getElementById("raiseBtnCard").onclick = () => this.showRaiseModal();
    document.getElementById("achievedContinueBtn").onclick = () => this.onMilestoneAchieved();
  }

  startFromPreamble() {
    // Hide preambles, show founder selection FIRST
    document.getElementById("preambleModal1").classList.add("hidden");
    document.getElementById("preambleModal2").classList.add("hidden");
    document.getElementById("preambleModal2").classList.remove("flex");
    
    // Show founder modal first (before venture)
    this.showFounderModal();
  }

  showPreamblePage2() {
    document.getElementById("preambleModal1").classList.add("hidden");
    document.getElementById("preambleModal2").classList.remove("hidden");
    document.getElementById("preambleModal2").classList.add("flex");
  }

  backToPreamble1() {
    document.getElementById("preambleModal2").classList.add("hidden");
    document.getElementById("preambleModal2").classList.remove("flex");
    document.getElementById("preambleModal1").classList.remove("hidden");
  }

  // ===== HELP SYSTEM =====
  
  showHelpModal() {
    document.getElementById("helpModal").classList.remove("hidden");
    document.getElementById("helpModal").classList.add("flex");
    this.showHelpTab('overview');
    soundManager.playClick();
  }
  
  closeHelpModal() {
    document.getElementById("helpModal").classList.add("hidden");
    document.getElementById("helpModal").classList.remove("flex");
    soundManager.playClick();
  }
  
  showHelpTab(tabId) {
    // Hide all content
    document.querySelectorAll('.help-content').forEach(el => el.classList.add('hidden'));
    // Show selected content
    const content = document.getElementById(`helpContent-${tabId}`);
    if (content) content.classList.remove('hidden');
    
    // Update tab styling
    document.querySelectorAll('.help-tab').forEach(tab => {
      tab.classList.remove('text-indigo-600', 'border-indigo-600');
      tab.classList.add('text-slate-600', 'border-transparent');
    });
    const activeTab = document.querySelector(`.help-tab[data-tab="${tabId}"]`);
    if (activeTab) {
      activeTab.classList.remove('text-slate-600', 'border-transparent');
      activeTab.classList.add('text-indigo-600', 'border-indigo-600');
    }
  }
  
  showHelp(topic) {
    // Open help modal and navigate to relevant tab
    this.showHelpModal();
    
    // Map topics to tabs
    const topicToTab = {
      'quarter': 'overview',
      'cash': 'money',
      'runway': 'money',
      'valuation': 'money',
      'milestones': 'milestones',
      'ap': 'ap',
      'team': 'team',
      'staff': 'team'
    };
    
    const tab = topicToTab[topic] || 'overview';
    this.showHelpTab(tab);
  }

  // ===== TUTORIAL SYSTEM =====
  
  startTutorial() {
    // Show tutorial selection modal instead of starting directly
    document.getElementById("preambleModal1").classList.add("hidden");
    document.getElementById("tutorialSelectModal").classList.remove("hidden");
    document.getElementById("tutorialSelectModal").classList.add("flex");
  }
  
  startBeginnerTutorial() {
    this.tutorialType = 'beginner';
    this.tutorialStep = 1;
    document.getElementById("tutorialSelectModal").classList.add("hidden");
    document.getElementById("tutorialSelectModal").classList.remove("flex");
    document.getElementById("tutorialModal").classList.remove("hidden");
    document.getElementById("tutorialModal").classList.add("flex");
    document.getElementById("tutorialTypeLabel").textContent = "üå± Guided Tour";
    this.renderTutorialStep();
  }
  
  startExperiencedTutorial() {
    this.tutorialType = 'experienced';
    this.tutorialStep = 1;
    document.getElementById("tutorialSelectModal").classList.add("hidden");
    document.getElementById("tutorialSelectModal").classList.remove("flex");
    document.getElementById("tutorialModal").classList.remove("hidden");
    document.getElementById("tutorialModal").classList.add("flex");
    document.getElementById("tutorialTypeLabel").textContent = "‚ö° Quick Overview";
    this.renderTutorialStep();
  }
  
  skipTutorialFromSelect() {
    document.getElementById("tutorialSelectModal").classList.add("hidden");
    document.getElementById("tutorialSelectModal").classList.remove("flex");
    document.getElementById("ventureModal").classList.remove("hidden");
    document.getElementById("ventureModal").classList.add("flex");
    
    // Show extreme mode indicator if enabled
    const extremeIndicator = document.getElementById("extremeModeIndicatorVenture");
    if (this.extremeMode) {
      extremeIndicator.classList.remove("hidden");
    } else {
      extremeIndicator.classList.add("hidden");
    }
  }
  
  closeTutorial() {
    document.getElementById("tutorialModal").classList.add("hidden");
    document.getElementById("tutorialModal").classList.remove("flex");
    document.getElementById("preambleModal1").classList.remove("hidden");
  }
  
  getTutorialTotalSteps() {
    return this.tutorialType === 'beginner' ? 25 : 14;
  }
  
  tutorialNext() {
    const totalSteps = this.getTutorialTotalSteps();
    if (this.tutorialStep < totalSteps) {
      this.tutorialStep++;
      this.renderTutorialStep();
    } else {
      // Tutorial complete - go to founder selection first
      document.getElementById("tutorialModal").classList.add("hidden");
      document.getElementById("tutorialModal").classList.remove("flex");
      this.showFounderModal();
      
      // Show extreme mode indicator if enabled
      const extremeIndicator = document.getElementById("extremeModeIndicatorVenture");
      if (this.extremeMode) {
        extremeIndicator.classList.remove("hidden");
      } else {
        extremeIndicator.classList.add("hidden");
      }
    }
  }
  
  tutorialBack() {
    if (this.tutorialStep > 1) {
      this.tutorialStep--;
      this.renderTutorialStep();
    }
  }
  
  renderTutorialStep() {
    const step = this.tutorialStep;
    const totalSteps = this.getTutorialTotalSteps();
    document.getElementById("tutorialStepNum").textContent = step;
    document.getElementById("tutorialTotalSteps").textContent = totalSteps;
    document.getElementById("tutorialProgress").style.width = `${(step / totalSteps) * 100}%`;
    document.getElementById("tutorialBackBtn").style.visibility = step === 1 ? "hidden" : "visible";
    document.getElementById("tutorialNextBtn").textContent = step === totalSteps ? "Start Game ‚Üí" : "Next ‚Üí";
    
    const content = this.tutorialType === 'beginner' 
      ? this.getBeginnerTutorialContent(step)
      : this.getTutorialContent(step);
    document.getElementById("tutorialContent").innerHTML = content;
  }
  
  getTutorialContent(step) {
    const tutorials = {
      1: {
        title: "Welcome, Founder! üöÄ",
        icon: "üëã",
        content: `
          <p class="text-slate-600 mb-4">
            In this game, you'll run an AI startup for <strong>16 quarters (4 years)</strong>. 
            Your goal is to complete <strong>3 major milestones</strong> before running out of money or time.
          </p>
          <div class="bg-indigo-50 rounded-xl p-4 mb-4">
            <h4 class="font-bold text-indigo-800 mb-2">üéØ Win Condition</h4>
            <p class="text-indigo-700 text-sm">Complete all 3 milestones to win. Each milestone has a deadline-miss it and the board will shut you down.</p>
          </div>
          <div class="bg-rose-50 rounded-xl p-4">
            <h4 class="font-bold text-rose-800 mb-2">üíÄ Lose Conditions</h4>
            <ul class="text-rose-700 text-sm space-y-1">
              <li>‚Ä¢ <strong>Bankruptcy:</strong> Cash hits ¬£0</li>
              <li>‚Ä¢ <strong>Missed Deadline:</strong> Fail to complete a milestone in time</li>
            </ul>
          </div>
        `
      },
      2: {
        title: "Game Setup üéÆ",
        icon: "‚öô",
        content: `
          <p class="text-slate-600 mb-4">
            Before you start, you'll make four important choices that shape your entire game:
          </p>
          <div class="space-y-3">
            <div class="bg-violet-50 rounded-xl p-4 flex items-start gap-3">
              <div class="text-2xl">üë§</div>
              <div>
                <h4 class="font-bold text-violet-800">1. Create Your Founder</h4>
                <p class="text-violet-700 text-sm">Choose your background-Academic, Serial Founder, Technical Prodigy, etc. Each has different strengths.</p>
              </div>
            </div>
            <div class="bg-indigo-50 rounded-xl p-4 flex items-start gap-3">
              <div class="text-2xl">üè¢</div>
              <div>
                <h4 class="font-bold text-indigo-800">2. Choose Your Startup</h4>
                <p class="text-indigo-700 text-sm">BioTech, Robotics, FinTech, or Creative AI-each has unique milestones and challenges.</p>
              </div>
            </div>
            <div class="bg-emerald-50 rounded-xl p-4 flex items-start gap-3">
              <div class="text-2xl">üìç</div>
              <div>
                <h4 class="font-bold text-emerald-800">3. Pick Your Location</h4>
                <p class="text-emerald-700 text-sm">London, Oxford, Edinburgh, Manchester... Each city has different salary costs and stat bonuses.</p>
              </div>
            </div>
            <div class="bg-amber-50 rounded-xl p-4 flex items-start gap-3">
              <div class="text-2xl">üí∞</div>
              <div>
                <h4 class="font-bold text-amber-800">4. Select Funding Path</h4>
                <p class="text-amber-700 text-sm">Bootstrap (keep equity), Angel (moderate funding), or VC (big funding, big dilution).</p>
              </div>
            </div>
          </div>
        `
      },
      3: {
        title: "Action Points (AP) ‚ö°",
        icon: "üéÆ",
        content: `
          <p class="text-slate-600 mb-4">
            <strong>Action Points represent your managerial attention</strong>-the scarcest resource in any startup. 
            You can't do everything. Each quarter, you must choose where to focus while other opportunities pass by.
          </p>
          <p class="text-slate-600 mb-4">
            You have <strong>5 AP per quarter</strong> to spend. Your executive team will present 
            strategic options, each costing different amounts of AP.
          </p>
          <div class="flex gap-2 justify-center mb-4">
            ${[1,2,3,4,5].map(i => `<div class="w-10 h-10 rounded-lg bg-emerald-500 text-white flex items-center justify-center font-bold">${i}</div>`).join('')}
          </div>
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3 text-center">
              <div class="text-2xl mb-1">1-2 AP</div>
              <div class="text-emerald-700 text-sm">Safe, incremental moves</div>
            </div>
            <div class="bg-amber-50 rounded-lg p-3 text-center">
              <div class="text-2xl mb-1">3-4 AP</div>
              <div class="text-amber-700 text-sm">Bold, high-impact moves</div>
            </div>
          </div>
          <div class="bg-blue-50 rounded-xl p-4">
            <h4 class="font-bold text-blue-800 mb-2">üí° Pro Tip: Banking AP</h4>
            <p class="text-blue-700 text-sm">Unused AP (up to 2) carries over to next quarter. Save up for crucial moments when you need 6-7 AP!</p>
          </div>
        `
      },
      4: {
        title: "Your Executive Team üë•",
        icon: "üëî",
        content: `
          <p class="text-slate-600 mb-4">
            You'll hire three executives at the start, each leading a department:
          </p>
          <div class="grid grid-cols-3 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-xl p-4 text-center">
              <div class="text-3xl mb-2">üî¨</div>
              <div class="font-bold text-slate-800">Research</div>
              <div class="text-xs text-slate-500">Boosts Science stat</div>
            </div>
            <div class="bg-sky-50 rounded-xl p-4 text-center">
              <div class="text-3xl mb-2">üíª</div>
              <div class="font-bold text-slate-800">Product</div>
              <div class="text-xs text-slate-500">Boosts Dev stat</div>
            </div>
            <div class="bg-fuchsia-50 rounded-xl p-4 text-center">
              <div class="text-3xl mb-2">üì£</div>
              <div class="font-bold text-slate-800">Sales</div>
              <div class="text-xs text-slate-500">Boosts Marketing stat</div>
            </div>
          </div>
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">üòä Team Morale Matters!</h4>
            <p class="text-amber-700 text-sm">Each exec has a mood indicator. Happy execs bring better opportunities; 
            frustrated execs are more likely to bring problems and challenges. <strong>Keep your team engaged!</strong></p>
            <div class="flex justify-center gap-2 mt-3">
              <span class="px-2 py-1 bg-emerald-200 rounded text-xs">üòä Better events</span>
              <span class="px-2 py-1 bg-slate-200 rounded text-xs">üòê Random</span>
              <span class="px-2 py-1 bg-amber-200 rounded text-xs">üòü More problems</span>
              <span class="px-2 py-1 bg-rose-200 rounded text-xs">üò† Tough situations</span>
            </div>
          </div>
        `
      },
      5: {
        title: "Research & Science üî¨",
        icon: "üß¨",
        content: `
          <p class="text-slate-600 mb-3 text-sm">
            Engaging with science is a <strong>managerial choice</strong>-how much, when, with whom, and what you exchange. 
            Do you hire PhD researchers? Collaborate with universities? Publish your work? Each decision has costs and benefits. 
            Getting this right is up to you.
          </p>
          <div class="bg-emerald-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-emerald-800 text-sm mb-1">‚úÖ Benefits of Scientific Engagement</h4>
            <ul class="text-emerald-700 text-xs space-y-1">
              <li><strong>Learning:</strong> Access cutting-edge knowledge, methods, and data. Scientists work at the frontier-partnering with them helps you see what's coming next.</li>
              <li><strong>Networking:</strong> Build connections to talented researchers, potential hires, and other labs. The best PhD students hear about opportunities through their advisors.</li>
              <li><strong>Legitimacy:</strong> Scientific credibility matters. Publications and university partnerships signal quality to customers, investors, and regulators.</li>
            </ul>
          </div>
          <div class="bg-rose-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-rose-800 text-sm mb-1">‚ö† Risks of Scientific Engagement</h4>
            <ul class="text-rose-700 text-xs space-y-1">
              <li><strong>Disclosure:</strong> Publishing and conferences mean sharing knowledge-possibly with competitors. Open science norms may conflict with your need for secrecy.</li>
              <li><strong>Distraction:</strong> Scientific curiosity can pull resources toward interesting problems that don't help the product. Research timelines rarely match startup urgency.</li>
              <li><strong>Translation:</strong> What works in a paper may not work in production. Bridging the gap between scientific results and commercial applications is harder than it looks.</li>
            </ul>
          </div>
          <div class="bg-amber-50 rounded-lg p-2 mb-2">
            <h4 class="font-bold text-amber-800 text-xs mb-1">üî¨ Managing Scientists In Your Firm</h4>
            <p class="text-amber-700 text-xs">Scientists want to explore and publish; product people want to ship. Managing this tension-without losing your best researchers-is a constant challenge.</p>
          </div>
          <div class="bg-blue-50 rounded-lg p-2">
            <p class="text-blue-700 text-xs"><strong>Challenges:</strong> Should researchers publish or stay secret? How do you stop a university claiming your IP? When a scientist chases interesting problems that won't help the product, what do you say?</p>
          </div>
        `
      },
      6: {
        title: "Product & Development üíª",
        icon: "‚öô",
        content: `
          <p class="text-slate-600 mb-3 text-sm">
            Building AI products means balancing <strong>speed against quality</strong>. 
            Every shortcut creates problems tomorrow. Every delay risks being overtaken.
          </p>
          <div class="bg-sky-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-sky-800 text-sm mb-1">üèó Build, Buy, or Partner?</h4>
            <p class="text-sky-700 text-xs">Building gives control but takes time. Buying is faster but creates dependencies. 
            Partnering accelerates development-but who owns what you create together?</p>
          </div>
          <div class="bg-violet-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-violet-800 text-sm mb-1">ü§ù Collaborating with Other Firms</h4>
            <p class="text-violet-700 text-xs">Joint development, integration partnerships, licensing deals-these open doors. 
            But negotiations over IP, exclusivity, and roadmap control are tricky. Today's partner might become tomorrow's competitor.</p>
          </div>
          <div class="bg-amber-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-amber-800 text-sm mb-1">üîê Protecting What You Build</h4>
            <p class="text-amber-700 text-xs">Patents, trade secrets, or just moving fast? Should you open-source tools to build community, 
            or keep everything proprietary? What happens when a competitor copies your feature?</p>
          </div>
          <div class="bg-blue-50 rounded-lg p-2">
            <p class="text-blue-700 text-xs"><strong>Challenges:</strong> Fix problems properly or push forward with workarounds? 
            Structure partnerships without giving away advantage? Patent innovations or rely on speed?</p>
          </div>
        `
      },
      7: {
        title: "Sales & Marketing üì£",
        icon: "üéØ",
        content: `
          <p class="text-slate-600 mb-3 text-sm">
            Startups need <strong>legitimacy</strong>-customers, investors, and partners must believe you're real before you've proven anything. 
            How you build that credibility, and how far you stretch the truth to get there, is a constant tension.
          </p>
          <div class="bg-emerald-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-emerald-800 text-sm mb-1">‚úÖ The Upside of Hype</h4>
            <ul class="text-emerald-700 text-xs space-y-1">
              <li><strong>Legitimacy signals:</strong> Ties to high-status actors-famous investors, big-name advisors, university partnerships-make you credible before you've shipped anything.</li>
              <li><strong>Fake it till you make it:</strong> Bold claims and confident promotion can open doors, attract talent, and win early customers. Sometimes you have to act bigger than you are.</li>
              <li><strong>Momentum matters:</strong> Press coverage, awards, and "partnership announcements" create buzz that feeds on itself.</li>
            </ul>
          </div>
          <div class="bg-rose-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-rose-800 text-sm mb-1">‚ö† The Downside of Hype</h4>
            <ul class="text-rose-700 text-xs space-y-1">
              <li><strong>Hard to get, costly to keep:</strong> High-status partners and advisors don't come cheap-they want equity, board seats, or favours. Maintaining these relationships takes time.</li>
              <li><strong>Overclaiming backfires:</strong> If you promise what you can't deliver, customers leave angry, journalists write takedowns, and your reputation suffers.</li>
              <li><strong>Where's the line?:</strong> "Confident vision" slides into "misleading claims" faster than you'd think. Regulators and lawyers have opinions about this.</li>
            </ul>
          </div>
          <div class="bg-orange-50 rounded-lg p-2 mb-2">
            <h4 class="font-bold text-orange-800 text-xs mb-1">ü§ù Enterprise vs. Consumer</h4>
            <p class="text-orange-700 text-xs">Enterprise sales are slow but sticky-long cycles, legal reviews, pilots. Consumer markets move fast but churn is brutal.</p>
          </div>
          <div class="bg-blue-50 rounded-lg p-2">
            <p class="text-blue-700 text-xs"><strong>Challenges:</strong> Sell features you haven't built? Announce a "partnership" that's really just a conversation? How do you build credibility without crossing into deception?</p>
          </div>
        `
      },
      8: {
        title: "People & HR üë•",
        icon: "üíº",
        content: `
          <p class="text-slate-600 mb-3 text-sm">
            Startups live and die by their people. But <strong>managing humans is messy</strong>-hiring, firing, 
            culture, compensation, and the tension between moving fast and treating people fairly.
          </p>
          <div class="bg-pink-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-pink-800 text-sm mb-1">üéØ The Talent War</h4>
            <p class="text-pink-700 text-xs">AI talent is expensive and scarce. Pay top-of-market and strain runway? 
            Offer equity that might be worthless? Compete with Titan Tech and CortexAI on compensation?</p>
          </div>
          <div class="bg-amber-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-amber-800 text-sm mb-1">üåç Visas & Immigration</h4>
            <p class="text-amber-700 text-xs">Many candidates need visa sponsorship. Becoming a sponsor means compliance, 
            record-keeping, and Immigration Authority audits. Some candidates have settlement clocks ticking.</p>
          </div>
          <div class="bg-rose-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-rose-800 text-sm mb-1">‚≠ê Reputation & WorkReview</h4>
            <p class="text-rose-700 text-xs">Former employees leave reviews-some fair, some not. Candidates check WorkReview before applying. 
            Your employer brand affects who you can hire.</p>
          </div>
          <div class="bg-blue-50 rounded-lg p-2">
            <p class="text-blue-700 text-xs"><strong>Challenges:</strong> How honest are you about runway with candidates? 
            What do you do when a star performer is toxic? How do you handle the first redundancy?</p>
          </div>
        `
      },
      9: {
        title: "Head of HR Unlock üíº",
        icon: "üéâ",
        content: `
          <p class="text-slate-600 mb-4">
            After completing your <strong>first milestone</strong>, the board will insist you formalize HR 
            and hire a <strong>Head of HR</strong>.
          </p>
          <div class="bg-pink-50 rounded-xl p-4 mb-4 border-2 border-pink-200">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-12 h-12 rounded-full bg-pink-500 flex items-center justify-center text-2xl">üíº</div>
              <div>
                <h4 class="font-bold text-pink-800">Fourth Executive Unlocked!</h4>
                <p class="text-pink-600 text-sm">A whole new department to manage</p>
              </div>
            </div>
            <p class="text-pink-700 text-sm">The Head of HR will present HR-focused options each quarter, helping you 
            manage team culture, hiring, and employee satisfaction.</p>
          </div>
          <div class="bg-slate-50 rounded-xl p-4">
            <h4 class="font-bold text-slate-700 mb-2">What They Bring:</h4>
            <ul class="text-slate-600 text-sm space-y-1">
              <li>‚úì Boosts HR stat (affects team effectiveness)</li>
              <li>‚úì New strategic options each quarter</li>
              <li>‚úì Helps maintain team morale</li>
              <li>‚úì Costs salary + equity like other execs</li>
            </ul>
          </div>
        `
      },
      10: {
        title: "Milestones & Deadlines üéØ",
        icon: "üìÖ",
        content: `
          <p class="text-slate-600 mb-4">
            Each milestone requires you to build up specific stats. The milestone tracker shows your progress:
          </p>
          <div class="bg-slate-100 rounded-xl p-4 mb-4">
            <div class="flex items-center justify-between mb-2">
              <span class="font-bold text-slate-700">First Prototype</span>
              <span class="text-amber-600 font-bold">65%</span>
            </div>
            <div class="h-4 bg-white rounded-full overflow-hidden border">
              <div class="h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full" style="width: 65%"></div>
            </div>
            <div class="mt-2 text-xs text-slate-500">Focus: Research + Product ‚Ä¢ Deadline: Q4</div>
          </div>
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3">
              <div class="font-bold text-emerald-800 text-sm">‚úÖ Hit 100%</div>
              <p class="text-emerald-700 text-xs">Milestone complete! +¬£150k cash, +¬£400k valuation</p>
            </div>
            <div class="bg-rose-50 rounded-lg p-3">
              <div class="font-bold text-rose-800 text-sm">‚ùå Miss Deadline</div>
              <p class="text-rose-700 text-xs">Game over. The board loses confidence.</p>
            </div>
          </div>
          <div class="bg-blue-50 rounded-xl p-4">
            <h4 class="font-bold text-blue-800 mb-2">üí° Focus on the Focus Areas!</h4>
            <p class="text-blue-700 text-sm">The milestone tracker shows which stats matter (Research, Product, or Sales). 
            Prioritize actions that boost those specific areas.</p>
          </div>
        `
      },
      11: {
        title: "Cash & Runway üí∞",
        icon: "üìä",
        content: `
          <p class="text-slate-600 mb-4">
            Every quarter, you pay salaries and costs. This is your <strong>burn rate</strong>. 
            When cash hits zero, it's game over.
          </p>
          <div class="bg-slate-800 text-white rounded-xl p-4 mb-4">
            <div class="grid grid-cols-3 gap-4 text-center">
              <div>
                <div class="text-emerald-400 text-2xl font-bold">¬£450k</div>
                <div class="text-slate-400 text-xs">Cash</div>
              </div>
              <div>
                <div class="text-rose-400 text-2xl font-bold">¬£90k/q</div>
                <div class="text-slate-400 text-xs">Burn Rate</div>
              </div>
              <div>
                <div class="text-amber-400 text-2xl font-bold">5q</div>
                <div class="text-slate-400 text-xs">Runway</div>
              </div>
            </div>
          </div>
          <div class="bg-blue-50 rounded-xl p-4 mb-4">
            <h4 class="font-bold text-blue-800 mb-2">üí° Runway = Cash √∑ Burn</h4>
            <p class="text-blue-700 text-sm">Always know how many quarters you can survive. If runway drops below 3, consider raising funding!</p>
          </div>
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚ö† What Increases Burn?</h4>
            <p class="text-amber-700 text-sm">Executive salaries, staff count, location (London is expensive!), and some strategic choices.</p>
          </div>
        `
      },
      12: {
        title: "Raising Funding üè¶",
        icon: "üí∏",
        content: `
          <p class="text-slate-600 mb-3 text-sm">
            Fundraising is a <strong>big part of the founder's job</strong>. Money brings runway, but also strings-investors want returns, 
            and that shapes what you can do. Choosing the right investors, at the right time, matters as much as the amount raised.
          </p>
          <div class="bg-violet-50 rounded-lg p-3 mb-2">
            <h4 class="font-bold text-violet-800 text-sm mb-1">üë• Types of Investors</h4>
            <ul class="text-violet-700 text-xs space-y-1">
              <li><strong>Angels:</strong> Wealthy individuals. Smaller cheques, flexible terms, varied experience. Some add real value; others just write cheques.</li>
              <li><strong>Independent VCs:</strong> Professional funds seeking big returns. Larger amounts, more structure, board seats. They've seen many startups-helpful, but demanding.</li>
              <li><strong>Corporate VCs:</strong> Investment arms of big companies. Strategic interest in your technology. Can open doors-but may limit who else you can work with.</li>
            </ul>
          </div>
          <div class="bg-amber-50 rounded-lg p-2 mb-2">
            <h4 class="font-bold text-amber-800 text-xs mb-1">‚ö† One Raise Per Milestone (Costs 1 AP)</h4>
            <p class="text-amber-700 text-xs">You can only raise external funding <strong>once per milestone</strong>. Each raise costs <strong>1 AP</strong>-fundraising takes time away from running the business. 
            Plan carefully-you need enough cash to reach the next milestone.</p>
          </div>
          <div class="bg-emerald-50 rounded-lg p-2 mb-2">
            <h4 class="font-bold text-emerald-800 text-xs mb-1">ü•ß Dilution Isn't Always Bad</h4>
            <p class="text-emerald-700 text-xs">Giving up equity feels painful, but successful founders often own small percentages of valuable companies. 
            <strong>A small slice of a big pie is worth more than a large slice of a small pie.</strong> Dilution is normal-what matters is growing the pie.</p>
          </div>
          <div class="bg-slate-50 rounded-lg p-2 mb-2">
            <h4 class="font-bold text-slate-700 text-xs mb-1">‚è± The Fundraising Game</h4>
            <p class="text-slate-600 text-xs">Different investors have different goals, experience, and interests-keeping them all happy gets harder as you add more. 
            Investors bring not just money, but also help, support, and headaches. The 1 AP cost reflects time spent on pitches, due diligence, and negotiations.</p>
          </div>
          <div class="bg-blue-50 rounded-lg p-2">
            <p class="text-blue-700 text-xs"><strong>Challenges:</strong> Raise early with more dilution, or wait and risk running low? 
            How much is enough to reach the next milestone? Is corporate money worth the strategic strings?</p>
          </div>
        `
      },
      13: {
        title: "Events & Mini-Games ‚ö°",
        icon: "üé™",
        content: `
          <p class="text-slate-600 mb-4">
            The startup world is unpredictable! Random events and special moments will test your skills:
          </p>
          <div class="bg-rose-50 rounded-xl p-4 mb-3">
            <h4 class="font-bold text-rose-800 mb-2">‚ö° Market Shocks</h4>
            <p class="text-rose-700 text-sm mb-2">Starting Q3, random shocks may hit: economic downturns, regulatory changes, 
            competitor moves, talent wars, or tech disruptions.</p>
            <p class="text-rose-600 text-xs">You'll get 3 response options-choose wisely!</p>
          </div>
          <div class="bg-cyan-50 rounded-xl p-4 mb-3">
            <h4 class="font-bold text-cyan-800 mb-2">üé™ Conference Mini-Game (M1)</h4>
            <p class="text-cyan-700 text-sm">45-second action game! Click delegates, hand out swag, compete with rivals for industry attention.</p>
          </div>
          <div class="bg-violet-50 rounded-xl p-4 mb-3">
            <h4 class="font-bold text-violet-800 mb-2">üé§ Investor Pitch (M2)</h4>
            <p class="text-violet-700 text-sm">30-second pitch to skeptical investors! Tell stories, share data, keep their attention high.</p>
          </div>
          <div class="bg-emerald-50 rounded-xl p-4 mb-3">
            <h4 class="font-bold text-emerald-800 mb-2">üé™ Demo Day (M3)</h4>
            <p class="text-emerald-700 text-sm mb-2">60 seconds at your trade show booth! Visitors approach with visual hints about their value.</p>
            <ul class="text-emerald-600 text-xs space-y-1">
              <li>‚Ä¢ <strong>Engage</strong> visitors first to reveal their value and preferences</li>
              <li>‚Ä¢ <strong>Green offers</strong> match preferences for bigger interest boosts</li>
              <li>‚Ä¢ <strong>Convert</strong> when interest hits 75% to close the deal</li>
              <li>‚Ä¢ <strong>Skip time-wasters</strong> (¬£0 value) quickly!</li>
            </ul>
          </div>
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚ö† Demo Day: Premium Offer Warning</h4>
            <p class="text-amber-700 text-sm">Demo (-¬£25k) and Custom (-¬£40k) give huge boosts but require follow-up work. 
            <strong>Using 5+ costs 1 AP, 6+ costs 2 AP!</strong> Save them for high-value visitors.</p>
          </div>
        `
      },
      14: {
        title: "You're Ready! üéì",
        icon: "üöÄ",
        content: `
          <p class="text-slate-600 mb-4">
            You now know everything you need. Here's your quick reference:
          </p>
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-indigo-50 rounded-lg p-3">
              <div class="font-bold text-indigo-700 text-sm mb-1">üéØ Goal</div>
              <p class="text-indigo-600 text-xs">Complete 3 milestones before running out of cash or time</p>
            </div>
            <div class="bg-emerald-50 rounded-lg p-3">
              <div class="font-bold text-emerald-700 text-sm mb-1">‚ö° Each Quarter</div>
              <p class="text-emerald-600 text-xs">Spend 5 AP wisely, bank up to 2 unused</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-3">
              <div class="font-bold text-amber-700 text-sm mb-1">üë• Team</div>
              <p class="text-amber-600 text-xs">Keep execs happy, unlock HR after M1</p>
            </div>
            <div class="bg-rose-50 rounded-lg p-3">
              <div class="font-bold text-rose-700 text-sm mb-1">üí∞ Survival</div>
              <p class="text-rose-600 text-xs">Watch runway, raise when needed</p>
            </div>
            <div class="bg-violet-50 rounded-lg p-3">
              <div class="font-bold text-violet-700 text-sm mb-1">üè¶ Investors</div>
              <p class="text-violet-600 text-xs">Balance their advice vs your judgment</p>
            </div>
            <div class="bg-cyan-50 rounded-lg p-3">
              <div class="font-bold text-cyan-700 text-sm mb-1">‚ö° Events</div>
              <p class="text-cyan-600 text-xs">Adapt to shocks, crush mini-games</p>
            </div>
          </div>
          <div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-4 text-center border border-emerald-200">
            <div class="text-3xl mb-2">üçÄ</div>
            <p class="text-emerald-800 font-medium">Good luck, founder!</p>
            <p class="text-emerald-600 text-sm">90% of startups fail. But you've got this. Learn, adapt, and try again!</p>
          </div>
        `
      }
    };
    
    const t = tutorials[step];
    return `
      <div class="text-center mb-6">
        <div class="text-5xl mb-3">${t.icon}</div>
        <h2 class="text-2xl font-bold text-slate-800">${t.title}</h2>
      </div>
      ${t.content}
    `;
  }

  // Beginner tutorial with visual mockups
  getBeginnerTutorialContent(step) {
    const tutorials = {
      1: {
        title: "Welcome to the Guided Tour! üå±",
        icon: "üëã",
        content: `
          <p class="text-slate-600 mb-4">
            This tutorial will walk you through <strong>every part of the game</strong> with visual examples 
            of the actual screens you'll see. Take your time-understanding these basics will help you succeed!
          </p>
          <div class="bg-emerald-50 rounded-xl p-4 mb-4 border border-emerald-200">
            <h4 class="font-bold text-emerald-800 mb-2">üéØ What You'll Learn</h4>
            <ul class="text-emerald-700 text-sm space-y-1">
              <li>‚Ä¢ How to read and understand every screen</li>
              <li>‚Ä¢ What all the numbers and buttons mean</li>
              <li>‚Ä¢ How to make good decisions</li>
              <li>‚Ä¢ Common mistakes to avoid</li>
            </ul>
          </div>
          <div class="bg-indigo-50 rounded-xl p-4">
            <h4 class="font-bold text-indigo-800 mb-2">üéÆ The Big Picture</h4>
            <p class="text-indigo-700 text-sm">You're the CEO of an AI startup. Each quarter, you'll make strategic decisions 
            to grow your company. Complete 3 milestones before running out of money to win!</p>
          </div>
        `
      },
      2: {
        title: "Win & Lose Conditions üèÜ",
        icon: "üéØ",
        content: `
          <p class="text-slate-600 mb-4">Before we dive in, let's be clear about <strong>how you win and lose</strong>:</p>
          
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div class="bg-emerald-50 rounded-xl p-4 border-2 border-emerald-300">
              <div class="text-3xl text-center mb-2">üèÜ</div>
              <div class="font-bold text-emerald-800 text-center mb-2">YOU WIN</div>
              <p class="text-emerald-700 text-sm text-center">Complete all 3 milestones before Q16</p>
            </div>
            <div class="bg-rose-50 rounded-xl p-4 border-2 border-rose-300">
              <div class="text-3xl text-center mb-2">üíÄ</div>
              <div class="font-bold text-rose-800 text-center mb-2">YOU LOSE</div>
              <ul class="text-rose-700 text-sm space-y-1">
                <li>‚Ä¢ Cash hits ¬£0</li>
                <li>‚Ä¢ Miss a milestone deadline</li>
              </ul>
            </div>
          </div>
          
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚è∞ Time Pressure</h4>
            <p class="text-amber-700 text-sm">Each milestone has a deadline (measured in quarters). 
            If you don't complete a milestone in time, the board loses confidence and shuts you down. 
            <strong>Always check your deadline!</strong></p>
          </div>
        `
      },
      3: {
        title: "The Header Bar üìä",
        icon: "üîù",
        content: `
          <p class="text-slate-600 mb-4">This bar appears at the top of every screen. <strong>It's your dashboard</strong>-check it constantly!</p>
          
          <!-- Header mockup -->
          <div class="bg-slate-800 rounded-xl p-3 mb-4 text-white text-sm">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <span class="font-bold">The AI Startup Game</span>
                <span class="text-slate-400">üè¢ Your Company</span>
              </div>
              <div class="flex items-center gap-6 text-xs">
                <div class="text-center">
                  <div class="text-slate-400">Quarter</div>
                  <div class="font-mono font-bold text-white">Q1</div>
                </div>
                <div class="text-center relative">
                  <div class="text-slate-400">Cash</div>
                  <div class="font-mono font-bold text-emerald-400">¬£500k</div>
                  <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                </div>
                <div class="text-center relative">
                  <div class="text-slate-400">Runway</div>
                  <div class="font-mono font-bold text-amber-400">5q</div>
                  <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                </div>
                <div class="text-center">
                  <div class="text-slate-400">Valuation</div>
                  <div class="font-mono font-bold text-sky-400">¬£1.2M</div>
                </div>
                <div class="text-center relative">
                  <div class="text-slate-400">Milestones</div>
                  <div class="font-mono font-bold text-white">0/3</div>
                  <div class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-2 text-xs">
            <div class="bg-slate-100 rounded-lg p-2">
              <span class="font-bold text-emerald-600">Cash:</span> Your money. Don't let it hit ¬£0!
            </div>
            <div class="bg-slate-100 rounded-lg p-2">
              <span class="font-bold text-amber-600">Runway:</span> Quarters until cash runs out
            </div>
            <div class="bg-slate-100 rounded-lg p-2">
              <span class="font-bold text-sky-600">Valuation:</span> What your company is worth
            </div>
            <div class="bg-slate-100 rounded-lg p-2">
              <span class="font-bold text-slate-600">Milestones:</span> Progress toward winning
            </div>
          </div>
        `
      },
      4: {
        title: "Understanding Cash üíµ",
        icon: "üí∞",
        content: `
          <p class="text-slate-600 mb-4"><strong>Cash is your lifeline.</strong> Every quarter, you pay salaries and costs (your "burn rate"). 
          When cash hits zero, the game ends immediately.</p>
          
          <!-- Cash flow diagram -->
          <div class="bg-slate-50 rounded-xl p-4 mb-4">
            <div class="flex items-center justify-around text-center">
              <div>
                <div class="text-3xl mb-1">üí∞</div>
                <div class="font-bold text-emerald-600">¬£500k</div>
                <div class="text-xs text-slate-500">Current Cash</div>
              </div>
              <div class="text-2xl text-slate-400">‚Üí</div>
              <div>
                <div class="text-3xl mb-1">üî•</div>
                <div class="font-bold text-rose-600">-¬£100k/q</div>
                <div class="text-xs text-slate-500">Burn Rate</div>
              </div>
              <div class="text-2xl text-slate-400">‚Üí</div>
              <div>
                <div class="text-3xl mb-1">‚è≥</div>
                <div class="font-bold text-amber-600">5 quarters</div>
                <div class="text-xs text-slate-500">Runway</div>
              </div>
            </div>
          </div>
          
          <div class="bg-rose-50 rounded-xl p-4 mb-3">
            <h4 class="font-bold text-rose-800 mb-2">üî• What Increases Burn Rate?</h4>
            <ul class="text-rose-700 text-sm space-y-1">
              <li>‚Ä¢ <strong>Executive salaries</strong> - each exec costs ¬£15-30k per quarter</li>
              <li>‚Ä¢ <strong>Staff count</strong> - more people = higher costs</li>
              <li>‚Ä¢ <strong>Location</strong> - London is most expensive</li>
              <li>‚Ä¢ <strong>Some decisions</strong> - investing in R&D, marketing campaigns, etc.</li>
            </ul>
          </div>
          
          <div class="bg-emerald-50 rounded-xl p-4">
            <h4 class="font-bold text-emerald-800 mb-2">üí° How to Get More Cash</h4>
            <ul class="text-emerald-700 text-sm space-y-1">
              <li>‚Ä¢ <strong>Raise funding</strong> from investors (but you lose equity)</li>
              <li>‚Ä¢ <strong>Complete milestones</strong> - each gives a cash bonus</li>
              <li>‚Ä¢ <strong>Win mini-games</strong> - conferences and pitches earn money</li>
            </ul>
          </div>
        `
      },
      5: {
        title: "Understanding Runway ‚è≥",
        icon: "üèÉ",
        content: `
          <p class="text-slate-600 mb-4"><strong>Runway = Cash √∑ Burn Rate</strong>. It tells you how many quarters you can survive 
          at your current spending rate.</p>
          
          <!-- Runway gauge -->
          <div class="bg-slate-100 rounded-xl p-4 mb-4">
            <div class="text-center text-sm text-slate-600 mb-3">Runway Health Indicator</div>
            <div class="flex items-center gap-1 mb-2">
              <div class="flex-1 h-8 bg-rose-500 rounded-l-lg flex items-center justify-center text-white text-xs font-bold">1-2q üò∞</div>
              <div class="flex-1 h-8 bg-amber-500 flex items-center justify-center text-white text-xs font-bold">3-4q üòü</div>
              <div class="flex-1 h-8 bg-emerald-500 rounded-r-lg flex items-center justify-center text-white text-xs font-bold">5+q üòä</div>
            </div>
            <div class="text-center text-xs text-slate-500">The higher your runway, the safer you are</div>
          </div>
          
          <div class="grid grid-cols-2 gap-3">
            <div class="bg-rose-50 rounded-lg p-3 border border-rose-200">
              <div class="font-bold text-rose-700 text-sm mb-1">‚ö† Danger Zone (1-2q)</div>
              <p class="text-rose-600 text-xs">Raise funding immediately or you'll run out of cash!</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-3 border border-amber-200">
              <div class="font-bold text-amber-700 text-sm mb-1">üòü Caution (3-4q)</div>
              <p class="text-amber-600 text-xs">Start thinking about your next fundraise.</p>
            </div>
            <div class="bg-emerald-50 rounded-lg p-3 border border-emerald-200">
              <div class="font-bold text-emerald-700 text-sm mb-1">üòä Safe (5+q)</div>
              <p class="text-emerald-600 text-xs">Comfortable runway. Focus on growing!</p>
            </div>
            <div class="bg-sky-50 rounded-lg p-3 border border-sky-200">
              <div class="font-bold text-sky-700 text-sm mb-1">üí° Pro Tip</div>
              <p class="text-sky-600 text-xs">Always keep runway above 3 quarters if possible.</p>
            </div>
          </div>
        `
      },
      6: {
        title: "Understanding Valuation üìà",
        icon: "üíé",
        content: `
          <p class="text-slate-600 mb-4"><strong>Valuation is what your company is worth.</strong> Higher valuation means 
          better funding terms and a bigger exit if you win.</p>
          
          <!-- Valuation growth visual -->
          <div class="bg-gradient-to-r from-indigo-50 to-violet-50 rounded-xl p-4 mb-4 border border-indigo-200">
            <div class="text-center mb-3 text-sm text-indigo-700 font-medium">Valuation Growth Path</div>
            <div class="flex items-end justify-around h-24 gap-2">
              <div class="flex flex-col items-center">
                <div class="w-12 bg-indigo-300 rounded-t" style="height: 30px"></div>
                <div class="text-xs mt-1 text-slate-600">Start</div>
                <div class="text-xs text-indigo-600 font-bold">¬£800k</div>
              </div>
              <div class="flex flex-col items-center">
                <div class="w-12 bg-indigo-400 rounded-t" style="height: 50px"></div>
                <div class="text-xs mt-1 text-slate-600">M1</div>
                <div class="text-xs text-indigo-600 font-bold">¬£2M</div>
              </div>
              <div class="flex flex-col items-center">
                <div class="w-12 bg-indigo-500 rounded-t" style="height: 70px"></div>
                <div class="text-xs mt-1 text-slate-600">M2</div>
                <div class="text-xs text-indigo-600 font-bold">¬£5M</div>
              </div>
              <div class="flex flex-col items-center">
                <div class="w-12 bg-indigo-600 rounded-t" style="height: 96px"></div>
                <div class="text-xs mt-1 text-slate-600">M3</div>
                <div class="text-xs text-indigo-600 font-bold">¬£15M+</div>
              </div>
            </div>
          </div>
          
          <div class="bg-emerald-50 rounded-xl p-4 mb-3">
            <h4 class="font-bold text-emerald-800 mb-2">üìà What Increases Valuation?</h4>
            <ul class="text-emerald-700 text-sm space-y-1">
              <li>‚Ä¢ <strong>Completing milestones</strong> - biggest jumps</li>
              <li>‚Ä¢ <strong>Growing your metrics</strong> - Science, Product, Marketing</li>
              <li>‚Ä¢ <strong>Market conditions</strong> - AI hype helps!</li>
            </ul>
          </div>
          
          <div class="bg-violet-50 rounded-xl p-4">
            <h4 class="font-bold text-violet-800 mb-2">üí° Why It Matters</h4>
            <p class="text-violet-700 text-sm">When you raise funding, higher valuation = less equity given away. 
            At ¬£1M valuation, raising ¬£200k costs 20% equity. At ¬£2M valuation, same ¬£200k only costs 10%!</p>
          </div>
        `
      },
      7: {
        title: "Milestones: Key to Victory üéØ",
        icon: "üèÖ",
        content: `
          <p class="text-slate-600 mb-4"><strong>Milestones are your main objectives.</strong> Complete all 3 to win the game. 
          Each milestone has requirements and a deadline.</p>
          
          <!-- Milestone mockup -->
          <div class="bg-white border-2 border-slate-200 rounded-xl p-4 mb-4 shadow-sm">
            <div class="flex items-center justify-between mb-3">
              <div>
                <div class="text-xs text-slate-500 uppercase tracking-wide">Current Milestone</div>
                <div class="font-bold text-slate-800">üî¨ First Prototype</div>
              </div>
              <div class="text-right">
                <div class="text-xs text-slate-500">Deadline</div>
                <div class="font-bold text-amber-600">Q4 (3 quarters left)</div>
              </div>
            </div>
            <div class="mb-2">
              <div class="flex justify-between text-xs mb-1">
                <span class="text-slate-600">Progress</span>
                <span class="font-bold text-emerald-600">65%</span>
              </div>
              <div class="h-4 bg-slate-100 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-emerald-400 to-emerald-500 rounded-full" style="width: 65%"></div>
              </div>
            </div>
            <div class="text-xs text-slate-500">Focus: <span class="text-indigo-600 font-medium">Research + Product</span></div>
          </div>
          
          <div class="grid grid-cols-3 gap-2 mb-4">
            <div class="bg-indigo-50 rounded-lg p-3 text-center border border-indigo-200">
              <div class="text-xl mb-1">üî¨</div>
              <div class="font-bold text-indigo-800 text-xs">M1: Prototype</div>
              <div class="text-indigo-600 text-[10px]">Research + Dev</div>
            </div>
            <div class="bg-violet-50 rounded-lg p-3 text-center border border-violet-200">
              <div class="text-xl mb-1">üöÄ</div>
              <div class="font-bold text-violet-800 text-xs">M2: Market Fit</div>
              <div class="text-violet-600 text-[10px]">Dev + Marketing</div>
            </div>
            <div class="bg-emerald-50 rounded-lg p-3 text-center border border-emerald-200">
              <div class="text-xl mb-1">üìà</div>
              <div class="font-bold text-emerald-800 text-xs">M3: Scale</div>
              <div class="text-emerald-600 text-[10px]">All areas</div>
            </div>
          </div>
          
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚ö† Important!</h4>
            <p class="text-amber-700 text-sm">Focus on decisions that boost the <strong>focus areas</strong> shown for your current milestone. 
            Research + Product choices are most valuable during Milestone 1!</p>
          </div>
        `
      },
      8: {
        title: "Setup Steps: Founder & Startup üè¢",
        icon: "üë§",
        content: `
          <p class="text-slate-600 mb-4">When you start the game, you'll first <strong>create your founder</strong>-choosing 
          a background like Academic, Serial Founder, or Technical Prodigy. Then you'll <strong>choose which AI startup to run</strong>.</p>
          
          <div class="bg-violet-50 rounded-xl p-4 mb-4">
            <h4 class="font-bold text-violet-800 mb-2">üë§ Your Founder</h4>
            <p class="text-violet-700 text-sm">Your founder's background affects starting bonuses-an Academic has research strengths, 
            while a Dealmaker excels at commercial activities. Pick what fits your playstyle!</p>
          </div>
          
          <!-- Startup selection mockup -->
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="border-2 border-slate-200 rounded-xl p-3 bg-white hover:border-indigo-400 transition-colors">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-10 h-10 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-lg flex items-center justify-center text-white text-lg">üß¨</div>
                <div>
                  <div class="text-xs text-slate-500">BioTech</div>
                  <div class="font-bold text-slate-800 text-sm">Aether BioLabs</div>
                </div>
              </div>
              <p class="text-xs text-slate-600">AI-powered drug discovery</p>
            </div>
            <div class="border-2 border-indigo-400 rounded-xl p-3 bg-indigo-50">
              <div class="flex items-center gap-2 mb-2">
                <div class="w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center text-white text-lg">ü§ñ</div>
                <div>
                  <div class="text-xs text-slate-500">Robotics</div>
                  <div class="font-bold text-slate-800 text-sm">Forged Dynamics</div>
                </div>
              </div>
              <p class="text-xs text-slate-600">Autonomous warehouse robots</p>
              <div class="text-xs text-indigo-600 font-medium mt-1">‚úì Selected</div>
            </div>
          </div>
          
          <div class="bg-sky-50 rounded-xl p-4">
            <h4 class="font-bold text-sky-800 mb-2">üí° Tip for Beginners</h4>
            <p class="text-sky-700 text-sm">All startups are balanced for difficulty. Choose based on what sounds interesting to you!</p>
          </div>
        `
      },
      9: {
        title: "Setup: Pick Your Location üìç",
        icon: "üó∫",
        content: `
          <p class="text-slate-600 mb-4"><strong>Location affects your costs and starting bonuses.</strong> 
          London is expensive but prestigious. Other cities are cheaper with different advantages.</p>
          
          <!-- Location selection mockup -->
          <div class="bg-white border rounded-xl p-3 mb-4 space-y-2">
            <div class="flex items-center justify-between p-2 bg-rose-50 border border-rose-200 rounded-lg">
              <div class="flex items-center gap-2">
                <span class="text-lg">üèõ</span>
                <div>
                  <div class="font-bold text-sm">London</div>
                  <div class="text-xs text-slate-500">Tech hub, investors nearby</div>
                </div>
              </div>
              <div class="text-right text-xs">
                <div class="text-rose-600 font-bold">¬£¬£¬£ Expensive</div>
                <div class="text-emerald-600">+5 Marketing</div>
              </div>
            </div>
            <div class="flex items-center justify-between p-2 bg-indigo-50 border border-indigo-200 rounded-lg">
              <div class="flex items-center gap-2">
                <span class="text-lg">üéì</span>
                <div>
                  <div class="font-bold text-sm">Oxford</div>
                  <div class="text-xs text-slate-500">University talent pool</div>
                </div>
              </div>
              <div class="text-right text-xs">
                <div class="text-amber-600 font-bold">¬£¬£ Moderate</div>
                <div class="text-emerald-600">+10 Research</div>
              </div>
            </div>
            <div class="flex items-center justify-between p-2 bg-slate-50 border rounded-lg">
              <div class="flex items-center gap-2">
                <span class="text-lg">üè¥</span>
                <div>
                  <div class="font-bold text-sm">Edinburgh</div>
                  <div class="text-xs text-slate-500">Strong AI community</div>
                </div>
              </div>
              <div class="text-right text-xs">
                <div class="text-emerald-600 font-bold">¬£ Affordable</div>
                <div class="text-emerald-600">+5 Research, +5 Dev</div>
              </div>
            </div>
          </div>
          
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚ö† Cost Matters!</h4>
            <p class="text-amber-700 text-sm">London salaries are 20-30% higher than other cities. 
            If you're worried about running out of money, a cheaper location gives you more runway. 
            <strong>Edinburgh or Manchester are great for beginners.</strong></p>
          </div>
        `
      },
      10: {
        title: "Setup: Select Funding Path üí∞",
        icon: "üè¶",
        content: `
          <p class="text-slate-600 mb-4"><strong>Your starting funding determines how much cash and equity you begin with.</strong> 
          More funding = more runway, but less ownership.</p>
          
          <!-- Funding path mockup -->
          <div class="space-y-3 mb-4">
            <div class="border-2 border-slate-200 rounded-xl p-3 bg-white">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center text-2xl">ü•æ</div>
                  <div>
                    <div class="font-bold text-slate-800">Bootstrap</div>
                    <div class="text-xs text-slate-500">Self-funded, full control</div>
                  </div>
                </div>
                <div class="text-right text-sm">
                  <div class="text-emerald-600 font-bold">¬£150k cash</div>
                  <div class="text-violet-600">100% equity</div>
                </div>
              </div>
              <div class="mt-2 text-xs text-amber-600 bg-amber-50 p-2 rounded">‚ö† Hardest - very short runway!</div>
            </div>
            
            <div class="border-2 border-indigo-400 rounded-xl p-3 bg-indigo-50">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 bg-sky-100 rounded-lg flex items-center justify-center text-2xl">üëº</div>
                  <div>
                    <div class="font-bold text-slate-800">Angel Investment</div>
                    <div class="text-xs text-slate-500">Wealthy individual investor</div>
                  </div>
                </div>
                <div class="text-right text-sm">
                  <div class="text-emerald-600 font-bold">¬£350k cash</div>
                  <div class="text-violet-600">85% equity</div>
                </div>
              </div>
              <div class="mt-2 text-xs text-emerald-600 bg-emerald-50 p-2 rounded">‚úì Recommended for beginners</div>
            </div>
            
            <div class="border-2 border-slate-200 rounded-xl p-3 bg-white">
              <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                  <div class="w-12 h-12 bg-violet-100 rounded-lg flex items-center justify-center text-2xl">üèõ</div>
                  <div>
                    <div class="font-bold text-slate-800">VC Funding</div>
                    <div class="text-xs text-slate-500">Venture capital fund</div>
                  </div>
                </div>
                <div class="text-right text-sm">
                  <div class="text-emerald-600 font-bold">¬£600k cash</div>
                  <div class="text-violet-600">70% equity</div>
                </div>
              </div>
              <div class="mt-2 text-xs text-slate-500 bg-slate-50 p-2 rounded">More cash, but investor has expectations</div>
            </div>
          </div>
          
          <div class="bg-sky-50 rounded-xl p-4">
            <h4 class="font-bold text-sky-800 mb-2">üí° Beginner Recommendation</h4>
            <p class="text-sky-700 text-sm">Choose <strong>Angel Investment</strong> for your first game. 
            It gives you enough runway to learn without the pressure of Bootstrap or the complexity of VC expectations.</p>
          </div>
        `
      },
      11: {
        title: "Setup: Hire Your Team üë•",
        icon: "üëî",
        content: `
          <p class="text-slate-600 mb-4"><strong>You'll hire 3 executives</strong>-one each for Research, Product, and Sales. 
          Each has different skills and salary costs.</p>
          
          <!-- Hiring mockup -->
          <div class="bg-white border rounded-xl p-4 mb-4">
            <div class="text-center mb-3">
              <span class="px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium">Hiring: Head of Research üî¨</span>
            </div>
            <div class="grid grid-cols-2 gap-3">
              <div class="border-2 border-slate-200 rounded-lg p-3 hover:border-indigo-400 transition-colors">
                <div class="flex items-center gap-2 mb-2">
                  <div class="w-10 h-10 bg-slate-200 rounded-full"></div>
                  <div>
                    <div class="font-bold text-sm">Dr. Sarah Chen</div>
                    <div class="text-xs text-slate-500">Former CortexAI</div>
                  </div>
                </div>
                <div class="flex justify-between text-xs">
                  <span class="text-emerald-600">+12 Research</span>
                  <span class="text-rose-600">¬£25k/q</span>
                </div>
              </div>
              <div class="border-2 border-indigo-400 rounded-lg p-3 bg-indigo-50">
                <div class="flex items-center gap-2 mb-2">
                  <div class="w-10 h-10 bg-slate-200 rounded-full"></div>
                  <div>
                    <div class="font-bold text-sm">Dr. James Wright</div>
                    <div class="text-xs text-slate-500">University spinout</div>
                  </div>
                </div>
                <div class="flex justify-between text-xs">
                  <span class="text-emerald-600">+8 Research</span>
                  <span class="text-rose-600">¬£18k/q</span>
                </div>
                <div class="text-xs text-indigo-600 font-medium mt-1">‚úì Selected</div>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3">
              <h4 class="font-bold text-emerald-700 text-sm mb-1">High Skill = High Cost</h4>
              <p class="text-emerald-600 text-xs">Star performers boost stats more but cost more per quarter.</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-3">
              <h4 class="font-bold text-amber-700 text-sm mb-1">Watch Your Burn!</h4>
              <p class="text-amber-600 text-xs">Three expensive execs can eat through cash fast.</p>
            </div>
          </div>
          
          <div class="bg-sky-50 rounded-xl p-4">
            <h4 class="font-bold text-sky-800 mb-2">üí° Beginner Tip</h4>
            <p class="text-sky-700 text-sm">For your first game, pick <strong>mid-tier executives</strong> (not the cheapest or most expensive). 
            This balances capability with affordability. You can always hire better people later!</p>
          </div>
        `
      },
      12: {
        title: "The Main Game Screen üñ•",
        icon: "üéÆ",
        content: `
          <p class="text-slate-600 mb-4">After setup, you'll see the main game screen. <strong>Let's learn what each section does.</strong></p>
          
          <!-- Main screen layout mockup -->
          <div class="bg-slate-800 rounded-xl p-2 mb-4">
            <div class="bg-slate-700 rounded p-1 mb-2 text-white text-xs text-center">üìä Header Bar (always visible)</div>
            <div class="flex gap-2">
              <div class="flex-1 bg-white rounded p-2">
                <div class="bg-indigo-100 rounded p-2 mb-2 text-center text-xs text-indigo-700 font-medium">üìã Decision Area</div>
                <div class="bg-slate-100 rounded p-1 text-xs text-slate-500 text-center mb-2">Executive presents options</div>
                <div class="grid grid-cols-3 gap-1">
                  <div class="bg-emerald-100 rounded p-1 text-[8px] text-center">Option A</div>
                  <div class="bg-amber-100 rounded p-1 text-[8px] text-center">Option B</div>
                  <div class="bg-rose-100 rounded p-1 text-[8px] text-center">Pass</div>
                </div>
              </div>
              <div class="w-48 bg-slate-100 rounded p-2">
                <div class="text-xs font-medium text-slate-700 mb-2">üìà Company Dashboard</div>
                <div class="space-y-1 text-[8px]">
                  <div class="bg-white rounded p-1">Milestone Progress</div>
                  <div class="bg-white rounded p-1">Action Points</div>
                  <div class="bg-white rounded p-1">Team Moods</div>
                  <div class="bg-white rounded p-1">Stats</div>
                  <div class="bg-white rounded p-1">Hire/Fire</div>
                  <div class="bg-white rounded p-1">Raise Funding</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3">
            <div class="bg-indigo-50 rounded-lg p-3 border border-indigo-200">
              <h4 class="font-bold text-indigo-700 text-sm mb-1">üìã Decision Area</h4>
              <p class="text-indigo-600 text-xs">This is where you spend most of your time. Each executive presents strategic options. Choose wisely!</p>
            </div>
            <div class="bg-slate-50 rounded-lg p-3 border border-slate-200">
              <h4 class="font-bold text-slate-700 text-sm mb-1">üìà Dashboard</h4>
              <p class="text-slate-600 text-xs">Shows your progress, stats, team, and key actions like hiring or fundraising.</p>
            </div>
          </div>
        `
      },
      13: {
        title: "The Decision Cards üÉè",
        icon: "üìã",
        content: `
          <p class="text-slate-600 mb-4"><strong>Each quarter, your executives present strategic options.</strong> 
          Here's how to read a decision card:</p>
          
          <!-- Decision card mockup -->
          <div class="bg-white border-2 border-slate-200 rounded-xl p-4 mb-4 shadow-sm">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center text-2xl">üî¨</div>
              <div>
                <div class="text-xs text-slate-500">Dr. Sarah Chen ‚Ä¢ Head of Research</div>
                <div class="font-bold text-slate-800">Research Strategy</div>
              </div>
            </div>
            
            <div class="grid grid-cols-2 gap-3">
              <!-- Option A -->
              <div class="border-2 border-emerald-400 rounded-lg p-3 bg-emerald-50 relative">
                <div class="absolute -top-2 -right-2 bg-emerald-500 text-white text-xs px-2 py-0.5 rounded-full">‚≠ê Recommended</div>
                <div class="font-bold text-sm text-slate-800 mb-2">Publish Research Paper</div>
                <p class="text-xs text-slate-600 mb-2">Share findings to build academic credibility</p>
                <div class="flex items-center gap-2 text-xs">
                  <span class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded">2 AP</span>
                  <span class="text-emerald-600">+8 Science</span>
                  <span class="text-sky-600">+5 Marketing</span>
                </div>
              </div>
              
              <!-- Option B -->
              <div class="border-2 border-slate-200 rounded-lg p-3 bg-white">
                <div class="font-bold text-sm text-slate-800 mb-2">Secret R&D Push</div>
                <p class="text-xs text-slate-600 mb-2">Keep research private for competitive advantage</p>
                <div class="flex items-center gap-2 text-xs">
                  <span class="px-2 py-1 bg-indigo-100 text-indigo-700 rounded">3 AP</span>
                  <span class="text-emerald-600">+12 Science</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-3 gap-2 text-xs">
            <div class="bg-indigo-50 rounded-lg p-2 border border-indigo-200">
              <div class="font-bold text-indigo-700">AP Cost</div>
              <p class="text-indigo-600">How many Action Points it uses</p>
            </div>
            <div class="bg-emerald-50 rounded-lg p-2 border border-emerald-200">
              <div class="font-bold text-emerald-700">Effects</div>
              <p class="text-emerald-600">What stats increase/decrease</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-2 border border-amber-200">
              <div class="font-bold text-amber-700">‚≠ê Recommended</div>
              <p class="text-amber-600">Investor suggests this option</p>
            </div>
          </div>
        `
      },
      14: {
        title: "Action Points (AP) ‚ö°",
        icon: "‚ö°",
        content: `
          <p class="text-slate-600 mb-4"><strong>Action Points are your most limited resource.</strong> 
          You have 5 AP per quarter to spend on decisions. You can't do everything!</p>
          
          <!-- AP display mockup -->
          <div class="bg-gradient-to-r from-indigo-50 to-violet-50 rounded-xl p-4 mb-4 border border-indigo-200">
            <div class="text-center mb-3">
              <div class="text-sm text-slate-600 mb-1">Action Points Available</div>
              <div class="flex justify-center gap-2">
                <div class="w-10 h-10 rounded-lg bg-emerald-500 text-white flex items-center justify-center font-bold shadow">‚úì</div>
                <div class="w-10 h-10 rounded-lg bg-emerald-500 text-white flex items-center justify-center font-bold shadow">‚úì</div>
                <div class="w-10 h-10 rounded-lg bg-emerald-500 text-white flex items-center justify-center font-bold shadow">‚úì</div>
                <div class="w-10 h-10 rounded-lg bg-slate-200 text-slate-400 flex items-center justify-center font-bold">4</div>
                <div class="w-10 h-10 rounded-lg bg-slate-200 text-slate-400 flex items-center justify-center font-bold">5</div>
              </div>
              <div class="text-xs text-slate-500 mt-2">3 of 5 AP used this quarter</div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3">
              <div class="font-bold text-emerald-700 text-sm mb-1">Low AP (1-2)</div>
              <p class="text-emerald-600 text-xs">Safe, incremental moves. Less risk, moderate reward.</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-3">
              <div class="font-bold text-amber-700 text-sm mb-1">High AP (3-4)</div>
              <p class="text-amber-600 text-xs">Bold moves with bigger effects. More risk, more reward.</p>
            </div>
          </div>
          
          <div class="bg-sky-50 rounded-xl p-4">
            <h4 class="font-bold text-sky-800 mb-2">üí° Banking AP</h4>
            <p class="text-sky-700 text-sm">Unused AP (up to 2) carries over to next quarter! 
            Sometimes it's smart to save AP for a big move next quarter. Example: Save 2 AP this quarter 
            to have 7 AP next quarter for multiple high-impact decisions.</p>
          </div>
        `
      },
      15: {
        title: "How to Pick Good Decisions ü§î",
        icon: "üí°",
        content: `
          <p class="text-slate-600 mb-4"><strong>Not all decisions are equal.</strong> Here's how to evaluate your options:</p>
          
          <div class="space-y-3 mb-4">
            <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-200">
              <h4 class="font-bold text-emerald-800 mb-2">1‚É£ Check Milestone Focus</h4>
              <p class="text-emerald-700 text-sm">If your milestone needs Research + Product, prioritize decisions that boost those stats. 
              Don't waste AP on Marketing during Milestone 1!</p>
            </div>
            
            <div class="bg-indigo-50 rounded-xl p-4 border border-indigo-200">
              <h4 class="font-bold text-indigo-800 mb-2">2‚É£ Consider AP Efficiency</h4>
              <p class="text-indigo-700 text-sm">A 2 AP decision giving +10 Science is better than a 3 AP decision giving +8 Science. 
              Calculate the "points per AP" when comparing options.</p>
            </div>
            
            <div class="bg-violet-50 rounded-xl p-4 border border-violet-200">
              <h4 class="font-bold text-violet-800 mb-2">3‚É£ Read Investor Advice</h4>
              <p class="text-violet-700 text-sm">Your investors give recommendations (marked with ‚≠ê). They're often right, 
              but sometimes you'll want to ignore them for strategic reasons.</p>
            </div>
            
            <div class="bg-amber-50 rounded-xl p-4 border border-amber-200">
              <h4 class="font-bold text-amber-800 mb-2">4‚É£ Watch for Trade-offs</h4>
              <p class="text-amber-700 text-sm">Some decisions have downsides (red numbers). Make sure the benefits outweigh the costs! 
              A +15 Science / -5 Marketing might be worth it during Milestone 1.</p>
            </div>
          </div>
        `
      },
      16: {
        title: "Executive Moods üòäüò†",
        icon: "üë•",
        content: `
          <p class="text-slate-600 mb-4"><strong>Your executives have moods</strong> that affect what events they bring you. 
            Happy execs surface better opportunities; frustrated ones bring more problems. 
          Happy executives give you better choices!</p>
          
          <!-- Mood display mockup -->
          <div class="bg-white border rounded-xl p-4 mb-4">
            <div class="text-sm font-medium text-slate-700 mb-3">Team Morale</div>
            <div class="grid grid-cols-3 gap-4">
              <div class="text-center">
                <div class="relative inline-block">
                  <div class="w-14 h-14 bg-emerald-100 rounded-full flex items-center justify-center text-2xl ring-4 ring-emerald-400">
                    üòä
                  </div>
                </div>
                <div class="text-xs font-medium mt-1">Dr. Chen</div>
                <div class="text-xs text-emerald-600">Happy (+2)</div>
              </div>
              <div class="text-center">
                <div class="relative inline-block">
                  <div class="w-14 h-14 bg-slate-100 rounded-full flex items-center justify-center text-2xl ring-4 ring-slate-300">
                    üòê
                  </div>
                </div>
                <div class="text-xs font-medium mt-1">Tom Smith</div>
                <div class="text-xs text-slate-600">Neutral</div>
              </div>
              <div class="text-center">
                <div class="relative inline-block">
                  <div class="w-14 h-14 bg-amber-100 rounded-full flex items-center justify-center text-2xl ring-4 ring-amber-400">
                    üòü
                  </div>
                </div>
                <div class="text-xs font-medium mt-1">Lisa Wong</div>
                <div class="text-xs text-amber-600">Frustrated</div>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3">
              <h4 class="font-bold text-emerald-700 text-sm mb-1">üòä Make Them Happy</h4>
              <ul class="text-emerald-600 text-xs space-y-1">
                <li>‚Ä¢ Choose their presented options</li>
                <li>‚Ä¢ Pick their preferred strategy</li>
              </ul>
            </div>
            <div class="bg-rose-50 rounded-lg p-3">
              <h4 class="font-bold text-rose-700 text-sm mb-1">üò† What Upsets Them</h4>
              <ul class="text-rose-600 text-xs space-y-1">
                <li>‚Ä¢ Passing on their domain</li>
                <li>‚Ä¢ Ignoring their advice repeatedly</li>
              </ul>
            </div>
          </div>
          
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚ö† Upset Executives = Worse Options</h4>
            <p class="text-amber-700 text-sm">When an exec is frustrated or upset, the options they present become weaker. 
            Balance your decisions to keep everyone reasonably happy!</p>
          </div>
        `
      },
      17: {
        title: "Investor Guidance Panel üíº",
        icon: "üéØ",
        content: `
          <p class="text-slate-600 mb-4"><strong>Your investors give you advice each quarter.</strong> 
          This appears above the decision cards and shows what they're thinking.</p>
          
          <!-- Investor guidance mockup -->
          <div class="bg-gradient-to-r from-violet-50 to-indigo-50 border border-violet-200 rounded-xl p-4 mb-4">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-12 h-12 bg-violet-200 rounded-full flex items-center justify-center text-xl">üë§</div>
              <div>
                <div class="font-bold text-slate-800">Sarah Mitchell</div>
                <div class="text-xs text-violet-600">Angel Investor ‚Ä¢ Lead</div>
              </div>
            </div>
            <div class="bg-white rounded-lg p-3 text-sm text-slate-700">
              "Focus on building technical credibility this quarter. Research is key to unlocking partnerships."
            </div>
            <div class="flex gap-2 mt-3">
              <span class="px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs">Prioritize: Research</span>
              <span class="px-2 py-1 bg-amber-100 text-amber-700 rounded text-xs">Runway: Comfortable</span>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3">
              <h4 class="font-bold text-emerald-700 text-sm mb-1">üëç Follow Advice</h4>
              <p class="text-emerald-600 text-xs">Keeps investors happy, often good strategic guidance.</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-3">
              <h4 class="font-bold text-amber-700 text-sm mb-1">ü§î When to Ignore</h4>
              <p class="text-amber-600 text-xs">Sometimes you know better! But be prepared to explain.</p>
            </div>
          </div>
          
          <div class="bg-sky-50 rounded-xl p-4">
            <h4 class="font-bold text-sky-800 mb-2">üí° Reading Between the Lines</h4>
            <p class="text-sky-700 text-sm">Investors care about returns. If they push for fundraising, it might be too early. 
            If they want speed over quality, consider whether that's right for your situation.</p>
          </div>
        `
      },
      18: {
        title: "The Company Dashboard üìä",
        icon: "üìà",
        content: `
          <p class="text-slate-600 mb-4"><strong>The right sidebar shows your company's status.</strong> 
          Check it regularly to track progress and plan your strategy.</p>
          
          <!-- Dashboard mockup -->
          <div class="bg-slate-50 border rounded-xl p-4 mb-4 max-w-xs mx-auto">
            <div class="space-y-3">
              <!-- Milestone -->
              <div class="bg-white rounded-lg p-3 shadow-sm">
                <div class="text-xs text-slate-500 mb-1">Current Milestone</div>
                <div class="font-bold text-sm">üî¨ First Prototype</div>
                <div class="h-2 bg-slate-200 rounded-full mt-2 overflow-hidden">
                  <div class="h-full bg-emerald-500 rounded-full" style="width: 45%"></div>
                </div>
                <div class="text-xs text-slate-500 mt-1">45% ‚Ä¢ Deadline: Q4</div>
              </div>
              
              <!-- AP -->
              <div class="bg-white rounded-lg p-3 shadow-sm">
                <div class="text-xs text-slate-500 mb-1">Action Points</div>
                <div class="flex gap-1">
                  <div class="w-6 h-6 bg-emerald-500 rounded text-white text-xs flex items-center justify-center">‚úì</div>
                  <div class="w-6 h-6 bg-emerald-500 rounded text-white text-xs flex items-center justify-center">‚úì</div>
                  <div class="w-6 h-6 bg-slate-200 rounded text-slate-400 text-xs flex items-center justify-center">3</div>
                  <div class="w-6 h-6 bg-slate-200 rounded text-slate-400 text-xs flex items-center justify-center">4</div>
                  <div class="w-6 h-6 bg-slate-200 rounded text-slate-400 text-xs flex items-center justify-center">5</div>
                </div>
              </div>
              
              <!-- Stats -->
              <div class="bg-white rounded-lg p-3 shadow-sm">
                <div class="text-xs text-slate-500 mb-2">Key Stats</div>
                <div class="grid grid-cols-2 gap-2 text-xs">
                  <div><span class="text-emerald-600">üî¨ Science:</span> 32</div>
                  <div><span class="text-sky-600">üíª Product:</span> 28</div>
                  <div><span class="text-fuchsia-600">üì£ Marketing:</span> 15</div>
                  <div><span class="text-pink-600">üë• HR:</span> 45</div>
                </div>
              </div>
              
              <!-- Actions -->
              <div class="flex gap-2">
                <button class="flex-1 bg-emerald-100 text-emerald-700 text-xs py-2 rounded-lg font-medium">Hire +</button>
                <button class="flex-1 bg-violet-100 text-violet-700 text-xs py-2 rounded-lg font-medium">üí∞ Raise</button>
              </div>
            </div>
          </div>
          
          <div class="bg-indigo-50 rounded-xl p-4">
            <h4 class="font-bold text-indigo-800 mb-2">üí° What to Watch</h4>
            <ul class="text-indigo-700 text-sm space-y-1">
              <li>‚Ä¢ <strong>Milestone progress</strong> - are you on track for the deadline?</li>
              <li>‚Ä¢ <strong>Stats</strong> - which areas need boosting?</li>
              <li>‚Ä¢ <strong>Team moods</strong> - anyone getting frustrated?</li>
            </ul>
          </div>
        `
      },
      19: {
        title: "Hiring & Firing Staff üë•",
        icon: "‚ûï",
        content: `
          <p class="text-slate-600 mb-4"><strong>You can hire or fire general staff</strong> (separate from executives). 
          Staff boost your productivity but cost money each quarter.</p>
          
          <!-- Staffing controls mockup -->
          <div class="bg-white border rounded-xl p-4 mb-4 max-w-sm mx-auto">
            <div class="text-sm font-medium text-slate-700 mb-3">Staffing</div>
            <div class="flex items-center justify-between mb-2">
              <span class="text-sm text-slate-600">Current Staff:</span>
              <span class="font-bold text-lg">5</span>
            </div>
            <div class="flex items-center justify-between mb-3">
              <span class="text-sm text-slate-600">Monthly Cost:</span>
              <span class="font-bold text-rose-600">¬£25k/q</span>
            </div>
            <div class="flex gap-3">
              <button class="flex-1 bg-emerald-500 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2">
                <span class="text-lg">+</span> Hire
              </button>
              <button class="flex-1 bg-slate-200 text-slate-700 py-3 rounded-xl font-bold flex items-center justify-center gap-2">
                <span class="text-lg">‚àí</span> Fire
              </button>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3">
              <h4 class="font-bold text-emerald-700 text-sm mb-1">Benefits of Staff</h4>
              <ul class="text-emerald-600 text-xs space-y-1">
                <li>‚Ä¢ +2 to all stats per staff</li>
                <li>‚Ä¢ Faster milestone progress</li>
                <li>‚Ä¢ Scales your capabilities</li>
              </ul>
            </div>
            <div class="bg-rose-50 rounded-lg p-3">
              <h4 class="font-bold text-rose-700 text-sm mb-1">Costs of Staff</h4>
              <ul class="text-rose-600 text-xs space-y-1">
                <li>‚Ä¢ ¬£5k per staff per quarter</li>
                <li>‚Ä¢ New hires need 1Q to integrate</li>
                <li>‚Ä¢ Firing hurts morale</li>
              </ul>
            </div>
          </div>
          
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚ö† Integration Penalty</h4>
            <p class="text-amber-700 text-sm">New hires take one quarter to get up to speed. During this time, 
            they cost you 1 AP as you train them. Don't hire right before a critical deadline!</p>
          </div>
        `
      },
      20: {
        title: "Raising Funding üí∞",
        icon: "üè¶",
        content: `
          <p class="text-slate-600 mb-4"><strong>When cash runs low, you can raise more funding</strong> from investors. 
          But this costs equity (ownership) and takes effort (1 AP).</p>
          
          <!-- Raise modal mockup -->
          <div class="bg-white border rounded-xl p-4 mb-4">
            <div class="flex items-center justify-between mb-4">
              <div class="text-lg font-bold">üí∞ Raise Funding</div>
              <div class="text-sm text-slate-500">Valuation: <span class="text-emerald-600 font-bold">¬£2M</span></div>
            </div>
            
            <div class="space-y-2 mb-4">
              <div class="border-2 border-slate-200 rounded-lg p-3 hover:border-indigo-400">
                <div class="flex justify-between items-center">
                  <div>
                    <div class="font-bold text-sm">Conservative Round</div>
                    <div class="text-xs text-slate-500">Independent VC</div>
                  </div>
                  <div class="text-right">
                    <div class="text-emerald-600 font-bold">+¬£200k</div>
                    <div class="text-rose-600 text-xs">-10% equity</div>
                  </div>
                </div>
              </div>
              <div class="border-2 border-indigo-400 rounded-lg p-3 bg-indigo-50">
                <div class="flex justify-between items-center">
                  <div>
                    <div class="font-bold text-sm">Growth Round</div>
                    <div class="text-xs text-slate-500">Corporate VC</div>
                  </div>
                  <div class="text-right">
                    <div class="text-emerald-600 font-bold">+¬£400k</div>
                    <div class="text-rose-600 text-xs">-18% equity</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-emerald-50 rounded-lg p-3">
              <h4 class="font-bold text-emerald-700 text-sm mb-1">When to Raise</h4>
              <p class="text-emerald-600 text-xs">When runway drops below 3-4 quarters, or before a big push.</p>
            </div>
            <div class="bg-rose-50 rounded-lg p-3">
              <h4 class="font-bold text-rose-700 text-sm mb-1">The Trade-off</h4>
              <p class="text-rose-600 text-xs">More cash = more runway, but less ownership for you at exit.</p>
            </div>
          </div>
          
          <div class="bg-violet-50 rounded-xl p-4">
            <h4 class="font-bold text-violet-800 mb-2">üí° Timing Matters</h4>
            <p class="text-violet-700 text-sm">You can only raise <strong>once per milestone</strong>. Plan ahead! 
            Raising at higher valuation means giving away less equity for the same cash.</p>
          </div>
        `
      },
      21: {
        title: "Market Events & Shocks ‚ö°",
        icon: "üå™",
        content: `
          <p class="text-slate-600 mb-4"><strong>Starting Q3, random events can shake up your plans.</strong> 
          These "shocks" force you to make quick decisions.</p>
          
          <!-- Shock event mockup -->
          <div class="bg-gradient-to-b from-rose-500 to-rose-600 rounded-xl p-4 mb-4 text-white">
            <div class="text-center mb-3">
              <div class="text-3xl mb-2">‚ö°</div>
              <div class="text-xs uppercase tracking-wide text-rose-200">Market Shock</div>
              <div class="text-xl font-bold">Economic Downturn</div>
            </div>
            <p class="text-sm text-rose-100 text-center mb-4">
              Investors are pulling back. Funding is harder to get and valuations are dropping across the market.
            </p>
            <div class="grid grid-cols-3 gap-2">
              <button class="bg-white/20 hover:bg-white/30 rounded-lg p-2 text-xs font-medium">
                Cut Costs<br/><span class="text-rose-200">-2 Staff, +¬£50k</span>
              </button>
              <button class="bg-white/20 hover:bg-white/30 rounded-lg p-2 text-xs font-medium">
                Push Through<br/><span class="text-rose-200">No change</span>
              </button>
              <button class="bg-white/20 hover:bg-white/30 rounded-lg p-2 text-xs font-medium">
                Raise Now<br/><span class="text-rose-200">-5% extra equity</span>
              </button>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-rose-50 rounded-lg p-3">
              <h4 class="font-bold text-rose-700 text-sm mb-1">Negative Shocks</h4>
              <p class="text-rose-600 text-xs">Economic downturns, regulation, competitor moves, talent wars.</p>
            </div>
            <div class="bg-emerald-50 rounded-lg p-3">
              <h4 class="font-bold text-emerald-700 text-sm mb-1">Positive Shocks</h4>
              <p class="text-emerald-600 text-xs">AI hype cycles, government grants, partnership opportunities.</p>
            </div>
          </div>
          
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">üí° No Perfect Answer</h4>
            <p class="text-amber-700 text-sm">Shocks often have no "right" response-each option has trade-offs. 
            Consider your current situation (runway, milestone progress) when deciding!</p>
          </div>
        `
      },
      22: {
        title: "Mini-Games: Conferences, Pitches & More üéÆ",
        icon: "üé™",
        content: `
          <p class="text-slate-600 mb-4"><strong>At key moments, you'll play quick mini-games</strong> that test your skills 
          and earn rewards for your company.</p>
          
          <div class="space-y-3 mb-4">
            <!-- Conference -->
            <div class="bg-cyan-50 rounded-xl p-4 border border-cyan-200">
              <div class="flex items-center gap-3 mb-2">
                <div class="text-2xl">üé™</div>
                <div>
                  <div class="font-bold text-cyan-800">Conference Mini-Game</div>
                  <div class="text-xs text-cyan-600">After completing Milestone 1</div>
                </div>
              </div>
              <p class="text-cyan-700 text-sm mb-2">45-second action game at a trade show. Click delegates, hand out swag, 
              run demos, compete with rival booths!</p>
              <div class="text-xs text-cyan-600">Rewards: Cash, leads, industry connections</div>
            </div>
            
            <!-- Pitch -->
            <div class="bg-violet-50 rounded-xl p-4 border border-violet-200">
              <div class="flex items-center gap-3 mb-2">
                <div class="text-2xl">üé§</div>
                <div>
                  <div class="font-bold text-violet-800">Investor Pitch</div>
                  <div class="text-xs text-violet-600">After completing Milestone 2</div>
                </div>
              </div>
              <p class="text-violet-700 text-sm mb-2">30-second pitch to skeptical investors. Tell stories, show data, 
              keep their attention high while avoiding awkward moments!</p>
              <div class="text-xs text-violet-600">Rewards: Better funding terms, investor confidence</div>
            </div>
            
            <!-- Demo Day -->
            <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-200">
              <div class="flex items-center gap-3 mb-2">
                <div class="text-2xl">üè™</div>
                <div>
                  <div class="font-bold text-emerald-800">Demo Day</div>
                  <div class="text-xs text-emerald-600">After completing Milestone 3</div>
                </div>
              </div>
              <p class="text-emerald-700 text-sm mb-2">60-second booth management. Visitors approach-engage them, 
              match offers to preferences, convert high-value leads!</p>
              <div class="text-xs text-emerald-600">Rewards: Customer deals, revenue, final valuation boost</div>
            </div>
          </div>
          
          <div class="bg-sky-50 rounded-xl p-4">
            <h4 class="font-bold text-sky-800 mb-2">üí° Don't Worry!</h4>
            <p class="text-sky-700 text-sm">Mini-games are fun extras-even a poor performance won't end your game. 
            They're a chance to earn bonuses, not a risk of failure.</p>
          </div>
        `
      },
      23: {
        title: "End of Quarter: Committing üîÑ",
        icon: "‚úÖ",
        content: `
          <p class="text-slate-600 mb-4"><strong>Once you've made all your decisions, click "Commit to Advance Quarter"</strong> 
          to process everything and move to the next quarter.</p>
          
          <!-- Commit flow mockup -->
          <div class="bg-slate-50 rounded-xl p-4 mb-4">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-4">
                <div class="flex flex-col items-center">
                  <div class="w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center text-white font-bold">1</div>
                  <div class="text-xs mt-1 text-slate-600">Decisions</div>
                </div>
                <div class="w-8 h-0.5 bg-slate-300"></div>
                <div class="flex flex-col items-center">
                  <div class="w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center text-white font-bold">2</div>
                  <div class="text-xs mt-1 text-slate-600">Review</div>
                </div>
                <div class="w-8 h-0.5 bg-slate-300"></div>
                <div class="flex flex-col items-center">
                  <div class="w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center text-white font-bold">3</div>
                  <div class="text-xs mt-1 text-slate-600">Commit</div>
                </div>
                <div class="w-8 h-0.5 bg-slate-300"></div>
                <div class="flex flex-col items-center">
                  <div class="w-10 h-10 bg-slate-300 rounded-full flex items-center justify-center text-slate-500 font-bold">4</div>
                  <div class="text-xs mt-1 text-slate-600">Next Q</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="bg-white border rounded-xl p-4 mb-4">
            <div class="text-sm font-medium text-slate-700 mb-2">When you commit:</div>
            <ul class="space-y-2 text-sm">
              <li class="flex items-start gap-2">
                <span class="text-emerald-500">‚úì</span>
                <span class="text-slate-600">Decision effects are applied to your stats</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-rose-500">‚àí</span>
                <span class="text-slate-600">Burn rate is deducted from cash</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-indigo-500">üìä</span>
                <span class="text-slate-600">Milestone progress is updated</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-amber-500">üòä</span>
                <span class="text-slate-600">Executive moods are adjusted</span>
              </li>
              <li class="flex items-start gap-2">
                <span class="text-violet-500">üé≤</span>
                <span class="text-slate-600">Random events may occur</span>
              </li>
            </ul>
          </div>
          
          <div class="bg-amber-50 rounded-xl p-4">
            <h4 class="font-bold text-amber-800 mb-2">‚ö† Before Committing</h4>
            <p class="text-amber-700 text-sm">Double-check your AP usage and runway. Once you commit, 
            you can't undo! Make sure you have enough cash to survive the next quarter.</p>
          </div>
        `
      },
      24: {
        title: "Common Beginner Mistakes üö´",
        icon: "‚ö†",
        content: `
          <p class="text-slate-600 mb-4"><strong>Avoid these common pitfalls</strong> that trip up new players:</p>
          
          <div class="space-y-3 mb-4">
            <div class="bg-rose-50 rounded-xl p-4 border-l-4 border-rose-400">
              <h4 class="font-bold text-rose-800 mb-1">‚ùå Ignoring Runway</h4>
              <p class="text-rose-700 text-sm">Don't let cash run below 2 quarters of runway! Raise funding before it's desperate.</p>
            </div>
            
            <div class="bg-rose-50 rounded-xl p-4 border-l-4 border-rose-400">
              <h4 class="font-bold text-rose-800 mb-1">‚ùå Wrong Focus Areas</h4>
              <p class="text-rose-700 text-sm">Milestone 1 needs Research + Product. Don't waste AP on Marketing until M2!</p>
            </div>
            
            <div class="bg-rose-50 rounded-xl p-4 border-l-4 border-rose-400">
              <h4 class="font-bold text-rose-800 mb-1">‚ùå Hiring Spree Before Deadline</h4>
              <p class="text-rose-700 text-sm">New staff take 1Q to integrate. Don't hire right before a milestone deadline!</p>
            </div>
            
            <div class="bg-rose-50 rounded-xl p-4 border-l-4 border-rose-400">
              <h4 class="font-bold text-rose-800 mb-1">‚ùå Making Everyone Unhappy</h4>
              <p class="text-rose-700 text-sm">Constantly passing on an exec's domain tanks their mood. Unhappy execs bring you worse situations to deal with!</p>
            </div>
            
            <div class="bg-rose-50 rounded-xl p-4 border-l-4 border-rose-400">
              <h4 class="font-bold text-rose-800 mb-1">‚ùå Using All AP Every Quarter</h4>
              <p class="text-rose-700 text-sm">Sometimes banking 1-2 AP for next quarter is smarter than forcing weak decisions.</p>
            </div>
          </div>
        `
      },
      25: {
        title: "You're Ready to Play! üéì",
        icon: "üöÄ",
        content: `
          <p class="text-slate-600 mb-4">
            Congratulations! You now have a solid understanding of <strong>The AI Startup Game</strong>. 
            Here's your quick reference:
          </p>
          
          <div class="grid grid-cols-2 gap-3 mb-4">
            <div class="bg-indigo-50 rounded-lg p-3">
              <div class="font-bold text-indigo-700 text-sm mb-1">üéØ Goal</div>
              <p class="text-indigo-600 text-xs">Complete 3 milestones before Q16 or running out of cash</p>
            </div>
            <div class="bg-emerald-50 rounded-lg p-3">
              <div class="font-bold text-emerald-700 text-sm mb-1">‚ö° Action Points</div>
              <p class="text-emerald-600 text-xs">5 AP per quarter, bank up to 2 unused</p>
            </div>
            <div class="bg-amber-50 rounded-lg p-3">
              <div class="font-bold text-amber-700 text-sm mb-1">üí∞ Cash & Runway</div>
              <p class="text-amber-600 text-xs">Keep runway above 3Q, raise when needed</p>
            </div>
            <div class="bg-violet-50 rounded-lg p-3">
              <div class="font-bold text-violet-700 text-sm mb-1">üìä Focus</div>
              <p class="text-violet-600 text-xs">Match decisions to milestone focus areas</p>
            </div>
            <div class="bg-pink-50 rounded-lg p-3">
              <div class="font-bold text-pink-700 text-sm mb-1">üë• Team</div>
              <p class="text-pink-600 text-xs">Keep executives happy for better options</p>
            </div>
            <div class="bg-cyan-50 rounded-lg p-3">
              <div class="font-bold text-cyan-700 text-sm mb-1">üéÆ Mini-Games</div>
              <p class="text-cyan-600 text-xs">Fun bonus challenges after milestones</p>
            </div>
          </div>
          
          <div class="bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl p-5 text-center border-2 border-emerald-200">
            <div class="text-4xl mb-3">üçÄ</div>
            <p class="text-emerald-800 font-bold text-lg mb-1">Good luck, founder!</p>
            <p class="text-emerald-600 text-sm">Remember: 90% of startups fail, but each attempt teaches you something. 
            Don't be afraid to experiment and learn from mistakes!</p>
          </div>
          
          <div class="mt-4 text-center">
            <p class="text-slate-500 text-xs">Click "Start Game" to begin your journey ‚Üí</p>
          </div>
        `
      }
    };
    
    const t = tutorials[step];
    return `
      <div class="text-center mb-6">
        <div class="text-5xl mb-3">${t.icon}</div>
        <h2 class="text-2xl font-bold text-slate-800">${t.title}</h2>
      </div>
      ${t.content}
    `;
  }

  // ===== EXTREME MODE =====
  
  toggleExtremeMode() {
    this.extremeMode = !this.extremeMode;
    
    // Update preamble toggle (page 1)
    const togglePreamble = document.getElementById("extremeModeTogglePreamble");
    const statusPreamble = document.getElementById("extremeModeStatusPreamble");
    const detailsPreamble = document.getElementById("extremeModeDetailsPreamble");
    
    // Update venture page toggle
    const toggle = document.getElementById("extremeModeToggle");
    const status = document.getElementById("extremeModeStatus");
    const details = document.getElementById("extremeModeDetails");
    
    if (this.extremeMode) {
      // Preamble toggle
      if (togglePreamble) {
        togglePreamble.classList.remove("border-slate-600", "bg-slate-800/50", "hover:border-rose-400", "hover:bg-rose-900/30");
        togglePreamble.classList.add("border-rose-500", "bg-rose-900/50");
      }
      if (statusPreamble) {
        statusPreamble.textContent = "ON";
        statusPreamble.classList.remove("bg-slate-700", "text-slate-400");
        statusPreamble.classList.add("bg-rose-500", "text-white");
      }
      if (detailsPreamble) detailsPreamble.classList.remove("hidden");
      
      // Venture page toggle
      if (toggle) {
        toggle.classList.remove("border-slate-200", "bg-slate-50", "hover:border-rose-300", "hover:bg-rose-50");
        toggle.classList.add("border-rose-500", "bg-rose-100");
      }
      if (status) {
        status.textContent = "ON";
        status.classList.remove("bg-slate-200", "text-slate-600");
        status.classList.add("bg-rose-500", "text-white");
      }
      if (details) details.classList.remove("hidden");
      
      soundManager.playWarning();
    } else {
      // Preamble toggle
      if (togglePreamble) {
        togglePreamble.classList.add("border-slate-600", "bg-slate-800/50", "hover:border-rose-400", "hover:bg-rose-900/30");
        togglePreamble.classList.remove("border-rose-500", "bg-rose-900/50");
      }
      if (statusPreamble) {
        statusPreamble.textContent = "OFF";
        statusPreamble.classList.add("bg-slate-700", "text-slate-400");
        statusPreamble.classList.remove("bg-rose-500", "text-white");
      }
      if (detailsPreamble) detailsPreamble.classList.add("hidden");
      
      // Venture page toggle
      if (toggle) {
        toggle.classList.add("border-slate-200", "bg-slate-50", "hover:border-rose-300", "hover:bg-rose-50");
        toggle.classList.remove("border-rose-500", "bg-rose-100");
      }
      if (status) {
        status.textContent = "OFF";
        status.classList.add("bg-slate-200", "text-slate-600");
        status.classList.remove("bg-rose-500", "text-white");
      }
      if (details) details.classList.add("hidden");
      
      soundManager.playClick();
    }
  }

  renderFundingStages() {
    // At game start, only Bootstrap and Angel available
    // VC becomes available after first milestone (via follow-on funding)
    const stages = [
      { id: "bootstrap", icon: "üè†", color: "slate" },
      { id: "angel", icon: "üëº", color: "amber" }
    ];
    
    const fg = document.getElementById("fundingStageGrid");
    fg.innerHTML = stages.map(s => {
      const stage = FUNDING_STAGES[s.id];
      const funders = FUNDER_OPTIONS[s.id].map(id => FUNDERS[id]);
      const cashRange = funders.length > 1 
        ? `¬£${Math.min(...funders.map(f=>f.cash))}k - ¬£${Math.max(...funders.map(f=>f.cash))}k`
        : `¬£${funders[0].cash}k`;
      const equityMin = Math.min(...funders.map(f=>f.equity));
      const equityMax = Math.max(...funders.map(f=>f.equity));
      const equityRange = funders.length > 1 && equityMin !== equityMax
        ? `Takes ${equityMin}% - ${equityMax}%`
        : equityMin === 0 ? `Keep 100%` : `Takes ${equityMin}%`;
      
      return `
        <button onclick="game.selectFundingStage('${s.id}')" class="hire-card border-2 border-slate-200 rounded-xl p-5 text-left bg-white hover:border-${s.color}-400">
          <div class="text-3xl mb-2">${s.icon}</div>
          <div class="text-lg font-bold text-slate-800 mb-1">${stage.name}</div>
          <p class="text-sm text-slate-600 mb-3">${stage.desc}</p>
          <div class="text-xs text-slate-500">
            <div class="text-emerald-600 font-medium">Cash: ${cashRange}</div>
            <div class="${equityMax > 25 ? 'text-red-500' : ''}">${equityRange}</div>
          </div>
        </button>
      `;
    }).join("");
    
    // Add VC teaser
    fg.innerHTML += `
      <div class="border-2 border-dashed border-slate-300 rounded-xl p-5 text-left bg-slate-50 opacity-60">
        <div class="text-3xl mb-2">üè¶</div>
        <div class="text-lg font-bold text-slate-500 mb-1">VC Seed</div>
        <p class="text-sm text-slate-400 mb-3">Institutional capital with institutional expectations.</p>
        <div class="text-xs text-slate-400">
          <div class="font-medium">üîí Unlocks after Milestone 1</div>
          <div>VCs want to see traction first</div>
        </div>
      </div>
    `;
  }

  selectVenture(id) {
    this.company = COMPANIES.find(c => c.id === id);
    this.rivals = JSON.parse(JSON.stringify(RIVALS[id] || []));
    document.getElementById("companyDisplay").textContent = this.company.name;
    document.getElementById("companyDisplay").style.color = this.company.color;
    const logoEl = document.getElementById("companyLogo");
    logoEl.innerHTML = LOGOS[id];
    logoEl.classList.remove("hidden");
    
    // Play selection sound
    soundManager.playVentureSelect();
    
    // Show location selection
    this.showLocationModal();
  }
  
  showLocationModal() {
    document.getElementById("ventureModal").classList.add("hidden");
    document.getElementById("locationVentureName").textContent = this.company.name;
    
    const locations = LOCATIONS[this.company.id];
    const bonusLabels = { sci: "Research", dev: "Product", mkt: "Sales", hr: "People" };
    
    const lg = document.getElementById("locationGrid");
    lg.innerHTML = locations.map(loc => {
      const salaryText = loc.salaryMod > 0 ? `+${Math.round(loc.salaryMod * 100)}%` : 
                         `${Math.round(loc.salaryMod * 100)}%`;
      const salaryColor = loc.salaryMod > 0.15 ? "text-red-600" : 
                          loc.salaryMod > 0 ? "text-amber-600" : "text-emerald-600";
      
      return `
        <div onclick="game.selectLocation('${loc.id}')" class="hire-card border-2 border-slate-200 rounded-xl bg-white cursor-pointer hover:border-blue-400 hover:shadow-lg transition-all flex flex-col overflow-hidden">
          <!-- City Image -->
          <div class="h-20 bg-gradient-to-b from-slate-100 to-slate-50 flex items-center justify-center">
            ${loc.image}
          </div>
          
          <!-- City Name Header -->
          <div class="bg-slate-800 text-white px-4 py-2">
            <div class="flex items-center justify-between">
              <h3 class="font-bold text-base">${loc.name}</h3>
              <span class="text-xs text-slate-300">${loc.region}</span>
            </div>
            <p class="text-xs text-blue-300">"${loc.tagline}"</p>
          </div>
          
          <!-- Content -->
          <div class="p-4">
            <!-- Description -->
            <p class="text-xs text-slate-600 mb-3">${loc.description}</p>
            
            <!-- Key Stats -->
            <div class="bg-slate-50 rounded-lg p-3 mb-3">
              <div class="flex justify-between items-center mb-2">
                <span class="text-slate-600 text-sm">üí∑ Salary Costs</span>
                <span class="text-sm font-semibold ${salaryColor}">${salaryText}</span>
              </div>
              <div class="flex flex-wrap gap-1">
                ${Object.entries(loc.bonuses).map(([k, v]) => `
                  <span class="px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs rounded-full font-medium">
                    +${v} ${bonusLabels[k]}
                  </span>
                `).join("")}
              </div>
            </div>
            
            <!-- Pros -->
            <div class="mb-2">
              ${loc.pros.map(pro => `
                <div class="flex items-start gap-1 text-xs text-slate-600 mb-1">
                  <span class="text-emerald-500 flex-shrink-0">‚úì</span>
                  <span>${pro}</span>
                </div>
              `).join("")}
            </div>
            
            <!-- Cons -->
            <div>
              ${loc.cons.map(con => `
                <div class="flex items-start gap-1 text-xs text-slate-600 mb-1">
                  <span class="text-red-400 flex-shrink-0">‚úó</span>
                  <span>${con}</span>
                </div>
              `).join("")}
            </div>
          </div>
        </div>
      `;
    }).join("");
    
    document.getElementById("locationModal").classList.remove("hidden");
    document.getElementById("locationModal").classList.add("flex");
  }
  
  selectLocation(id) {
    this.location = LOCATION_MAP[id];
    soundManager.playLocationSelect();
    document.getElementById("locationModal").classList.add("hidden");
    document.getElementById("locationModal").classList.remove("flex");
    
    // Go to funding selection next (founder already selected)
    document.getElementById("fundingModal").classList.remove("hidden");
    document.getElementById("fundingModal").classList.add("flex");
  }
  
  showFounderModal() {
    // Populate profile grid with embedded portraits
    const profileGrid = document.getElementById("founderProfileGrid");
    profileGrid.innerHTML = Object.values(FOUNDER_PROFILES).map(p => {
      const portrait = FOUNDER_PORTRAITS[p.portraitStyle] || FOUNDER_PORTRAITS.style1;
      return `
        <div id="profileBtn_${p.id}"
             onclick="game.selectFounderProfile('${p.id}')"
             class="profile-card border-2 border-slate-200 rounded-xl p-4 text-left hover:border-indigo-300 hover:bg-indigo-50 transition-all cursor-pointer">
          <div class="flex items-center gap-3">
            <div class="w-14 h-14 rounded-full overflow-hidden border-2 border-slate-300 flex-shrink-0">
              ${portrait}
            </div>
            <div>
              <div class="font-bold text-slate-800 text-sm">${p.icon} ${p.name}</div>
              <p class="text-xs text-slate-500">${p.title}</p>
            </div>
          </div>
        </div>
      `;
    }).join('');
    
    // Reset state
    this.selectedProfile = null;
    this.selectedAppearance = null;
    document.getElementById("founderNameInput").value = '';
    document.getElementById("founderProfileDetail").classList.add("hidden");
    document.getElementById("founderPreviewAvatar").innerHTML = '';
    document.getElementById("founderPreviewName").textContent = "Your Founder";
    document.getElementById("founderPreviewProfile").textContent = "Select a profile";
    document.getElementById("confirmFounderBtn").disabled = true;
    
    document.getElementById("founderModal").classList.remove("hidden");
    document.getElementById("founderModal").classList.add("flex");
  }
  
  selectFounderProfile(profileId) {
    const profile = FOUNDER_PROFILES[profileId];
    if (!profile) {
      console.error('Profile not found:', profileId);
      return;
    }
    
    this.selectedProfile = profile;
    this.selectedAppearance = profile.portraitStyle;
    
    // Update button states
    Object.keys(FOUNDER_PROFILES).forEach(id => {
      const btn = document.getElementById(`profileBtn_${id}`);
      if (btn) {
        if (id === profileId) {
          btn.classList.add('border-indigo-500', 'bg-indigo-50');
          btn.classList.remove('border-slate-200', 'bg-white');
        } else {
          btn.classList.remove('border-indigo-500', 'bg-indigo-50');
          btn.classList.add('border-slate-200');
        }
      }
    });
    
    // Show detail panel with portrait
    const portrait = FOUNDER_PORTRAITS[profile.portraitStyle] || FOUNDER_PORTRAITS.style1;
    document.getElementById("founderDetailAvatar").innerHTML = portrait;
    document.getElementById("founderDetailName").textContent = `${profile.icon} ${profile.name}`;
    document.getElementById("founderDetailDesc").textContent = profile.desc;
    document.getElementById("founderDetailStrengths").textContent = profile.strengths;
    document.getElementById("founderDetailChallenges").textContent = profile.challenges;
    document.getElementById("founderProfileDetail").classList.remove("hidden");
    
    // Update preview
    document.getElementById("founderPreviewAvatar").innerHTML = portrait;
    document.getElementById("founderPreviewProfile").textContent = profile.name;
    this.updateFounderConfirmButton();
  }
  
  updateFounderName() {
    const name = document.getElementById("founderNameInput").value.trim();
    document.getElementById("founderPreviewName").textContent = name || "Your Founder";
    this.updateFounderConfirmButton();
  }
  
  updateFounderConfirmButton() {
    const name = document.getElementById("founderNameInput").value.trim();
    const hasProfile = this.selectedProfile !== null;
    document.getElementById("confirmFounderBtn").disabled = !(name && hasProfile);
  }
  
  confirmFounder() {
    const name = document.getElementById("founderNameInput").value.trim();
    if (!name || !this.selectedProfile) return;
    
    // Use portrait from the selected profile
    const portraitStyle = this.selectedProfile.portraitStyle || 'style1';
    
    this.founder = {
      name: name,
      profile: this.selectedProfile,
      appearance: portraitStyle,
      portrait: FOUNDER_PORTRAITS[portraitStyle]
    };
    
    soundManager.playFundingSelect('angel'); // Reuse sound
    document.getElementById("founderModal").classList.add("hidden");
    document.getElementById("founderModal").classList.remove("flex");
    
    // Go to venture selection next
    this.showVentureModal();
  }
  
  showVentureModal() {
    document.getElementById("ventureModal").classList.remove("hidden");
    document.getElementById("ventureModal").classList.add("flex");
    
    // Show extreme mode indicator if enabled
    const extremeIndicator = document.getElementById("extremeModeIndicatorVenture");
    if (extremeIndicator) {
      if (this.extremeMode) {
        extremeIndicator.classList.remove("hidden");
      } else {
        extremeIndicator.classList.add("hidden");
      }
    }
  }
  
  backToPreamble() {
    document.getElementById("founderModal").classList.add("hidden");
    document.getElementById("founderModal").classList.remove("flex");
    document.getElementById("preambleModal2").classList.remove("hidden");
    document.getElementById("preambleModal2").classList.add("flex");
  }
  
  backToFounder() {
    document.getElementById("ventureModal").classList.add("hidden");
    document.getElementById("ventureModal").classList.remove("flex");
    this.showFounderModal();
  }
  
  backToVenture() {
    document.getElementById("locationModal").classList.add("hidden");
    document.getElementById("locationModal").classList.remove("flex");
    this.showVentureModal();
  }

  selectFundingStage(stageId) {
    this.fundingStage = stageId;
    const stage = FUNDING_STAGES[stageId];
    const funderIds = FUNDER_OPTIONS[stageId];
    
    soundManager.playFundingSelect(stageId);
    
    document.getElementById("funderStageTitle").textContent = stage.name;
    document.getElementById("funderStageDesc").textContent = 
      stageId === "bootstrap" ? "Going it alone. No investors, no obligations." :
      stageId === "angel" ? "Choose your angel investor-they'll bring money, expertise, and opinions." :
      "Select your VC partner-this relationship will shape your company.";
    
    const fg = document.getElementById("funderGrid");
    fg.innerHTML = funderIds.map(id => {
      const f = FUNDERS[id];
      const bonusLabels = { sci: "Research", dev: "Product", mkt: "Sales", hr: "People" };
      const bonuses = Object.entries(f.bonus).filter(([k, v]) => v !== 0);
      
      return `
        <div onclick="game.selectFunder('${id}')" class="hire-card border-2 border-slate-200 rounded-xl p-4 bg-white cursor-pointer hover:border-emerald-400 hover:shadow-lg transition-all flex flex-col">
          <!-- Photo and name -->
          <div class="flex items-center gap-3 mb-3">
            <div class="w-16 h-16 flex-shrink-0 rounded-full overflow-hidden border-2 border-slate-200">
              ${f.photo}
            </div>
            <div class="min-w-0">
              <div class="font-bold text-slate-800">${f.name}</div>
              <div class="text-xs text-slate-500">${f.title}</div>
            </div>
          </div>
          
          <!-- Key financials -->
          <div class="bg-gradient-to-r from-emerald-50 to-slate-50 rounded-lg p-3 mb-3">
            <div class="flex justify-between items-center mb-1">
              <span class="text-slate-600 text-sm">Investment</span>
              <span class="text-emerald-600 font-bold text-lg">¬£${f.cash}k</span>
            </div>
            <div class="flex justify-between items-center mb-1">
              <span class="text-slate-600 text-sm">Valuation</span>
              <span class="text-slate-700 font-medium">¬£${f.val}k</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-slate-600 text-sm">Equity</span>
              <span class="${f.equity > 25 ? 'text-red-500 font-bold' : f.equity > 0 ? 'text-amber-600 font-medium' : 'text-emerald-600 font-medium'}">
                ${f.equity > 0 ? `${f.equity}% dilution` : 'Keep 100%'}
              </span>
            </div>
          </div>
          
          <!-- Description -->
          <p class="text-sm text-slate-600 mb-3 flex-grow">${f.desc}</p>
          
          <!-- Personality quote -->
          <div class="p-2 bg-amber-50 rounded border-l-2 border-amber-400 mb-3">
            <p class="text-xs text-amber-800 italic">"${f.personality}"</p>
          </div>
          
          <!-- Bonuses -->
          ${bonuses.length > 0 ? `
            <div class="flex flex-wrap gap-1 mb-2">
              ${bonuses.map(([k, v]) => `
                <span class="px-2 py-0.5 ${v > 0 ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'} text-xs rounded-full font-medium">
                  ${v > 0 ? '+' : ''}${v} ${bonusLabels[k] || k}
                </span>
              `).join("")}
            </div>
          ` : ''}
          
          <!-- Ongoing effects -->
          <div class="text-[10px] text-slate-400 border-t border-slate-100 pt-2 mt-auto">
            ${f.ongoing}
          </div>
        </div>
      `;
    }).join("");
    
    document.getElementById("fundingModal").classList.add("hidden");
    document.getElementById("funderModal").classList.remove("hidden");
    document.getElementById("funderModal").classList.add("flex");
  }

  backToFundingStage() {
    document.getElementById("funderModal").classList.add("hidden");
    document.getElementById("funderModal").classList.remove("flex");
    document.getElementById("fundingModal").classList.remove("hidden");
    document.getElementById("fundingModal").classList.add("flex");
  }
  
  backToLocation() {
    document.getElementById("fundingModal").classList.add("hidden");
    document.getElementById("fundingModal").classList.remove("flex");
    this.showLocationModal();
  }

  selectFunder(id) {
    this.funder = FUNDERS[id];
    this.funding = this.funder; // For compatibility
    
    // Apply extreme mode cash reduction (20% less)
    let startingCash = this.funder.cash;
    if (this.extremeMode) {
      startingCash = Math.round(startingCash * 0.8);
    }
    
    this.metrics.cash = startingCash;
    this.metrics.val = this.funder.val;
    // Equity is now what YOU keep (100 - what they take)
    this.metrics.equity = 100 - this.funder.equity;
    this.metrics.staff = this.company.staff;
    this.metrics.burn = this.company.burn;
    this.maxAP = 5 + this.funder.apMod;
    
    // Log journey event for initial funding
    this.logJourneyEvent('funding', {
      stage: this.fundingStage,
      funderName: this.funder.name,
      amount: startingCash,
      valuation: this.funder.val,
      equityGiven: this.funder.equity
    });
    
    // Play funding selection sound based on funding stage
    soundManager.playFundingSelect(this.fundingStage);
    soundManager.playFundingSelect(this.fundingStage);
    
    // Add to investors array (unless bootstrapped)
    if (this.funder.id !== "self") {
      // Experienced founders start with better investor relationships
      const experienceBonus = this.getFounderExperienceBonus();
      const startingRelationship = Math.min(5, 3 + experienceBonus);
      
      this.investors.push({
        funder: this.funder,
        funderId: this.funder.id,
        relationship: startingRelationship,
        isLead: true,
        joinedTurn: this.turn
      });
      
      if (experienceBonus > 0) {
        this.log(`${this.founder?.profile?.icon || 'üë§'} Your experience gives you a head start with investors.`);
      } else if (experienceBonus < 0) {
        this.log(`${this.founder?.profile?.icon || 'üë§'} As a first-time founder, you'll need to earn investor trust.`);
      }
    }
    
    // Apply funder bonus
    Object.entries(this.funder.bonus).forEach(([k, v]) => {
      if (this.metrics[k] !== undefined) this.metrics[k] += v;
    });
    
    document.getElementById("funderModal").classList.add("hidden");
    document.getElementById("funderModal").classList.remove("flex");
    this.log(`Funded by ${this.funder.name}. ${this.funder.ongoing}`);
    if (this.extremeMode) {
      this.log(`üî• EXTREME MODE: Effects hidden, advisors silent, 20% less cash. Good luck!`);
    }
    this.showMilestoneModal();
  }

  showMilestoneModal() {
    // Play milestone choice sound
    soundManager.playMilestoneChoice();
    
    const milestoneData = MILESTONES[this.company.id];
    const completedCount = this.completedMilestones.length;
    
    console.log("showMilestoneModal called:", {
      completedCount,
      completedMilestones: this.completedMilestones,
      companyId: this.company.id
    });
    
    document.getElementById("milestoneLogo").innerHTML = LOGOS[this.company.id];
    const mg = document.getElementById("milestoneGrid");
    
    let milestones = [];
    let stageKey = "";
    
    if (completedCount === 0) {
      milestones = milestoneData.m1;
      stageKey = "m1";
      document.getElementById("milestoneModalTitle").textContent = "Choose Your First Milestone";
      document.getElementById("milestoneModalDesc").textContent = "Pick your ambition level. Higher risk means higher reward-but tighter deadlines.";
    } else if (completedCount === 1) {
      milestones = milestoneData.m2;
      stageKey = "m2";
      document.getElementById("milestoneModalTitle").textContent = "Choose Your Second Milestone";
      document.getElementById("milestoneModalDesc").textContent = "Time to scale. Match your ambition to your runway and investor expectations.";
    } else if (completedCount === 2) {
      milestones = milestoneData.m3;
      stageKey = "m3";
      document.getElementById("milestoneModalTitle").textContent = "Choose Your Final Milestone";
      document.getElementById("milestoneModalDesc").textContent = "The endgame. One last push to prove your startup's worth.";
    }
    
    const focusLabels = { sci: "Research", dev: "Product", mkt: "Sales", hr: "People" };
    const focusColors = { sci: "emerald", dev: "sky", mkt: "fuchsia", hr: "pink" };
    const difficultyColors = { 
      conservative: { bg: "bg-blue-50", border: "border-blue-300", text: "text-blue-700", label: "üõ° Conservative" },
      balanced: { bg: "bg-amber-50", border: "border-amber-300", text: "text-amber-700", label: "‚öñ Balanced" },
      ambitious: { bg: "bg-red-50", border: "border-red-300", text: "text-red-700", label: "üî• Ambitious" }
    };
    
    // Check investor fit
    const fundingType = this.fundingStage?.id || "bootstrapped";
    
    mg.innerHTML = milestones.map(m => {
      const diff = difficultyColors[m.difficulty];
      const isRecommended = m.investorFit?.includes(fundingType);
      const thresholdText = Object.entries(m.threshold || {}).map(([k, v]) => `${focusLabels[k]} ${v}`).join(", ");
      
      return `
        <button data-id="${m.id}" class="hire-card border-2 ${isRecommended ? 'border-amber-400 ring-2 ring-amber-200' : 'border-slate-200'} rounded-xl p-5 text-left bg-white hover:border-amber-400 transition-all relative">
          ${isRecommended ? '<div class="absolute -top-2 -right-2 bg-amber-500 text-white text-[10px] px-2 py-0.5 rounded-full font-bold">RECOMMENDED</div>' : ''}
          <div class="flex items-center justify-between mb-2">
            <div class="flex items-center gap-2">
              <span class="text-2xl">${m.icon || 'üéØ'}</span>
              <div class="font-bold text-slate-800">${m.name}</div>
            </div>
            <span class="px-2 py-1 rounded-full ${diff.bg} ${diff.text} text-xs font-bold">${diff.label}</span>
          </div>
          <p class="text-sm text-slate-600 mb-3">${m.desc}</p>
          <div class="flex flex-wrap gap-1 mb-2">
            ${m.focus.map(f => `<span class="px-2 py-0.5 rounded-full bg-${focusColors[f]}-100 text-${focusColors[f]}-700 text-xs font-medium">${focusLabels[f]}</span>`).join('')}
          </div>
          <div class="grid grid-cols-2 gap-2 text-xs mt-3 pt-3 border-t border-slate-100">
            <div class="text-slate-500">‚è± <span class="font-medium text-slate-700">${m.time} quarters</span></div>
            <div class="text-slate-500">üéØ <span class="font-medium text-slate-700">${thresholdText}</span></div>
            <div class="text-emerald-600">üí∞ <span class="font-medium">+¬£${m.reward.cash}k cash</span></div>
            <div class="text-blue-600">üìà <span class="font-medium">+¬£${m.reward.val}k value</span></div>
          </div>
        </button>
      `;
    }).join("");
    
    mg.querySelectorAll("button").forEach(b => {
      b.onclick = () => {
        mg.querySelectorAll("button").forEach(x => {
          x.classList.remove("selected");
          if (!x.classList.contains("ring-2")) {
            x.classList.remove("border-amber-400");
            x.classList.add("border-slate-200");
          }
        });
        b.classList.add("selected", "border-amber-400");
        b.classList.remove("border-slate-200");
        this.pendingMilestone = b.dataset.id;
        this.pendingMilestoneStage = stageKey;
        const selectedM = milestones.find(m => m.id === b.dataset.id);
        document.getElementById("milestoneDeadlinePreview").textContent = `Q${this.turn + selectedM.time}`;
        document.getElementById("confirmMilestoneBtn").disabled = false;
      };
    });
    document.getElementById("confirmMilestoneBtn").disabled = true;
    
    document.getElementById("milestoneModal").classList.remove("hidden");
    document.getElementById("milestoneModal").classList.add("flex");
  }

  confirmMilestone() {
    const milestoneData = MILESTONES[this.company.id];
    const stageKey = this.pendingMilestoneStage;
    
    const milestones = milestoneData[stageKey];
    const m = milestones.find(x => x.id === this.pendingMilestone);
    
    if (!m) {
      console.error("Milestone not found:", this.pendingMilestone);
      return;
    }
    
    soundManager.playMilestoneChoice();
    
    this.milestone = { ...m, deadline: this.turn + m.time };
    this.milestoneProgress = 0;
    document.getElementById("milestoneModal").classList.add("hidden");
    
    const diffLabel = m.difficulty === "conservative" ? "üõ°" : m.difficulty === "balanced" ? "‚öñ" : "üî•";
    this.log(`${diffLabel} Milestone: ${m.name} by Q${this.milestone.deadline}`);
    
    // Only show hiring modal at game start (when team not yet hired)
    // After first milestone, team is already in place - just continue playing
    if (!this.team.research) {
      this.showHiringModal();
    } else {
      // Mid-game milestone selection - continue to next quarter
      this.saveQuarterSummary(); // Save before advancing
      this.turn++;
      this.choices = {};
      this.randomizeStartingDomain();
      this.selectQuarterEvents();
      this.update();
      this.renderBoardroom();
    }
  }
  
  randomizeStartingDomain() {
    // Randomly select which department to start with each quarter
    const domains = this.team.hr ? ["research", "dev", "marketing", "hr"] : ["research", "dev", "marketing"];
    this.currentDomain = domains[Math.floor(Math.random() * domains.length)];
  }

  showHiringModal() {
    this.hiringStep = 0;
    this.renderHireColumn("researchHires", EXECUTIVES.research, "research", "emerald");
    this.renderHireColumn("devHires", EXECUTIVES.dev, "dev", "sky");
    this.renderHireColumn("mktHires", EXECUTIVES.marketing, "marketing", "fuchsia");
    
    // Initialize wizard state
    this.updateHiringWizard();
    
    document.getElementById("hiringModal").classList.remove("hidden");
    document.getElementById("hiringModal").classList.add("flex");
  }
  
  goToHiringStep(step) {
    // Only allow going to completed steps or current step
    const canGo = (step === 0) ||
                  (step === 1 && this.team.research) ||
                  (step === 2 && this.team.research && this.team.dev);
    if (!canGo) return;
    
    this.hiringStep = step;
    this.updateHiringWizard();
  }
  
  nextHiringStep() {
    const roles = ["research", "dev", "marketing"];
    const currentRole = roles[this.hiringStep];
    
    // Must have selection for current step
    if (!this.team[currentRole]) return;
    
    if (this.hiringStep < 2) {
      this.hiringStep++;
      soundManager.playPageTurn();
      this.updateHiringWizard();
    } else {
      // Final step - start game
      this.startGame();
    }
  }
  
  prevHiringStep() {
    if (this.hiringStep > 0) {
      this.hiringStep--;
      soundManager.playPageTurn();
      this.updateHiringWizard();
    }
  }
  
  updateHiringWizard() {
    const roles = ["research", "dev", "marketing"];
    const tabColors = [
      { active: "bg-emerald-100 text-emerald-800", inactive: "bg-slate-100 text-slate-400", done: "bg-emerald-100 text-emerald-800" },
      { active: "bg-sky-100 text-sky-800", inactive: "bg-slate-100 text-slate-400", done: "bg-sky-100 text-sky-800" },
      { active: "bg-fuchsia-100 text-fuchsia-800", inactive: "bg-slate-100 text-slate-400", done: "bg-fuchsia-100 text-fuchsia-800" }
    ];
    
    // Update pages - show/hide
    for (let i = 0; i < 3; i++) {
      const page = document.getElementById(`hiringPage${i}`);
      const tab = document.getElementById(`hiringTab${i}`);
      const checkMark = document.getElementById(`hiringCheck${i}`);
      
      const isCompleted = this.team[roles[i]] !== null;
      const isCurrent = i === this.hiringStep;
      const isAccessible = i === 0 || (i === 1 && this.team.research) || (i === 2 && this.team.research && this.team.dev);
      
      // Show/hide page
      if (isCurrent) {
        page.classList.remove("hidden");
      } else {
        page.classList.add("hidden");
      }
      
      // Style tab
      tab.className = `flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm ${
        isCurrent ? tabColors[i].active : 
        isCompleted ? tabColors[i].done : 
        tabColors[i].inactive
      }`;
      tab.disabled = !isAccessible;
      tab.style.cursor = isAccessible ? "pointer" : "not-allowed";
      
      // Show/hide checkmark
      checkMark.classList.toggle("hidden", !isCompleted);
    }
    
    // Update navigation buttons
    const prevBtn = document.getElementById("hiringPrevBtn");
    const nextBtn = document.getElementById("hiringNextBtn");
    
    if (this.hiringStep === 0) {
      prevBtn.classList.add("hidden");
    } else {
      prevBtn.classList.remove("hidden");
    }
    
    const currentRole = roles[this.hiringStep];
    const hasSelection = this.team[currentRole] !== null;
    
    nextBtn.disabled = !hasSelection;
    nextBtn.textContent = this.hiringStep === 2 ? "Start the Game ‚Üí" : "Next ‚Üí";
    
    // Update equity display
    this.updateHiringStatus();
  }

  renderHireColumn(containerId, execs, role, color) {
    const container = document.getElementById(containerId);
    const bonusLabels = { sci: "Research", dev: "Product", mkt: "Sales", hr: "People" };
    
    container.innerHTML = execs.map(e => `
      <div data-id="${e.id}" class="hire-card border-2 border-slate-200 rounded-xl p-4 bg-white cursor-pointer hover:border-${color}-400 hover:shadow-lg transition-all flex flex-col">
        <!-- Photo + Name -->
        <div class="flex items-center gap-3 mb-3">
          <div class="w-14 h-14 rounded-full border-2 border-${color}-300 overflow-hidden flex-shrink-0">
            ${renderAvatar(e.avatar, e.name)}
          </div>
          <div>
            <div class="font-bold text-slate-800">${e.name}</div>
            <div class="text-xs text-${color}-600 font-medium">${e.title}</div>
            <div class="text-[10px] text-slate-400">${e.origin}</div>
          </div>
        </div>
        
        <!-- Background - full text -->
        <p class="text-xs text-slate-600 mb-3">${e.background}</p>
        
        <!-- Personality traits -->
        <div class="flex flex-wrap gap-1 mb-3">
          ${e.personality.split(", ").map(t => `<span class="px-2 py-0.5 rounded-full bg-slate-100 text-slate-600 text-[10px]">${t}</span>`).join("")}
        </div>
        
        <!-- Compensation box -->
        <div class="bg-gradient-to-r from-slate-50 to-${color}-50 rounded-lg p-3 mb-3">
          <div class="grid grid-cols-2 gap-2 text-xs">
            <div>
              <span class="text-slate-400">Salary</span>
              <div class="font-medium text-slate-700">¬£${e.wage}k/quarter</div>
            </div>
            <div>
              <span class="text-slate-400">Equity</span>
              <div class="font-medium text-amber-600">${e.equity}%</div>
            </div>
            <div class="col-span-2">
              <span class="text-slate-400">Vesting</span>
              <div class="font-medium text-slate-700">${e.vestingYears} years (${e.cliff}yr cliff)</div>
            </div>
          </div>
        </div>
        
        <!-- Bonuses -->
        <div class="flex flex-wrap gap-1 mb-3">
          ${Object.entries(e.bonus).filter(([k,v]) => v !== 0).map(([k,v]) => `
            <span class="px-2 py-0.5 ${v > 0 ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'} text-xs rounded-full font-medium">
              ${v > 0 ? '+' : ''}${v} ${bonusLabels[k]}
            </span>
          `).join("")}
        </div>
        
        <!-- Quote -->
        <div class="border-t border-slate-100 pt-2 mt-auto">
          <p class="text-[11px] text-slate-500 italic">"${e.quote}"</p>
        </div>
      </div>
    `).join("");

    container.querySelectorAll(".hire-card").forEach(card => {
      card.onclick = () => {
        container.querySelectorAll(".hire-card").forEach(c => c.classList.remove("selected"));
        card.classList.add("selected");
        this.team[role] = execs.find(e => e.id === card.dataset.id);
        soundManager.playHireSelect();
        this.updateHiringWizard();
      };
    });
  }

  updateHiringStatus() {
    const selected = [this.team.research, this.team.dev, this.team.marketing].filter(Boolean);
    const totalEquity = selected.reduce((sum, e) => sum + e.equity, 0);
    
    document.getElementById("equityCommitted").textContent = totalEquity > 0 ? 
      `Total equity: ${totalEquity.toFixed(1)}%` : "";
  }

  startGame() {
    document.getElementById("hiringModal").classList.add("hidden");
    
    // Track game start with Google Analytics
    if (typeof trackGameEvent === 'function') {
      trackGameEvent('game_started', {
        startup_name: this.startupName,
        location: this.location ? this.location.name : 'unknown',
        funder_type: this.funder ? this.funder.type : 'unknown'
      });
    }
    
    // Play setup complete sound
    soundManager.playSetupComplete();
    
    // Track equity grants
    this.equityGrants = [];
    
    // Apply location bonuses to starting metrics
    if (this.location) {
      Object.entries(this.location.bonuses).forEach(([k, v]) => {
        if (this.metrics[k] !== undefined) this.metrics[k] += v;
      });
      this.log(`üìç Based in ${this.location.name}. ${Object.entries(this.location.bonuses).map(([k,v]) => `+${v} ${k}`).join(", ")}.`);
    }
    
    // Apply founder profile bonuses
    if (this.founder && this.founder.profile) {
      const stats = this.founder.profile.stats;
      
      // Display founder in header
      const founderPortrait = document.getElementById("founderPortraitHeader");
      if (founderPortrait && this.founder.portrait) {
        founderPortrait.innerHTML = this.founder.portrait;
        founderPortrait.classList.remove("hidden");
      }
      const founderNameEl = document.getElementById("founderNameHeader");
      if (founderNameEl) {
        founderNameEl.textContent = `${this.founder.profile.icon} ${this.founder.name}`;
        founderNameEl.classList.remove("hidden");
      }
      
      // Technical ‚Üí Science bonus (+2 per point above 2)
      if (stats.technical > 2) {
        const sciBonus = (stats.technical - 2) * 2;
        this.metrics.sci += sciBonus;
      }
      
      // Commercial ‚Üí Sales bonus (+2 per point above 2)
      if (stats.commercial > 2) {
        const mktBonus = (stats.commercial - 2) * 2;
        this.metrics.mkt += mktBonus;
      }
      
      // Operational ‚Üí Burn rate reduction (¬£5k per point above 2) and HR bonus
      if (stats.operational > 2) {
        const burnReduction = (stats.operational - 2) * 5;
        this.metrics.burn = Math.max(0, this.metrics.burn - burnReduction);
        this.metrics.hr += (stats.operational - 2) * 2;
      }
      
      // Leadership ‚Üí Starting mood bonus for all execs
      if (stats.leadership > 2) {
        const moodBonus = (stats.leadership - 2) * 0.5;
        Object.keys(this.moods).forEach(d => {
          this.moods[d] = Math.min(3, this.moods[d] + moodBonus);
        });
      }
      
      // Store founder bonuses for later use (adaptability, financial, operational, leadership)
      this.founderBonuses = {
        adaptability: stats.adaptability || 2,
        financial: stats.financial || 2,
        technical: stats.technical || 2,
        commercial: stats.commercial || 2,
        operational: stats.operational || 2,
        leadership: stats.leadership || 2
      };
      
      this.log(`${this.founder.profile.icon} ${this.founder.name} (${this.founder.profile.name}) takes the helm.`);
    }
    
    // Apply exec bonuses, wages (adjusted by location), and equity
    const salaryMod = this.location ? (1 + this.location.salaryMod) : 1;
    ["research", "dev", "marketing"].forEach(role => {
      const exec = this.team[role];
      if (exec) {
        Object.entries(exec.bonus).forEach(([k, v]) => {
          if (this.metrics[k] !== undefined) this.metrics[k] += v;
        });
        // Apply location salary modifier
        const adjustedWage = Math.round(exec.wage * salaryMod);
        this.metrics.burn += adjustedWage;
        // No longer adding AP per exec - resources are scarce
        
        // Track equity grant
        this.equityGrants.push({
          name: exec.name,
          equity: exec.equity,
          vestingYears: exec.vestingYears,
          cliff: exec.cliff,
          grantQuarter: this.turn,
          vestedPercent: 0
        });
        
        // Reduce founder equity
        this.metrics.equity -= exec.equity;
      }
    });

    this.log(`Leadership team hired. ${this.equityGrants.reduce((s, g) => s + g.equity, 0).toFixed(1)}% equity granted.`);
    
    // Log journey event for game start
    this.logJourneyEvent('gameStart', {
      company: this.company?.name,
      companyType: this.company?.id,
      location: this.location?.name,
      founder: this.founder ? {
        name: this.founder.name,
        profile: this.founder.profile?.name,
        icon: this.founder.profile?.icon
      } : null,
      fundingStage: this.fundingStage,
      funder: this.funder?.name,
      team: {
        research: this.team.research?.name,
        dev: this.team.dev?.name,
        marketing: this.team.marketing?.name
      }
    });
    
    this.selectQuarterEvents();
    this.update();
    this.renderBoardroom();
  }

  // Calculate how "positive" an event is based on its choices' effects
  getEventPositivity(event) {
    if (!event?.choices) return 0;
    let score = 0;
    event.choices.forEach(c => {
      if (c.eff) {
        // Sum all effect values (positive effects add, negative subtract)
        Object.entries(c.eff).forEach(([key, val]) => {
          // Weight core metrics more heavily
          const weight = ['sci', 'dev', 'mkt', 'hr'].includes(key) ? 1.5 : 1;
          score += val * weight;
        });
      }
      // Also consider mood effects on the event
      if (c.mood) score += c.mood * 2;
    });
    return score;
  }
  
  // Select event with mood-based weighting
  // Low mood = more likely to get "worse" events (lower positivity scores)
  // High mood = slightly more likely to get "better" events
  selectEventWithMoodBias(available, mood, pool) {
    if (available.length <= 1) {
      return { event: available[0], poolIdx: pool.indexOf(available[0]) };
    }
    
    // Score each event by positivity
    const scored = available.map(e => ({ 
      event: e, 
      score: this.getEventPositivity(e),
      poolIdx: pool.indexOf(e)
    }));
    
    // Sort by score: highest (most positive) first
    scored.sort((a, b) => b.score - a.score);
    
    const n = scored.length;
    
    // Calculate weights based on mood
    // Position 0 = most positive event, position n-1 = most negative event
    const weights = scored.map((e, i) => {
      const positionRatio = n > 1 ? i / (n - 1) : 0.5; // 0 = best, 1 = worst
      
      // Base weight is 1 (equal probability)
      let weight = 1;
      
      if (mood <= -2) {
        // Very unhappy: strongly prefer negative events (2x more likely for worst)
        weight = 0.5 + positionRatio * 1.5; // 0.5 to 2.0
      } else if (mood === -1) {
        // Unhappy: moderately prefer negative events
        weight = 0.7 + positionRatio * 0.6; // 0.7 to 1.3
      } else if (mood >= 2) {
        // Very happy: slightly prefer positive events
        weight = 1.15 - positionRatio * 0.25; // 1.15 to 0.9
      } else if (mood === 1) {
        // Happy: very slightly prefer positive events
        weight = 1.08 - positionRatio * 0.15; // 1.08 to 0.93
      }
      // mood 0 or 3+: weight stays 1 (neutral)
      
      return weight;
    });
    
    // Weighted random selection
    const totalWeight = weights.reduce((a, b) => a + b, 0);
    let r = Math.random() * totalWeight;
    
    for (let i = 0; i < weights.length; i++) {
      r -= weights[i];
      if (r <= 0) {
        return { event: scored[i].event, poolIdx: scored[i].poolIdx };
      }
    }
    
    // Fallback to last event
    const last = scored[scored.length - 1];
    return { event: last.event, poolIdx: last.poolIdx };
  }

  selectQuarterEvents() {
    // Select a random event for each exec from their pool OR generic pool
    this.currentEvents = {};
    const domains = this.team.hr ? ["research", "dev", "marketing", "hr"] : ["research", "dev", "marketing"];
    
    domains.forEach(domain => {
      const exec = this.team[domain];
      if (!exec) return;
      
      // 20% chance for competitive event (if rivals exist), 15% for generic, rest character-specific
      const roll = Math.random();
      const hasRivals = this.rivals.filter(r => r.status === "active").length > 0;
      const useCompetitive = hasRivals && roll < 0.20 && COMPETITIVE_EVENTS[domain]?.length > 0;
      const useGeneric = !useCompetitive && roll < 0.35;
      
      let pool, poolType;
      if (useCompetitive) {
        pool = COMPETITIVE_EVENTS[domain] || [];
        poolType = 'competitive';
      } else if (useGeneric) {
        // Combine domain-specific generic events with universal ones
        const domainGeneric = GENERIC_EVENTS[domain] || [];
        const allGeneric = GENERIC_EVENTS.all || [];
        pool = [...domainGeneric, ...allGeneric];
        poolType = 'generic';
      } else {
        pool = CHAR_EVENTS[domain]?.[exec.id];
        poolType = 'char';
      }
      
      if (!pool || pool.length === 0) {
        // Fallback to character events if pool is empty
        pool = CHAR_EVENTS[domain]?.[exec.id];
        poolType = 'char';
      }
      if (!pool || pool.length === 0) return;
      
      // Find unused events, or reset if all used
      const eventKey = poolType === 'competitive' ? `competitive-${domain}` : poolType === 'generic' ? `generic-${domain}` : exec.id;
      let available = pool.filter((e, i) => !this.usedEvents.has(`${eventKey}-${i}`));
      if (available.length === 0) {
        // Reset used events for this pool
        pool.forEach((e, i) => this.usedEvents.delete(`${eventKey}-${i}`));
        available = pool;
      }
      
      // Pick event with mood-based weighting
      // Low mood = more likely to get negative events
      // High mood = slightly more likely to get positive events
      const mood = this.moods[domain] || 0;
      const selection = this.selectEventWithMoodBias(available, mood, pool);
      const eventIdx = selection.poolIdx;
      
      // For competitive events, inject rival name
      let selectedEvent = selection.event;
      if (poolType === 'competitive' && this.rivals.length > 0) {
        const activeRivals = this.rivals.filter(r => r.status === "active");
        if (activeRivals.length > 0) {
          const rival = activeRivals[Math.floor(Math.random() * activeRivals.length)];
          selectedEvent = this.injectRivalIntoEvent(selectedEvent, rival);
        }
      }
      
      this.currentEvents[domain] = { event: selectedEvent, idx: eventIdx, poolType };
      this.usedEvents.add(`${eventKey}-${eventIdx}`);
    });
    
    // Generate funder advice for this quarter
    this.generateFunderAdvice();
  }
  
  injectRivalIntoEvent(event, rival) {
    // Create a deep copy and replace {rival} placeholders
    const injected = JSON.parse(JSON.stringify(event));
    injected.intro = injected.intro.replace(/\{rival\}/g, rival.name);
    injected.aside = injected.aside.replace(/\{rival\}/g, rival.name);
    injected.rivalRef = rival; // Store reference for applying effects
    
    injected.choices = injected.choices.map(c => ({
      ...c,
      text: c.text.replace(/\{rival\}/g, rival.name),
      reaction: c.reaction.replace(/\{rival\}/g, rival.name)
    }));
    
    return injected;
  }
  
  generateFunderAdvice() {
    // Redirect to multi-funder version
    this.generateAllFunderAdvice();
  }
  
  generateAllFunderAdvice() {
    this.funderAdvices = [];
    
    // No advice if bootstrapped or no investors
    if (this.investors.length === 0) {
      return;
    }
    
    const domains = this.team.hr ? ["research", "dev", "marketing", "hr"] : ["research", "dev", "marketing"];
    const domainsWithEvents = domains.filter(d => this.currentEvents[d]?.event);
    
    if (domainsWithEvents.length === 0) return;
    
    // Track which domains and choices have been claimed to force disagreement
    const claimedChoices = {}; // { domain: [choiceIndices] }
    
    // Generate advice for each investor
    this.investors.forEach((investor, investorIdx) => {
      const funderId = investor.funderId;
      const adviceData = FUNDER_ADVICE[funderId];
      if (!adviceData) return;
      
      // Pick domain - try to pick different domains for different investors
      let targetDomain;
      const preferredDomains = adviceData.preferredDomains.filter(d => domainsWithEvents.includes(d));
      
      // First investor gets their preferred, subsequent investors try to pick different domains
      if (investorIdx === 0) {
        targetDomain = preferredDomains[Math.floor(Math.random() * preferredDomains.length)] || domainsWithEvents[0];
      } else {
        // Try to pick a domain not heavily claimed yet, or same domain with different choice
        const unclaimedDomains = domainsWithEvents.filter(d => !claimedChoices[d] || claimedChoices[d].length < 2);
        const preferredUnclaimed = preferredDomains.filter(d => unclaimedDomains.includes(d));
        
        if (preferredUnclaimed.length > 0) {
          targetDomain = preferredUnclaimed[Math.floor(Math.random() * preferredUnclaimed.length)];
        } else if (unclaimedDomains.length > 0) {
          targetDomain = unclaimedDomains[Math.floor(Math.random() * unclaimedDomains.length)];
        } else {
          // All domains claimed - pick one to disagree on
          targetDomain = preferredDomains[Math.floor(Math.random() * preferredDomains.length)] || domainsWithEvents[0];
        }
      }
      
      if (!targetDomain || !this.currentEvents[targetDomain]?.event) return;
      
      const event = this.currentEvents[targetDomain].event;
      const choices = event.choices;
      
      // Pick choice based on personality
      let recommendedChoice = this.pickFunderChoice(adviceData, choices, targetDomain, funderId);
      
      // Force disagreement: if another investor already picked this choice for this domain, pick differently
      if (claimedChoices[targetDomain]?.includes(recommendedChoice)) {
        const otherChoices = [0, 1, 2].filter(i => 
          i !== recommendedChoice && 
          i < choices.length && 
          !claimedChoices[targetDomain]?.includes(i)
        );
        if (otherChoices.length > 0) {
          recommendedChoice = otherChoices[Math.floor(Math.random() * otherChoices.length)];
        }
      }
      
      // 20% chance to give suboptimal advice
      if (Math.random() < 0.2) {
        const otherChoices = [0, 1, 2].filter(i => i !== recommendedChoice && i < choices.length);
        if (otherChoices.length > 0) {
          recommendedChoice = otherChoices[Math.floor(Math.random() * otherChoices.length)];
        }
      }
      
      recommendedChoice = Math.min(recommendedChoice, choices.length - 1);
      
      // Track this claim
      if (!claimedChoices[targetDomain]) claimedChoices[targetDomain] = [];
      claimedChoices[targetDomain].push(recommendedChoice);
      
      const chosenOption = choices[recommendedChoice];
      const adviceText = this.generateContextualAdvice(adviceData, chosenOption, targetDomain, funderId);
      
      this.funderAdvices.push({
        investor: investor,
        funder: investor.funder,
        funderId: funderId,
        domain: targetDomain,
        recommendedChoice: recommendedChoice,
        choiceText: chosenOption.text,
        text: adviceText.text,
        reason: adviceText.reason,
        funderName: adviceData.name,
        followedReaction: adviceData.followedReaction,
        ignoredReaction: adviceData.ignoredReaction
      });
    });
    
    // For backwards compatibility, set funderAdvice to first advice
    this.funderAdvice = this.funderAdvices[0] || null;
  }
  
  pickFunderChoice(adviceData, choices, domain, funderId = null) {
    // Each funder type has different criteria for picking choices
    const fId = funderId || (this.funder ? this.funder.id : 'techAngel');
    
    // Score each choice based on funder personality
    const scores = choices.map((c, i) => {
      let score = 0;
      const effects = c.eff || {};
      
      switch(fId) {
        case 'dragon': // Victoria: Wants visibility, sales, big moves
          score += (effects.mkt || 0) * 3;
          score += c.ap >= 3 ? 2 : 0; // Likes expensive/bold options
          score += c.cost >= 20 ? 1 : 0;
          break;
          
        case 'techAngel': // James: Wants tech quality, research
          score += (effects.sci || 0) * 3;
          score += (effects.dev || 0) * 2;
          score += c.ap === 2 ? 2 : 0; // Prefers balanced options
          break;
          
        case 'operatorAngel': // Sarah: Wants team health, sustainability
          score += (effects.hr || 0) * 3;
          score += c.ap <= 2 ? 2 : 0; // Prefers efficient options
          score += c.cost <= 15 ? 1 : 0;
          break;
          
        case 'sectorVC': // Meridian: Wants sector-specific wins
          score += (effects.sci || 0) * 2;
          score += (effects.mkt || 0) * 2;
          score += domain === 'research' ? 2 : 0;
          break;
          
        case 'tier1VC': // Northstar: Wants aggressive growth
          score += (effects.mkt || 0) * 3;
          score += c.ap >= 4 ? 3 : c.ap >= 3 ? 2 : 0;
          score += c.cost >= 25 ? 1 : 0; // Money is no object
          break;
          
        case 'corporateVC': // RELX: Wants product quality, strategic fit
          score += (effects.dev || 0) * 3;
          score += (effects.sci || 0) * 2;
          score += c.ap === 2 || c.ap === 3 ? 2 : 0; // Middle ground
          break;
          
        default:
          score += c.ap === 2 ? 1 : 0; // Default to middle option
      }
      
      return { index: i, score };
    });
    
    // Sort by score and pick the best
    scores.sort((a, b) => b.score - a.score);
    return scores[0].index;
  }
  
  generateContextualAdvice(adviceData, choice, domain, funderId = null) {
    const fId = funderId || (this.funder ? this.funder.id : 'techAngel');
    const choiceText = choice.text.toLowerCase();
    const effects = choice.eff || {};
    const ap = choice.ap;
    
    // Generate substantive advice based on funder personality and choice characteristics
    const templates = {
      dragon: {
        high_ap: [
          `This is exactly what I invested for. Big moves get big results. Yes, it costs more, but investors notice when you're willing to bet on yourself. Playing it safe won't get you on the front page of TechSummit.`,
          `I've built three companies and sold two. Every time, the breakthrough came from a bold decision like this one. Your competitors are being timid right now-this is your moment to pull ahead.`,
          `Expensive? Maybe. But cheap decisions lead to cheap outcomes. My network opens doors for companies that think big. This shows you understand what it takes to build something meaningful.`
        ],
        low_ap: [
          `Sometimes the smart play is the efficient play. This gives you room to maneuver while still making progress. Save your powder for when you really need it.`,
          `Not every decision needs to be a moonshot. This is a solid foundation move. Build credibility here, then we can discuss bigger bets next quarter.`,
          `I appreciate founders who know when to be bold and when to be smart. This is a smart move that sets up future opportunities.`
        ]
      },
      techAngel: {
        high_ap: [
          `From a technical standpoint, this is the right investment. Cutting corners on core capabilities always costs more later. I've seen too many startups fail because they tried to build on weak foundations.`,
          `The engineering team will respect this decision. Good engineers want to work on proper solutions, not hacks. This helps with retention and attracts better talent.`,
          `This might look expensive, but technical debt compounds. Spending more now on the right architecture will save you 10x in rewrites later.`
        ],
        low_ap: [
          `Clever approach. You're getting good value here without overcommitting. In my experience, the best technical decisions often start small and iterate.`,
          `This is the pragmatic choice. You can always scale up later once you've validated the approach. Smart resource management.`,
          `I like that you're not over-engineering. Build what you need now, and keep options open for the future.`
        ]
      },
      operatorAngel: {
        high_ap: [
          `Your team has been working hard-this investment shows you value sustainable growth over burnout. People notice when leadership puts resources behind the work, not just more demands.`,
          `I've run teams through tough scaling phases. What separates successful companies from failures is often investment in capabilities at moments like this. Your people will deliver if you give them the tools.`,
          `This is a significant commitment, but it sends the right message internally. Teams that feel supported take ownership. Teams that feel squeezed just hit their numbers and leave.`
        ],
        low_ap: [
          `This is a measured approach that won't overextend your team. Progress without chaos. Your ops will thank you for not creating more fires to put out.`,
          `Smart resource allocation. You can iterate on this without burning everyone out. Steady progress beats heroic sprints every time.`,
          `I like that you're being thoughtful about capacity. This keeps your team focused instead of spreading too thin.`
        ]
      },
      sectorVC: {
        high_ap: [
          `In healthcare/biotech, credibility is everything. This positions you well for the regulatory conversations and enterprise deals ahead. The public health system and big pharma want to see serious commitment.`,
          `We've seen this pattern across our portfolio-companies that invest properly in sector-specific capabilities close bigger deals faster. The upfront cost pays for itself in shortened sales cycles.`,
          `This aligns with what sophisticated buyers in this sector expect. When you're selling to hospitals and research institutions, they need to see you're building for the long term.`
        ],
        low_ap: [
          `A focused approach that shows sector awareness. You don't need to boil the ocean-targeted progress in the right areas matters more than splashy investments.`,
          `This demonstrates you understand the sector's pace. Healthcare moves deliberately, and so should you. Build trust through consistent execution.`,
          `Good tactical choice. Keep building evidence and relationships. The big opportunities come to companies with proven track records.`
        ]
      },
      tier1VC: {
        high_ap: [
          `This is the aggressive play, and that's exactly what you need right now. We invested because we believe you can build a category leader. Category leaders don't get there by playing small.`,
          `Your competition is raising and spending. Market share is being decided right now. This is not the moment for conservation-it's the moment for expansion.`,
          `Growth solves most problems. This investment accelerates your timeline to the metrics that matter for your next raise. Think about where you want to be in 18 months.`
        ],
        low_ap: [
          `Sometimes efficiency is the right play, especially if you're preparing for a push next quarter. Just don't let efficiency become an excuse for timidity.`,
          `Fine for now, but remember-we're not building a lifestyle business here. Use this quarter to set up for bigger moves.`,
          `Acceptable, but I want to see ambition in your overall strategy. Save resources now if you have a plan to deploy them aggressively later.`
        ]
      },
      corporateVC: {
        high_ap: [
          `This investment creates capabilities that could integrate well with our enterprise assets. We're thinking about the long-term strategic relationship here, and this moves in the right direction.`,
          `Enterprise customers-including us-want to work with companies building serious solutions. This shows the kind of commitment that leads to larger partnerships down the line.`,
          `Quality matters in enterprise. This investment in proper capabilities will differentiate you from competitors who cut corners. Our procurement team notices these things.`
        ],
        low_ap: [
          `A measured approach that maintains focus on quality. Enterprise deals take time, and this keeps you on the right trajectory without overextending.`,
          `Good strategic patience. Build the foundation right, and the larger opportunities will follow. We're in this for the long term.`,
          `This shows disciplined execution. Large organizations partner with startups that demonstrate they can deliver consistently, not just make promises.`
        ]
      }
    };
    
    const funderTemplates = templates[fId] || templates.techAngel;
    const apCategory = ap >= 3 ? 'high_ap' : 'low_ap';
    const options = funderTemplates[apCategory];
    const selectedText = options[Math.floor(Math.random() * options.length)];
    
    return {
      text: selectedText,
      reason: '' // Reason is now integrated into the main text
    };
  }
  
  checkFunderAdvice() {
    // No advice to check if no investors
    if (this.investors.length === 0 || this.funderAdvices.length === 0) return;
    
    // Queue for confrontations to show after all advice is processed
    this.pendingConfrontations = this.pendingConfrontations || [];
    
    // Founder experience affects how investors react
    // Experienced founders get more patience, inexperienced get less
    const experienceBonus = this.getFounderExperienceBonus();
    
    // Check each investor's advice
    this.funderAdvices.forEach(advice => {
      const investor = advice.investor;
      const adviceData = FUNDER_ADVICE[advice.funderId];
      if (!adviceData) return;
      
      // Skip if investor has already withdrawn support
      if (investor.hasWithdrawnSupport) {
        return;
      }
      
      const targetDomain = advice.domain;
      const recommendedChoice = advice.recommendedChoice;
      const actualChoice = this.choices[targetDomain];
      
      const previousRelationship = investor.relationship;
      
      // Check if advice was followed
      if (actualChoice === recommendedChoice) {
        // Followed advice - relationship improves
        investor.relationship = Math.min(5, investor.relationship + 1);
        this.log(`${advice.funderName}: ${advice.followedReaction}`);
        
        // Track consecutive follows for potential bonus
        investor.consecutiveFollows = (investor.consecutiveFollows || 0) + 1;
        investor.consecutiveIgnores = 0;
        
        // If recovering from low relationship, show positive feedback
        if (previousRelationship <= 2 && investor.relationship > 2) {
          this.log(`üíö ${advice.funderName} seems relieved: "Good to see we're getting back on track."`);
        }
      } else {
        // Ignored advice - relationship worsens
        // Experienced founders get more patience (50% chance to avoid penalty)
        // Inexperienced founders always lose relationship
        let relationshipLoss = 1;
        
        if (experienceBonus > 0 && Math.random() < 0.4) {
          // Experienced founder - 40% chance investor gives benefit of doubt
          relationshipLoss = 0;
          this.log(`${advice.funderName}: ${advice.ignoredReaction} ...but I trust your judgment.`);
        } else if (experienceBonus < 0) {
          // Inexperienced founder - harder to maintain relationships
          // 30% chance of extra penalty
          if (Math.random() < 0.3) {
            relationshipLoss = 2;
          }
          this.log(`${advice.funderName}: ${advice.ignoredReaction}`);
        } else {
          this.log(`${advice.funderName}: ${advice.ignoredReaction}`);
        }
        
        investor.relationship = Math.max(0, investor.relationship - relationshipLoss);
        
        // Track consecutive ignores
        investor.consecutiveFollows = 0;
        investor.consecutiveIgnores = (investor.consecutiveIgnores || 0) + 1;
        
        // Queue confrontation if relationship dropped to critical levels
        if (investor.relationship <= 1 && previousRelationship > investor.relationship) {
          this.pendingConfrontations.push({
            investor,
            adviceData,
            funder: advice.funder,
            isHostile: investor.relationship === 0
          });
        }
        
        // If relationship is hostile (0), mark support as withdrawn
        if (investor.relationship === 0 && !investor.hasWithdrawnSupport) {
          investor.hasWithdrawnSupport = true;
          investor.withdrawnTurn = this.turn;
          
          // Apply hostile effect penalties permanently
          if (adviceData.hostileEffect) {
            Object.entries(adviceData.hostileEffect).forEach(([k, v]) => {
              if (this.metrics[k] !== undefined) {
                this.metrics[k] = Math.max(0, this.metrics[k] + v);
              }
            });
            const effectText = Object.entries(adviceData.hostileEffect)
              .map(([k, v]) => `${STAT_LABELS[k] || k}: ${v}`)
              .join(", ");
            this.log(`‚ùå ${advice.funder.name} has withdrawn support: ${effectText}`);
          }
        }
      }
    });
    
    // Show confrontations after a delay (so log messages appear first)
    if (this.pendingConfrontations.length > 0) {
      setTimeout(() => this.showNextConfrontation(), 500);
    }
  }
  
  showNextConfrontation() {
    if (!this.pendingConfrontations || this.pendingConfrontations.length === 0) return;
    
    const conf = this.pendingConfrontations.shift();
    this.showInvestorConfrontation(conf.investor, conf.adviceData, conf.funder, conf.isHostile);
  }
  
  showInvestorConfrontation(investor, adviceData, funder, isHostile) {
    // Play confrontation sound
    this.playConfrontationSound(isHostile);
    
    // Update modal content
    const modal = document.getElementById("investorConfrontationModal");
    const header = document.getElementById("confrontationHeader");
    const photo = document.getElementById("confrontationPhoto");
    const status = document.getElementById("confrontationStatus");
    const name = document.getElementById("confrontationName");
    const title = document.getElementById("confrontationTitle");
    const quote = document.getElementById("confrontationQuote");
    const relDiv = document.getElementById("confrontationRelationship");
    const consequences = document.getElementById("confrontationConsequences");
    const consequencesList = document.getElementById("confrontationConsequencesList");
    const recoveryHint = document.getElementById("confrontationRecoveryHint");
    
    // Set header color based on severity
    if (isHostile) {
      header.className = "bg-gradient-to-r from-red-700 to-rose-800 text-white p-4";
      status.textContent = "Support Withdrawn";
    } else {
      header.className = "bg-gradient-to-r from-amber-600 to-orange-600 text-white p-4";
      status.textContent = "Investor Concerned";
    }
    
    // Set investor info
    photo.innerHTML = funder?.photo || '<div class="w-full h-full bg-red-700 flex items-center justify-center text-3xl">üò†</div>';
    photo.className = isHostile ? "w-16 h-16 rounded-full border-3 border-white/30 overflow-hidden investor-angry" : "w-16 h-16 rounded-full border-3 border-white/30 overflow-hidden";
    name.textContent = adviceData.name;
    title.textContent = funder?.title || "Investor";
    
    // Set quote
    if (isHostile) {
      quote.textContent = `"${adviceData.hostileWarning} I've given you multiple chances. I'm stepping back from active involvement."`;
    } else {
      const warningQuotes = [
        `"I'm getting concerned about the direction here. This is the second time you've ignored my advice."`,
        `"${adviceData.hostileWarning} I hope you know what you're doing."`,
        `"We need to talk about alignment. I invested because I believed we shared a vision."`
      ];
      quote.textContent = warningQuotes[Math.floor(Math.random() * warningQuotes.length)];
    }
    
    // Update relationship dots
    const rel = investor.relationship;
    const dots = [];
    for (let i = 0; i < 5; i++) {
      if (i < rel) {
        dots.push('<span class="w-3 h-3 rounded-full bg-amber-500"></span>');
      } else if (i === 0 && rel === 0) {
        dots.push('<span class="w-3 h-3 rounded-full bg-red-500"></span>');
      } else {
        dots.push('<span class="w-3 h-3 rounded-full bg-slate-600"></span>');
      }
    }
    const relLabel = isHostile ? "Hostile" : "Strained";
    const relColor = isHostile ? "text-red-400" : "text-amber-400";
    relDiv.innerHTML = `
      <span class="${relColor} font-bold">${relLabel}</span>
      <div class="flex gap-1">${dots.join('')}</div>
    `;
    
    // Set consequences
    if (isHostile) {
      consequences.className = "bg-red-900/30 border border-red-500/50 rounded-xl p-4 mb-6";
      const effects = adviceData.hostileEffect ? 
        Object.entries(adviceData.hostileEffect).map(([k, v]) => {
          const label = STAT_LABELS[k] || k;
          return `<li class="flex items-center gap-2"><span class="text-red-400">üìâ</span> ${label} ${v} (${funder?.name}'s support withdrawn)</li>`;
        }).join('') : '';
      consequencesList.innerHTML = `
        <li class="flex items-center gap-2"><span class="text-red-400">üîá</span> They will no longer provide strategic advice</li>
        <li class="flex items-center gap-2"><span class="text-red-400">üö´</span> Their ongoing support bonuses are lost</li>
        ${effects}
      `;
      recoveryHint.classList.add("hidden");
    } else {
      consequences.className = "bg-amber-900/30 border border-amber-500/50 rounded-xl p-4 mb-6";
      consequencesList.innerHTML = `
        <li class="flex items-center gap-2"><span class="text-amber-400">‚ö†</span> One more ignored suggestion may cause them to withdraw support</li>
        <li class="flex items-center gap-2"><span class="text-amber-400">üòï</span> Their advice quality may decrease while frustrated</li>
      `;
      recoveryHint.classList.remove("hidden");
    }
    
    // Show modal with shake effect if hostile
    modal.classList.remove("hidden");
    modal.classList.add("flex");
    
    if (isHostile) {
      const card = modal.querySelector(".confrontation-card");
      card.classList.add("confrontation-shake");
      setTimeout(() => card.classList.remove("confrontation-shake"), 500);
    }
  }
  
  playConfrontationSound(isHostile) {
    try {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const now = ctx.currentTime;
      
      if (isHostile) {
        // Harsh, discordant sound for hostile
        const notes = [200, 180, 150, 120];
        notes.forEach((freq, i) => {
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();
          osc.type = "sawtooth";
          osc.frequency.setValueAtTime(freq, now + i * 0.15);
          gain.gain.setValueAtTime(0, now + i * 0.15);
          gain.gain.linearRampToValueAtTime(0.1, now + i * 0.15 + 0.05);
          gain.gain.exponentialRampToValueAtTime(0.001, now + i * 0.15 + 0.3);
          osc.connect(gain);
          gain.connect(ctx.destination);
          osc.start(now + i * 0.15);
          osc.stop(now + i * 0.15 + 0.4);
        });
      } else {
        // Warning tone - descending
        const notes = [440, 370, 330];
        notes.forEach((freq, i) => {
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();
          osc.type = "triangle";
          osc.frequency.setValueAtTime(freq, now + i * 0.2);
          gain.gain.setValueAtTime(0, now + i * 0.2);
          gain.gain.linearRampToValueAtTime(0.12, now + i * 0.2 + 0.05);
          gain.gain.exponentialRampToValueAtTime(0.001, now + i * 0.2 + 0.4);
          osc.connect(gain);
          gain.connect(ctx.destination);
          osc.start(now + i * 0.2);
          osc.stop(now + i * 0.2 + 0.5);
        });
      }
    } catch (e) {
      console.log("Confrontation sound not available");
    }
  }
  
  dismissConfrontation() {
    const modal = document.getElementById("investorConfrontationModal");
    modal.classList.add("hidden");
    modal.classList.remove("flex");
    
    // Show next confrontation if any
    if (this.pendingConfrontations && this.pendingConfrontations.length > 0) {
      setTimeout(() => this.showNextConfrontation(), 300);
    }
  }

  renderBoardroom() {
    this.renderAPPips();
    this.renderExecRow();
    this.renderFunderAdvice(); // Show investor advice panel
    this.renderDecision();
    this.renderRivals();
    this.renderNews();
  }

  // Show investor advice panel with general strategic guidance
  renderFunderAdvice() {
    const panel = document.getElementById("investorAdvicePanel");
    const content = document.getElementById("investorAdviceContent");
    
    if (!panel || !content) return;
    
    // Hide if no investors, extreme mode, or bootstrapped
    if (this.extremeMode || !this.investors || this.investors.length === 0) {
      panel.classList.add("hidden");
      return;
    }
    
    // Generate strategic guidance based on investor type and current game state
    const strategicGuidance = [];
    const withdrawnInvestors = [];
    
    this.investors.forEach(investor => {
      if (!investor || !investor.funderId) return;
      
      const adviceData = FUNDER_ADVICE[investor.funderId];
      if (!adviceData) return;
      
      // Handle withdrawn investors separately
      if (investor.hasWithdrawnSupport) {
        withdrawnInvestors.push({
          investor,
          funder: investor.funder,
          name: adviceData.name
        });
        return;
      }
      
      // Generate context-aware strategic advice
      const guidance = this.getStrategicGuidance(investor, adviceData);
      if (!guidance) return;
      
      // Relationship indicator
      const rel = investor.relationship || 3;
      const relEmoji = rel >= 4 ? 'üòä' : rel >= 2 ? 'üòê' : rel === 1 ? 'üò†' : 'üö´';
      const relLabel = rel >= 4 ? 'Supportive' : rel >= 2 ? 'Neutral' : rel === 1 ? 'Frustrated' : 'Hostile';
      
      strategicGuidance.push({
        investor,
        funder: investor.funder,
        name: adviceData.name,
        guidance,
        relEmoji,
        relLabel,
        funderId: investor.funderId
      });
    });
    
    // Hide panel if no guidance generated and no withdrawn investors
    if (strategicGuidance.length === 0 && withdrawnInvestors.length === 0) {
      panel.classList.add("hidden");
      return;
    }
    
    // Show panel with content (including header)
    panel.classList.remove("hidden");
    
    // Build withdrawn investors section if any
    const withdrawnSection = withdrawnInvestors.length > 0 ? `
      <div class="mt-3 pt-3 border-t border-red-200">
        <div class="text-xs text-red-600 font-semibold uppercase tracking-wide mb-2">Support Withdrawn</div>
        ${withdrawnInvestors.map(w => `
          <div class="flex items-center gap-3 bg-red-50/50 rounded-lg p-2 opacity-60">
            <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-red-300 flex-shrink-0 grayscale">
              ${w.funder?.photo || '<div class="w-full h-full bg-red-200 flex items-center justify-center text-red-600">üíº</div>'}
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2">
                <span class="font-medium text-red-800 text-sm">${w.name}</span>
                <span class="text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full">üö´ Disengaged</span>
              </div>
              <p class="text-xs text-red-600 italic">No longer providing advice or support</p>
            </div>
          </div>
        `).join('')}
      </div>
    ` : '';
    
    content.innerHTML = `
      <div class="flex items-center gap-2 mb-3">
        <span class="text-lg">üíº</span>
        <h3 class="font-bold text-violet-800 text-sm uppercase tracking-wide">Investor Guidance This Quarter</h3>
      </div>
      ${strategicGuidance.length > 0 ? `
        <div class="space-y-2">
          ${strategicGuidance.map(g => `
            <div class="flex items-start gap-3 bg-white/60 rounded-lg p-3 ${g.investor.relationship <= 1 ? 'border border-amber-300' : ''}">
              <div class="w-12 h-12 rounded-full overflow-hidden border-2 ${g.investor.relationship <= 1 ? 'border-amber-400' : 'border-amber-300'} flex-shrink-0">
                ${g.funder?.photo || '<div class="w-full h-full bg-amber-200 flex items-center justify-center text-amber-600">üíº</div>'}
              </div>
              <div class="flex-1 min-w-0">
                <div class="flex items-center gap-2 flex-wrap mb-1">
                  <span class="font-bold text-violet-800">${g.name}</span>
                  <span class="text-xs bg-violet-200 text-violet-700 px-2 py-0.5 rounded-full">${this.getFunderTypeLabel(g.funderId)}</span>
                  <span class="text-xs ${g.investor.relationship >= 4 ? 'bg-emerald-100 text-emerald-700' : g.investor.relationship >= 2 ? 'bg-slate-100 text-slate-600' : 'bg-red-100 text-red-700'} px-2 py-0.5 rounded-full">${g.relEmoji} ${g.relLabel}</span>
                </div>
                <p class="text-sm text-slate-700">"${g.guidance}"</p>
              </div>
            </div>
          `).join('')}
        </div>
      ` : '<p class="text-sm text-slate-500 italic">No active investors providing guidance.</p>'}
      ${withdrawnSection}
    `;
  }
  
  getStrategicGuidance(investor, adviceData) {
    const funderId = investor.funderId;
    const milestone = this.milestone;
    const progress = this.milestoneProgress || 0;
    const runway = Math.floor(this.metrics.cash / this.metrics.burn);
    const quarter = this.quarter;
    
    // Context-specific guidance based on game state
    if (runway <= 3) {
      // Low runway - everyone worried about cash
      const cashAdvice = {
        dragon: "We need revenue NOW. Cut the R&D vanity projects and sell something.",
        techAngel: "Runway's tight. Focus on what moves the needle technically-cut everything else.",
        operatorAngel: "This is a people problem. Are we overstaffed? What can we trim without killing morale?",
        sectorVC: "I've seen this before. Time to focus on core competency and extend runway.",
        tier1VC: "This isn't the trajectory we signed up for. What's the plan to fix this?",
        growthVC: "Growth can wait. Survival first. What's the fastest path to cash?",
        impactVC: "Mission matters, but we can't change the world if we're dead. Prioritize.",
        corporateVC: "Our partnership pipeline might help here. Let's talk about strategic options."
      };
      return cashAdvice[funderId] || "Cash is getting tight. Let's focus on extending runway.";
    }
    
    if (progress < 30 && this.turnsUntilDeadline() <= 4) {
      // Behind on milestone
      const behindAdvice = {
        dragon: "We're behind. I don't invest in excuses. What's the plan?",
        techAngel: "The milestone's slipping. Is it a technical problem or a focus problem?",
        operatorAngel: "Is the team stretched too thin? Sometimes you need to do less, better.",
        sectorVC: "I've seen companies miss milestones. The ones that survive communicate early.",
        tier1VC: "Missing milestones is how companies die. Fix this.",
        growthVC: "Missing milestones kills momentum. What resources do you need?",
        impactVC: "Progress matters, but not at the cost of our principles. How can we accelerate responsibly?",
        corporateVC: "Let's discuss what support we can provide from our side."
      };
      return behindAdvice[funderId] || "We need to pick up the pace on this milestone.";
    }
    
    if (progress >= 80) {
      // Close to milestone
      const closeAdvice = {
        dragon: "Almost there! Don't get complacent. Push through and then let's celebrate.",
        techAngel: "Looking good. Make sure we're not cutting corners on the tech side.",
        operatorAngel: "Great progress! How's the team holding up? Don't burn them out at the finish line.",
        sectorVC: "Strong execution. Start thinking about how we position for the next phase.",
        tier1VC: "Good momentum. Let's start planning the growth push for after this.",
        growthVC: "Excellent. Let's start planning the growth push for after this milestone.",
        impactVC: "Wonderful progress. Let's make sure we're capturing the impact story.",
        corporateVC: "Good momentum. We should discuss synergies for the next phase."
      };
      return closeAdvice[funderId] || "We're close to the milestone. Keep pushing!";
    }
    
    // General strategic guidance based on investor type
    const generalAdvice = {
      dragon: [
        "What are the numbers looking like? I want to see traction.",
        "Are we getting press coverage? Visibility matters.",
        "Customer acquisition should be the priority this quarter."
      ],
      techAngel: [
        "How's the technical foundation? We need to build something defensible.",
        "Have you been talking to the developer community?",
        "Don't neglect the architecture while chasing features."
      ],
      operatorAngel: [
        "How's the team culture? Happy teams build great products.",
        "Are we hiring the right people, or just hiring fast?",
        "Make sure processes scale with the team."
      ],
      sectorVC: [
        "What are competitors doing? We need to stay ahead of market trends.",
        "Our sector expertise can help here. Let's leverage it.",
        "The regulatory landscape is shifting. Are we prepared?"
      ],
      tier1VC: [
        "What's the path to 10x growth? We need to see the trajectory.",
        "Are we outpacing competitors? Market leadership is everything.",
        "Think bigger. We didn't invest in a small outcome."
      ],
      growthVC: [
        "What's the growth rate? We need to see the trajectory.",
        "Have we identified the key growth levers?",
        "Unit economics matter. Growth at any cost isn't sustainable."
      ],
      impactVC: [
        "How are we measuring impact alongside growth?",
        "Our mission should guide every decision.",
        "Sustainable growth over quick wins."
      ],
      corporateVC: [
        "Let's explore strategic partnership opportunities.",
        "Our portfolio companies might be good partners.",
        "How does this position us in the broader ecosystem?"
      ]
    };
    
    const advicePool = generalAdvice[funderId] || ["Keep up the good work. I'm watching."];
    return advicePool[Math.floor(Math.random() * advicePool.length)];
  }
  
  turnsUntilDeadline() {
    if (!this.milestone) return 99;
    return Math.max(0, this.milestone.deadline - this.turn);
  }

  renderAPPips() {
    const used = this.getUsedAP();
    const totalAP = this.getTotalAP();
    const baseAP = this.maxAP;
    const banked = this.bankedAP;
    const remaining = totalAP - used;
    const isOver = used > totalAP;
    const overBy = isOver ? used - totalAP : 0;
    
    // Update the three boxes
    const spentBox = document.getElementById("apSpentBox");
    const leftBox = document.getElementById("apLeftBox");
    const bankedBox = document.getElementById("apBankedBox");
    
    // Spent box
    document.getElementById("apSpentNum").textContent = used;
    spentBox.className = isOver 
      ? "bg-red-200 rounded-lg p-2 text-center"
      : used > 0 
        ? "bg-slate-200 rounded-lg p-2 text-center" 
        : "bg-slate-200 rounded-lg p-2 text-center";
    document.getElementById("apSpentNum").className = isOver
      ? "text-2xl font-bold text-red-600"
      : used > 0
        ? "text-2xl font-bold text-slate-500"
        : "text-2xl font-bold text-slate-400";
    
    // Left box
    document.getElementById("apLeftNum").textContent = isOver ? `-${overBy}` : remaining;
    document.getElementById("apLeftLabel").textContent = isOver ? "Over!" : "Left";
    if (isOver) {
      leftBox.className = "bg-red-500 rounded-lg p-2 text-center shadow-md";
      document.getElementById("apLeftNum").className = "text-2xl font-bold text-white";
      document.getElementById("apLeftLabel").className = "text-[10px] text-red-100 font-medium uppercase tracking-wide";
    } else if (remaining === 0) {
      leftBox.className = "bg-slate-400 rounded-lg p-2 text-center";
      document.getElementById("apLeftNum").className = "text-2xl font-bold text-white";
      document.getElementById("apLeftLabel").className = "text-[10px] text-slate-200 font-medium uppercase tracking-wide";
    } else if (remaining <= 2) {
      leftBox.className = "bg-amber-500 rounded-lg p-2 text-center shadow-md";
      document.getElementById("apLeftNum").className = "text-2xl font-bold text-white";
      document.getElementById("apLeftLabel").className = "text-[10px] text-amber-100 font-medium uppercase tracking-wide";
    } else {
      leftBox.className = "bg-emerald-500 rounded-lg p-2 text-center shadow-md";
      document.getElementById("apLeftNum").className = "text-2xl font-bold text-white";
      document.getElementById("apLeftLabel").className = "text-[10px] text-emerald-100 font-medium uppercase tracking-wide";
    }
    
    // Banked box
    document.getElementById("apBankedNum").textContent = banked > 0 ? `+${banked}` : "0";
    if (banked > 0) {
      bankedBox.className = "bg-amber-100 rounded-lg p-2 text-center border border-amber-300";
      document.getElementById("apBankedNum").className = "text-2xl font-bold text-amber-600";
    } else {
      bankedBox.className = "bg-slate-100 rounded-lg p-2 text-center border border-dashed border-slate-300";
      document.getElementById("apBankedNum").className = "text-2xl font-bold text-slate-300";
    }
    
    // Update progress bar
    const totalForBar = isOver ? used : totalAP;
    const spentPercent = (Math.min(used, totalAP) / totalForBar) * 100;
    const baseRemaining = Math.max(0, baseAP - used);
    const basePercent = (baseRemaining / totalForBar) * 100;
    const bankedRemaining = Math.max(0, remaining - baseRemaining);
    const bankedPercent = (bankedRemaining / totalForBar) * 100;
    const overPercent = isOver ? (overBy / totalForBar) * 100 : 0;
    
    document.getElementById("apBarSpent").style.width = `${spentPercent}%`;
    document.getElementById("apBarBase").style.width = `${basePercent}%`;
    document.getElementById("apBarBanked").style.width = `${bankedPercent}%`;
    document.getElementById("apBarOver").style.width = `${overPercent}%`;
    
    // Update totals with breakdown
    const staffBonus = this.getStaffAPBonus();
    const penalty = this.staffAPPenalty;
    const fundingCost = this.fundingAPCost || 0;
    let baseText = `Base: ${this.maxAP}`;
    if (this.bankedAP > 0) baseText += ` +${this.bankedAP} banked`;
    if (staffBonus > 0) baseText += ` +${staffBonus} staff`;
    if (penalty > 0) baseText += ` ‚àí${penalty} disruption`;
    if (fundingCost > 0) baseText += ` ‚àí${fundingCost} fundraising`;
    document.getElementById("apBaseDisplay").textContent = baseText;
    document.getElementById("apTotalDisplay").textContent = totalAP;
    document.getElementById("estCost").textContent = `¬£${this.getEstCost()}k`;
    
    // Container styling for over budget
    const container = document.getElementById("apTrackerContainer");
    const displayArea = document.getElementById("apDisplayArea");
    if (isOver) {
      container.className = "bg-white rounded-xl shadow-sm p-4 border-2 border-red-300";
      displayArea.className = "bg-red-50 rounded-lg p-3";
    } else {
      container.className = "bg-white rounded-xl shadow-sm p-4 border border-slate-200";
      displayArea.className = "bg-slate-100 rounded-lg p-3";
    }
    
    // Warning and commit button
    document.getElementById("apWarning").classList.toggle("hidden", !isOver);
    document.getElementById("commitBtn").disabled = !this.allChosen() || isOver;
  }

  renderExecRow() {
    const domains = this.team.hr ? ["research", "dev", "marketing", "hr"] : ["research", "dev", "marketing"];
    const colors = { research: "emerald", dev: "sky", marketing: "fuchsia", hr: "amber" };
    const labels = { research: "Research", dev: "Product", marketing: "Sales & Mktg", hr: "People" };
    const emojis = { research: "üî¨", dev: "üíª", marketing: "üì£", hr: "üë•" };
    
    document.getElementById("execRow").innerHTML = domains.map(d => {
      const exec = this.team[d];
      if (!exec) return "";
      const active = this.currentDomain === d;
      const choice = this.choices[d];
      const done = choice !== undefined;
      const passed = choice === -1;
      const mood = this.moods[d];
      const moodClass = this.extremeMode ? "mood-neutral" : (mood >= 2 ? "mood-happy" : mood >= 0 ? "mood-neutral" : mood >= -1 ? "mood-frustrated" : "mood-upset");
      const moodEmoji = this.extremeMode ? "üî•" : (mood >= 2 ? "üòä" : mood >= 0 ? "üòê" : mood >= -1 ? "üòü" : "üò†");
      const color = colors[d];
      
      return `
        <button onclick="game.selectDomain('${d}')" class="p-3 rounded-xl text-center transition-all ${active ? 'bg-'+color+'-50 ring-2 ring-'+color+'-500' : 'hover:bg-slate-50'}">
          <div class="exec-portrait mx-auto mb-2 relative ${moodClass} border-2 border-${color}-400">
            <div class="mood-ring"></div>
            ${renderAvatar(exec.avatar, exec.name)}
          </div>
          <div class="text-sm font-medium text-slate-800">${exec.name.split(" ").pop()}</div>
          <div class="text-xs text-${color}-600">${emojis[d]} ${labels[d]}</div>
          <div class="flex justify-center gap-1 mt-1">
            <span title="${this.extremeMode ? 'Mood hidden in Extreme Mode' : ''}">${moodEmoji}</span>
            ${passed ? '<span class="text-slate-400">‚è≠</span>' : done ? '<span class="text-emerald-500">‚úì</span>' : ''}
          </div>
        </button>
      `;
    }).join("");
  }

  renderDecision() {
    const d = this.currentDomain;
    const exec = this.team[d];
    const eventData = this.currentEvents[d];
    const event = eventData?.event;
    const container = document.getElementById("decisionArea");
    
    if (!exec || !event) {
      container.innerHTML = `<div class="flex items-center justify-center h-full text-slate-400">No decision pending</div>`;
      return;
    }

    const colors = { research: "emerald", dev: "sky", marketing: "fuchsia", hr: "amber" };
    const colorHex = { research: "#10b981", dev: "#0ea5e9", marketing: "#d946ef", hr: "#f59e0b" };
    const labels = { research: "Research", dev: "Product", marketing: "Sales & Marketing", hr: "People" };
    const emojis = { research: "üî¨", dev: "üíª", marketing: "üì£", hr: "üë•" };
    const color = colors[d];
    const selected = this.choices[d];
    
    // Check for investor conflicts on this domain
    const domainAdvices = this.funderAdvices.filter(a => a.domain === d);
    const uniqueChoices = [...new Set(domainAdvices.map(a => a.recommendedChoice))];
    const hasConflict = uniqueChoices.length > 1;
    
    // Show/hide conflict warning
    document.getElementById("conflictWarning").classList.toggle("hidden", !hasConflict);

    container.innerHTML = `
      <!-- Event Header -->
      <div class="bg-gradient-to-r from-${color}-500 to-${color}-600 p-4 text-white">
        <div class="flex items-center gap-2 text-${color}-100 text-sm mb-1">
          <span>${emojis[d]} ${labels[d].toUpperCase()} DECISION</span>
          <span>‚Ä¢</span>
          <span>Q${this.quarter} Year ${this.year}</span>
        </div>
        <h3 class="text-xl font-bold">${event.title || this.generateEventTitle(event, d)}</h3>
      </div>
      
      <!-- Executive presenting the situation -->
      <div class="p-4 border-b border-slate-100">
        <div class="flex items-start gap-4">
          <div class="exec-portrait-lg border-4 border-${color}-200 flex-shrink-0">
            ${renderAvatar(exec.avatar, exec.name)}
          </div>
          <div class="flex-1">
            <div class="flex items-center gap-2 mb-1">
              <span class="font-bold text-slate-800">${exec.name}</span>
              <span class="text-xs bg-${color}-100 text-${color}-700 px-2 py-0.5 rounded-full">${exec.title}</span>
            </div>
            <div class="bg-slate-50 rounded-lg p-3 border-l-4 border-${color}-400">
              <p class="text-slate-700">"${event.intro}"</p>
              <p class="text-slate-500 text-sm mt-2 italic">"${event.aside}"</p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Choices with integrated advisor opinions -->
      <div class="p-4">
        <h4 class="text-sm font-bold text-slate-500 uppercase tracking-wide mb-3">Your Options</h4>
        
        <div class="space-y-4">
          ${event.choices.map((c, i) => {
            // Find all funders with opinions on this choice
            const supporting = this.funderAdvices.filter(a => a.domain === d && a.recommendedChoice === i);
            const opposing = hasConflict ? this.funderAdvices.filter(a => a.domain === d && a.recommendedChoice !== i) : [];
            const isRecommended = supporting.length > 0;
            const isSelected = selected === i;
            
            // Generate a description for the choice
            const choiceDesc = this.generateChoiceDescription(c, d);
            
            return `
            <div class="border-2 ${isSelected ? 'border-emerald-400 bg-emerald-50/30' : isRecommended ? 'border-amber-300' : 'border-slate-200'} rounded-xl overflow-hidden transition-all hover:border-slate-300">
              <div class="p-4 bg-white">
                <div class="flex items-start gap-3">
                  <div class="w-14 h-12 rounded-lg flex flex-col items-center justify-center ${c.ap >= 4 ? 'bg-red-100 text-red-600' : c.ap >= 3 ? 'bg-amber-100 text-amber-600' : 'bg-emerald-100 text-emerald-600'}">
                    <span class="text-lg font-bold">${c.ap}</span>
                    <span class="text-[10px] font-medium">AP</span>
                  </div>
                  <div class="flex-1">
                    <div class="font-semibold text-slate-800 mb-1">${c.text}</div>
                    <p class="text-sm text-slate-600 mb-2">${choiceDesc}</p>
                    <div class="flex flex-wrap gap-2 text-xs">
                      <span class="bg-slate-100 text-slate-600 px-2 py-1 rounded">¬£${c.cost}k</span>
                      ${this.extremeMode ? '<span class="bg-slate-200 text-slate-500 px-2 py-1 rounded italic">Effects hidden in Extreme Mode</span>' : Object.entries(c.eff).map(([k, v]) => `
                        <span class="${v > 0 ? 'bg-emerald-50 text-emerald-700' : 'bg-red-50 text-red-600'} px-2 py-1 rounded">${v > 0 ? '+' : ''}${v} ${this.getStatLabel(k)}</span>
                      `).join("")}
                    </div>
                  </div>
                </div>
              </div>
              
              ${!this.extremeMode && supporting.length > 0 ? `
              <!-- Advisor recommendations -->
              <div class="border-t border-amber-200">
                ${supporting.map(advice => `
                <div class="bg-amber-50 p-3 ${supporting.indexOf(advice) < supporting.length - 1 ? 'border-b border-amber-100' : ''}">
                  <div class="flex items-start gap-3">
                    <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-amber-300 flex-shrink-0">
                      ${advice.funder?.photo || '<div class="w-full h-full bg-amber-200 flex items-center justify-center">üíº</div>'}
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1 flex-wrap">
                        <span class="font-bold text-amber-800 text-sm">${advice.funderName}</span>
                        <span class="text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full">${this.getFunderTypeLabel(advice.funderId)}</span>
                        ${hasConflict ? '<span class="text-xs text-emerald-600 font-medium">üëç RECOMMENDS</span>' : ''}
                      </div>
                      <p class="text-sm text-amber-900">${advice.text} ${advice.reason ? advice.reason : ''}</p>
                    </div>
                  </div>
                </div>
                `).join('')}
              </div>
              ` : ''}
              
              <div class="p-3 bg-slate-50 border-t">
                <button onclick="game.confirmChoice('${d}', ${i})" class="w-full py-2 px-4 ${isSelected ? 'bg-emerald-500 text-white' : 'bg-white hover:bg-emerald-500 hover:text-white border border-slate-200'} rounded-lg font-medium transition-all">
                  ${isSelected ? '‚úì Selected' : 'Choose This Option'}
                </button>
              </div>
            </div>
          `}).join("")}
          
          <!-- Pass Option -->
          <div class="border-2 border-dashed ${selected === -1 ? 'border-slate-400 bg-slate-100' : 'border-slate-300'} rounded-xl overflow-hidden">
            <div class="p-4 bg-slate-50">
              <div class="flex items-start gap-3">
                <div class="w-14 h-12 rounded-lg flex flex-col items-center justify-center bg-slate-200 text-slate-500">
                  <span class="text-lg font-bold">0</span>
                  <span class="text-[10px] font-medium">AP</span>
                </div>
                <div class="flex-1">
                  <div class="font-semibold text-slate-600 mb-1">Pass this quarter</div>
                  <p class="text-sm text-slate-500 mb-2">Delay this decision. Your exec will be disappointed and the issue remains unresolved.</p>
                  <div class="flex flex-wrap gap-2 text-xs">
                    <span class="bg-red-50 text-red-600 px-2 py-1 rounded">-1 Mood</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="p-3 bg-slate-100 border-t border-slate-200">
              <button onclick="game.confirmChoice('${d}', -1)" class="w-full py-2 px-4 ${selected === -1 ? 'bg-slate-500 text-white' : 'bg-white hover:bg-slate-400 hover:text-white border border-slate-300'} rounded-lg font-medium transition-all">
                ${selected === -1 ? '‚úì Passing' : 'Skip This Quarter'}
              </button>
            </div>
          </div>
        </div>
      </div>
    `;
  }
  
  generateEventTitle(event, domain) {
    // Generate a descriptive title based on the event intro
    const intro = event.intro.toLowerCase();
    if (intro.includes('research') || intro.includes('science')) return 'Advancing Research Capabilities';
    if (intro.includes('product') || intro.includes('feature')) return 'Product Development Decision';
    if (intro.includes('market') || intro.includes('sales')) return 'Market Expansion Strategy';
    if (intro.includes('team') || intro.includes('hire')) return 'Team Growth Decision';
    if (intro.includes('partner')) return 'Strategic Partnership Opportunity';
    if (intro.includes('customer')) return 'Customer Acquisition Strategy';
    if (intro.includes('cost') || intro.includes('budget')) return 'Resource Allocation';
    return 'Strategic Decision Required';
  }
  
  generateChoiceDescription(choice, domain) {
    // Generate a fuller description for the choice based on its effects and text
    const text = choice.text.toLowerCase();
    const effects = choice.eff || {};
    
    // Check for key themes in the choice text
    if (text.includes('university') || text.includes('academic')) {
      return 'Establish a collaboration for shared expertise and credibility. Lower cost but results take time to materialize.';
    }
    if (text.includes('hire') || text.includes('recruit')) {
      return 'Bring in dedicated talent with full-time commitment. Higher ongoing costs but direct control over output.';
    }
    if (text.includes('acquire') || text.includes('buy')) {
      return 'Instant capability boost through acquisition. Expensive and integration will be challenging.';
    }
    if (text.includes('partner') && !text.includes('university')) {
      return 'Strategic partnership to accelerate progress. Shared upside but also shared control.';
    }
    if (text.includes('outsource') || text.includes('contractor')) {
      return 'Flexible external resources. Quick to deploy but less institutional knowledge.';
    }
    if (text.includes('train') || text.includes('develop')) {
      return 'Invest in your existing team. Slower but builds long-term capability and loyalty.';
    }
    if (text.includes('aggressive') || text.includes('bold')) {
      return 'High-risk, high-reward approach. Could accelerate progress dramatically or backfire.';
    }
    if (text.includes('conservative') || text.includes('careful')) {
      return 'Measured approach that minimizes risk. Steady progress without major surprises.';
    }
    
    // Default based on AP cost
    if (choice.ap >= 4) {
      return 'A significant commitment that could substantially move the needle. Make sure the timing is right.';
    } else if (choice.ap >= 3) {
      return 'A solid investment of resources. Should deliver meaningful progress.';
    } else {
      return 'A modest step forward. Low risk, incremental progress.';
    }
  }
  
  getStatLabel(stat) {
    const labels = { sci: 'Research', dev: 'Product', mkt: 'Sales', hr: 'People', burn: 'Burn', val: 'Valuation', cash: 'Cash' };
    return labels[stat] || stat;
  }
  
  getFunderTypeLabel(funderId) {
    const labels = {
      dragon: "Dragon's Den",
      techAngel: "Tech Angel",
      operatorAngel: "Operator Angel", 
      sectorVC: "Sector VC",
      growthVC: "Growth VC",
      impactVC: "Impact VC",
      tier1VC: "Tier 1 VC",
      corporateVC: "Corporate VC"
    };
    return labels[funderId] || "Investor";
  }

  selectDomain(d) {
    this.currentDomain = d;
    this.renderExecRow();
    this.renderDecision();
  }

  confirmChoice(d, i) {
    const isFirstChoice = Object.keys(this.choices).length === 0;
    this.choices[d] = i;
    this.renderAPPips();
    this.renderExecRow();
    this.renderDecision();
    
    // Play department-specific sound
    if (d === 'research') soundManager.playResearch();
    else if (d === 'dev') soundManager.playProduct();
    else if (d === 'marketing') soundManager.playSales();
    else if (d === 'hr') soundManager.playHR();
    
    // Auto-advance to next department that doesn't have a choice yet
    const domains = this.team.hr ? ["research", "dev", "marketing", "hr"] : ["research", "dev", "marketing"];
    const currentIndex = domains.indexOf(d);
    
    // Find the next department without a choice
    let nextDomain = null;
    for (let offset = 1; offset <= domains.length; offset++) {
      const checkIndex = (currentIndex + offset) % domains.length;
      const checkDomain = domains[checkIndex];
      if (this.choices[checkDomain] === undefined) {
        nextDomain = checkDomain;
        break;
      }
    }
    
    // If found an unchosen domain, switch to it after a brief delay
    if (nextDomain) {
      setTimeout(() => {
        this.currentDomain = nextDomain;
        this.renderExecRow();
        this.renderDecision();
      }, 150);
    }
    
    // Trigger mini-game after first choice (one per milestone)
    // M1: Conference, M2: Pitch, M3: Demo Day
    if (isFirstChoice) {
      const currentMilestoneNum = this.completedMilestones.length + 1;
      if (currentMilestoneNum > this.lastConferenceMilestone) {
        this.lastConferenceMilestone = currentMilestoneNum;
        // Small delay so the choice registers visually first, then show intro
        if (currentMilestoneNum === 1) {
          setTimeout(() => this.showMiniGameIntro("conference"), 300);
        } else if (currentMilestoneNum === 2) {
          setTimeout(() => this.showMiniGameIntro("pitch"), 300);
        } else if (currentMilestoneNum === 3) {
          setTimeout(() => this.showMiniGameIntro("demoday"), 300);
        }
      }
    }
  }

  // Keep selectChoice for backward compatibility but just highlight
  selectChoice(d, i) {
    // Just re-render to show preview, don't confirm
    this.renderDecision();
  }

  getUsedAP() {
    let ap = 0;
    Object.entries(this.choices).forEach(([d, i]) => {
      if (i === -1) return; // Pass costs 0 AP
      const eventData = this.currentEvents[d];
      if (eventData?.event) ap += eventData.event.choices[i].ap;
    });
    return ap;
  }
  
  getTotalAP() {
    // Total available = base AP + banked AP + staff bonus - integration penalty - funding cost
    const staffBonus = this.getStaffAPBonus();
    const fundingCost = this.fundingAPCost || 0;
    return this.maxAP + this.bankedAP + staffBonus - this.staffAPPenalty - fundingCost;
  }
  
  getStaffAPBonus() {
    // Staff AP bonus only unlocks after first milestone is completed
    // Before that, you're still "finding your feet" as a startup
    if (this.completedMilestones.length === 0) {
      return 0;
    }
    
    // Staff AP bonus: +1 per 3 staff (excluding integrating staff)
    const effectiveStaff = this.metrics.staff - this.integratingStaff;
    if (effectiveStaff >= 9) return 3;
    if (effectiveStaff >= 6) return 2;
    if (effectiveStaff >= 3) return 1;
    return 0;
  }
  
  // Get founder experience bonus for investor relations
  // Experienced founders get better starting relationships and more patience from investors
  // Inexperienced founders start lower and have less margin for error
  getFounderExperienceBonus() {
    if (!this.founder?.profile?.id) return 0;
    
    const profileId = this.founder.profile.id;
    
    // Experienced profiles: get +1 starting relationship
    const experiencedProfiles = ['serial', 'corporate', 'domain', 'strategist'];
    if (experiencedProfiles.includes(profileId)) return 1;
    
    // Moderately experienced: neutral (no bonus)
    const neutralProfiles = ['academic', 'operator', 'dealmaker', 'bootstrapper', 'community'];
    if (neutralProfiles.includes(profileId)) return 0;
    
    // Inexperienced: -1 starting relationship, less patience
    const inexperiencedProfiles = ['firsttimer', 'prodigy', 'visionary'];
    if (inexperiencedProfiles.includes(profileId)) return -1;
    
    return 0;
  }
  
  // Get founder bonus for milestone progress based on profile match
  // Returns a small percentage reduction in effective targets (0.05 = 5% easier)
  getFounderMilestoneBonus(threshold) {
    if (!this.founder?.profile?.id || !threshold) return 0;
    
    const profileId = this.founder.profile.id;
    const metrics = Object.keys(threshold);
    
    // Calculate which metric is dominant in this milestone
    const maxWeight = Math.max(...Object.values(threshold));
    let dominantMetric = null;
    Object.entries(threshold).forEach(([metric, weight]) => {
      if (weight === maxWeight) dominantMetric = metric;
    });
    
    // Research-heavy milestones (sci dominant)
    if (dominantMetric === 'sci' || (metrics.includes('sci') && threshold.sci >= 40)) {
      const researchProfiles = ['academic', 'prodigy', 'strategist'];
      if (researchProfiles.includes(profileId)) return 0.05; // 5% easier
    }
    
    // Commercial/Sales milestones (mkt dominant)
    if (dominantMetric === 'mkt' || (metrics.includes('mkt') && threshold.mkt >= 40)) {
      const commercialProfiles = ['dealmaker', 'domain', 'community', 'corporate'];
      if (commercialProfiles.includes(profileId)) return 0.05;
    }
    
    // Product/Dev milestones (dev dominant)
    if (dominantMetric === 'dev' || (metrics.includes('dev') && threshold.dev >= 40)) {
      const productProfiles = ['prodigy', 'operator', 'serial'];
      if (productProfiles.includes(profileId)) return 0.05;
    }
    
    // Operational/Team milestones (hr present)
    if (metrics.includes('hr') && threshold.hr >= 30) {
      const operationalProfiles = ['operator', 'corporate', 'visionary', 'community'];
      if (operationalProfiles.includes(profileId)) return 0.05;
    }
    
    // Serial founders get a small bonus on all later milestones (learned from experience)
    if (profileId === 'serial' && this.completedMilestones.length >= 1) {
      return 0.03; // 3% easier on M2 and M3
    }
    
    // First-timers get adaptability bonus on pivots/later milestones
    if (profileId === 'firsttimer' && this.completedMilestones.length >= 2) {
      return 0.04; // 4% easier on M3 (learning fast!)
    }
    
    return 0;
  }

  getEstCost() {
    let cost = this.metrics.burn;
    Object.entries(this.choices).forEach(([d, i]) => {
      if (i === -1) return; // Pass costs ¬£0
      const eventData = this.currentEvents[d];
      if (eventData?.event) cost += eventData.event.choices[i].cost;
    });
    return cost;
  }

  allChosen() {
    const domains = this.team.hr ? ["research", "dev", "marketing", "hr"] : ["research", "dev", "marketing"];
    return domains.every(d => this.choices[d] !== undefined);
  }

  commitTurn() {
    let totalCost = this.metrics.burn;
    let researchBreakthrough = false;
    let researchSetback = false;
    
    // Count passes this quarter
    let passesThisQuarter = 0;
    Object.entries(this.choices).forEach(([d, i]) => {
      if (i === -1) passesThisQuarter++;
    });
    this.totalPasses += passesThisQuarter;
    
    // Track decision outcomes for feedback display
    this.lastTurnOutcomes = [];
    const metricsBefore = { ...this.metrics };

    // Apply choices
    Object.entries(this.choices).forEach(([d, i]) => {
      const exec = this.team[d];
      const eventData = this.currentEvents[d];
      if (!eventData?.event) return;
      
      // Track this decision's outcome
      const outcome = {
        domain: d,
        executive: exec,
        event: eventData.event,
        choiceIndex: i,
        isPass: i === -1,
        expectedEffects: {},
        actualEffects: {},
        choiceText: i === -1 ? "Passed" : eventData.event.choices[i].text
      };
      
      // Handle pass choice - reduced penalty, still gives tiny progress
      if (i === -1) {
        this.moods[d] = Math.max(-3, this.moods[d] - 0.5); // Reduced mood penalty
        // Still get a tiny bit of progress from background work
        const domainMetric = d === "research" ? "sci" : d === "dev" ? "dev" : d === "marketing" ? "mkt" : "hr";
        outcome.actualEffects[domainMetric] = 1;
        outcome.expectedEffects[domainMetric] = 0;
        this.metrics[domainMetric] = Math.max(0, this.metrics[domainMetric] + 1);
        this.log(`${exec.name.split(" ").pop()}: "Working on other things..." üòê`);
        this.lastTurnOutcomes.push(outcome);
        return;
      }
      
      const c = eventData.event.choices[i];
      totalCost += c.cost;
      const isResearch = (d === "research");
      
      // Store expected effects before volatility
      outcome.expectedEffects = { ...c.eff };
      
      Object.entries(c.eff).forEach(([k, v]) => {
        // Apply volatility - research gets skewed distribution
        let adjustedValue = this.applyVolatility(v, isResearch);
        
        // Progress multiplier for core metrics to make choices more impactful
        // This reflects compound growth from good decisions
        if (['sci', 'dev', 'mkt'].includes(k) && adjustedValue > 0) {
          const progressMultiplier = 1.5; // 50% bonus to positive core metric gains
          adjustedValue = Math.round(adjustedValue * progressMultiplier);
        }
        
        // Founder profile bonuses for domain expertise
        if (this.founderBonuses) {
          // Technical bonus: +15% to science gains in research domain
          if (d === "research" && k === "sci" && adjustedValue > 0 && this.founderBonuses.technical > 2) {
            const techBonus = 1 + ((this.founderBonuses.technical - 2) * 0.15);
            adjustedValue = Math.round(adjustedValue * techBonus);
          }
          // Commercial bonus: +15% to marketing gains in sales domain
          if (d === "marketing" && k === "mkt" && adjustedValue > 0 && this.founderBonuses.commercial > 2) {
            const commBonus = 1 + ((this.founderBonuses.commercial - 2) * 0.15);
            adjustedValue = Math.round(adjustedValue * commBonus);
          }
        }
        
        // Track actual effect after volatility
        outcome.actualEffects[k] = adjustedValue;
        
        // Track if research had a breakthrough or setback
        if (isResearch && k === "sci" && v > 0) {
          if (adjustedValue >= v * 1.4) researchBreakthrough = true;
          if (adjustedValue <= v * 0.6) researchSetback = true;
        }
        
        if (k === "cash") this.metrics.cash += adjustedValue;
        else if (this.metrics[k] !== undefined) this.metrics[k] = Math.max(0, this.metrics[k] + adjustedValue);
      });
      if (c.mood !== undefined) this.moods[d] = Math.max(-3, Math.min(3, this.moods[d] + c.mood));
      
      // Apply rival effects from competitive events
      if (c.rivalEffect && eventData.event.rivalRef) {
        this.applyRivalEffect(eventData.event.rivalRef, c.rivalEffect);
      }
      
      this.log(`${exec.name.split(" ").pop()}: "${c.reaction.substring(0, 35)}..."`);
      this.lastTurnOutcomes.push(outcome);
    });

    // Special message for research breakthroughs
    if (researchBreakthrough) {
      const breakthroughMessages = [
        "üî¨ Eureka! The research team made an unexpected breakthrough!",
        "‚ú® Research exceeded expectations - promising early results!",
        "üéØ The hypothesis paid off - significant progress in the lab!",
        "üí° A late-night insight led to accelerated research outcomes!",
        "üß™ Experimental results came in stronger than projected!"
      ];
      this.log(breakthroughMessages[Math.floor(Math.random() * breakthroughMessages.length)]);
    }
    
    // Special message for research setbacks
    if (researchSetback && !researchBreakthrough) {
      const setbackMessages = [
        "üî¨ Research hit some snags - experiments didn't replicate as hoped.",
        "üìâ The research direction proved less fruitful than expected.",
        "üß™ Lab results were inconclusive - back to the drawing board.",
        "‚ö† A promising hypothesis didn't pan out this quarter.",
        "üîÑ Research pivot needed - initial approach hit a dead end."
      ];
      this.log(setbackMessages[Math.floor(Math.random() * setbackMessages.length)]);
    }

    // Occasional flavour messages about market unpredictability (15% chance)
    if (Math.random() < 0.15) {
      const volatilityMessages = [
        "üìä Market conditions shifted unexpectedly this quarter.",
        "üé≤ Some initiatives performed differently than projected.",
        "üìà External factors influenced outcomes this quarter.",
        "üåä The startup landscape proved unpredictable as usual.",
        "‚ö° Results varied from forecasts - such is startup life.",
        "üéØ Some bets paid off better than expected, others less so."
      ];
      this.log(volatilityMessages[Math.floor(Math.random() * volatilityMessages.length)]);
    }

    // No passive bonuses - progress comes from deliberate choices only
    // This reflects real startups: nothing happens without action

    // Check if funder advice was followed
    this.checkFunderAdvice();

    // ===== DISENGAGED PLAY DETECTION =====
    // Penalize players who skip too many choices
    const domains = this.team.hr ? 4 : 3;
    const passThreshold = domains >= 4 ? 3 : 2; // 3 passes with 4 domains, 2 with 3 domains
    
    if (passesThisQuarter >= passThreshold) {
      this.consecutiveHighPassQuarters++;
      
      if (this.consecutiveHighPassQuarters === 2 && !this.passWarningShown) {
        // First warning
        this.passWarningShown = true;
        this.log("‚ö† Your team is losing confidence. They need leadership, not silence.");
        this.log("üí° Skipping too many decisions will lead to problems...");
      } else if (this.consecutiveHighPassQuarters === 3) {
        // Serious consequences - investors notice
        this.log("üò† Investors are questioning your engagement with the company.");
        this.log("üìâ Team morale is suffering from lack of direction.");
        // Metric penalties
        this.metrics.hr = Math.max(0, this.metrics.hr - 10);
        this.metrics.val = Math.round(this.metrics.val * 0.9); // 10% valuation hit
        Object.keys(this.moods).forEach(d => {
          this.moods[d] = Math.max(-3, this.moods[d] - 1);
        });
      } else if (this.consecutiveHighPassQuarters >= 4) {
        // Critical - board intervention
        this.log("üö® BOARD INTERVENTION: Your investors have lost confidence in your leadership.");
        this.log("üíî Key team members are looking for other opportunities.");
        // Severe penalties
        this.metrics.hr = Math.max(0, this.metrics.hr - 15);
        this.metrics.sci = Math.max(0, this.metrics.sci - 10);
        this.metrics.dev = Math.max(0, this.metrics.dev - 10);
        this.metrics.mkt = Math.max(0, this.metrics.mkt - 10);
        this.metrics.val = Math.round(this.metrics.val * 0.8); // 20% valuation hit
        this.metrics.burn += 20; // Higher costs due to turnover
        
        // After 5 consecutive quarters of disengagement, force early exit
        if (this.consecutiveHighPassQuarters >= 5) {
          this.log("üíÄ The board has voted to remove you as CEO. Game over.");
          this.endGame("disengaged");
          return;
        }
      }
    } else {
      // Reset consecutive counter if player engages
      if (this.consecutiveHighPassQuarters > 0 && passesThisQuarter === 0) {
        this.log("üëç Your team appreciates your renewed focus and engagement.");
      }
      this.consecutiveHighPassQuarters = 0;
    }

    this.metrics.cash -= totalCost;

    // Bankrupt?
    if (this.metrics.cash <= 0) {
      this.endGame("bankrupt");
      return;
    }

    // End of game?
    if (this.turn >= 16) {
      this.endGame("completed");
      return;
    }

    // Rivals
    this.simulateRivals();

    // Check for random shock event (25% chance per quarter, starting Q2)
    if (this.turn >= 2 && Math.random() < 0.25 && !this.pendingShock) {
      this.triggerRandomShock();
      return; // Shock modal will handle continuing the game
    }

    // Milestone check (after conference opportunity)
    if (this.milestone) {
      // Calculate progress based on thresholds
      if (this.milestone.threshold) {
        // New threshold-based system
        let totalProgress = 0;
        let thresholdCount = 0;
        let nearMissMetrics = []; // Track metrics that are close but not there
        
        // Get founder profile bonus for milestone progress
        const founderMilestoneBonus = this.getFounderMilestoneBonus(this.milestone.threshold);
        
        Object.entries(this.milestone.threshold).forEach(([metric, target]) => {
          const current = this.metrics[metric] || 0;
          // Apply founder bonus: effective target is slightly lower for matching profiles
          const effectiveTarget = target * (1 - founderMilestoneBonus);
          const progress = Math.min(100, (current / effectiveTarget) * 100);
          totalProgress += progress;
          thresholdCount++;
          
          // Track metrics at 80-99% - these get catch-up bonus
          if (progress >= 80 && progress < 100) {
            nearMissMetrics.push({ metric, current, target, needed: target - current });
          }
        });
        
        this.milestoneProgress = Math.min(100, Math.floor(totalProgress / thresholdCount));
        
        // No catch-up mechanism - you either hit the numbers or you don't
        // This reflects startup reality: deadlines are deadlines
      } else {
        // Legacy focus-based system (fallback)
        let prog = 0;
        this.milestone.focus.forEach(f => prog += this.metrics[f] || 0);
        this.milestoneProgress = Math.min(100, Math.floor(prog * 1.8));
      }
      
      if (this.milestoneProgress >= 100) {
        this.completeMilestone();
        return;
      }
      if (this.turn >= this.milestone.deadline) {
        this.failMilestone();
        return;
      }
    }

    // Continue to next turn (banking AP and advancing)
    this.continueAfterShock();
  }

  simulateRivals() {
    const volatility = this.extremeMode ? this.extremeVolatility : this.baseVolatility;
    this.rivals.forEach(r => {
      if (r.status !== "active") return;
      const g = r.style === "aggressive" ? 3 : r.style === "methodical" ? 2 : 1;
      
      // Add volatility to rival progress - sometimes they surge, sometimes they stall
      const volatilityMultiplier = 1 + (Math.random() * 2 - 1) * volatility * 2; // More volatile for rivals
      r.scores.sci += Math.random() * g * volatilityMultiplier;
      r.scores.dev += Math.random() * g * volatilityMultiplier;
      r.scores.mkt += Math.random() * g * volatilityMultiplier;
      
      // Small chance of rival setback (5% normal, 10% extreme)
      if (Math.random() < (this.extremeMode ? 0.10 : 0.05)) {
        const setbackMetric = ['sci', 'dev', 'mkt'][Math.floor(Math.random() * 3)];
        r.scores[setbackMetric] = Math.max(0, r.scores[setbackMetric] - 3);
      }
    });
  }
  
  applyRivalEffect(rival, effect) {
    if (!effect || !rival) return;
    
    if (effect.slow && effect.amount) {
      // Reduce rival's progress
      const reduction = effect.amount;
      rival.scores.sci = Math.max(0, rival.scores.sci - reduction * 0.3);
      rival.scores.dev = Math.max(0, rival.scores.dev - reduction * 0.3);
      rival.scores.mkt = Math.max(0, rival.scores.mkt - reduction * 0.4);
      this.log(`üìâ ${rival.name} loses momentum`);
    }
  }

  // ===== SHOCK EVENT SYSTEM =====
  
  triggerRandomShock() {
    // Don't repeat shocks we've seen
    const availableShocks = ALL_SHOCKS.filter(s => !this.usedShocks?.has(s.id));
    if (availableShocks.length === 0) return this.continueAfterShock();
    
    const shock = availableShocks[Math.floor(Math.random() * availableShocks.length)];
    this.showShock(shock);
  }
  
  showShock(shock) {
    // Play shock sound
    soundManager.playShock();
    
    this.pendingShock = shock;
    this.usedShocks = this.usedShocks || new Set();
    this.usedShocks.add(shock.id);
    
    // Log journey event for shock
    this.logJourneyEvent('shock', {
      headline: shock.headline,
      text: shock.text,
      type: shock.type,
      effects: shock.effects
    });
    
    // Populate modal
    const typeColors = {
      positive: "text-emerald-600",
      negative: "text-red-600", 
      mixed: "text-amber-600"
    };
    const typeBorders = {
      positive: "border-emerald-500",
      negative: "border-red-500",
      mixed: "border-amber-500"
    };
    
    document.getElementById("shockHeadline").innerHTML = `${shock.icon || "‚ö°"} ${shock.headline}`;
    document.getElementById("shockText").textContent = shock.text;
    
    // Show immediate effects
    const effectLabels = { cash: "Cash", val: "Valuation", sci: "Research", dev: "Product", mkt: "Sales", hr: "People", burn: "Burn", equity: "Equity" };
    const effectsHtml = Object.entries(shock.effects).map(([k, v]) => {
      const color = v > 0 ? "text-emerald-600" : "text-red-600";
      const sign = v > 0 ? "+" : "";
      const suffix = k === "cash" || k === "val" ? "k" : k === "equity" ? "%" : "";
      return `<span class="${color} font-medium">${sign}${v}${suffix} ${effectLabels[k]}</span>`;
    }).join(" ‚Ä¢ ");
    
    document.getElementById("shockEffects").innerHTML = effectsHtml || "<span class='text-slate-400'>No immediate effects</span>";
    
    // Show response choices
    document.getElementById("shockChoices").innerHTML = shock.choices.map((c, i) => {
      const effText = Object.entries(c.eff).map(([k, v]) => {
        const sign = v > 0 ? "+" : "";
        const suffix = k === "cash" || k === "val" ? "k" : k === "equity" ? "%" : k === "burn" ? "/q" : "";
        return `${sign}${v}${suffix} ${effectLabels[k] || k}`;
      }).join(", ");
      
      return `
        <button onclick="game.resolveShock(${i})" class="w-full p-3 bg-white border-2 border-slate-200 rounded-xl text-left hover:border-blue-400 hover:bg-blue-50 transition-all">
          <div class="flex justify-between items-start">
            <span class="font-medium text-slate-800">${c.text}</span>
            <span class="text-xs bg-slate-100 px-2 py-1 rounded-full text-slate-600">${c.ap} AP</span>
          </div>
          <div class="text-xs text-slate-500 mt-1">${effText}</div>
        </button>
      `;
    }).join("");
    
    // Update modal border color based on shock type
    const modal = document.getElementById("shockModal").querySelector("div");
    modal.className = modal.className.replace(/border-\w+-500/g, typeBorders[shock.type] || "border-amber-500");
    
    document.getElementById("shockModal").classList.remove("hidden");
    document.getElementById("shockModal").classList.add("flex");
  }
  
  resolveShock(choiceIndex) {
    const shock = this.pendingShock;
    if (!shock) return;
    
    // Adaptability reduces negative shock effects (10% reduction per point above 2)
    const adaptabilityMod = this.founderBonuses?.adaptability > 2 
      ? 1 - ((this.founderBonuses.adaptability - 2) * 0.1) 
      : 1;
    
    // Apply immediate shock effects (with volatility and adaptability)
    Object.entries(shock.effects).forEach(([k, v]) => {
      let adjustedValue = this.applyVolatility(v);
      // Adaptability only reduces negative effects
      if (adjustedValue < 0 && adaptabilityMod < 1) {
        adjustedValue = Math.round(adjustedValue * adaptabilityMod);
      }
      if (k === "equity") {
        this.metrics.equity = Math.max(0, this.metrics.equity + adjustedValue);
      } else if (this.metrics[k] !== undefined) {
        this.metrics[k] = Math.max(0, this.metrics[k] + adjustedValue);
      }
    });
    
    // Apply choice effects (with volatility and adaptability for negative effects)
    const choice = shock.choices[choiceIndex];
    Object.entries(choice.eff).forEach(([k, v]) => {
      let adjustedValue = this.applyVolatility(v);
      // Adaptability only reduces negative effects
      if (adjustedValue < 0 && adaptabilityMod < 1) {
        adjustedValue = Math.round(adjustedValue * adaptabilityMod);
      }
      if (k === "equity") {
        this.metrics.equity = Math.max(0, this.metrics.equity + adjustedValue);
      } else if (k === "burn") {
        this.metrics.burn = Math.max(0, this.metrics.burn + adjustedValue);
      } else if (this.metrics[k] !== undefined) {
        this.metrics[k] = Math.max(0, this.metrics[k] + adjustedValue);
      }
    });
    
    // Log the event
    this.log(`‚ö° ${shock.headline} - chose: "${choice.text.substring(0, 30)}..."`);
    
    // Close modal
    document.getElementById("shockModal").classList.add("hidden");
    document.getElementById("shockModal").classList.remove("flex");
    this.pendingShock = null;
    
    // Continue to next turn
    this.continueAfterShock();
  }
  
  continueAfterShock() {
    // Play quarter end sound
    soundManager.playQuarterEnd();
    
    // Bank unused AP for next quarter
    const usedAP = this.getUsedAP();
    const totalAP = this.getTotalAP();
    const unusedAP = Math.max(0, totalAP - usedAP);
    
    // Calculate new banked amount (capped at maxBankedAP)
    const newBanked = Math.min(unusedAP, this.maxBankedAP);
    if (newBanked > 0) {
      this.bankedAP = newBanked;
      this.log(`üíæ Saved ${newBanked} unused AP for next quarter`);
    } else {
      this.bankedAP = 0;
    }

    // Show decision feedback transition (replaces random transition)
    if (this.shouldShowTransition() && this.lastTurnOutcomes && this.lastTurnOutcomes.length > 0) {
      this.showDecisionFeedback(() => {
        this.advanceToNextTurn();
      });
    } else if (this.shouldShowTransition()) {
      this.showQuarterTransition(() => {
        this.advanceToNextTurn();
      });
    } else {
      this.advanceToNextTurn();
    }
  }
  
  showDecisionFeedback(callback) {
    const outcomes = this.lastTurnOutcomes || [];
    const milestone = this.milestone;
    const milestoneProgress = this.milestoneProgress || 0;
    
    // Calculate previous progress (approximate from current - changes)
    let progressChange = 0;
    if (milestone && milestone.threshold) {
      outcomes.forEach(outcome => {
        Object.entries(outcome.actualEffects).forEach(([metric, value]) => {
          if (milestone.threshold[metric]) {
            // This metric contributes to milestone
            const target = milestone.threshold[metric];
            progressChange += (value / target) * 100 / Object.keys(milestone.threshold).length;
          }
        });
      });
    }
    progressChange = Math.round(progressChange);
    
    // Rate each decision
    const ratedOutcomes = outcomes.map(outcome => {
      let rating = 'met'; // Default
      let ratingLabel = 'Met Expectations';
      let ratingIcon = '‚úì';
      let ratingClass = 'feedback-met';
      let milestoneContribution = 0;
      
      if (outcome.isPass) {
        rating = 'pass';
        ratingLabel = 'Passed';
        ratingIcon = '-';
        ratingClass = 'feedback-pass';
      } else {
        // Calculate milestone contribution
        let contributesToMilestone = false;
        let contributionValue = 0;
        
        if (milestone && milestone.threshold) {
          Object.entries(outcome.actualEffects).forEach(([metric, value]) => {
            if (milestone.threshold[metric] && value > 0) {
              contributesToMilestone = true;
              contributionValue += value;
            }
          });
        }
        
        // Compare actual vs expected
        let totalExpected = 0;
        let totalActual = 0;
        Object.entries(outcome.expectedEffects).forEach(([metric, expected]) => {
          if (['sci', 'dev', 'mkt', 'hr'].includes(metric)) {
            totalExpected += expected;
            totalActual += outcome.actualEffects[metric] || 0;
          }
        });
        
        // Determine rating
        if (totalActual <= 0 && totalExpected > 0) {
          rating = 'failed';
          ratingLabel = 'Failed';
          ratingIcon = '‚úó';
          ratingClass = 'feedback-failed';
        } else if (totalActual >= totalExpected * 1.3) {
          rating = 'exceeded';
          ratingLabel = 'Exceeded Expectations';
          ratingIcon = '‚òÖ';
          ratingClass = 'feedback-exceeded';
        } else if (totalActual < totalExpected * 0.7) {
          rating = 'below';
          ratingLabel = 'Below Expectations';
          ratingIcon = '‚Üì';
          ratingClass = 'feedback-below';
        }
        
        milestoneContribution = contributesToMilestone ? contributionValue : 0;
      }
      
      return { ...outcome, rating, ratingLabel, ratingIcon, ratingClass, milestoneContribution };
    });
    
    // Build feedback HTML
    const overlay = document.createElement('div');
    overlay.id = 'decisionFeedback';
    overlay.className = 'fixed inset-0 z-50 flex items-center justify-center bg-slate-900/95 feedback-overlay';
    
    const domainLabels = {
      research: { name: 'Research', icon: 'üî¨', color: 'purple' },
      dev: { name: 'Product', icon: '‚öô', color: 'blue' },
      marketing: { name: 'Sales', icon: 'üìà', color: 'green' },
      hr: { name: 'People', icon: 'üë•', color: 'amber' }
    };
    
    const feedbackItems = ratedOutcomes.map(o => {
      const domain = domainLabels[o.domain] || { name: o.domain, icon: 'üìã', color: 'slate' };
      
      // Format effects display
      const effectsDisplay = Object.entries(o.actualEffects)
        .filter(([k, v]) => v !== 0 && ['sci', 'dev', 'mkt', 'hr', 'cash'].includes(k))
        .map(([k, v]) => {
          const label = STAT_LABELS[k] || k;
          const color = v > 0 ? 'text-emerald-600' : 'text-red-600';
          const sign = v > 0 ? '+' : '';
          return `<span class="${color} font-medium">${sign}${v} ${label}</span>`;
        })
        .join('<span class="text-slate-400 mx-1">‚Ä¢</span>');
      
      // Milestone contribution indicator
      const milestoneIndicator = o.milestoneContribution > 0 
        ? `<span class="text-xs text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-full ml-2">üìä +${Math.round(o.milestoneContribution)} toward milestone</span>` 
        : '';
      
      return `
        <div class="feedback-item ${o.ratingClass} rounded-lg p-4 mb-3">
          <div class="flex items-start gap-3">
            <div class="text-2xl">${domain.icon}</div>
            <div class="flex-1 min-w-0">
              <div class="flex items-center gap-2 mb-1">
                <span class="font-bold text-slate-800">${domain.name}</span>
                <span class="text-sm px-2 py-0.5 rounded-full ${
                  o.rating === 'exceeded' ? 'bg-emerald-200 text-emerald-800' :
                  o.rating === 'met' ? 'bg-blue-200 text-blue-800' :
                  o.rating === 'below' ? 'bg-amber-200 text-amber-800' :
                  o.rating === 'failed' ? 'bg-red-200 text-red-800' :
                  'bg-slate-200 text-slate-600'
                }">${o.ratingIcon} ${o.ratingLabel}</span>
                ${milestoneIndicator}
              </div>
              <p class="text-sm text-slate-700 mb-2">${o.choiceText}</p>
              <div class="text-sm">${effectsDisplay || '<span class="text-slate-400">No stat changes</span>'}</div>
            </div>
          </div>
        </div>
      `;
    }).join('');
    
    // Milestone progress bar
    const prevProgress = Math.max(0, milestoneProgress - progressChange);
    const progressBar = milestone ? `
      <div class="mt-6 pt-4 border-t border-slate-700">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm text-slate-400">Milestone Progress</span>
          <span class="text-sm font-bold ${progressChange > 0 ? 'text-emerald-400' : progressChange < 0 ? 'text-red-400' : 'text-slate-400'}">
            ${progressChange > 0 ? '+' : ''}${progressChange}% this quarter
          </span>
        </div>
        <div class="relative h-4 bg-slate-700 rounded-full overflow-hidden ${progressChange > 0 ? 'progress-positive' : ''}">
          <div class="absolute inset-0 h-full bg-slate-600 rounded-full" style="width: ${prevProgress}%"></div>
          <div class="milestone-contribution-bar absolute inset-0 h-full bg-gradient-to-r from-emerald-500 to-teal-400 rounded-full" style="width: ${milestoneProgress}%"></div>
        </div>
        <div class="flex justify-between mt-1 text-xs text-slate-500">
          <span>${milestone.name}</span>
          <span>${milestoneProgress}%</span>
        </div>
      </div>
    ` : '';
    
    overlay.innerHTML = `
      <div class="feedback-card bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-xl w-full mx-4 max-h-[90vh] overflow-y-auto">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h2 class="text-xl font-bold text-white">Q${this.quarter} Results</h2>
            <p class="text-sm text-slate-400">How your decisions played out</p>
          </div>
          <div class="text-3xl">üìä</div>
        </div>
        
        <div class="space-y-1">
          ${feedbackItems}
        </div>
        
        ${progressBar}
        
        <button onclick="game.dismissDecisionFeedback()" class="w-full mt-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-400 hover:to-indigo-400 text-white font-semibold rounded-xl transition-all">
          Continue to Q${this.quarter + 1} ‚Üí
        </button>
      </div>
    `;
    
    document.body.appendChild(overlay);
    
    // Play feedback sound
    this.playFeedbackSound(progressChange);
    
    // Store callback
    this.feedbackCallback = callback;
    
    // Auto-dismiss after 15 seconds
    this.feedbackTimeout = setTimeout(() => this.dismissDecisionFeedback(), 15000);
  }
  
  playFeedbackSound(progressChange) {
    try {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const now = ctx.currentTime;
      
      if (progressChange > 5) {
        // Positive progress - uplifting arpeggio
        const notes = [392, 493.88, 587.33, 783.99]; // G4, B4, D5, G5
        notes.forEach((freq, i) => {
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();
          osc.type = "sine";
          osc.frequency.setValueAtTime(freq, now + i * 0.12);
          gain.gain.setValueAtTime(0, now + i * 0.12);
          gain.gain.linearRampToValueAtTime(0.12, now + i * 0.12 + 0.05);
          gain.gain.exponentialRampToValueAtTime(0.001, now + i * 0.12 + 0.4);
          osc.connect(gain);
          gain.connect(ctx.destination);
          osc.start(now + i * 0.12);
          osc.stop(now + i * 0.12 + 0.5);
        });
      } else if (progressChange < -2) {
        // Negative progress - descending tone
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = "triangle";
        osc.frequency.setValueAtTime(400, now);
        osc.frequency.linearRampToValueAtTime(250, now + 0.4);
        gain.gain.setValueAtTime(0.1, now);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.5);
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start(now);
        osc.stop(now + 0.5);
      } else {
        // Neutral - simple notification
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = "sine";
        osc.frequency.setValueAtTime(523.25, now);
        gain.gain.setValueAtTime(0.08, now);
        gain.gain.exponentialRampToValueAtTime(0.001, now + 0.3);
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start(now);
        osc.stop(now + 0.3);
      }
    } catch (e) {
      console.log("Feedback sound not available");
    }
  }
  
  dismissDecisionFeedback() {
    clearTimeout(this.feedbackTimeout);
    const overlay = document.getElementById('decisionFeedback');
    if (overlay) overlay.remove();
    if (this.feedbackCallback) {
      this.feedbackCallback();
      this.feedbackCallback = null;
    }
  }
  
  advanceToNextTurn() {
    // Save quarter summary before advancing
    this.saveQuarterSummary();
    
    // Integrating staff become fully productive
    if (this.integratingStaff > 0) {
      this.log(`‚úÖ ${this.integratingStaff} new staff now fully integrated (+${this.getStaffAPBonus()} AP)`);
    }
    this.integratingStaff = 0;
    this.staffAPPenalty = 0;
    this.fundingAPCost = 0; // Reset fundraising cost for new quarter
    
    // Next turn
    this.turn++;
    this.choices = {};
    this.randomizeStartingDomain();
    this.selectQuarterEvents();
    this.update();
    this.renderBoardroom();
  }

  // ===== MINI-GAME INTRO TRANSITION =====
  
  showMiniGameIntro(type) {
    // Store which mini-game is pending
    this.pendingMiniGame = type;
    
    // Define content for each mini-game type
    const content = {
      conference: {
        icon: "üé™",
        title: "Conference Time!",
        headerClass: "from-blue-600 to-indigo-700",
        desc: "You're heading to an industry conference! Work your booth, attract delegates, and generate leads for your startup. Spend your budget wisely!",
        tips: [
          "Click on delegates walking by to engage them",
          "Use üéÅ Swag and ‚òï Coffee to attract attention",
          "Run demos to impress serious prospects",
          "Watch your budget - don't overspend!"
        ],
        rewards: "üí∞ Cash Leads ‚Ä¢ üìà Marketing Boost ‚Ä¢ üåü Brand Awareness"
      },
      pitch: {
        icon: "üé§",
        title: "Investor Pitch!",
        headerClass: "from-purple-600 to-pink-600",
        desc: "You've got 30 seconds in front of venture capitalists! Keep their attention high, use your pitch points wisely, and convince them your startup is worth backing.",
        tips: [
          "Watch the attention meter - don't let it drop!",
          "Different actions cost different points",
          "Time your demo for maximum impact",
          "Read the investors' reactions"
        ],
        rewards: "üí∞ Funding Boost ‚Ä¢ üìä Valuation Increase ‚Ä¢ ü§ù Investor Relations"
      },
      demoday: {
        icon: "üöÄ",
        title: "Demo Day!",
        headerClass: "from-amber-500 to-orange-600",
        desc: "It's Demo Day! You have 60 seconds as visitors approach your booth. Engage leads, build interest, and close deals. Not everyone is worth your time - choose wisely!",
        tips: [
          "Engage visitors first to see their value and preferences",
          "Green offers match preferences - bigger interest boost!",
          "Demo & Custom give huge boosts but cost money - save for high-value visitors!",
          "‚ö† Using 5+ Demos/Customs costs 1 AP, 6+ costs 2 AP (follow-up overload)"
        ],
        rewards: "üí∞ Contract Revenue ‚Ä¢ üìà All Stats Boost ‚Ä¢ ‚≠ê Prestige Clients"
      }
    };
    
    const c = content[type] || content.conference;
    
    // Update modal content
    document.getElementById("minigameIntroIcon").textContent = c.icon;
    document.getElementById("minigameIntroTitle").textContent = c.title;
    document.getElementById("minigameIntroHeader").className = `bg-gradient-to-r ${c.headerClass} text-white p-6 text-center`;
    document.getElementById("minigameIntroDesc").textContent = c.desc;
    document.getElementById("minigameIntroRewards").textContent = c.rewards;
    
    // Update tips
    const tipsList = document.getElementById("minigameIntroTipsList");
    tipsList.innerHTML = c.tips.map(tip => `<li>‚Ä¢ ${tip}</li>`).join("");
    
    // Play intro sound
    this.playMiniGameIntroSound();
    
    // Show modal
    document.getElementById("minigameIntroModal").classList.remove("hidden");
    document.getElementById("minigameIntroModal").classList.add("flex");
  }
  
  playMiniGameIntroSound() {
    try {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const now = ctx.currentTime;
      
      // Create a pleasant "level up" / announcement sound
      // Rising arpeggio with reverb feel
      const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
      
      notes.forEach((freq, i) => {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        
        osc.type = "sine";
        osc.frequency.setValueAtTime(freq, now + i * 0.1);
        
        gain.gain.setValueAtTime(0, now + i * 0.1);
        gain.gain.linearRampToValueAtTime(0.15, now + i * 0.1 + 0.05);
        gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.1 + 0.4);
        
        osc.connect(gain);
        gain.connect(ctx.destination);
        
        osc.start(now + i * 0.1);
        osc.stop(now + i * 0.1 + 0.5);
      });
      
      // Add a final shimmer
      setTimeout(() => {
        const shimmer = ctx.createOscillator();
        const shimmerGain = ctx.createGain();
        shimmer.type = "triangle";
        shimmer.frequency.setValueAtTime(1567.98, ctx.currentTime); // G6
        shimmerGain.gain.setValueAtTime(0.08, ctx.currentTime);
        shimmerGain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.6);
        shimmer.connect(shimmerGain);
        shimmerGain.connect(ctx.destination);
        shimmer.start();
        shimmer.stop(ctx.currentTime + 0.6);
      }, 350);
      
    } catch (e) {
      console.log("Mini-game intro sound not available");
    }
  }
  
  startPendingMiniGame() {
    // Hide intro modal
    document.getElementById("minigameIntroModal").classList.add("hidden");
    document.getElementById("minigameIntroModal").classList.remove("flex");
    
    // Start the appropriate mini-game
    const type = this.pendingMiniGame;
    this.pendingMiniGame = null;
    
    if (type === "conference") {
      this.startConference();
    } else if (type === "pitch") {
      this.startPitch();
    } else if (type === "demoday") {
      this.startDemoDay();
    }
  }

  // ===== CONFERENCE MINI-GAME =====
  
  startConference() {
    // Use current milestone number (1, 2, or 3)
    const milestoneNum = Math.min(3, Math.max(1, this.completedMilestones.length + 1));
    const costs = CONF_COSTS[milestoneNum] || CONF_COSTS[1];
    const conferences = CONFERENCES[this.company.id] || CONFERENCES.aether;
    const conf = conferences[Math.floor(Math.random() * conferences.length)];
    
    this.conferencesAttended++;
    
    // Initialize conference state
    this.conf = {
      active: true,
      timeLeft: 45, // 45 seconds
      budget: costs.budget,
      budgetSpent: 0,
      leads: 0,
      quality: 0,
      interest: 0,
      rivalInterest: 20, // Rivals start with some interest
      rivalLeads: 0,
      delegates: [],
      delegateId: 0,
      costs: costs,
      milestoneNum: milestoneNum,
      demoCooldown: 0,
      talkUsed: false,
      waveCount: 0,
      rivalActionTimer: 0
    };
    
    // Update UI
    document.getElementById("confName").textContent = `${conf.name} ‚Ä¢ ${conf.location}`;
    document.getElementById("confBoothName").textContent = this.company.name.toUpperCase();
    document.getElementById("confBudget").textContent = `¬£${this.conf.budget.toLocaleString()}`;
    document.getElementById("confLeads").textContent = "0";
    document.getElementById("confQuality").textContent = "0";
    document.getElementById("confInterest").textContent = "0";
    document.getElementById("confRivalInterest").textContent = "20";
    document.getElementById("confTimer").textContent = "0:45";
    
    // Update cost displays
    document.querySelectorAll(".swag-cost").forEach(el => el.textContent = costs.swag);
    document.querySelectorAll(".coffee-cost").forEach(el => el.textContent = costs.coffee);
    document.querySelectorAll(".demo-cost").forEach(el => el.textContent = costs.demo);
    document.querySelectorAll(".talk-cost").forEach(el => el.textContent = costs.talk);
    
    // Clear delegates
    document.getElementById("confDelegates").innerHTML = "";
    document.getElementById("confEffects").innerHTML = "";
    
    // Reset buttons
    document.querySelectorAll(".conf-action-btn").forEach(btn => btn.disabled = false);
    document.getElementById("confDemoStatus").textContent = "‚ñ∂ Demo Ready";
    
    // Start background music
    this.startConfMusic();
    
    // Show modal
    document.getElementById("conferenceModal").classList.remove("hidden");
    document.getElementById("conferenceModal").classList.add("flex");
    
    // Start game loop
    this.confGameLoop();
    this.confSpawnLoop();
    this.confRivalLoop();
  }
  
  startConfMusic() {
    // Create audio context for upbeat background music
    try {
      this.confAudioCtx = new (window.AudioContext || window.webkitAudioContext)();
      this.confMusicPlaying = true;
      this.playConfMusicLoop();
    } catch (e) {
      console.log("Audio not available");
    }
  }
  
  playConfMusicLoop() {
    if (!this.confMusicPlaying || !this.confAudioCtx) return;
    
    const ctx = this.confAudioCtx;
    const now = ctx.currentTime;
    
    // Simple upbeat melody pattern
    const notes = [261.63, 329.63, 392.00, 329.63, 261.63, 392.00, 329.63, 261.63]; // C4, E4, G4 pattern
    const bassNotes = [130.81, 130.81, 164.81, 164.81]; // C3, E3 bass
    
    notes.forEach((freq, i) => {
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.type = 'square';
      osc.frequency.value = freq;
      gain.gain.value = 0.03;
      gain.gain.exponentialRampToValueAtTime(0.001, now + (i + 1) * 0.15);
      osc.connect(gain);
      gain.connect(ctx.destination);
      osc.start(now + i * 0.15);
      osc.stop(now + (i + 1) * 0.15);
    });
    
    // Bass
    bassNotes.forEach((freq, i) => {
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      osc.type = 'triangle';
      osc.frequency.value = freq;
      gain.gain.value = 0.05;
      gain.gain.exponentialRampToValueAtTime(0.001, now + (i + 1) * 0.3);
      osc.connect(gain);
      gain.connect(ctx.destination);
      osc.start(now + i * 0.3);
      osc.stop(now + (i + 1) * 0.3);
    });
    
    // Loop
    setTimeout(() => this.playConfMusicLoop(), 1200);
  }
  
  stopConfMusic() {
    this.confMusicPlaying = false;
    if (this.confAudioCtx) {
      this.confAudioCtx.close();
      this.confAudioCtx = null;
    }
  }
  
  confGameLoop() {
    if (!this.conf?.active) return;
    
    this.conf.timeLeft -= 0.1;
    
    // Update timer
    const mins = Math.floor(this.conf.timeLeft / 60);
    const secs = Math.floor(this.conf.timeLeft % 60);
    document.getElementById("confTimer").textContent = `${mins}:${secs.toString().padStart(2, '0')}`;
    
    // Demo cooldown
    if (this.conf.demoCooldown > 0) {
      this.conf.demoCooldown -= 0.1;
      if (this.conf.demoCooldown <= 0) {
        document.getElementById("confDemoStatus").textContent = "‚ñ∂ Demo Ready";
        document.getElementById("confActionDemo").disabled = false;
      }
    }
    
    // Move delegates
    this.confMoveDelegates();
    
    // Decay interest slowly
    this.conf.interest = Math.max(0, this.conf.interest - 0.05);
    document.getElementById("confInterest").textContent = Math.round(this.conf.interest);
    
    // End game?
    if (this.conf.timeLeft <= 0) {
      this.endConference();
      return;
    }
    
    setTimeout(() => this.confGameLoop(), 100);
  }
  
  confSpawnLoop() {
    if (!this.conf?.active) return;
    
    // Faster spawn rate for 45s game
    const spawnChance = 0.5 + (this.conf.interest / 150);
    
    if (Math.random() < spawnChance && this.conf.delegates.length < 20) {
      this.confSpawnDelegate();
    }
    
    setTimeout(() => this.confSpawnLoop(), 500); // Faster spawning
  }
  
  confSpawnDelegate() {
    // Weight delegate types - more common types appear more often
    const weights = [30, 25, 20, 12, 5, 5, 3]; // student to competitor
    const totalWeight = weights.reduce((a, b) => a + b, 0);
    let random = Math.random() * totalWeight;
    let typeIndex = 0;
    for (let i = 0; i < weights.length; i++) {
      random -= weights[i];
      if (random <= 0) {
        typeIndex = i;
        break;
      }
    }
    
    const delegateType = DELEGATE_TYPES[typeIndex];
    const fromLeft = Math.random() > 0.5;
    const id = this.conf.delegateId++;
    
    const delegate = {
      id,
      ...delegateType,
      x: fromLeft ? -30 : 830,
      direction: fromLeft ? 1 : -1,
      interestLevel: 0,
      mood: 'neutral',
      engaged: false,
      engagedTo: null // 'player', 'left', 'right'
    };
    
    this.conf.delegates.push(delegate);
    
    // Create DOM element with SVG person
    const el = document.createElement("div");
    el.id = `delegate-${id}`;
    el.className = "conf-delegate walking";
    el.style.left = `${delegate.x}px`;
    el.innerHTML = getDelegateSVG(delegate.type, 'neutral');
    el.onclick = () => this.confClickDelegate(id);
    
    document.getElementById("confDelegates").appendChild(el);
  }
  
  confRivalLoop() {
    if (!this.conf?.active) return;
    
    // Rivals do random actions
    this.conf.rivalActionTimer -= 0.5;
    if (this.conf.rivalActionTimer <= 0) {
      this.confRivalAction();
      this.conf.rivalActionTimer = 3 + Math.random() * 4; // Every 3-7 seconds
    }
    
    setTimeout(() => this.confRivalLoop(), 500);
  }
  
  confRivalAction() {
    const actions = ['demo', 'swag', 'wave'];
    const action = actions[Math.floor(Math.random() * actions.length)];
    const isLeft = Math.random() > 0.5;
    const boothEl = document.getElementById(isLeft ? 'confBoothLeft' : 'confBoothRight');
    const demoEl = document.getElementById(isLeft ? 'confLeftDemo' : 'confRightDemo');
    
    // Visual feedback
    if (boothEl) {
      boothEl.classList.add('conf-rival-action');
      setTimeout(() => boothEl.classList.remove('conf-rival-action'), 500);
    }
    
    // Update demo status
    if (action === 'demo' && demoEl) {
      demoEl.textContent = 'üî¥ LIVE!';
      setTimeout(() => demoEl.textContent = '‚ñ∂ DEMO', 2000);
    }
    
    // Boost rival interest
    const boost = action === 'demo' ? 15 : action === 'swag' ? 8 : 3;
    this.conf.rivalInterest = Math.min(100, this.conf.rivalInterest + boost);
    document.getElementById("confRivalInterest").textContent = Math.round(this.conf.rivalInterest);
    
    // Rivals might steal delegates near their booth
    const rivalBoothX = isLeft ? 80 : 720;
    this.conf.delegates.forEach(d => {
      if (!d.engaged && Math.abs(d.x - rivalBoothX) < 100) {
        if (Math.random() < 0.15 && this.conf.rivalInterest > this.conf.interest) {
          d.engaged = true;
          d.engagedTo = isLeft ? 'left' : 'right';
          const el = document.getElementById(`delegate-${d.id}`);
          if (el) {
            el.classList.remove('walking');
            el.classList.add('interested');
          }
        }
      }
    });
  }
  
  confMoveDelegates() {
    const boothLeft = 320;
    const boothRight = 480;
    const toRemove = [];
    
    this.conf.delegates.forEach(d => {
      const el = document.getElementById(`delegate-${d.id}`);
      if (!el) return;
      
      // If engaged to player, move toward your booth
      if (d.engaged && d.engagedTo === 'player') {
        const targetX = 400;
        const diff = targetX - d.x;
        d.x += diff * 0.08;
        
        // Check if converted
        if (Math.abs(diff) < 20 && d.interestLevel >= 100) {
          this.confConvertDelegate(d);
          toRemove.push(d.id);
        }
      } else if (d.engagedTo === 'left' || d.engagedTo === 'right') {
        // Moving to rival booth
        const targetX = d.engagedTo === 'left' ? 80 : 720;
        const diff = targetX - d.x;
        d.x += diff * 0.08;
        
        // Convert to rival
        if (Math.abs(diff) < 15) {
          this.conf.rivalLeads++;
          toRemove.push(d.id);
          const el = document.getElementById(`delegate-${d.id}`);
          if (el) el.remove();
        }
      } else {
        // Normal walking
        d.x += d.direction * d.speed;
        
        // Near your booth - might get interested or disgusted
        if (d.x > boothLeft && d.x < boothRight) {
          // High interest attracts them
          if (this.conf.interest > 20 && Math.random() < 0.04) {
            d.engaged = true;
            d.engagedTo = 'player';
            d.interestLevel = 25;
            d.mood = 'interested';
            el.classList.remove('walking');
            el.classList.add("interested");
            el.innerHTML = getDelegateSVG(d.type, 'interested');
          }
          // Some delegates get turned off (irritable ones more likely)
          else if (Math.random() < d.irritable * 0.03) {
            d.mood = 'disgusted';
            el.classList.add("disgusted");
            el.innerHTML = getDelegateSVG(d.type, 'disgusted');
            this.confShowEffect(d.x, 180, "üò§", "#ef4444");
            // Speed up to leave
            d.speed *= 1.5;
          }
        }
        
        // Near rival booths - might get stolen
        if ((d.x > 40 && d.x < 140) || (d.x > 680 && d.x < 780)) {
          if (Math.random() < 0.02 && this.conf.rivalInterest > this.conf.interest) {
            d.engaged = true;
            d.engagedTo = d.x < 400 ? 'left' : 'right';
            d.mood = 'interested';
            el.classList.remove('walking');
            el.classList.add("interested");
          }
        }
        
        // Remove if off screen
        if (d.x < -40 || d.x > 840) {
          toRemove.push(d.id);
        }
      }
      
      el.style.left = `${d.x}px`;
    });
    
    // Remove delegates
    toRemove.forEach(id => {
      const el = document.getElementById(`delegate-${id}`);
      if (el) el.remove();
      this.conf.delegates = this.conf.delegates.filter(d => d.id !== id);
    });
  }
  
  confClickDelegate(id) {
    const d = this.conf.delegates.find(x => x.id === id);
    if (!d || d.engagedTo === 'left' || d.engagedTo === 'right') return; // Can't steal from rivals
    
    // Clicking boosts their interest
    d.interestLevel += 20;
    d.engaged = true;
    d.engagedTo = 'player';
    d.mood = 'interested';
    
    const el = document.getElementById(`delegate-${id}`);
    if (el) {
      el.classList.remove('walking', 'disgusted');
      el.classList.add("interested");
      el.innerHTML = getDelegateSVG(d.type, 'interested');
      this.confShowEffect(d.x, 180, "+üéØ");
    }
    
    // Check if converted
    if (d.interestLevel >= 100) {
      this.confConvertDelegate(d);
    }
  }
  
  confConvertDelegate(d) {
    const el = document.getElementById(`delegate-${d.id}`);
    if (el) {
      el.classList.remove("interested", "walking");
      el.classList.add("converting");
      setTimeout(() => el.remove(), 400);
    }
    
    // Remove from array
    this.conf.delegates = this.conf.delegates.filter(x => x.id !== d.id);
    
    // Add lead (or lose point for competitor)
    if (d.type === "competitor") {
      this.conf.quality -= 2;
      this.confShowEffect(400, 150, "üïµ Spy!", "#ef4444");
    } else {
      this.conf.leads++;
      this.conf.quality += d.value;
      this.confShowEffect(400, 150, `+1 Lead! ‚≠ê${d.value}`, "#10b981");
    }
    
    // Update UI
    document.getElementById("confLeads").textContent = this.conf.leads;
    document.getElementById("confQuality").textContent = this.conf.quality;
  }
  
  confAction(type) {
    const costs = this.conf.costs;
    let cost = 0;
    
    switch (type) {
      case "wave":
        // Free, small effect
        this.conf.waveCount++;
        this.conf.interest += 3;
        this.confShowWave();
        // Boost nearby delegates
        this.conf.delegates.forEach(d => {
          if (d.x > 250 && d.x < 550 && !d.engaged) {
            d.interestLevel += 5;
          }
        });
        break;
        
      case "swag":
        cost = costs.swag;
        if (this.conf.budget < cost) return;
        this.conf.budget -= cost;
        this.conf.interest += 8;
        this.confShowEffect(350, 250, "üéÅ", "#f59e0b");
        // Boost all visible delegates
        this.conf.delegates.forEach(d => {
          if (d.x > 100 && d.x < 700) {
            d.interestLevel += 10;
          }
        });
        break;
        
      case "coffee":
        cost = costs.coffee;
        if (this.conf.budget < cost) return;
        this.conf.budget -= cost;
        this.conf.interest += 15;
        this.confShowEffect(450, 250, "‚òï", "#f97316");
        // Stronger effect on nearby delegates
        this.conf.delegates.forEach(d => {
          if (d.x > 200 && d.x < 600) {
            d.interestLevel += 20;
            if (!d.engaged && d.interestLevel > 30) {
              d.engaged = true;
              const el = document.getElementById(`delegate-${d.id}`);
              if (el) el.classList.add("interested");
            }
          }
        });
        break;
        
      case "demo":
        cost = costs.demo;
        if (this.conf.budget < cost || this.conf.demoCooldown > 0) return;
        this.conf.budget -= cost;
        this.conf.interest += 30;
        this.conf.demoCooldown = 10; // 10 second cooldown
        document.getElementById("confDemoStatus").textContent = "üîÑ Running...";
        document.getElementById("confActionDemo").disabled = true;
        this.confShowEffect(400, 180, "üíª DEMO!", "#3b82f6");
        // Big boost to all delegates
        this.conf.delegates.forEach(d => {
          d.interestLevel += 25;
          if (!d.engaged && d.interestLevel > 20) {
            d.engaged = true;
            const el = document.getElementById(`delegate-${d.id}`);
            if (el) el.classList.add("interested");
          }
        });
        break;
        
      case "talk":
        cost = costs.talk;
        if (this.conf.budget < cost || this.conf.talkUsed) return;
        this.conf.budget -= cost;
        this.conf.interest += 50;
        this.conf.talkUsed = true;
        document.getElementById("confActionTalk").disabled = true;
        this.confShowEffect(400, 100, "üé§ KEYNOTE!", "#8b5cf6");
        // Massive boost
        this.conf.delegates.forEach(d => {
          d.interestLevel += 40;
          d.engaged = true;
          const el = document.getElementById(`delegate-${d.id}`);
          if (el) el.classList.add("interested");
        });
        break;
    }
    
    // Update budget display
    document.getElementById("confBudget").textContent = `¬£${this.conf.budget.toLocaleString()}`;
    document.getElementById("confInterest").textContent = Math.round(this.conf.interest);
  }
  
  confShowEffect(x, y, text, color = "#000") {
    const el = document.createElement("div");
    el.className = "conf-effect";
    el.style.left = `${x}px`;
    el.style.top = `${y}px`;
    el.style.color = color;
    el.style.fontWeight = "bold";
    el.style.fontSize = "16px";
    el.textContent = text;
    
    document.getElementById("confEffects").appendChild(el);
    setTimeout(() => el.remove(), 600);
  }
  
  confShowWave() {
    const el = document.createElement("div");
    el.className = "conf-wave";
    el.style.left = "380px";
    el.style.top = "220px";
    el.style.width = "40px";
    el.style.height = "40px";
    
    document.getElementById("confEffects").appendChild(el);
    setTimeout(() => el.remove(), 800);
  }
  
  endConference() {
    this.conf.active = false;
    this.stopConfMusic();
    
    // Calculate results
    const leads = this.conf.leads;
    const quality = this.conf.quality;
    const rivalLeads = this.conf.rivalLeads || 0;
    const spent = CONF_COSTS[this.conf.milestoneNum]?.budget - this.conf.budget || 0;
    
    // Determine tier (compare to rivals too)
    let tier, icon, title;
    const netLeads = leads - rivalLeads;
    if (leads <= 3) {
      tier = 1;
      icon = "üòï";
      title = "Quiet Show";
    } else if (leads <= 8) {
      tier = 2;
      icon = "üëç";
      title = "Decent Showing";
    } else if (leads <= 15) {
      tier = 3;
      icon = "üåü";
      title = "Great Booth!";
    } else if (leads <= 25) {
      tier = 4;
      icon = "üî•";
      title = "Hit of the Show!";
    } else {
      tier = 5;
      icon = "üèÜ";
      title = "Legendary Performance!";
    }
    
    // Calculate rewards based on tier and milestone stage
    const milestoneNum = this.conf.milestoneNum || 1;
    const multiplier = milestoneNum; // Later milestones = bigger rewards
    
    const rewards = {
      mkt: tier * multiplier,
      sci: tier >= 3 ? Math.floor(tier / 2) * multiplier : 0,
      cash: tier >= 4 ? 50 * multiplier : 0,
      val: tier >= 4 ? 30 * multiplier : 0
    };
    
    // Apply rewards
    Object.entries(rewards).forEach(([k, v]) => {
      if (v > 0 && this.metrics[k] !== undefined) {
        this.metrics[k] += v;
      }
    });
    
    // Hide game modal
    document.getElementById("conferenceModal").classList.add("hidden");
    document.getElementById("conferenceModal").classList.remove("flex");
    
    // Show results
    document.getElementById("confResultIcon").textContent = icon;
    document.getElementById("confResultTitle").textContent = title;
    document.getElementById("confResultText").textContent = 
      tier <= 2 ? "Not many people stopped by, but you made some connections." :
      tier === 3 ? "Good engagement! Your booth attracted solid interest." :
      tier === 4 ? "Fantastic! People were queuing to see your demo." :
      "Incredible! You were the talk of the conference!";
    
    document.getElementById("confResultStats").innerHTML = `
      <div class="flex justify-between mb-1"><span>Leads Generated:</span><span class="font-bold">${leads}</span></div>
      <div class="flex justify-between mb-1"><span>Lead Quality:</span><span class="font-bold">‚≠ê${quality}</span></div>
      <div class="flex justify-between"><span>Budget Spent:</span><span class="font-bold">¬£${spent.toLocaleString()}</span></div>
    `;
    
    const rewardLines = [];
    if (rewards.mkt > 0) rewardLines.push(`+${rewards.mkt} Sales`);
    if (rewards.sci > 0) rewardLines.push(`+${rewards.sci} Research`);
    if (rewards.cash > 0) rewardLines.push(`+¬£${rewards.cash}k Cash`);
    if (rewards.val > 0) rewardLines.push(`+¬£${rewards.val}k Valuation`);
    
    document.getElementById("confResultRewards").innerHTML = rewardLines.length > 0 
      ? `<div class="font-bold mb-1">Rewards:</div>${rewardLines.join(" ‚Ä¢ ")}`
      : `<div class="text-slate-500">No significant rewards this time.</div>`;
    
    document.getElementById("conferenceResultsModal").classList.remove("hidden");
    document.getElementById("conferenceResultsModal").classList.add("flex");
    
    this.log(`üìç Attended conference: ${leads} leads, +${rewards.mkt} Sales`);
  }
  
  closeConference() {
    document.getElementById("conferenceResultsModal").classList.add("hidden");
    document.getElementById("conferenceResultsModal").classList.remove("flex");
    // Player continues making their choices for the quarter
  }

  // ===== INVESTOR PITCH MINI-GAME =====
  
  // Test function to jump directly to pitch mini-game
  testPitch() {
    // Set up minimal game state for testing
    this.company = { id: 'aether', name: 'Aether BioLabs', color: '#10b981' };
    this.metrics = { cash: 500, val: 1200, equity: 75, staff: 8, burn: 80, sci: 45, dev: 40, mkt: 35, hr: 50 };
    this.completedMilestones = ['m1', 'm2']; // Pretend we completed M1 and M2
    
    // Hide preamble
    document.getElementById("preambleModal1").classList.add("hidden");
    
    // Show intro first (or call this.startPitch() directly to skip intro)
    this.showMiniGameIntro("pitch");
  }
  
  // Test functions for other mini-games
  testConference() {
    this.company = { id: 'aether', name: 'Aether BioLabs', color: '#10b981' };
    this.metrics = { cash: 500, val: 1200, equity: 75, staff: 8, burn: 80, sci: 45, dev: 40, mkt: 35, hr: 50 };
    this.completedMilestones = [];
    document.getElementById("preambleModal1").classList.add("hidden");
    this.showMiniGameIntro("conference");
  }
  
  testDemoDay() {
    this.company = { id: 'aether', name: 'Aether BioLabs', color: '#10b981', subtitle: 'AI-Powered Healthcare' };
    this.metrics = { cash: 500, val: 1200, equity: 75, staff: 8, burn: 80, sci: 45, dev: 40, mkt: 35, hr: 50 };
    this.completedMilestones = ['m1', 'm2'];
    document.getElementById("preambleModal1").classList.add("hidden");
    this.showMiniGameIntro("demoday");
  }


  // ===== MEDIA DAY MINI-GAME (M3) =====
  // ===== DEMO DAY MINI-GAME (M3) =====
  
  startDemoDay() {
    // Initialize Demo Day state
    this.demoDay = {
      running: true,
      timeLeft: 60,
      conversions: 0,
      totalVisitors: 0,
      currentVisitor: null,
      resources: { swag: 5, coffee: 6, demo: 3, discount: 4, custom: 3, massive: 1 },
      resourcesUsed: { swag: 0, coffee: 0, demo: 0, discount: 0, custom: 0, massive: 0 },
      costs: { swag: 0, coffee: 0, demo: 25, discount: 20, custom: 40, massive: 80 },
      statBonuses: { demo: { dev: 1 }, custom: { dev: 1, sci: 1 } },
      totalCostsSpent: 0,
      totalConversionValue: 0,
      prestigeBonus: 0,
      earnedStats: { dev: 0, sci: 0, mkt: 0 },
      offersGiven: [],
      visitorPatience: 18 // seconds per visitor
    };
    
    this.demoDayVisitorTypes = [
      { type: "startup", emoji: "üë®üíª", title: "Startup Founder", interest: 45, value: 15, likes: ["swag", "coffee", "demo"], dislikes: [], engageQuote: "We just closed our seed round.", conversionBonus: { mkt: 1 } },
      { type: "enterprise", emoji: "üëî", title: "Enterprise Buyer", interest: 15, value: 80, prestige: true, likes: ["custom", "discount", "demo", "massive"], dislikes: ["swag"], engageQuote: "I'm head of procurement for a Fortune 500.", conversionBonus: { mkt: 1 } },
      { type: "developer", emoji: "üë©üíª", title: "Senior Developer", interest: 50, value: 20, likes: ["swag", "coffee", "demo"], dislikes: ["discount"], engageQuote: "Evaluating tools for our dev team of 50.", conversionBonus: { dev: 1 } },
      { type: "investor", emoji: "üíº", title: "VC Associate", interest: 20, value: 60, prestige: true, likes: ["coffee", "demo"], dislikes: ["swag", "discount", "massive"], engageQuote: "We lead Series A rounds in enterprise SaaS.", conversionBonus: { mkt: 1 } },
      { type: "cto", emoji: "üßëüíº", title: "Scaleup CTO", interest: 20, value: 70, prestige: true, likes: ["custom", "discount", "coffee", "demo", "massive"], dislikes: [], engageQuote: "Looking to replace our vendor. Budget approved.", conversionBonus: { dev: 1 } },
      { type: "champion", emoji: "üôã", title: "Internal Champion", interest: 45, value: 35, likes: ["discount", "coffee", "demo"], dislikes: [], engageQuote: "My team wants this - need to build the case.", conversionBonus: { mkt: 1 } },
      { type: "student", emoji: "üéì", title: "CS Student", interest: 65, value: 5, likes: ["swag"], dislikes: ["custom", "discount", "massive"], engageQuote: "Doing a university project on AI tools.", conversionBonus: { sci: 1 } },
      { type: "researcher", emoji: "üî¨", title: "PhD Researcher", interest: 50, value: 5, likes: ["coffee", "demo"], dislikes: ["discount", "massive"], engageQuote: "I'm at Imperial, researching ML applications.", conversionBonus: { sci: 1 } },
      { type: "browser", emoji: "üö∂", title: "Just Browsing", interest: 70, value: 0, likes: ["swag"], dislikes: ["custom", "discount", "coffee", "demo", "massive"], engageQuote: "Just walking the floor, killing time.", conversionBonus: null },
      { type: "competitor", emoji: "üïµ", title: "Competitor Scout", interest: 60, value: 0, likes: ["demo"], dislikes: ["custom", "discount", "massive"], engageQuote: "I work in... a similar space. Just curious.", conversionBonus: null },
      { type: "tire_kicker", emoji: "ü§î", title: "Tire Kicker", interest: 40, value: 0, likes: ["demo", "coffee"], dislikes: ["discount", "massive"], engageQuote: "We've been researching for 18 months. No rush.", conversionBonus: null },
      { type: "cheapskate", emoji: "üí∏", title: "Budget Hunter", interest: 20, value: 10, likes: ["discount", "massive"], dislikes: ["custom"], engageQuote: "We only buy if it's at least 50% off.", conversionBonus: null }
    ];
    
    const html = `
      <div class="fixed inset-0 bg-gradient-to-b from-slate-800 to-slate-900 flex flex-col z-50 p-4" id="demoDayModal">
        <div class="max-w-4xl mx-auto w-full flex-1 flex flex-col">
          <!-- Top Bar -->
          <div class="flex justify-between items-center mb-4">
            <div id="ddTimerBox" class="bg-slate-700 rounded-xl px-5 py-3 flex items-center gap-3">
              <span class="text-2xl">‚è±</span>
              <span id="ddTimer" class="text-4xl font-bold text-white font-mono">60</span>
            </div>
            <div class="bg-slate-700 rounded-xl px-5 py-3 text-center">
              <div class="text-slate-400 text-sm uppercase tracking-wide">Converted</div>
              <div class="flex items-center gap-2 justify-center">
                <span id="ddConversions" class="text-3xl font-bold text-amber-400">0</span>
                <span class="text-slate-500 text-xl">/</span>
                <span id="ddTotalVisitors" class="text-xl text-slate-400">0</span>
              </div>
            </div>
            <div class="bg-slate-700 rounded-xl px-5 py-3 text-center">
              <div class="text-slate-400 text-sm uppercase tracking-wide">Net Profit</div>
              <div id="ddNetProfit" class="text-3xl font-bold text-emerald-400">¬£0k</div>
            </div>
          </div>
          
          <!-- Resources Bar -->
          <div class="bg-slate-800 rounded-xl p-3 mb-4 flex justify-between items-center">
            <div class="flex gap-4 text-base">
              <span class="flex items-center gap-1">üéÅ<span id="ddSwag" class="text-emerald-400 font-bold">5</span></span>
              <span class="flex items-center gap-1">‚òï<span id="ddCoffee" class="text-purple-400 font-bold">6</span></span>
              <span class="flex items-center gap-1">üñ•<span id="ddDemo" class="text-cyan-400 font-bold">3</span></span>
              <span class="flex items-center gap-1">üí∞<span id="ddDiscount" class="text-amber-400 font-bold">4</span></span>
              <span class="flex items-center gap-1">üîß<span id="ddCustom" class="text-blue-400 font-bold">3</span></span>
              <span class="flex items-center gap-1">‚≠ê<span id="ddMassive" class="text-rose-400 font-bold">1</span></span>
            </div>
            <div class="text-slate-400 text-sm">Costs: <span id="ddCosts" class="text-red-400 font-bold">¬£0k</span></div>
          </div>
          
          <!-- Booth -->
          <div class="bg-gradient-to-b from-blue-800 to-blue-900 rounded-xl p-4 mb-4 border-2 border-blue-500">
            <div class="flex items-center gap-4 text-white">
              <span class="text-4xl">üöÄ</span>
              <div>
                <div class="font-bold text-xl">${this.company?.name || 'YOUR STARTUP'}</div>
                <div class="text-blue-300 text-sm">${this.company?.subtitle || 'AI-Powered Innovation'}</div>
              </div>
            </div>
          </div>
          
          <!-- Visitor Zone -->
          <div id="ddVisitorZone" class="flex-1 relative">
            <div class="text-center py-16 text-slate-500">
              <div class="text-6xl mb-3">üëÄ</div>
              <div class="text-lg">Waiting for visitors...</div>
            </div>
          </div>
          
          <!-- Floating text -->
          <div id="ddFloatingText" class="absolute inset-0 pointer-events-none overflow-hidden"></div>
        </div>
      </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', html);
    
    // Start game loop
    this.demoDayLoop();
    setTimeout(() => this.demoDaySpawnVisitor(), 500);
  }
  
  demoDayLoop() {
    if (!this.demoDay?.running) return;
    
    this.demoDay.timeLeft -= 0.1;
    const t = this.demoDay.timeLeft;
    
    document.getElementById('ddTimer').textContent = Math.ceil(t);
    
    const timerBox = document.getElementById('ddTimerBox');
    if (t <= 10) timerBox.className = "bg-red-600 rounded-xl px-4 py-2 flex items-center gap-2";
    else if (t <= 20) timerBox.className = "bg-amber-600 rounded-xl px-4 py-2 flex items-center gap-2";
    
    if (t <= 0) {
      this.demoDayEnd();
      return;
    }
    
    setTimeout(() => this.demoDayLoop(), 100);
  }
  
  demoDaySpawnVisitor() {
    if (!this.demoDay?.running || this.demoDay.currentVisitor) return;
    
    const vType = this.demoDayVisitorTypes[Math.floor(Math.random() * this.demoDayVisitorTypes.length)];
    const patience = this.demoDay.visitorPatience || 18;
    this.demoDay.currentVisitor = { ...vType, currentInterest: vType.interest, timeLeft: patience, maxTime: patience, qualified: false };
    this.demoDay.totalVisitors++;
    this.demoDay.offersGiven = [];
    
    document.getElementById('ddTotalVisitors').textContent = this.demoDay.totalVisitors;
    this.demoDayRenderVisitor();
    this.demoDayVisitorCountdown();
  }
  
  demoDayVisitorCountdown() {
    if (!this.demoDay?.running || !this.demoDay.currentVisitor) return;
    
    this.demoDay.currentVisitor.timeLeft -= 0.1;
    const maxTime = this.demoDay.currentVisitor.maxTime || 15;
    const pct = (this.demoDay.currentVisitor.timeLeft / maxTime) * 100;
    
    const bar = document.getElementById('ddPatienceBar');
    if (bar) {
      bar.style.width = `${pct}%`;
      bar.className = `h-full rounded-full transition-all ${pct > 50 ? 'bg-emerald-500' : pct > 25 ? 'bg-amber-500' : 'bg-red-500'}`;
    }
    
    if (this.demoDay.currentVisitor.timeLeft <= 0) {
      this.demoDayVisitorLeaves(false);
      return;
    }
    
    setTimeout(() => this.demoDayVisitorCountdown(), 100);
  }
  
  demoDayRenderVisitor() {
    const zone = document.getElementById('ddVisitorZone');
    const v = this.demoDay.currentVisitor;
    const dd = this.demoDay;
    
    if (!v) {
      zone.innerHTML = `<div class="text-center py-12 text-slate-500"><div class="text-4xl mb-2">üëÄ</div><div>Waiting for visitors...</div></div>`;
      return;
    }
    
    if (!v.qualified) {
      // Generate visual hints based on visitor type
      const hints = this.getDemoDayVisitorHints(v);
      
      zone.innerHTML = `
        <div class="bg-slate-800 rounded-xl p-5 border-2 border-slate-600">
          <div class="flex items-start gap-4 mb-4">
            <div class="text-6xl">${v.emoji}</div>
            <div class="flex-1">
              <h3 class="text-white font-bold text-xl mb-1">Someone approaches...</h3>
              <p class="text-slate-400 text-base italic">"Hi, interested in your product."</p>
              
              <!-- Visual hints -->
              <div class="mt-3 bg-slate-700/50 rounded-lg p-3">
                <div class="text-xs text-slate-500 uppercase tracking-wide mb-2">First Impressions</div>
                <div class="flex flex-wrap gap-2">
                  ${hints.map(h => `<span class="px-2 py-1 rounded-full text-sm ${h.color}">${h.icon} ${h.text}</span>`).join('')}
                </div>
              </div>
              
              <div class="h-2 bg-slate-700 rounded-full mt-3 overflow-hidden">
                <div id="ddPatienceBar" class="h-full bg-emerald-500 rounded-full" style="width:100%"></div>
              </div>
            </div>
            <div class="text-right">
              <div class="text-slate-500 text-2xl mb-1">???</div>
              <div class="text-xs text-slate-500">Value unknown</div>
            </div>
          </div>
          <div class="flex gap-3">
            <button onclick="game.demoDayEngage()" class="flex-1 py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-lg text-lg">Engage (-2s)</button>
            <button onclick="game.demoDaySkip()" class="flex-1 py-3 bg-slate-600 hover:bg-slate-500 text-white font-bold rounded-lg text-lg">Skip</button>
          </div>
        </div>`;
      return;
    }
    
    const getEff = (t) => {
      const e = { swag: [25,10], coffee: [20,10], demo: [30,18], discount: [30,15], custom: [35,15], massive: [50,25] };
      if (v.likes.includes(t)) return `+${e[t][0]}%`;
      if (v.dislikes.includes(t)) return `-10%`;
      return `+${e[t][1]}%`;
    };
    const effColor = (t) => v.likes.includes(t) ? 'text-emerald-400' : v.dislikes.includes(t) ? 'text-red-400' : 'text-slate-400';
    const valColor = v.value >= 50 ? 'text-emerald-400' : v.value >= 20 ? 'text-amber-400' : v.value > 0 ? 'text-slate-400' : 'text-red-400';
    const warn = v.value === 0 && !v.conversionBonus ? '<span class="text-red-400 text-sm">‚ö† Time-waster!</span>' : v.conversionBonus ? `<span class="text-cyan-400 text-sm">+1 ${Object.keys(v.conversionBonus)[0]}</span>` : '';
    
    // Determine if convert is possible
    const canConvert = v.currentInterest >= 75;
    
    zone.innerHTML = `
      <div class="bg-slate-800 rounded-xl p-4 border-2 ${v.value === 0 ? 'border-red-800' : 'border-slate-600'}">
        <!-- Header row with visitor info -->
        <div class="flex items-center gap-3 mb-2">
          <div class="text-5xl">${v.emoji}</div>
          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-center">
              <h3 class="text-white font-bold text-lg">${v.title}</h3>
              <div class="flex items-center gap-2">
                <span class="${valColor} font-bold text-xl">¬£${v.value}k</span>
                ${v.prestige ? '<span class="text-amber-400">‚≠ê</span>' : ''}
              </div>
            </div>
            <p class="text-slate-400 text-sm italic truncate">"${v.engageQuote}"</p>
          </div>
          ${warn ? `<div>${warn}</div>` : ''}
        </div>
        
        <!-- Interest bar and Convert button side by side -->
        <div class="flex gap-3 mb-3">
          <div class="flex-1 bg-slate-900 rounded-lg p-2">
            <div class="flex justify-between text-xs mb-1">
              <span class="text-slate-500">Interest</span>
              <span id="ddInterest" class="text-white font-bold">${v.currentInterest}%</span>
            </div>
            <div class="h-3 bg-slate-700 rounded-full overflow-hidden relative">
              <div id="ddInterestBar" class="h-full bg-blue-500 transition-all" style="width:${v.currentInterest}%"></div>
              <div class="absolute top-0 bottom-0 w-1 bg-emerald-400" style="left:75%"></div>
            </div>
            <!-- Patience bar below -->
            <div class="h-1.5 bg-slate-700 rounded-full mt-2 overflow-hidden">
              <div id="ddPatienceBar" class="h-full bg-emerald-500 rounded-full" style="width:100%"></div>
            </div>
          </div>
          
          <!-- Convert button - prominent on right -->
          <button onclick="game.demoDayConvert()" id="ddConvertBtn" class="w-32 ${canConvert ? 'bg-gradient-to-r from-emerald-500 to-green-400 hover:from-emerald-400 hover:to-green-300' : 'bg-slate-700 cursor-not-allowed'} text-white font-bold rounded-xl text-sm transition-all flex flex-col items-center justify-center" ${canConvert ? '' : 'disabled'}>
            ${canConvert ? `<span class="text-2xl">‚úÖ</span><span>CONVERT</span><span class="text-xs">¬£${v.value}k</span>` : `<span class="text-lg">üîí</span><span class="text-xs">Need ${75 - v.currentInterest}%</span>`}
          </button>
        </div>
        
        <!-- Offer buttons - compact 1 row of 6 -->
        <div class="grid grid-cols-6 gap-1 mb-2">
          <button onclick="game.demoDayOffer('swag')" ${dd.resources.swag <= 0 || dd.offersGiven.includes('swag') ? 'disabled' : ''} class="p-2 bg-emerald-700 hover:bg-emerald-600 disabled:bg-slate-700 disabled:opacity-50 rounded text-white text-xs font-medium text-center">üéÅ<br><span class="${effColor('swag')}">${getEff('swag')}</span></button>
          <button onclick="game.demoDayOffer('coffee')" ${dd.resources.coffee <= 0 || dd.offersGiven.includes('coffee') ? 'disabled' : ''} class="p-2 bg-purple-700 hover:bg-purple-600 disabled:bg-slate-700 disabled:opacity-50 rounded text-white text-xs font-medium text-center">‚òï<br><span class="${effColor('coffee')}">${getEff('coffee')}</span></button>
          <button onclick="game.demoDayOffer('demo')" ${dd.resources.demo <= 0 || dd.offersGiven.includes('demo') ? 'disabled' : ''} class="p-2 bg-cyan-700 hover:bg-cyan-600 disabled:bg-slate-700 disabled:opacity-50 rounded text-white text-xs font-medium text-center">üñ•<br><span class="${effColor('demo')}">${getEff('demo')}</span></button>
          <button onclick="game.demoDayOffer('discount')" ${dd.resources.discount <= 0 || dd.offersGiven.includes('discount') ? 'disabled' : ''} class="p-2 bg-amber-700 hover:bg-amber-600 disabled:bg-slate-700 disabled:opacity-50 rounded text-white text-xs font-medium text-center">üí∞<br><span class="${effColor('discount')}">${getEff('discount')}</span></button>
          <button onclick="game.demoDayOffer('custom')" ${dd.resources.custom <= 0 || dd.offersGiven.includes('custom') ? 'disabled' : ''} class="p-2 bg-blue-700 hover:bg-blue-600 disabled:bg-slate-700 disabled:opacity-50 rounded text-white text-xs font-medium text-center">üîß<br><span class="${effColor('custom')}">${getEff('custom')}</span></button>
          <button onclick="game.demoDayOffer('massive')" ${dd.resources.massive <= 0 || dd.offersGiven.includes('massive') ? 'disabled' : ''} class="p-2 bg-rose-700 hover:bg-rose-600 disabled:bg-slate-700 disabled:opacity-50 rounded text-white text-xs font-medium text-center border border-rose-500">‚≠ê<br><span class="${effColor('massive')}">${getEff('massive')}</span></button>
        </div>
        
        <!-- Bottom actions -->
        <div class="flex gap-2">
          <button onclick="game.demoDayChat()" class="flex-1 py-2 bg-slate-600 hover:bg-slate-500 text-white font-bold rounded-lg text-sm">Chat (+5%)</button>
          <button onclick="game.demoDaySkip()" class="flex-1 py-2 bg-red-800 hover:bg-red-700 text-white font-bold rounded-lg text-sm">Skip</button>
        </div>
      </div>`;
  }
  
  // Generate hints about visitor before engaging
  getDemoDayVisitorHints(v) {
    const hints = [];
    
    const attireHints = {
      startup: [
        { icon: "üëï", text: "Casual hoodie", color: "bg-slate-600 text-slate-300" },
        { icon: "üíª", text: "Laptop bag", color: "bg-slate-600 text-slate-300" }
      ],
      enterprise: [
        { icon: "üëî", text: "Expensive suit", color: "bg-emerald-900 text-emerald-300" },
        { icon: "üíº", text: "Leather briefcase", color: "bg-emerald-900 text-emerald-300" }
      ],
      developer: [
        { icon: "üéß", text: "Headphones around neck", color: "bg-blue-900 text-blue-300" },
        { icon: "‚òï", text: "Coffee in hand", color: "bg-slate-600 text-slate-300" }
      ],
      investor: [
        { icon: "‚åö", text: "Expensive watch", color: "bg-emerald-900 text-emerald-300" },
        { icon: "üì±", text: "Two phones", color: "bg-amber-900 text-amber-300" }
      ],
      cto: [
        { icon: "üëî", text: "Smart casual", color: "bg-emerald-900 text-emerald-300" },
        { icon: "üéØ", text: "Purposeful stride", color: "bg-emerald-900 text-emerald-300" }
      ],
      champion: [
        { icon: "üìã", text: "Taking notes", color: "bg-blue-900 text-blue-300" },
        { icon: "üè¢", text: "Company lanyard", color: "bg-slate-600 text-slate-300" }
      ],
      student: [
        { icon: "üéí", text: "Backpack", color: "bg-amber-900 text-amber-300" },
        { icon: "üìö", text: "Young, eager", color: "bg-amber-900 text-amber-300" }
      ],
      researcher: [
        { icon: "üî¨", text: "Conference badge", color: "bg-purple-900 text-purple-300" },
        { icon: "üìù", text: "Notebook", color: "bg-slate-600 text-slate-300" }
      ],
      browser: [
        { icon: "üö∂", text: "Wandering slowly", color: "bg-red-900 text-red-300" },
        { icon: "üëÄ", text: "Looking around", color: "bg-red-900 text-red-300" }
      ],
      competitor: [
        { icon: "üïµ", text: "Avoiding eye contact", color: "bg-red-900 text-red-300" },
        { icon: "üì∑", text: "Taking photos", color: "bg-red-900 text-red-300" }
      ],
      tire_kicker: [
        { icon: "ü§î", text: "Arms crossed", color: "bg-amber-900 text-amber-300" },
        { icon: "‚è∞", text: "Checking watch often", color: "bg-red-900 text-red-300" }
      ],
      cheapskate: [
        { icon: "üí∏", text: "Asks about pricing first", color: "bg-amber-900 text-amber-300" },
        { icon: "üõç", text: "Collecting free stuff", color: "bg-red-900 text-red-300" }
      ]
    };
    
    if (attireHints[v.type]) {
      hints.push(...attireHints[v.type]);
    }
    
    if (v.value >= 50) {
      hints.push({ icon: "üíé", text: "Looks important", color: "bg-emerald-900 text-emerald-300" });
    } else if (v.value === 0) {
      hints.push({ icon: "‚ö†", text: "Seems distracted", color: "bg-red-900 text-red-300" });
    }
    
    return hints;
  }
  
  demoDayEngage() {
    if (!this.demoDay?.currentVisitor) return;
    this.demoDay.timeLeft -= 2;
    this.demoDay.currentVisitor.qualified = true;
    this.demoDayFloat("üîç Qualified!", "blue");
    this.demoDayRenderVisitor();
  }
  
  demoDayOffer(type) {
    const dd = this.demoDay;
    const v = dd.currentVisitor;
    if (!v || dd.resources[type] <= 0 || dd.offersGiven.includes(type)) return;
    
    if (!v.qualified) { v.qualified = true; }
    
    const effects = { swag: [25,10], coffee: [20,10], demo: [30,18], discount: [30,15], custom: [35,15], massive: [50,25] };
    let eff = effects[type][1];
    if (v.likes.includes(type)) eff = effects[type][0];
    else if (v.dislikes.includes(type)) eff = -10;
    
    v.currentInterest = Math.max(0, Math.min(100, v.currentInterest + eff));
    dd.resources[type]--;
    dd.resourcesUsed[type]++;
    dd.offersGiven.push(type);
    dd.totalCostsSpent += dd.costs[type];
    
    // Stat bonuses from demo/custom
    if (dd.statBonuses[type]) {
      Object.entries(dd.statBonuses[type]).forEach(([k, val]) => dd.earnedStats[k] += val);
      this.demoDayFloat(`+1 ${Object.keys(dd.statBonuses[type])[0]}`, "cyan");
    }
    
    this.demoDayFloat(`${eff >= 0 ? '+' : ''}${eff}%`, eff >= 0 ? "emerald" : "red");
    if (dd.costs[type] > 0) this.demoDayFloat(`-¬£${dd.costs[type]}k`, "red");
    
    this.demoDayUpdateUI();
    this.demoDayRenderVisitor();
  }
  
  demoDayChat() {
    if (!this.demoDay?.currentVisitor) return;
    this.demoDay.timeLeft -= 3;
    this.demoDay.currentVisitor.currentInterest = Math.min(100, this.demoDay.currentVisitor.currentInterest + 5);
    this.demoDayFloat("+5%", "slate");
    this.demoDayFloat("-3s", "red");
    this.demoDayRenderVisitor();
  }
  
  demoDayConvert() {
    const dd = this.demoDay;
    const v = dd.currentVisitor;
    if (!v || v.currentInterest < 75) return;
    
    dd.totalConversionValue += v.value;
    dd.conversions++;
    
    // Conversion bonus
    if (v.conversionBonus) {
      Object.entries(v.conversionBonus).forEach(([k, val]) => dd.earnedStats[k] += val);
    }
    
    // Prestige bonus
    if (dd.offersGiven.includes('massive') && v.prestige) {
      dd.prestigeBonus = 25;
      dd.earnedStats.mkt += 1;
      this.demoDayFloat(`+¬£${v.value}k +‚≠êPRESTIGE!`, "amber");
    } else if (v.value > 0) {
      this.demoDayFloat(`+¬£${v.value}k!`, "emerald");
    } else if (v.conversionBonus) {
      this.demoDayFloat(`+1 ${Object.keys(v.conversionBonus)[0]}!`, "cyan");
    }
    
    this.demoDayUpdateUI();
    this.demoDayVisitorLeaves(true);
  }
  
  demoDaySkip() {
    this.demoDayVisitorLeaves(false);
  }
  
  demoDayVisitorLeaves(converted) {
    this.demoDay.currentVisitor = null;
    if (this.demoDay.running && this.demoDay.timeLeft > 2) {
      setTimeout(() => this.demoDaySpawnVisitor(), 600);
    }
    this.demoDayRenderVisitor();
  }
  
  demoDayUpdateUI() {
    const dd = this.demoDay;
    document.getElementById('ddConversions').textContent = dd.conversions;
    document.getElementById('ddSwag').textContent = dd.resources.swag;
    document.getElementById('ddCoffee').textContent = dd.resources.coffee;
    document.getElementById('ddDemo').textContent = dd.resources.demo;
    document.getElementById('ddDiscount').textContent = dd.resources.discount;
    document.getElementById('ddCustom').textContent = dd.resources.custom;
    document.getElementById('ddMassive').textContent = dd.resources.massive;
    document.getElementById('ddCosts').textContent = `¬£${dd.totalCostsSpent}k`;
    
    const net = dd.totalConversionValue - dd.totalCostsSpent + dd.prestigeBonus;
    const netEl = document.getElementById('ddNetProfit');
    netEl.textContent = net >= 0 ? `¬£${net}k` : `-¬£${Math.abs(net)}k`;
    netEl.className = `text-2xl font-bold ${net >= 0 ? 'text-emerald-400' : 'text-red-400'}`;
  }
  
  demoDayFloat(text, color) {
    const container = document.getElementById('ddFloatingText');
    if (!container) return;
    const el = document.createElement('div');
    el.className = `absolute left-1/2 top-1/2 -translate-x-1/2 text-${color}-400 font-bold text-xl`;
    el.style.animation = 'float-up 0.8s ease-out forwards';
    el.textContent = text;
    container.appendChild(el);
    setTimeout(() => el.remove(), 800);
  }
  
  demoDayEnd() {
    this.demoDay.running = false;
    const dd = this.demoDay;
    const net = dd.totalConversionValue - dd.totalCostsSpent + dd.prestigeBonus;
    
    // Calculate AP penalty for overusing premium offers (demo + custom)
    const premiumUsed = dd.resourcesUsed.demo + dd.resourcesUsed.custom;
    let apPenalty = 0;
    if (premiumUsed >= 6) apPenalty = 2;
    else if (premiumUsed > 4) apPenalty = 1;
    
    // Apply AP penalty
    if (apPenalty > 0) {
      this.ap = Math.max(0, this.ap - apPenalty);
    }
    
    let emoji, title, baseBonus;
    if (net >= 60) { emoji = "üåü"; title = "Excellent ROI!"; baseBonus = { dev: 1, sci: 0, mkt: 1, val: 40 }; }
    else if (net >= 30) { emoji = "üéâ"; title = "Profitable Day!"; baseBonus = { dev: 0, sci: 0, mkt: 1, val: 25 }; }
    else if (net >= 0) { emoji = "üëç"; title = "Break Even"; baseBonus = { dev: 0, sci: 0, mkt: 0, val: 10 }; }
    else if (net >= -40) { emoji = "üòê"; title = "Small Loss"; baseBonus = { dev: 0, sci: 0, mkt: 0, val: 0 }; }
    else { emoji = "üò¨"; title = "Tough Day"; baseBonus = { dev: 0, sci: 0, mkt: 0, val: 0 }; }
    
    const total = {
      dev: baseBonus.dev + dd.earnedStats.dev,
      sci: baseBonus.sci + dd.earnedStats.sci,
      mkt: baseBonus.mkt + dd.earnedStats.mkt,
      val: baseBonus.val + Math.max(0, net)
    };
    
    // Apply to game
    this.metrics.dev += total.dev;
    this.metrics.sci += total.sci;
    this.metrics.mkt += total.mkt;
    this.metrics.val += total.val;
    
    const apPenaltyHtml = apPenalty > 0 ? `
      <div class="bg-red-100 border border-red-300 rounded-xl p-3 mb-4 text-sm">
        <div class="text-red-700 font-bold">‚ö† Follow-up Overload: -${apPenalty} AP</div>
        <div class="text-red-600 text-xs">Used ${premiumUsed} premium offers (Demo/Custom) - too many to follow up!</div>
      </div>` : '';
    
    const zone = document.getElementById('ddVisitorZone');
    zone.innerHTML = `
      <div class="bg-white rounded-2xl p-6 text-center max-w-md mx-auto">
        <div class="text-5xl mb-3">${emoji}</div>
        <h2 class="text-2xl font-bold text-slate-800 mb-2">${title}</h2>
        <div class="flex justify-center gap-6 mb-4">
          <div><div class="text-3xl font-bold ${net >= 0 ? 'text-emerald-600' : 'text-red-600'}">${net >= 0 ? '¬£' : '-¬£'}${Math.abs(net)}k</div><div class="text-xs text-slate-500">Net Profit</div></div>
          <div><div class="text-3xl font-bold text-amber-600">${dd.conversions}</div><div class="text-xs text-slate-500">Converted</div></div>
        </div>
        ${apPenaltyHtml}
        <div class="bg-slate-100 rounded-xl p-3 mb-4 text-sm">
          <div class="text-slate-600 mb-2">Demo Day Rewards:</div>
          <div class="flex justify-center gap-3">
            ${total.dev > 0 ? `<span class="text-cyan-600 font-bold">+${total.dev} Dev</span>` : ''}
            ${total.sci > 0 ? `<span class="text-blue-600 font-bold">+${total.sci} Sci</span>` : ''}
            ${total.mkt > 0 ? `<span class="text-fuchsia-600 font-bold">+${total.mkt} Mkt</span>` : ''}
            ${total.val > 0 ? `<span class="text-emerald-600 font-bold">+¬£${total.val}k Val</span>` : ''}
            ${total.dev + total.sci + total.mkt + total.val === 0 ? '<span class="text-slate-500">No bonus</span>' : ''}
          </div>
        </div>
        <button onclick="game.closeDemoDay()" class="px-6 py-3 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl">Continue ‚Üí</button>
      </div>`;
    
    this.log(`üé™ Demo Day: ${title} - Net ¬£${net}k, ${dd.conversions} converted${apPenalty > 0 ? `, -${apPenalty} AP (premium overuse)` : ''}`);
  }
  
  closeDemoDay() {
    document.getElementById('demoDayModal')?.remove();
    this.demoDay = null;
    this.update();
    this.renderBoardroom();
  }


  startPitch() {
    // Initialize pitch state
    this.pitch = {
      active: true,
      timeLeft: 30, // 30 seconds
      totalTime: 30,
      points: 12, // Action points for the pitch
      attention: 40, // Start at 40% attention (grumpy investors)
      peakAttention: 40,
      attentionHistory: [40], // For worm chart
      actionsUsed: [],
      demoUsed: false,
      jokeSuccess: 0,
      jokeFail: 0,
      tickCount: 0
    };
    
    // Investor data based on company type
    const investorSets = {
      aether: [
        { name: "Dr. Sarah Chen", title: "Lead Partner, HealthTech VC", face: "üë©‚öï" },
        { name: "Marcus Webb", title: "GP, BioFund", face: "üë®üíº" },
        { name: "Priya Patel", title: "Angel Investor", face: "üë©üíº" },
        { name: "James Liu", title: "Venture Partner", face: "üßëüíº" }
      ],
      vanguard: [
        { name: "James Morrison", title: "Industrial VC", face: "üë®üíº" },
        { name: "Elena Schmidt", title: "Robotics Fund GP", face: "üë©üíº" },
        { name: "Raj Krishnan", title: "Angel Investor", face: "üßëüíº" },
        { name: "Tom Bradley", title: "Venture Partner", face: "üë®üíª" }
      ],
      quantflow: [
        { name: "William Thorne", title: "FinTech Capital", face: "üë®üíº" },
        { name: "Yuki Tanaka", title: "Quant Fund GP", face: "üë©üíª" },
        { name: "David Morrison", title: "Angel Investor", face: "üßëüíº" },
        { name: "Lisa Park", title: "Venture Partner", face: "üë©üíº" }
      ],
      dreamscape: [
        { name: "Alex Rivera", title: "Creative Fund GP", face: "üßëüé®" },
        { name: "Sophie Laurent", title: "Media VC", face: "üë©üíº" },
        { name: "Chris Park", title: "Angel Investor", face: "üë®üíº" },
        { name: "Maya Johnson", title: "Venture Partner", face: "üë©üíª" }
      ]
    };
    
    const investors = investorSets[this.company?.id] || investorSets.aether;
    
    // Update UI
    document.getElementById("pitchVenueName").textContent = `Series A Pitch ‚Ä¢ ${this.company?.name || "Your Startup"}`;
    document.getElementById("pitchTimer").textContent = "0:30";
    document.getElementById("pitchTimerSmall").textContent = "0:30";
    document.getElementById("pitchPoints").textContent = "12";
    document.getElementById("pitchAttentionValue").textContent = "40%";
    document.getElementById("pitchActionLog").textContent = "The investors look skeptical...";
    document.getElementById("pitchInvestorMood").textContent = "Skeptical";
    document.getElementById("pitchSpeechText").textContent = '"Thank you for having me today..."';
    
    // Update investor panel - start grumpy
    investors.forEach((inv, i) => {
      const nameEl = document.getElementById(`investor-name-${i}`);
      const titleEl = document.getElementById(`investor-title-${i}`);
      const faceEl = document.querySelector(`#investor-${i} .investor-face`);
      const reactionEl = document.getElementById(`investor-reaction-${i}`);
      
      if (nameEl) nameEl.textContent = inv.name;
      if (titleEl) titleEl.textContent = inv.title;
      if (faceEl) faceEl.textContent = inv.face;
      if (reactionEl) {
        reactionEl.textContent = "üòê Waiting...";
        reactionEl.className = "mt-1 px-2 py-0.5 rounded-full text-[10px] font-medium investor-reaction bg-amber-500/50 text-white";
      }
    });
    
    // Reset worm chart - start at 40% (60% from top)
    document.getElementById("pitchWormLine").setAttribute("points", "0,60");
    document.getElementById("pitchWormDot").style.left = "0%";
    document.getElementById("pitchWormDot").style.top = "60%";
    
    // Clear effects
    document.getElementById("pitchEffects").innerHTML = "";
    
    // Reset buttons
    document.querySelectorAll(".pitch-action-btn").forEach(btn => btn.disabled = false);
    document.getElementById("pitchDemoBtn").disabled = false;
    
    // Start pitch audio (speaking sounds + ambient)
    this.startPitchAudio();
    
    // Show modal
    document.getElementById("pitchModal").classList.remove("hidden");
    document.getElementById("pitchModal").classList.add("flex");
    
    // Start game loop
    this.pitchGameLoop();
  }
  
  startPitchAudio() {
    try {
      this.pitchAudioCtx = new (window.AudioContext || window.webkitAudioContext)();
      this.pitchMusicPlaying = true;
      this.playPitchSpeakingSound();
      this.playPitchAmbience();
    } catch (e) {
      console.log("Audio not available");
    }
  }
  
  playPitchSpeakingSound() {
    // Simulates someone speaking - rhythmic low tones
    if (!this.pitchMusicPlaying || !this.pitchAudioCtx) return;
    
    const ctx = this.pitchAudioCtx;
    const now = ctx.currentTime;
    
    // Voice-like frequencies with natural rhythm
    const syllables = [];
    const baseFreq = 120 + Math.random() * 40; // Vary pitch slightly
    const syllableCount = 3 + Math.floor(Math.random() * 4); // 3-6 syllables
    
    for (let i = 0; i < syllableCount; i++) {
      syllables.push({
        freq: baseFreq + Math.random() * 30 - 15,
        duration: 0.08 + Math.random() * 0.12,
        gap: 0.02 + Math.random() * 0.05
      });
    }
    
    let time = 0;
    syllables.forEach((syl) => {
      const osc = ctx.createOscillator();
      const gain = ctx.createGain();
      const filter = ctx.createBiquadFilter();
      
      osc.type = 'sawtooth';
      osc.frequency.value = syl.freq;
      
      filter.type = 'lowpass';
      filter.frequency.value = 800 + Math.random() * 400;
      filter.Q.value = 2;
      
      gain.gain.setValueAtTime(0, now + time);
      gain.gain.linearRampToValueAtTime(0.06, now + time + 0.02);
      gain.gain.linearRampToValueAtTime(0.04, now + time + syl.duration - 0.02);
      gain.gain.linearRampToValueAtTime(0, now + time + syl.duration);
      
      osc.connect(filter);
      filter.connect(gain);
      gain.connect(ctx.destination);
      
      osc.start(now + time);
      osc.stop(now + time + syl.duration);
      
      time += syl.duration + syl.gap;
    });
    
    // Schedule next phrase with natural pause
    const pauseDuration = 200 + Math.random() * 400;
    setTimeout(() => this.playPitchSpeakingSound(), time * 1000 + pauseDuration);
  }
  
  playPitchAmbience() {
    // Subtle room ambience - very quiet white noise
    if (!this.pitchMusicPlaying || !this.pitchAudioCtx) return;
    
    const ctx = this.pitchAudioCtx;
    const bufferSize = ctx.sampleRate * 2;
    const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
    const data = buffer.getChannelData(0);
    
    for (let i = 0; i < bufferSize; i++) {
      data[i] = (Math.random() * 2 - 1) * 0.015; // Very quiet
    }
    
    this.pitchAmbienceNode = ctx.createBufferSource();
    this.pitchAmbienceNode.buffer = buffer;
    this.pitchAmbienceNode.loop = true;
    
    const filter = ctx.createBiquadFilter();
    filter.type = 'lowpass';
    filter.frequency.value = 500;
    
    this.pitchAmbienceNode.connect(filter);
    filter.connect(ctx.destination);
    this.pitchAmbienceNode.start();
  }
  
  stopPitchAudio() {
    this.pitchMusicPlaying = false;
    if (this.pitchAmbienceNode) {
      try { this.pitchAmbienceNode.stop(); } catch(e) {}
      this.pitchAmbienceNode = null;
    }
    if (this.pitchAudioCtx) {
      this.pitchAudioCtx.close();
      this.pitchAudioCtx = null;
    }
  }
  
  pitchGameLoop() {
    if (!this.pitch?.active) return;
    
    this.pitch.timeLeft -= 0.1;
    this.pitch.tickCount++;
    
    // Update timer
    const mins = Math.floor(this.pitch.timeLeft / 60);
    const secs = Math.floor(this.pitch.timeLeft % 60);
    const timerText = `${mins}:${secs.toString().padStart(2, '0')}`;
    document.getElementById("pitchTimer").textContent = timerText;
    const timerSmall = document.getElementById("pitchTimerSmall");
    if (timerSmall) timerSmall.textContent = timerText;
    
    // Attention naturally decays over time - grumpier investors = faster decay
    this.pitch.attention = Math.max(0, this.pitch.attention - 0.22);
    
    // Record attention for worm chart (every 3 ticks = 0.3 seconds for smoother line)
    if (this.pitch.tickCount % 3 === 0) {
      this.pitch.attentionHistory.push(this.pitch.attention);
      this.updateWormChart();
    }
    
    this.updatePitchAttention();
    
    // Update investor moods based on attention
    this.updateInvestorMoods();
    
    // End game?
    if (this.pitch.timeLeft <= 0) {
      this.endPitch();
      return;
    }
    
    setTimeout(() => this.pitchGameLoop(), 100);
  }
  
  updateWormChart() {
    const history = this.pitch.attentionHistory;
    const totalTime = this.pitch.totalTime || 30;
    const elapsed = totalTime - this.pitch.timeLeft;
    
    // SVG viewBox is 300 x 100
    const chartWidth = 300;
    const chartHeight = 100;
    
    // Calculate points - x moves from left to right over 30 seconds
    // y maps attention (0-100) to position (100-0, inverted)
    const points = history.map((att, i) => {
      const x = (i / (totalTime / 0.3)) * chartWidth; // 30 seconds / 0.3s per sample = 100 samples
      const y = chartHeight - (att / 100) * chartHeight;
      return `${x},${y}`;
    }).join(" ");
    
    document.getElementById("pitchWormLine").setAttribute("points", points);
    
    // Update dot position - moves left to right
    const dotX = (elapsed / totalTime) * 100; // percentage
    const dotY = 100 - this.pitch.attention; // percentage (inverted)
    const dot = document.getElementById("pitchWormDot");
    dot.style.left = `${dotX}%`;
    dot.style.top = `${dotY}%`;
    
    // Update gradient end color based on current attention
    const gradient = document.getElementById("wormGradient");
    if (gradient) {
      const stops = gradient.querySelectorAll('stop');
      const color = this.pitch.attention < 30 ? '#ef4444' : 
                    this.pitch.attention < 50 ? '#f59e0b' : 
                    this.pitch.attention < 70 ? '#eab308' : '#10b981';
      if (stops[2]) stops[2].style.stopColor = color;
    }
  }
  
  updatePitchAttention() {
    const attention = Math.round(this.pitch.attention);
    document.getElementById("pitchAttentionValue").textContent = `${attention}%`;
    
    // Track peak attention
    if (this.pitch.attention > this.pitch.peakAttention) {
      this.pitch.peakAttention = this.pitch.attention;
    }
    
    // Update mood label
    let mood, moodColor;
    if (attention < 30) {
      mood = "Losing Interest";
      moodColor = "text-red-400";
    } else if (attention < 50) {
      mood = "Neutral";
      moodColor = "text-amber-400";
    } else if (attention < 70) {
      mood = "Interested";
      moodColor = "text-emerald-400";
    } else if (attention < 90) {
      mood = "Very Engaged";
      moodColor = "text-emerald-300";
    } else {
      mood = "Excited!";
      moodColor = "text-pink-400";
    }
    
    document.getElementById("pitchInvestorMood").textContent = mood;
    document.getElementById("pitchInvestorMood").className = moodColor + " font-medium";
  }
  
  updateInvestorMoods() {
    const attention = this.pitch.attention;
    
    // Grumpier investors - higher thresholds needed to impress them
    const reactions = attention < 20 ? [
      { face: 'üò¥', text: 'Falling asleep', bg: 'bg-red-600/60', textColor: 'text-white' },
      { face: 'üôÑ', text: 'Eye roll', bg: 'bg-red-600/60', textColor: 'text-white' },
      { face: 'üì±', text: 'Checking phone', bg: 'bg-red-600/60', textColor: 'text-white' },
      { face: 'üò§', text: 'Annoyed', bg: 'bg-red-600/60', textColor: 'text-white' }
    ] : attention < 35 ? [
      { face: 'üòë', text: 'Unimpressed', bg: 'bg-red-500/50', textColor: 'text-white' },
      { face: 'üòê', text: 'Skeptical', bg: 'bg-amber-600/50', textColor: 'text-white' },
      { face: 'ü•±', text: 'Yawning', bg: 'bg-red-500/50', textColor: 'text-white' },
      { face: 'üòí', text: 'Heard it before', bg: 'bg-amber-600/50', textColor: 'text-white' }
    ] : attention < 50 ? [
      { face: 'ü§®', text: 'Doubtful', bg: 'bg-amber-500/50', textColor: 'text-white' },
      { face: 'üòê', text: 'Unconvinced', bg: 'bg-amber-500/50', textColor: 'text-white' },
      { face: 'ü§î', text: 'Skeptical', bg: 'bg-slate-500/50', textColor: 'text-white' },
      { face: 'üò∂', text: 'Waiting...', bg: 'bg-slate-500/50', textColor: 'text-white' }
    ] : attention < 65 ? [
      { face: 'ü§î', text: 'Listening', bg: 'bg-slate-600', textColor: 'text-slate-200' },
      { face: 'üòê', text: 'Considering', bg: 'bg-slate-600', textColor: 'text-slate-200' },
      { face: 'üôÇ', text: 'Mildly curious', bg: 'bg-emerald-500/30', textColor: 'text-emerald-200' },
      { face: 'ü§î', text: 'Hmm...', bg: 'bg-slate-600', textColor: 'text-slate-200' }
    ] : attention < 80 ? [
      { face: 'üôÇ', text: 'Interested', bg: 'bg-emerald-500/40', textColor: 'text-white' },
      { face: 'üòä', text: 'Engaged', bg: 'bg-emerald-500/40', textColor: 'text-white' },
      { face: '‚úç', text: 'Taking notes', bg: 'bg-blue-500/50', textColor: 'text-white' },
      { face: 'üëç', text: 'Not bad!', bg: 'bg-emerald-500/40', textColor: 'text-white' }
    ] : attention < 90 ? [
      { face: 'üòÄ', text: 'Impressed!', bg: 'bg-emerald-500/50', textColor: 'text-white' },
      { face: 'üòä', text: 'Very interested', bg: 'bg-emerald-500/50', textColor: 'text-white' },
      { face: 'ü§©', text: 'Excited!', bg: 'bg-emerald-500/50', textColor: 'text-white' },
      { face: 'üëè', text: 'Great pitch!', bg: 'bg-emerald-500/50', textColor: 'text-white' }
    ] : [
      { face: 'ü§©', text: 'Love it!', bg: 'bg-pink-500/60', textColor: 'text-white' },
      { face: 'üòç', text: 'Want to invest!', bg: 'bg-pink-500/60', textColor: 'text-white' },
      { face: 'üôå', text: 'Amazing!', bg: 'bg-pink-500/60', textColor: 'text-white' },
      { face: 'üí∞', text: 'Take my money!', bg: 'bg-emerald-500/60', textColor: 'text-white' }
    ];
    
    for (let i = 0; i < 4; i++) {
      const faceEl = document.querySelector(`#investor-${i} .investor-face`);
      const reactionEl = document.getElementById(`investor-reaction-${i}`);
      const investorEl = document.getElementById(`investor-${i}`);
      
      if (faceEl && reactions[i]) faceEl.textContent = reactions[i].face;
      if (reactionEl && reactions[i]) {
        reactionEl.textContent = reactions[i].text;
        reactionEl.className = `mt-1 px-2 py-0.5 rounded-full text-[10px] font-medium investor-reaction ${reactions[i].bg} ${reactions[i].textColor}`;
      }
      
      if (investorEl) {
        investorEl.classList.remove('bored', 'interested', 'excited');
        if (attention < 35) investorEl.classList.add('bored');
        else if (attention >= 85) investorEl.classList.add('excited');
        else if (attention >= 55) investorEl.classList.add('interested');
      }
    }
  }
  
  pitchAction(type) {
    if (!this.pitch?.active) return;
    
    // Speech lines for each action type
    const speechLines = {
      story: [
        '"Let me tell you about our first customer..."',
        '"When we started, nobody believed in us..."',
        '"Picture this: a world where AI actually helps..."',
        '"I remember the moment everything clicked..."'
      ],
      joke: [
        '"Why did the AI cross the road? To optimize the other side!"',
        '"Our burn rate is so low, even our accountant smiles!"',
        '"VCs say we move fast. Our code says otherwise!"',
        '"Machine learning? More like machine yearning... for funding!"'
      ],
      customer: [
        '"Titan Tech is already piloting our solution..."',
        '"public health system just signed a ¬£2M contract..."',
        '"Apex Commerce reached out to us last week..."',
        '"We have 3 Fortune 500 companies in our pipeline..."'
      ],
      data: [
        '"Our monthly revenue grew 40% last month..."',
        '"95% of customers stay with us year after year..."',
        '"We reduced costs by 60% for our clients..."',
        '"When we survey customers, they rate us 72 out of 100-industry average is just 30..."'
      ],
      smile: [
        '"*warm, confident smile*"',
        '"*genuine enthusiasm*"',
        '"*makes eye contact*"'
      ],
      walk: [
        '"*steps closer to investors*"',
        '"*moves toward the whiteboard*"',
        '"*approaches with confidence*"'
      ],
      enthusiasm: [
        '"This is what gets me out of bed every morning!"',
        '"I genuinely believe we can change this industry!"',
        '"We are SO excited about what we are building!"',
        '"This opportunity is absolutely massive!"'
      ],
      demo: [
        '"Let me show you the product in action..."',
        '"Here is our live dashboard..."',
        '"Watch what happens when I click this..."'
      ]
    };
    
    const actions = {
      story: { points: 3, attention: 15, text: "üìñ Great story!", successRate: 1.0 },
      joke: { points: 2, attention: 12, text: "üòÑ Haha! Good one!", successRate: 0.65, failText: "üò¨ Awkward silence...", failAttention: -10 },
      customer: { points: 2, attention: 14, text: "üè¢ Impressive client!", successRate: 1.0 },
      data: { points: 2, attention: 10, text: "üìä Solid metrics!", successRate: 1.0 },
      smile: { points: 1, attention: 5, text: "üòä Charming!", successRate: 1.0 },
      walk: { points: 1, attention: 6, text: "üö∂ Confident!", successRate: 1.0 },
      enthusiasm: { points: 2, attention: 11, text: "üôå Love the energy!", successRate: 1.0 },
      demo: { points: 4, attention: 22, text: "üíª Wow! Amazing demo!", successRate: 0.80, failText: "üíª Demo crashed! üò±", failAttention: -12, once: true }
    };
    
    const action = actions[type];
    if (!action) return;
    
    // Check points
    if (this.pitch.points < action.points) {
      this.pitchShowEffect("‚ùå Not enough points!", "#ef4444");
      document.getElementById("pitchSpeechText").textContent = '"I... uh... need a moment..."';
      return;
    }
    
    // Check if demo already used
    if (type === 'demo' && this.pitch.demoUsed) {
      return;
    }
    
    // Deduct points
    this.pitch.points -= action.points;
    document.getElementById("pitchPoints").textContent = this.pitch.points;
    
    // Track action
    this.pitch.actionsUsed.push(type);
    
    // Update speech bubble
    const lines = speechLines[type] || ['"..."'];
    const speechText = lines[Math.floor(Math.random() * lines.length)];
    document.getElementById("pitchSpeechText").textContent = speechText;
    
    // Animate presenter
    const presenter = document.getElementById("pitchPresenter");
    presenter.classList.add("pitch-presenter-action");
    setTimeout(() => presenter.classList.remove("pitch-presenter-action"), 300);
    
    // Determine success
    const success = Math.random() < action.successRate;
    
    if (success) {
      this.pitch.attention = Math.min(100, this.pitch.attention + action.attention);
      this.pitchShowEffect(action.text, "#10b981");
      document.getElementById("pitchActionLog").textContent = action.text;
      
      if (type === 'joke') this.pitch.jokeSuccess++;
      
      // Play success sound - satisfying chime
      if (soundManager.enabled && soundManager.ctx) {
        const ctx = soundManager.ctx;
        const now = ctx.currentTime;
        [523, 659, 784].forEach((freq, i) => {
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();
          osc.type = 'sine';
          osc.frequency.value = freq;
          gain.gain.setValueAtTime(0.15, now + i * 0.08);
          gain.gain.exponentialRampToValueAtTime(0.01, now + i * 0.08 + 0.15);
          osc.connect(gain);
          gain.connect(ctx.destination);
          osc.start(now + i * 0.08);
          osc.stop(now + i * 0.08 + 0.2);
        });
      }
    } else {
      this.pitch.attention = Math.max(0, this.pitch.attention + (action.failAttention || -5));
      this.pitchShowEffect(action.failText || "üò¨ That didn't land...", "#ef4444");
      document.getElementById("pitchActionLog").textContent = action.failText || "That didn't work...";
      document.getElementById("pitchSpeechText").textContent = '"...anyway, moving on..."';
      
      if (type === 'joke') this.pitch.jokeFail++;
      
      // Play fail sound - descending tone
      if (soundManager.enabled && soundManager.ctx) {
        const ctx = soundManager.ctx;
        const now = ctx.currentTime;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(300, now);
        osc.frequency.exponentialRampToValueAtTime(150, now + 0.3);
        gain.gain.setValueAtTime(0.1, now);
        gain.gain.exponentialRampToValueAtTime(0.01, now + 0.3);
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start(now);
        osc.stop(now + 0.35);
      }
    }
    
    // Mark demo as used
    if (type === 'demo') {
      this.pitch.demoUsed = true;
      document.getElementById("pitchDemoBtn").disabled = true;
    }
    
    // Immediately update worm chart for responsiveness
    this.pitch.attentionHistory.push(this.pitch.attention);
    this.updateWormChart();
    
    this.updatePitchAttention();
  }
  
  pitchShowEffect(text, color = "#fff") {
    const el = document.createElement("div");
    el.className = "pitch-effect";
    el.style.left = `${200 + Math.random() * 400}px`;
    el.style.top = `${80 + Math.random() * 60}px`;
    el.style.color = color;
    el.textContent = text;
    
    document.getElementById("pitchEffects").appendChild(el);
    setTimeout(() => el.remove(), 600);
  }
  
  endPitch() {
    this.pitch.active = false;
    this.stopPitchAudio();
    
    // Calculate performance metrics
    const finalAttention = this.pitch.attention;
    const peakAttention = this.pitch.peakAttention;
    const avgAttention = (finalAttention + peakAttention) / 2;
    const actionsCount = this.pitch.actionsUsed.length;
    const pointsUsed = 12 - this.pitch.points;
    const efficiency = actionsCount > 0 ? avgAttention / actionsCount : 0; // attention per action
    
    // Determine tier for display purposes
    let tier, icon, title;
    if (avgAttention < 25) {
      tier = 1;
      icon = "üòî";
      title = "Tough Crowd";
    } else if (avgAttention < 40) {
      tier = 2;
      icon = "üòê";
      title = "Lukewarm Response";
    } else if (avgAttention < 55) {
      tier = 3;
      icon = "üëç";
      title = "Decent Pitch";
    } else if (avgAttention < 70) {
      tier = 4;
      icon = "üåü";
      title = "Strong Pitch!";
    } else if (avgAttention < 85) {
      tier = 5;
      icon = "üî•";
      title = "Excellent Pitch!";
    } else {
      tier = 6;
      icon = "üèÜ";
      title = "Legendary Pitch!";
    }
    
    // Calculate rewards based on actual performance, not tiers
    // Valuation: based on final attention (investors' lasting impression)
    const valBonus = Math.floor(finalAttention * 1.5); // 0-150k based on 0-100% attention
    
    // Sales: based on peak attention (how excited they got)
    const mktBonus = peakAttention >= 50 ? Math.floor((peakAttention - 40) / 10) : 0; // 0-6 pts
    
    // Research & Product: based on efficiency (smart pitching)
    const sciBonus = efficiency >= 8 ? Math.floor(efficiency / 4) : 0; // 0-4 pts for efficient pitching
    const devBonus = efficiency >= 8 ? Math.floor(efficiency / 4) : 0;
    
    // People: based on finishing strong (ended above 60%)
    const hrBonus = finalAttention >= 60 ? Math.floor((finalAttention - 50) / 15) : 0; // 0-3 pts
    
    // Cash: only for truly exceptional performances (avg 75%+)
    const cashBonus = avgAttention >= 75 ? Math.floor((avgAttention - 70) * 3) : 0; // 0-90k
    
    const rewards = {
      val: valBonus,
      sci: sciBonus,
      dev: devBonus,
      mkt: mktBonus,
      hr: hrBonus,
      cash: cashBonus
    };
    
    // Apply rewards
    Object.entries(rewards).forEach(([k, v]) => {
      if (v > 0 && this.metrics[k] !== undefined) {
        this.metrics[k] += v;
      }
    });
    
    // Hide game modal
    document.getElementById("pitchModal").classList.add("hidden");
    document.getElementById("pitchModal").classList.remove("flex");
    
    // Show results
    document.getElementById("pitchResultIcon").textContent = icon;
    document.getElementById("pitchResultTitle").textContent = title;
    document.getElementById("pitchResultText").textContent = 
      tier <= 2 ? "The investors seemed distracted. You'll need to work harder next time." :
      tier === 3 ? "Not bad! The investors showed some interest but weren't blown away." :
      tier === 4 ? "Great job! You clearly communicated your vision." :
      tier === 5 ? "Fantastic pitch! The investors are excited about your startup." :
      "Incredible! The investors are fighting over who gets to lead the round!";
    
    document.getElementById("pitchResultStats").innerHTML = `
      <div class="flex justify-between mb-1"><span>Final Attention:</span><span class="font-bold ${finalAttention >= 60 ? 'text-emerald-400' : finalAttention >= 40 ? 'text-amber-400' : 'text-red-400'}">${Math.round(finalAttention)}%</span></div>
      <div class="flex justify-between mb-1"><span>Peak Attention:</span><span class="font-bold ${peakAttention >= 70 ? 'text-emerald-400' : 'text-slate-300'}">${Math.round(peakAttention)}%</span></div>
      <div class="flex justify-between mb-1"><span>Pitch Efficiency:</span><span class="font-bold ${efficiency >= 8 ? 'text-emerald-400' : 'text-slate-300'}">${efficiency.toFixed(1)} pts/action</span></div>
      <div class="flex justify-between"><span>Actions Used:</span><span class="font-bold">${actionsCount} (${pointsUsed} pts)</span></div>
    `;
    
    const rewardLines = [];
    if (rewards.val > 0) rewardLines.push(`+¬£${rewards.val}k Valuation`);
    if (rewards.mkt > 0) rewardLines.push(`+${rewards.mkt} Sales`);
    if (rewards.sci > 0) rewardLines.push(`+${rewards.sci} Research`);
    if (rewards.dev > 0) rewardLines.push(`+${rewards.dev} Product`);
    if (rewards.hr > 0) rewardLines.push(`+${rewards.hr} People`);
    if (rewards.cash > 0) rewardLines.push(`+¬£${rewards.cash}k Cash`);
    
    document.getElementById("pitchResultRewards").innerHTML = rewardLines.length > 0 
      ? `<div class="font-bold mb-1">Investor Confidence Rewards:</div>${rewardLines.join(" ‚Ä¢ ")}`
      : `<div class="text-slate-500">The investors weren't impressed enough to offer any bonuses.</div>`;
    
    document.getElementById("pitchResultsModal").classList.remove("hidden");
    document.getElementById("pitchResultsModal").classList.add("flex");
    
    // Play appropriate sound
    if (tier >= 5) {
      soundManager.playVictory();
    } else if (tier >= 3) {
      soundManager.playMilestoneComplete();
    } else {
      soundManager.playWarning();
    }
    
    this.log(`üé§ Investor pitch: ${title} - +¬£${rewards.val}k valuation`);
  }
  
  closePitch() {
    document.getElementById("pitchResultsModal").classList.add("hidden");
    document.getElementById("pitchResultsModal").classList.remove("flex");
    
    // Continue normal gameplay after pitch mini-game
    this.update();
    this.renderBoardroom();
  }

  renderRivals() {
    const playerTotal = this.metrics.sci + this.metrics.dev + this.metrics.mkt;
    const activeRivals = this.rivals.filter(r => r.status === "active");
    
    const all = [
      { name: this.company?.name || "You", total: playerTotal, isPlayer: true },
      ...activeRivals.map(r => ({ 
        name: r.name, 
        total: r.scores.sci + r.scores.dev + r.scores.mkt,
        logo: r.logo,
        style: r.style,
        funded: r.funded,
        desc: r.desc
      }))
    ].sort((a, b) => b.total - a.total);
    
    const rank = all.findIndex(x => x.isPlayer) + 1;
    document.getElementById("playerRank").textContent = `#${rank}`;
    document.getElementById("playerRank").className = `font-bold ${rank === 1 ? 'text-emerald-600' : rank === 2 ? 'text-amber-600' : 'text-red-600'}`;
    
    // Calculate max total for progress bars
    const maxTotal = Math.max(...all.map(r => r.total));
    
    document.getElementById("rivalsList").innerHTML = all.map((r, i) => {
      const progress = (r.total / maxTotal) * 100;
      const styleColors = {
        aggressive: 'text-red-500',
        methodical: 'text-blue-500', 
        cautious: 'text-amber-500'
      };
      const styleIcons = {
        aggressive: 'üî•',
        methodical: 'üìä',
        cautious: 'üê¢'
      };
      
      if (r.isPlayer) {
        return `
          <div class="p-2 rounded-lg bg-gradient-to-r from-emerald-50 to-green-50 border border-emerald-200">
            <div class="flex items-center gap-2">
              <span class="text-lg">${this.company?.id ? (this.company.id === 'aether' ? 'üß¨' : this.company.id === 'vanguard' ? 'ü§ñ' : this.company.id === 'quant' ? 'üìä' : 'üé®') : 'üöÄ'}</span>
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <span class="font-bold text-emerald-700 text-sm">#${i + 1} ${r.name}</span>
                  <span class="text-xs text-emerald-600 font-mono">${Math.round(r.total)}</span>
                </div>
                <div class="w-full h-1.5 bg-emerald-200 rounded-full mt-1">
                  <div class="h-full bg-emerald-500 rounded-full transition-all duration-500" style="width: ${progress}%"></div>
                </div>
              </div>
            </div>
          </div>
        `;
      } else {
        // Determine relative position to player
        const playerIdx = all.findIndex(x => x.isPlayer);
        const diff = r.total - playerTotal;
        const status = diff > 10 ? 'ahead' : diff < -10 ? 'behind' : 'close';
        const statusText = status === 'ahead' ? '‚Üë Ahead' : status === 'behind' ? '‚Üì Behind' : '‚âà Close';
        const statusColor = status === 'ahead' ? 'text-red-500' : status === 'behind' ? 'text-emerald-500' : 'text-amber-500';
        
        return `
          <div class="p-2 rounded-lg bg-slate-50 border border-slate-200 hover:border-slate-300 transition-colors">
            <div class="flex items-center gap-2">
              <span class="text-lg">${r.logo}</span>
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <span class="font-medium text-slate-700 text-sm">#${i + 1} ${r.name}</span>
                  <span class="text-[10px] ${statusColor} font-medium">${statusText}</span>
                </div>
                <div class="flex items-center gap-2 text-[10px] text-slate-500 mt-0.5">
                  <span>${styleIcons[r.style]} ${r.style}</span>
                  <span>‚Ä¢</span>
                  <span>${r.funded}</span>
                </div>
                <div class="w-full h-1 bg-slate-200 rounded-full mt-1">
                  <div class="h-full bg-slate-400 rounded-full transition-all duration-500" style="width: ${progress}%"></div>
                </div>
              </div>
            </div>
          </div>
        `;
      }
    }).join("");
    
    // Show rival news occasionally
    this.updateRivalNews();
  }
  
  updateRivalNews() {
    const newsEl = document.getElementById("rivalNews");
    const activeRivals = this.rivals.filter(r => r.status === "active");
    if (activeRivals.length === 0) {
      newsEl.classList.add("hidden");
      return;
    }
    
    // Pick a random rival for news
    const rival = activeRivals[Math.floor(Math.random() * activeRivals.length)];
    const playerTotal = this.metrics.sci + this.metrics.dev + this.metrics.mkt;
    const rivalTotal = rival.scores.sci + rival.scores.dev + rival.scores.mkt;
    
    const newsOptions = rivalTotal > playerTotal ? [
      `${rival.name} reportedly closing a new funding round...`,
      `${rival.name} expanding their team aggressively`,
      `Industry buzz: ${rival.name} gaining traction`,
      `${rival.name} spotted at major client meetings`
    ] : [
      `${rival.name} facing internal challenges, sources say`,
      `${rival.name} pivoting strategy after setbacks`,
      `Rumour: Key talent leaving ${rival.name}`,
      `${rival.name} delaying their product roadmap`
    ];
    
    newsEl.textContent = `üì∞ ${newsOptions[Math.floor(Math.random() * newsOptions.length)]}`;
    newsEl.classList.remove("hidden");
  }

  renderNews() {
    const headlines = NEWS[this.market?.id] || NEWS.stable;
    const all = [...headlines, ...NEWS.default];
    document.getElementById("newsContent").textContent = all.join(" ").repeat(3);
  }

  // ===== STAFFING SYSTEM =====
  
  showHireStaffModal() {
    const modal = document.getElementById("hireStaffModal");
    
    // Base costs modified by founder's operational skill
    const baseHireCost = 50;
    const baseBurnIncrease = 25;
    
    // Operational founders reduce hiring costs (¬£5k per point above 2)
    const operationalBonus = this.founderBonuses?.operational || 2;
    const hireCostReduction = Math.max(0, (operationalBonus - 2) * 5);
    const hireCost = Math.max(25, baseHireCost - hireCostReduction); // Min ¬£25k
    const burnIncrease = baseBurnIncrease;
    
    // Update current stats
    document.getElementById("hireModalStaff").textContent = this.metrics.staff;
    document.getElementById("hireModalAPCurrent").textContent = `+${this.getStaffAPBonus()}`;
    document.getElementById("hireModalCash").textContent = `¬£${this.metrics.cash}k`;
    document.getElementById("hireModalBurn").textContent = `¬£${this.metrics.burn}k/q`;
    
    // Calculate after-hire stats
    const newStaff = this.metrics.staff + 1;
    const newBurn = this.metrics.burn + burnIncrease;
    const newCash = this.metrics.cash - hireCost;
    const newAPBonus = this.calculateStaffAPBonus(newStaff);
    
    document.getElementById("hireModalNewStaff").textContent = newStaff;
    document.getElementById("hireModalAPNew").textContent = `+${newAPBonus}`;
    document.getElementById("hireModalNewBurn").textContent = `¬£${newBurn}k/q`;
    document.getElementById("hireModalNewCash").textContent = `¬£${newCash}k`;
    
    // Show hiring cost with discount if applicable
    const hireCostEl = document.getElementById("hireModalCostDisplay");
    if (hireCostEl) {
      if (hireCostReduction > 0) {
        hireCostEl.innerHTML = `<span class="line-through text-slate-400">¬£${baseHireCost}k</span> <span class="text-emerald-600 font-bold">¬£${hireCost}k</span> <span class="text-xs text-emerald-500">(${this.founder?.profile?.name})</span>`;
      } else {
        hireCostEl.textContent = `¬£${hireCost}k one-time`;
      }
    }
    
    // Show integration/mood bonuses from leadership
    const leadershipBonus = this.founderBonuses?.leadership || 2;
    const integrationEl = document.getElementById("hireModalIntegrationDisplay");
    if (integrationEl) {
      if (leadershipBonus > 2) {
        integrationEl.innerHTML = `-0.5 AP <span class="text-xs text-emerald-500">(${this.founder?.profile?.name})</span>`;
      } else {
        integrationEl.textContent = "-1 AP this quarter";
      }
    }
    
    const moodEl = document.getElementById("hireModalMoodDisplay");
    if (moodEl) {
      if (leadershipBonus > 3) {
        moodEl.innerHTML = `-0.25 mood <span class="text-xs text-emerald-500">(Leader)</span>`;
      } else {
        moodEl.textContent = "-0.5 mood all depts";
      }
    }
    
    // Disable button if can't afford
    const canAfford = this.metrics.cash >= hireCost;
    document.getElementById("confirmHireBtn").disabled = !canAfford;
    
    modal.classList.remove("hidden");
    modal.classList.add("flex");
  }
  
  closeHireStaffModal() {
    document.getElementById("hireStaffModal").classList.add("hidden");
    document.getElementById("hireStaffModal").classList.remove("flex");
  }
  
  confirmHireStaff() {
    // Base costs modified by founder's operational skill
    const baseHireCost = 50;
    const operationalBonus = this.founderBonuses?.operational || 2;
    const hireCostReduction = Math.max(0, (operationalBonus - 2) * 5);
    const hireCost = Math.max(25, baseHireCost - hireCostReduction);
    const burnIncrease = 25;
    
    if (this.metrics.cash < hireCost) return;
    
    // Apply costs
    this.metrics.cash -= hireCost;
    this.metrics.burn += burnIncrease;
    this.metrics.staff += 1;
    
    // Track integrating staff (AP penalty this quarter)
    // Leadership reduces integration penalty
    const leadershipBonus = this.founderBonuses?.leadership || 2;
    const integrationPenaltyReduction = leadershipBonus > 2 ? 0.5 : 0; // High leadership = halved penalty
    
    this.integratingStaff += 1;
    const basePenalty = Math.min(this.integratingStaff, 2);
    this.staffAPPenalty = Math.max(0, basePenalty - (integrationPenaltyReduction * this.integratingStaff));
    
    // Mood hit from team being stretched (leadership reduces this too)
    const moodPenalty = leadershipBonus > 3 ? 0.25 : 0.5;
    Object.keys(this.moods).forEach(dept => {
      if (this.team[dept]) {
        this.moods[dept] = Math.max(-3, this.moods[dept] - moodPenalty);
      }
    });
    
    const discountText = hireCostReduction > 0 ? ` (${this.founder?.profile?.name} discount)` : '';
    this.log(`üë• Hired 1 staff (-¬£${hireCost}k${discountText}, +¬£${burnIncrease}k burn). Integrating...`);
    soundManager.playHireSelect();
    
    this.closeHireStaffModal();
    this.update();
    this.renderBoardroom();
  }
  
  showFireStaffModal() {
    const modal = document.getElementById("fireStaffModal");
    const severanceCost = 40;
    const burnDecrease = 25;
    
    // Update current stats
    document.getElementById("fireModalStaff").textContent = this.metrics.staff;
    document.getElementById("fireModalAPCurrent").textContent = `+${this.getStaffAPBonus()}`;
    document.getElementById("fireModalCash").textContent = `¬£${this.metrics.cash}k`;
    document.getElementById("fireModalBurn").textContent = `¬£${this.metrics.burn}k/q`;
    
    // Calculate after-fire stats
    const newStaff = Math.max(0, this.metrics.staff - 1);
    const newBurn = Math.max(0, this.metrics.burn - burnDecrease);
    const newCash = this.metrics.cash - severanceCost;
    const newAPBonus = this.calculateStaffAPBonus(newStaff);
    
    document.getElementById("fireModalNewStaff").textContent = newStaff;
    document.getElementById("fireModalAPNew").textContent = `+${newAPBonus}`;
    document.getElementById("fireModalNewBurn").textContent = `¬£${newBurn}k/q`;
    document.getElementById("fireModalNewCash").textContent = `¬£${newCash}k`;
    
    // Disable button if no staff or can't afford severance
    const canFire = this.metrics.staff > 0 && this.metrics.cash >= severanceCost;
    document.getElementById("confirmFireBtn").disabled = !canFire;
    
    modal.classList.remove("hidden");
    modal.classList.add("flex");
  }
  
  closeFireStaffModal() {
    document.getElementById("fireStaffModal").classList.add("hidden");
    document.getElementById("fireStaffModal").classList.remove("flex");
  }
  
  confirmFireStaff() {
    const severanceCost = 40;
    const burnDecrease = 25;
    
    if (this.metrics.staff < 1 || this.metrics.cash < severanceCost) return;
    
    // Calculate values before layoff for logging
    const apBefore = this.getStaffAPBonus();
    const burnBefore = this.metrics.burn;
    
    // Apply costs
    this.metrics.cash -= severanceCost;
    this.metrics.burn = Math.max(0, this.metrics.burn - burnDecrease);
    this.metrics.staff -= 1;
    
    // If we had integrating staff, reduce that first
    if (this.integratingStaff > 0) {
      this.integratingStaff -= 1;
    }
    
    // Layoff disruption: -1 AP this quarter (reorganization, knowledge loss)
    this.staffAPPenalty = Math.min(this.staffAPPenalty + 1, 2); // Max -2 AP penalty
    
    // Calculate AP after layoff
    const apAfter = this.getStaffAPBonus();
    const apLost = apBefore - apAfter;
    
    // Morale hit from layoffs
    Object.keys(this.moods).forEach(dept => {
      if (this.team[dept]) {
        this.moods[dept] = Math.max(-3, this.moods[dept] - 1);
      }
    });
    
    let logMsg = `üìâ Laid off 1 staff. Severance: -¬£${severanceCost}k. Burn: ¬£${burnBefore}k ‚Üí ¬£${this.metrics.burn}k/q.`;
    if (apLost > 0) {
      logMsg += ` Lost ${apLost} AP bonus.`;
    }
    logMsg += ` Team disrupted (-1 AP this Q).`;
    this.log(logMsg);
    
    soundManager.playWarning();
    
    this.closeFireStaffModal();
    this.update();
    this.renderBoardroom();
  }
  
  calculateStaffAPBonus(staffCount) {
    // Calculate what AP bonus would be for a given staff count
    if (staffCount >= 9) return 3;
    if (staffCount >= 6) return 2;
    if (staffCount >= 3) return 1;
    return 0;
  }
  
  toggleStaffInfo() {
    const panel = document.getElementById("staffInfoPanel");
    panel.classList.toggle("hidden");
  }

  completeMilestone() {
    // Play milestone complete sound
    soundManager.playMilestoneComplete();
    
    this.completedMilestones.push(this.milestone.id);
    
    // Log journey event for milestone completion
    this.logJourneyEvent('milestone', {
      name: this.milestone.name,
      description: this.milestone.desc,
      difficulty: this.milestone.difficulty,
      milestoneNumber: this.completedMilestones.length,
      quarterCompleted: this.turn
    });
    
    // Track milestone completion with Google Analytics
    if (typeof trackGameEvent === 'function') {
      trackGameEvent('milestone_completed', {
        milestone_number: this.completedMilestones.length,
        milestone_id: this.milestone.id,
        milestone_name: this.milestone.name,
        quarters_taken: this.turn,
        cash_remaining: this.metrics.cash
      });
    }
    
    // Use milestone-specific rewards if available, otherwise defaults
    const cashReward = this.milestone.reward?.cash || 150;
    const valReward = this.milestone.reward?.val || 400;
    
    this.metrics.cash += cashReward;
    this.metrics.val += valReward;
    
    // Reset funding cooldown - milestone achievement unlocks ability to raise
    this.lastRaiseTurn = -4;
    
    // Show celebration transition, then the achievement modal
    const diffLabel = this.milestone.difficulty === "ambitious" ? "üî• Ambitious" : 
                      this.milestone.difficulty === "balanced" ? "‚öñ Balanced" : "üõ° Conservative";
    
    this.showQuarterTransition(() => {
      document.getElementById("achievedText").textContent = `${diffLabel} milestone complete: ${this.milestone.name}! +¬£${cashReward}k cash, +¬£${valReward}k valuation. üí∞ You can now raise funding!`;
      document.getElementById("achievedModal").classList.remove("hidden");
      document.getElementById("achievedModal").classList.add("flex");
    }, true); // true = celebration scene
  }

  onMilestoneAchieved() {
    document.getElementById("achievedModal").classList.add("hidden");
    
    console.log("onMilestoneAchieved called:", {
      completedMilestonesLength: this.completedMilestones.length,
      completedMilestones: this.completedMilestones,
      hasHR: !!this.team.hr
    });
    
    // HR hire after M1
    if (this.completedMilestones.length === 1 && !this.team.hr) {
      console.log("Showing HR modal");
      this.showHRModal();
      return;
    }
    
    // Check if all milestones complete (3 total)
    if (this.completedMilestones.length >= 3) {
      console.log("All milestones complete - ending game");
      this.endGame("allMilestones");
      return;
    }
    
    // Show next milestone selection (M2 or M3)
    console.log("Showing milestone modal for next milestone");
    this.showMilestoneModal();
  }

  showHRModal() {
    const container = document.getElementById("hrHires");
    const bonusLabels = { sci: "Research", dev: "Product", mkt: "Sales", hr: "People" };
    const salaryMod = this.location ? (1 + this.location.salaryMod) : 1;
    
    container.innerHTML = HR_EXECS.map(e => {
      const adjustedWage = Math.round(e.wage * salaryMod);
      return `
      <div data-id="${e.id}" class="hire-card border-2 border-slate-200 rounded-xl p-4 bg-white cursor-pointer hover:border-amber-400 hover:shadow-lg transition-all flex flex-col">
        <!-- Photo + Name -->
        <div class="flex items-center gap-3 mb-3">
          <div class="w-14 h-14 rounded-full border-2 border-amber-300 overflow-hidden flex-shrink-0">
            ${renderAvatar(e.avatar, e.name)}
          </div>
          <div>
            <div class="font-bold text-slate-800">${e.name}</div>
            <div class="text-xs text-amber-600 font-medium">${e.title}</div>
            <div class="text-[10px] text-slate-400">${e.origin}</div>
          </div>
        </div>
        
        <!-- Background - full text -->
        <p class="text-xs text-slate-600 mb-3">${e.background}</p>
        
        <!-- Personality traits -->
        <div class="flex flex-wrap gap-1 mb-3">
          ${e.personality.split(", ").map(t => `<span class="px-2 py-0.5 rounded-full bg-slate-100 text-slate-600 text-[10px]">${t}</span>`).join("")}
        </div>
        
        <!-- Compensation box -->
        <div class="bg-gradient-to-r from-slate-50 to-amber-50 rounded-lg p-3 mb-3">
          <div class="grid grid-cols-2 gap-2 text-xs">
            <div>
              <span class="text-slate-400">Salary</span>
              <div class="font-medium text-slate-700">¬£${adjustedWage}k/quarter</div>
            </div>
            <div>
              <span class="text-slate-400">Equity</span>
              <div class="font-medium text-amber-600">${e.equity}%</div>
            </div>
            <div class="col-span-2">
              <span class="text-slate-400">Vesting</span>
              <div class="font-medium text-slate-700">${e.vestingYears} years (${e.cliff}yr cliff)</div>
            </div>
          </div>
        </div>
        
        <!-- Bonuses -->
        <div class="flex flex-wrap gap-1 mb-3">
          ${Object.entries(e.bonus).filter(([k,v]) => v !== 0).map(([k,v]) => `
            <span class="px-2 py-0.5 ${v > 0 ? 'bg-emerald-100 text-emerald-700' : 'bg-red-100 text-red-700'} text-xs rounded-full font-medium">
              ${v > 0 ? '+' : ''}${v} ${bonusLabels[k]}
            </span>
          `).join("")}
        </div>
        
        <!-- Quote -->
        <div class="border-t border-slate-100 pt-2 mt-auto">
          <p class="text-[11px] text-slate-500 italic">"${e.quote}"</p>
        </div>
      </div>
    `}).join("");
    
    container.querySelectorAll(".hire-card").forEach(card => {
      card.onclick = () => {
        const exec = HR_EXECS.find(e => e.id === card.dataset.id);
        this.team.hr = exec;
        this.moods.hr = 1;
        // Apply location salary modifier
        const adjustedWage = Math.round(exec.wage * salaryMod);
        this.metrics.burn += adjustedWage;
        this.metrics.equity -= exec.equity;
        Object.entries(exec.bonus).forEach(([k, v]) => { if (this.metrics[k] !== undefined) this.metrics[k] += v; });
        
        // Increase max AP to 7 now that we have a HR lead
        this.maxAP = 7;
        this.log(`üìà With a HR lead on board, you can now manage up to ${this.maxAP} AP per quarter.`);
        
        // Track equity grant
        this.equityGrants.push({
          name: exec.name,
          equity: exec.equity,
          vestingYears: exec.vestingYears,
          cliff: exec.cliff,
          grantQuarter: this.turn,
          vestedPercent: 0
        });
        
        this.log(`Hired ${exec.name} as Head of HR. ${exec.equity}% equity granted.`);
        document.getElementById("hrModal").classList.add("hidden");
        
        // After HR hire, show M2 (second milestone)
        if (this.completedMilestones.length < 3) {
          this.showMilestoneModal();
        } else {
          this.endGame("allMilestones");
        }
      };
    });
    
    document.getElementById("hrModal").classList.remove("hidden");
    document.getElementById("hrModal").classList.add("flex");
  }

  failMilestone() {
    document.getElementById("failedText").textContent = `You missed: ${this.milestone.name}. The board has lost confidence.`;
    document.getElementById("failedModal").classList.remove("hidden");
    document.getElementById("failedModal").classList.add("flex");
  }

  endGame(reason) {
    // Track game end with Google Analytics
    if (typeof trackGameEvent === 'function') {
      trackGameEvent('game_ended', {
        outcome: reason,
        quarters_played: this.turn,
        milestone_reached: this.currentMilestone,
        final_cash: this.metrics.cash,
        startup_name: this.startupName
      });
    }
    
    // Victory path - show special victory modal
    if (reason === "allMilestones") {
      soundManager.playVictory();
      
      // Check for unicorn event (10% chance on winning)
      if (this.checkForUnicorn()) {
        this.triggerUnicornEvent();
      } else {
        this.showVictoryModal();
      }
      return;
    }
    
    // Failure - play failure sound
    soundManager.playFailure();
    
    // Analyze the game to provide feedback
    const analysis = this.analyzeGame(reason);
    
    // Set header based on reason
    if (reason === "bankrupt") {
      document.getElementById("endIcon").textContent = "üí∏";
      document.getElementById("endTitle").textContent = "Ran Out of Runway";
      document.getElementById("endSubtitle").textContent = `${this.company.name} ran out of cash in Q${this.turn}`;
    } else if (reason === "missedMilestone") {
      document.getElementById("endIcon").textContent = "‚è∞";
      document.getElementById("endTitle").textContent = "Missed the Deadline";
      document.getElementById("endSubtitle").textContent = `The board lost confidence after Q${this.turn}`;
    } else if (reason === "disengaged") {
      document.getElementById("endIcon").textContent = "üëã";
      document.getElementById("endTitle").textContent = "Removed as CEO";
      document.getElementById("endSubtitle").textContent = `The board voted you out after ${this.turn} quarters of disengagement`;
    } else {
      document.getElementById("endIcon").textContent = "üìâ";
      document.getElementById("endTitle").textContent = "Game Over";
      document.getElementById("endSubtitle").textContent = `${this.company.name} after ${this.turn} quarters`;
    }
    
    // What happened section
    document.getElementById("endReason").innerHTML = analysis.reasonHtml;
    
    // Stats section
    document.getElementById("endStats").innerHTML = `
      <div class="bg-slate-50 rounded-lg p-3">
        <div class="text-slate-500 text-xs">Quarters Survived</div>
        <div class="font-bold text-slate-800">${this.turn} of 16</div>
      </div>
      <div class="bg-slate-50 rounded-lg p-3">
        <div class="text-slate-500 text-xs">Milestones Completed</div>
        <div class="font-bold text-slate-800">${this.completedMilestones.length} of 3</div>
      </div>
      <div class="bg-slate-50 rounded-lg p-3">
        <div class="text-slate-500 text-xs">Peak Valuation</div>
        <div class="font-bold text-emerald-600">¬£${analysis.peakValuation.toLocaleString()}k</div>
      </div>
      <div class="bg-slate-50 rounded-lg p-3">
        <div class="text-slate-500 text-xs">Final Cash</div>
        <div class="font-bold ${this.metrics.cash <= 0 ? 'text-red-600' : 'text-slate-800'}">¬£${this.metrics.cash}k</div>
      </div>
      <div class="bg-slate-50 rounded-lg p-3">
        <div class="text-slate-500 text-xs">Team Size</div>
        <div class="font-bold text-slate-800">${this.metrics.staff} people</div>
      </div>
      <div class="bg-slate-50 rounded-lg p-3">
        <div class="text-slate-500 text-xs">Equity Retained</div>
        <div class="font-bold text-slate-800">${this.metrics.equity.toFixed(1)}%</div>
      </div>
    `;
    
    // Positives section
    document.getElementById("endPositives").innerHTML = analysis.positives.map(p => `
      <div class="flex items-start gap-2 bg-emerald-50 rounded-lg p-3">
        <span class="text-emerald-500 mt-0.5">‚úì</span>
        <span class="text-slate-700">${p}</span>
      </div>
    `).join('');
    
    // Lessons section
    document.getElementById("endLessons").innerHTML = analysis.lessons.map(l => `
      <div class="flex items-start gap-2 bg-amber-50 rounded-lg p-3">
        <span class="text-amber-500 mt-0.5">‚Üí</span>
        <span class="text-slate-700">${l}</span>
      </div>
    `).join('');
    
    // Encouragement section
    document.getElementById("endEncouragement").innerHTML = `
      <div class="text-2xl mb-2">${analysis.encouragementEmoji}</div>
      <p class="text-indigo-800 font-medium mb-1">${analysis.encouragementTitle}</p>
      <p class="text-indigo-600 text-sm">${analysis.encouragementText}</p>
    `;
    
    document.getElementById("endModal").classList.remove("hidden");
    document.getElementById("endModal").classList.add("flex");
  }

  analyzeGame(reason) {
    const positives = [];
    const lessons = [];
    let reasonHtml = "";
    
    // Track peak valuation (approximation based on current + milestones)
    const peakValuation = this.metrics.val + (this.completedMilestones.length * 400);
    
    // Reason-specific analysis
    if (reason === "bankrupt") {
      reasonHtml = `
        <div class="flex items-start gap-3">
          <div class="text-2xl">üí∏</div>
          <div>
            <p class="font-medium text-rose-800 mb-1">Cash hit zero</p>
            <p class="text-rose-700 text-sm">Your burn rate of ¬£${this.metrics.burn}k/quarter exceeded your ability to generate or raise funds.</p>
          </div>
        </div>
      `;
      
      // Burn rate lessons
      if (this.metrics.burn > 100) {
        lessons.push("Your burn rate was very high. Consider hiring more conservatively early on, or choosing a lower-cost location.");
      }
      if (this.investors.length === 0) {
        lessons.push("You never raised follow-on funding. After completing milestones, raising capital can extend your runway significantly.");
      } else if (this.investors.length === 1) {
        lessons.push("You only raised once. Multiple funding rounds, timed well, can keep you going through tough periods.");
      }
    } else if (reason === "missedMilestone") {
      reasonHtml = `
        <div class="flex items-start gap-3">
          <div class="text-2xl">‚è∞</div>
          <div>
            <p class="font-medium text-rose-800 mb-1">Missed milestone deadline</p>
            <p class="text-rose-700 text-sm">You reached ${this.milestoneProgress}% progress on "${this.milestone?.name || 'the milestone'}" but ran out of time.</p>
          </div>
        </div>
      `;
      
      // Milestone lessons
      if (this.milestoneProgress >= 80) {
        lessons.push("You were so close! With just a bit more focus on the milestone requirements, you would have made it.");
      } else if (this.milestoneProgress >= 50) {
        lessons.push("Try to prioritize actions that directly contribute to your milestone's focus areas (shown in the milestone tracker).");
      } else {
        lessons.push("Keep a close eye on milestone deadlines and focus heavily on the required stats. The milestone tracker shows what to prioritize.");
      }
      lessons.push("Banking unused AP (up to 2 points) can give you a crucial burst when deadline pressure hits.");
    } else if (reason === "disengaged") {
      reasonHtml = `
        <div class="flex items-start gap-3">
          <div class="text-2xl">üëã</div>
          <div>
            <p class="font-medium text-rose-800 mb-1">The board lost confidence in your leadership</p>
            <p class="text-rose-700 text-sm">You skipped too many decisions over consecutive quarters. Your team and investors concluded you weren't seriously engaged with running the company.</p>
          </div>
        </div>
      `;
      
      // Disengagement lessons
      lessons.push("A startup CEO needs to make decisions every quarter. Skipping choices signals disengagement to your team.");
      lessons.push("Even when options seem unappealing, picking one shows leadership. Passing should be rare, not routine.");
      lessons.push("Your team looks to you for direction. Consistent inaction erodes confidence and morale.");
    }
    
    // Analyze what went well
    if (this.completedMilestones.length >= 1) {
      positives.push(`You completed ${this.completedMilestones.length} milestone${this.completedMilestones.length > 1 ? 's' : ''} - that's real progress!`);
    }
    if (this.turn >= 8) {
      positives.push(`You survived ${this.turn} quarters - that's ${Math.floor(this.turn / 4)} year${this.turn >= 8 ? 's' : ''} of startup life!`);
    }
    if (this.metrics.val >= 1000) {
      positives.push(`You built the company to a ¬£${this.metrics.val.toLocaleString()}k valuation - investors noticed.`);
    }
    if (this.metrics.equity >= 60) {
      positives.push(`You retained ${this.metrics.equity.toFixed(0)}% equity - you didn't over-dilute.`);
    }
    if (this.team.hr) {
      positives.push("You unlocked and hired a Head of HR - that's Milestone 1 complete!");
    }
    if (Object.values(this.moods).every(m => m >= 0)) {
      positives.push("Your team morale stayed positive - that's good leadership.");
    }
    if (this.investors.length >= 2) {
      positives.push(`You successfully raised ${this.investors.length} rounds of funding - VCs believed in you.`);
    }
    if (this.conferencesAttended > 0) {
      positives.push(`You attended ${this.conferencesAttended} conference${this.conferencesAttended > 1 ? 's' : ''} and generated leads.`);
    }
    
    // Ensure at least 2 positives
    if (positives.length === 0) {
      positives.push("You took the leap and started a company - most people never do.");
      positives.push("You learned the fundamentals of startup economics and decision-making.");
    } else if (positives.length === 1) {
      positives.push("Every attempt teaches you something. You're building founder intuition.");
    }
    
    // Add general lessons based on game state
    if (this.metrics.equity < 40 && reason === "bankrupt") {
      lessons.push("Heavy dilution left you with less runway flexibility. Balance raising with preserving equity.");
    }
    if (Object.values(this.moods).some(m => m <= -2)) {
      lessons.push("Some team members were very unhappy. Low morale reduces effectiveness. Try to keep your team motivated.");
    }
    if (this.metrics.staff > 10 && this.turn < 8) {
      lessons.push("You scaled headcount quickly. Early-stage startups often benefit from staying lean until product-market fit.");
    }
    
    // Ensure at least 2 lessons
    if (lessons.length < 2) {
      lessons.push("Watch your runway closely - always know how many quarters of cash you have left.");
      if (lessons.length < 2) {
        lessons.push("Match your spending to your milestone timeline. Aggressive moves need aggressive funding.");
      }
    }
    
    // Pick encouragement based on progress
    let encouragementEmoji, encouragementTitle, encouragementText;
    
    if (this.completedMilestones.length >= 2) {
      encouragementEmoji = "üåü";
      encouragementTitle = "So Close to Greatness!";
      encouragementText = "Two milestones down means you understand the game. One more push and you'll crack it.";
    } else if (this.completedMilestones.length >= 1) {
      encouragementEmoji = "üí™";
      encouragementTitle = "You've Got the Basics!";
      encouragementText = "Completing your first milestone is the hardest. Now you know the rhythm-try again!";
    } else if (this.turn >= 6) {
      encouragementEmoji = "üéØ";
      encouragementTitle = "Building Experience!";
      encouragementText = "Surviving multiple quarters is an achievement. Each game sharpens your instincts.";
    } else {
      encouragementEmoji = "üöÄ";
      encouragementTitle = "Every Expert Was Once a Beginner";
      encouragementText = "The best founders failed many times before succeeding. Your next run will be better!";
    }
    
    return {
      reasonHtml,
      peakValuation,
      positives: positives.slice(0, 4), // Max 4 positives
      lessons: lessons.slice(0, 3), // Max 3 lessons
      encouragementEmoji,
      encouragementTitle,
      encouragementText
    };
  }

  showVictoryModal() {
    // Calculate final stats
    const quartersElapsed = this.turn;
    let totalGrantedEquity = 0;
    let totalVested = 0;
    
    (this.equityGrants || []).forEach(g => {
      totalGrantedEquity += g.equity;
      const quartersSinceGrant = quartersElapsed - g.grantQuarter;
      const yearsSinceGrant = quartersSinceGrant / 4;
      if (yearsSinceGrant >= g.cliff) {
        totalVested += Math.min(g.equity, (yearsSinceGrant / g.vestingYears) * g.equity);
      }
    });
    
    const effectiveEquity = this.metrics.equity;
    const netWorth = Math.round((effectiveEquity / 100) * this.metrics.val);
    
    // Store for ending calculations
    this.victoryStats = {
      quarters: quartersElapsed,
      valuation: this.metrics.val,
      equity: effectiveEquity,
      cash: this.metrics.cash,
      netWorth: netWorth,
      totalVested: totalVested
    };
    
    // Populate victory modal
    document.getElementById("victoryQuarters").textContent = quartersElapsed;
    document.getElementById("victoryValuation").textContent = `¬£${this.metrics.val.toLocaleString()}k`;
    document.getElementById("victoryEquity").textContent = `${effectiveEquity.toFixed(1)}%`;
    document.getElementById("victoryCash").textContent = `¬£${this.metrics.cash.toLocaleString()}k`;
    document.getElementById("victoryNetWorth").innerHTML = `
      <div class="text-slate-400 text-sm mb-1">Your stake is worth</div>
      <div class="text-4xl font-black text-emerald-400">¬£${netWorth.toLocaleString()}k</div>
    `;
    
    // Set industry-specific acquirer name
    const acquirerMap = {
      aether: "Eli Lilly",
      vanguard: "ABB",
      quant: "Irongate Capital",
      dream: "Disney"
    };
    document.getElementById("victoryAcquirerName").textContent = acquirerMap[this.company.id] || "Industry Leader";
    
    // Populate ending choice values
    const beachWealth = netWorth + this.metrics.cash;
    const serialSeed = Math.round(netWorth * 0.3);
    const scaleValuation = Math.round(this.metrics.val * 3.5);
    const scaleDilutedEquity = Math.round(effectiveEquity * 0.6 * 10) / 10;
    const scaleStakeValue = Math.round((scaleDilutedEquity / 100) * scaleValuation);
    const acquiPremium = Math.round(this.metrics.val * 2.2);
    const acquiPayout = Math.round((effectiveEquity / 100) * acquiPremium);
    
    document.getElementById("endingBeachValue").textContent = `¬£${beachWealth.toLocaleString()}k`;
    document.getElementById("endingSerialSale").textContent = `¬£${netWorth.toLocaleString()}k`;
    document.getElementById("endingSerialSeed").textContent = `¬£${serialSeed.toLocaleString()}k`;
    document.getElementById("endingScaleValuation").textContent = `¬£${scaleValuation.toLocaleString()}k`;
    document.getElementById("endingScaleStake").textContent = `¬£${scaleStakeValue.toLocaleString()}k`;
    document.getElementById("endingAcquiPrice").textContent = `¬£${acquiPremium.toLocaleString()}k`;
    document.getElementById("endingAcquiPayout").textContent = `¬£${acquiPayout.toLocaleString()}k`;
    
    // Show extreme mode badge if applicable
    const extremeBadge = document.getElementById("extremeModeBadge");
    if (this.extremeMode) {
      extremeBadge.classList.remove("hidden");
    } else {
      extremeBadge.classList.add("hidden");
    }
    
    // Show modal
    document.getElementById("victoryModal").classList.remove("hidden");
    document.getElementById("victoryModal").classList.add("flex");
  }

  // Check if unicorn event should trigger (10% chance, with slight boosts for good play)
  checkForUnicorn() {
    let unicornChance = 0.10; // Base 10% chance
    
    // Small boosts for exceptional play (can push to ~15% max)
    if (this.metrics.val >= 3000) unicornChance += 0.02; // High valuation
    if (this.metrics.equity >= 60) unicornChance += 0.01; // Good equity retention
    if (this.turn <= 12) unicornChance += 0.02; // Fast completion
    if (this.extremeMode) unicornChance += 0.02; // Extreme mode bonus
    
    return Math.random() < unicornChance;
  }

  triggerUnicornEvent() {
    // Show unicorn modal
    document.getElementById("unicornModal").classList.remove("hidden");
    document.getElementById("unicornModal").classList.add("flex");
    
    // Calculate unicorn values
    const baseVal = this.metrics.val;
    const unicornValuation = 1000000; // ¬£1B = ¬£1,000,000k
    const multiplier = Math.round(unicornValuation / baseVal);
    
    document.getElementById("unicornPreVal").textContent = `¬£${baseVal.toLocaleString()}k`;
    document.getElementById("unicornMultiplier").textContent = `${multiplier}x`;
    
    // Store for when they continue
    this.unicornTriggered = true;
  }

  acceptUnicorn() {
    // Get founder name
    const nameInput = document.getElementById("unicornFounderName");
    const founderName = nameInput.value.trim() || "Anonymous Founder";
    
    // Apply unicorn valuation boost
    this.metrics.val = 1000000; // ¬£1B
    
    // Store unicorn data
    this.unicornFounderName = founderName;
    
    // Close unicorn modal
    document.getElementById("unicornModal").classList.add("hidden");
    document.getElementById("unicornModal").classList.remove("flex");
    
    // Add log entry
    this.log("ü¶Ñ UNICORN STATUS ACHIEVED! Valuation: ¬£1,000,000k");
    
    // Show Hall of Fame
    this.showHallOfFame();
  }

  showHallOfFame() {
    // Get random selection of legends (8-10)
    const shuffled = [...HALL_OF_FAME_LEGENDS].sort(() => Math.random() - 0.5);
    const selectedLegends = shuffled.slice(0, 8);
    
    // Sort by valuation descending
    selectedLegends.sort((a, b) => b.valuation - a.valuation);
    
    // Find where the player would rank
    const playerValuation = 1; // ¬£1B in the same scale
    let playerRank = 1;
    selectedLegends.forEach(l => {
      if (l.valuation > playerValuation) playerRank++;
    });
    
    // Render the list
    const listHtml = selectedLegends.map((legend, idx) => {
      const rank = idx + 1;
      const isTop3 = rank <= 3;
      const medalEmoji = rank === 1 ? "ü•á" : rank === 2 ? "ü•à" : rank === 3 ? "ü•â" : "";
      
      return `
        <div class="flex items-center gap-4 p-3 rounded-xl ${isTop3 ? 'bg-amber-900/30 border border-amber-500/30' : 'bg-black/20'}">
          <div class="w-8 text-center">
            ${medalEmoji || `<span class="text-slate-500 font-mono text-sm">#${rank}</span>`}
          </div>
          <div class="text-2xl">${legend.emoji}</div>
          <div class="flex-1">
            <div class="font-bold text-white">${legend.name}</div>
            <div class="text-amber-400/80 text-sm">${legend.company} ‚Ä¢ ${legend.year}</div>
          </div>
          <div class="text-right">
            <div class="font-bold ${legend.valuation >= 100 ? 'text-emerald-400' : 'text-white'}">¬£${legend.valuation}B</div>
          </div>
        </div>
      `;
    }).join("");
    
    document.getElementById("hallOfFameList").innerHTML = listHtml;
    
    // Show player's new entry
    const newEntry = document.getElementById("newHofEntry");
    newEntry.classList.remove("hidden");
    document.getElementById("newHofName").textContent = this.unicornFounderName;
    document.getElementById("newHofCompany").textContent = `${this.company.name} ‚Ä¢ ${new Date().getFullYear()}`;
    
    // Stats
    document.getElementById("hofTotalFounders").textContent = selectedLegends.length + 1;
    document.getElementById("hofYourRank").textContent = `#${Math.min(playerRank, selectedLegends.length + 1)}`;
    
    // Calculate total wealth
    const totalWealth = selectedLegends.reduce((sum, l) => sum + l.valuation, 0) + 1;
    document.getElementById("hofTotalWealth").textContent = `¬£${totalWealth.toLocaleString()}B`;
    
    // Show modal
    document.getElementById("hallOfFameModal").classList.remove("hidden");
    document.getElementById("hallOfFameModal").classList.add("flex");
  }

  closeHallOfFame() {
    document.getElementById("hallOfFameModal").classList.add("hidden");
    document.getElementById("hallOfFameModal").classList.remove("flex");
    
    // Now show victory modal with updated values
    this.showVictoryModal();
  }

  selectEnding(ending) {
    const stats = this.victoryStats;
    const companyName = this.company.name;
    let content = "";
    
    // Play ending-specific sound
    switch(ending) {
      case 'beach':
        soundManager.playBeachEnding();
        break;
      case 'serial':
        soundManager.playSerialEnding();
        break;
      case 'scale':
        soundManager.playScaleEnding();
        break;
      case 'acquisition':
        soundManager.playAcquisitionEnding();
        break;
    }
    
    switch(ending) {
      case 'beach':
        const beachWealth = stats.netWorth + stats.cash;
        content = `
          <div class="text-center mb-6">
            <div class="text-6xl mb-3">üèñ</div>
            <h2 class="text-2xl font-bold text-slate-800">The Good Life</h2>
          </div>
          <div class="prose prose-slate max-w-none">
            <p class="text-slate-600 leading-relaxed mb-4">
              You cash out your stake in ${companyName} for <span class="font-bold text-emerald-600">¬£${stats.netWorth.toLocaleString()}k</span>, 
              say goodbye to your team, and board a one-way flight to somewhere warm.
            </p>
            <p class="text-slate-600 leading-relaxed mb-4">
              The early mornings, the investor calls, the all-nighters before launches-they're all behind you now. 
              Your phone stops buzzing. Your inbox goes quiet. And you discover that the beach really is as nice as they say.
            </p>
            <p class="text-slate-500 text-sm italic">
              Years later, you occasionally see ${companyName} in the news. You smile, pour another drink, and turn back to the sunset.
            </p>
          </div>
          <div class="mt-6 p-4 bg-cyan-50 rounded-xl text-center">
            <div class="text-sm text-cyan-600 mb-1">Final Net Worth</div>
            <div class="text-3xl font-bold text-cyan-700">¬£${beachWealth.toLocaleString()}k</div>
            <div class="text-xs text-cyan-500 mt-1">+ Priceless peace of mind</div>
          </div>
        `;
        break;
        
      case 'serial':
        const seedFunding = Math.round(stats.netWorth * 0.3);
        content = `
          <div class="text-center mb-6">
            <div class="text-6xl mb-3">üöÄ</div>
            <h2 class="text-2xl font-bold text-slate-800">The Serial Founder</h2>
          </div>
          <div class="prose prose-slate max-w-none">
            <p class="text-slate-600 leading-relaxed mb-4">
              You sell your stake for <span class="font-bold text-emerald-600">¬£${stats.netWorth.toLocaleString()}k</span>, 
              but retirement never crosses your mind. Within weeks, you're sketching ideas on napkins again.
            </p>
            <p class="text-slate-600 leading-relaxed mb-4">
              This time, you don't need to beg for angel funding. You write yourself a seed check for 
              <span class="font-bold text-violet-600">¬£${seedFunding.toLocaleString()}k</span> and hire your first employee before the ink dries on the ${companyName} sale.
            </p>
            <p class="text-slate-500 text-sm italic">
              The pattern repeats: the garage, the pitch decks, the product pivots. But now you know the moves. 
              And this time, you're playing the game on your own terms.
            </p>
          </div>
          <div class="mt-6 p-4 bg-violet-50 rounded-xl text-center">
            <div class="text-sm text-violet-600 mb-1">Your Next Startup's Seed Round</div>
            <div class="text-3xl font-bold text-violet-700">¬£${seedFunding.toLocaleString()}k</div>
            <div class="text-xs text-violet-500 mt-1">Self-funded. No strings attached.</div>
          </div>
        `;
        break;
        
      case 'scale':
        const seriesBValuation = Math.round(stats.valuation * 3.5);
        const dilutedEquity = Math.round(stats.equity * 0.6 * 10) / 10;
        const futureWorth = Math.round((dilutedEquity / 100) * seriesBValuation);
        content = `
          <div class="text-center mb-6">
            <div class="text-6xl mb-3">üìà</div>
            <h2 class="text-2xl font-bold text-slate-800">The Empire Builder</h2>
          </div>
          <div class="prose prose-slate max-w-none">
            <p class="text-slate-600 leading-relaxed mb-4">
              You turn down every acquisition offer and tell your board: "We're just getting started." 
              The Series B closes at a <span class="font-bold text-emerald-600">¬£${seriesBValuation.toLocaleString()}k</span> valuation.
            </p>
            <p class="text-slate-600 leading-relaxed mb-4">
              The next three years are a blur of international expansion, enterprise deals, and magazine covers. 
              Your team grows from dozens to hundreds. ${companyName} becomes a verb.
            </p>
            <p class="text-slate-500 text-sm italic">
              The IPO rumors start. Your equity is diluted to ${dilutedEquity}%, but at this valuation? 
              You're not complaining. This is what it means to build something that lasts.
            </p>
          </div>
          <div class="mt-6 p-4 bg-amber-50 rounded-xl text-center">
            <div class="text-sm text-amber-600 mb-1">Post-Series B Stake Value</div>
            <div class="text-3xl font-bold text-amber-700">¬£${futureWorth.toLocaleString()}k</div>
            <div class="text-xs text-amber-500 mt-1">${dilutedEquity}% of ¬£${seriesBValuation.toLocaleString()}k valuation</div>
          </div>
        `;
        break;
        
      case 'acquisition':
        const acquiPremium = Math.round(stats.valuation * 2.2);
        const acquiPayout = Math.round((stats.equity / 100) * acquiPremium);
        
        // Industry-specific acquirers
        const acquirerMap = {
          aether: { name: "Eli Lilly", type: "pharma giant" },
          vanguard: { name: "ABB", type: "industrial automation leader" },
          quant: { name: "Irongate Capital", type: "investment powerhouse" },
          dream: { name: "Disney", type: "entertainment empire" }
        };
        const acquirerInfo = acquirerMap[this.company.id] || { name: "a major corporation", type: "industry leader" };
        const acquirer = acquirerInfo.name;
        const acquirerType = acquirerInfo.type;
        
        content = `
          <div class="text-center mb-6">
            <div class="text-6xl mb-3">üè¢</div>
            <h2 class="text-2xl font-bold text-slate-800">The Strategic Exit</h2>
          </div>
          <div class="prose prose-slate max-w-none">
            <p class="text-slate-600 leading-relaxed mb-4">
              When <span class="font-bold">${acquirer}</span>, the ${acquirerType}, comes calling with a 
              <span class="font-bold text-emerald-600">¬£${acquiPremium.toLocaleString()}k</span> offer, 
              the board doesn't need long to decide. The premium is too good to ignore.
            </p>
            <p class="text-slate-600 leading-relaxed mb-4">
              You stay on to lead "${companyName} by ${acquirer}"-your tech, their resources. 
              The integration is smoother than expected. Your team gets ${acquirer} stock. 
              You get a corner office and an expense account.
            </p>
            <p class="text-slate-500 text-sm italic">
              It's not quite the indie founder dream anymore, but there's something satisfying about seeing 
              your creation reach global scale with ${acquirer}'s distribution behind it.
            </p>
          </div>
          <div class="mt-6 p-4 bg-emerald-50 rounded-xl text-center">
            <div class="text-sm text-emerald-600 mb-1">Your Acquisition Payout</div>
            <div class="text-3xl font-bold text-emerald-700">¬£${acquiPayout.toLocaleString()}k</div>
            <div class="text-xs text-emerald-500 mt-1">+ ${acquirer} VP title & stock options</div>
          </div>
        `;
        break;
    }
    
    // Hide victory modal, show ending result
    document.getElementById("victoryModal").classList.add("hidden");
    document.getElementById("victoryModal").classList.remove("flex");
    document.getElementById("endingResultContent").innerHTML = content;
    document.getElementById("endingResultModal").classList.remove("hidden");
    document.getElementById("endingResultModal").classList.add("flex");
  }

  changeStaff(delta) {
    this.metrics.staff = Math.max(1, this.metrics.staff + delta);
    this.metrics.burn += delta * 12;
    this.update();
    this.log(delta > 0 ? "Hired additional staff." : "Reduced headcount.");
  }
  
  updateFundingCard(runway) {
    const card = document.getElementById("fundingCard");
    const textEl = document.getElementById("fundingCardText");
    const titleEl = document.getElementById("fundingCardTitle");
    const iconEl = document.getElementById("fundingCardIcon");
    const runwayEl = document.getElementById("fundingCardRunway");
    const cashEl = document.getElementById("fundingCardCash");
    const barContainer = document.getElementById("runwayBarContainer");
    
    // Update cash display
    cashEl.textContent = `¬£${this.metrics.cash}k`;
    
    // Cap runway display at 8 for the visual
    const displayRunway = Math.min(runway, 8);
    const runwayText = runway > 8 ? "8+" : `${runway}`;
    
    // Check if can raise
    const canRaise = (this.turn - this.lastRaiseTurn) >= 4;
    const hasEquity = this.metrics.equity >= 10;
    
    // Determine colors based on state
    let segmentActiveClass, segmentInactiveClass, warningIcon;
    if (runway <= 1) {
      segmentActiveClass = "bg-white/90";
      segmentInactiveClass = "bg-white/30";
      warningIcon = "üö®";
      runwayEl.textContent = `${runwayText} QTR üö®`;
    } else if (runway <= 3) {
      segmentActiveClass = "bg-white/90";
      segmentInactiveClass = "bg-white/30";
      warningIcon = "‚ö†";
      runwayEl.textContent = `${runwayText} QTR ‚ö†`;
    } else {
      segmentActiveClass = "bg-white/90";
      segmentInactiveClass = "bg-white/30";
      warningIcon = "";
      runwayEl.textContent = `${runwayText} QTR`;
    }
    
    // Render runway bar segments (8 segments max)
    let barHTML = '';
    for (let i = 0; i < 8; i++) {
      const isActive = i < displayRunway;
      const segmentClass = isActive ? segmentActiveClass : segmentInactiveClass;
      const pulseClass = (runway <= 1 && isActive) ? "animate-pulse" : "";
      barHTML += `<div class="flex-1 h-2 ${segmentClass} rounded-full ${pulseClass}"></div>`;
    }
    barContainer.innerHTML = barHTML;
    
    // Update card styling and text based on situation
    if (!canRaise) {
      const turnsUntil = 4 - (this.turn - this.lastRaiseTurn);
      card.className = "bg-gradient-to-r from-slate-400 to-slate-500 rounded-xl shadow-lg overflow-hidden";
      titleEl.textContent = "Funding Cooldown";
      iconEl.textContent = "‚è≥";
      textEl.textContent = `Can raise again in ${turnsUntil} quarter${turnsUntil > 1 ? 's' : ''}.`;
      document.getElementById("raiseBtnCard").textContent = "On Cooldown";
      document.getElementById("raiseBtnCard").disabled = true;
      document.getElementById("raiseBtnCard").className = "px-5 py-2.5 bg-slate-200 text-slate-400 font-bold rounded-xl cursor-not-allowed";
    } else if (!hasEquity) {
      card.className = "bg-gradient-to-r from-slate-400 to-slate-500 rounded-xl shadow-lg overflow-hidden";
      titleEl.textContent = "Cannot Raise";
      iconEl.textContent = "üö´";
      textEl.textContent = "Need at least 10% equity to raise.";
      document.getElementById("raiseBtnCard").textContent = "Insufficient Equity";
      document.getElementById("raiseBtnCard").disabled = true;
      document.getElementById("raiseBtnCard").className = "px-5 py-2.5 bg-slate-200 text-slate-400 font-bold rounded-xl cursor-not-allowed";
    } else if (runway <= 1) {
      // Critical - red styling (1 quarter or less)
      card.className = "bg-gradient-to-r from-red-500 to-red-600 rounded-xl shadow-lg overflow-hidden animate-pulse";
      titleEl.textContent = "CRITICAL: Raise Now!";
      iconEl.textContent = "üö®";
      textEl.textContent = "You will run out of money next quarter.";
      document.getElementById("raiseBtnCard").textContent = "Raise Now! ‚Üí";
      document.getElementById("raiseBtnCard").disabled = false;
      document.getElementById("raiseBtnCard").className = "px-5 py-2.5 bg-white text-red-700 font-bold rounded-xl shadow-md hover:shadow-lg hover:bg-red-50 transition-all";
    } else if (runway <= 3) {
      // Warning - amber styling (2-3 quarters)
      card.className = "bg-gradient-to-r from-amber-500 to-orange-500 rounded-xl shadow-lg overflow-hidden";
      titleEl.textContent = "Runway Getting Short";
      iconEl.textContent = "‚ö†";
      textEl.textContent = "Consider raising soon to extend your runway.";
      document.getElementById("raiseBtnCard").textContent = "Raise Funding ‚Üí";
      document.getElementById("raiseBtnCard").disabled = false;
      document.getElementById("raiseBtnCard").className = "px-5 py-2.5 bg-white text-amber-700 font-bold rounded-xl shadow-md hover:shadow-lg hover:bg-amber-50 transition-all";
    } else {
      // Healthy - green styling (4+ quarters)
      card.className = "bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl shadow-lg overflow-hidden";
      titleEl.textContent = "Ready to Raise?";
      iconEl.textContent = "üí∞";
      textEl.textContent = "Investors are interested in your progress.";
      document.getElementById("raiseBtnCard").textContent = "Raise Funding ‚Üí";
      document.getElementById("raiseBtnCard").disabled = false;
      document.getElementById("raiseBtnCard").className = "px-5 py-2.5 bg-white text-emerald-700 font-bold rounded-xl shadow-md hover:shadow-lg hover:bg-emerald-50 transition-all";
    }
  }

  showRaiseModal() {
    const canRaise = (this.turn - this.lastRaiseTurn) >= 4;
    const currentVal = this.metrics.val;
    const currentEquity = this.metrics.equity;
    
    document.getElementById("raiseCurrentVal").textContent = `¬£${currentVal}k`;
    document.getElementById("raiseCurrentEquity").textContent = `${currentEquity.toFixed(1)}%`;
    
    const container = document.getElementById("raiseOptions");
    
    if (!canRaise) {
      const turnsUntil = 4 - (this.turn - this.lastRaiseTurn);
      container.innerHTML = `
        <div class="text-center py-8 text-slate-500">
          <p class="text-lg mb-2">üïê Too soon to raise again</p>
          <p>You can raise funding again in ${turnsUntil} quarter${turnsUntil > 1 ? 's' : ''}.</p>
        </div>
      `;
    } else if (this.metrics.equity < 10) {
      container.innerHTML = `
        <div class="text-center py-8 text-slate-500">
          <p class="text-lg mb-2">‚ö† Insufficient equity</p>
          <p>You need at least 10% equity to raise funding.</p>
        </div>
      `;
    } else {
      // Get follow-on investors based on initial funding stage
      const options = this.generateFundingOptions();
      
      container.innerHTML = options.map(opt => `
        <div onclick="game.acceptFunding('${opt.id}')" class="hire-card border-2 border-slate-200 rounded-xl p-4 bg-white cursor-pointer hover:border-emerald-400 hover:shadow-lg transition-all">
          <div class="flex gap-3">
            <div class="w-16 h-16 flex-shrink-0">
              ${opt.photo}
            </div>
            <div class="flex-1 min-w-0">
              <div class="flex items-start justify-between gap-2">
                <div class="min-w-0">
                  <div class="font-bold text-slate-800">${opt.name}</div>
                  <div class="text-xs text-slate-500">${opt.title}</div>
                </div>
                <div class="text-right flex-shrink-0">
                  <div class="text-emerald-600 font-bold text-lg">+¬£${opt.cash}k</div>
                  <div class="text-xs ${opt.dilution > 20 ? 'text-red-500 font-bold' : opt.dilution > 10 ? 'text-amber-600' : 'text-slate-500'}">
                    Takes ${opt.dilution}%
                  </div>
                  <div class="text-xs text-slate-400">‚Üí ¬£${opt.newVal}k val</div>
                </div>
              </div>
              <div class="mt-2 p-2 bg-amber-50 rounded border-l-2 border-amber-400">
                <p class="text-xs text-amber-800 italic">"${opt.personality}"</p>
              </div>
              ${Object.keys(opt.bonus).length > 0 ? `
                <div class="mt-2">
                  <span class="px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs rounded-full font-medium">
                    ${Object.entries(opt.bonus).map(([k, v]) => {
                      const labels = { sci: "Research", dev: "Product", mkt: "Sales", hr: "People" };
                      return `${v > 0 ? '+' : ''}${v} ${labels[k] || k}`;
                    }).join(", ")}
                  </span>
                </div>
              ` : ''}
            </div>
          </div>
        </div>
      `).join("");
    }
    
    document.getElementById("raiseModal").classList.remove("hidden");
    document.getElementById("raiseModal").classList.add("flex");
  }

  generateFundingOptions() {
    const val = this.metrics.val;
    const stage = this.completedMilestones.length;
    const marketMod = this.market.type === "positive" ? 1.3 : this.market.type === "negative" ? 0.7 : 1.0;
    
    // Get investors based on initial funding path
    const fundingStage = this.fundingStage || "bootstrap";
    let investors = [...(FOLLOW_ON_INVESTORS[fundingStage] || FOLLOW_ON_INVESTORS.bootstrap)];
    
    // After completing Milestone 1, add VC options for bootstrap/angel paths
    if (stage >= 1 && (fundingStage === "bootstrap" || fundingStage === "angel")) {
      const vcOptions = FOLLOW_ON_INVESTORS.vc_unlocked || [];
      investors = [...investors, ...vcOptions];
    }
    
    // Generate options from each investor
    return investors.map(inv => {
      // Scale cash and dilution based on stage progress and market
      const cashMult = 1 + (stage * 0.4); // More cash available as you progress
      const dilutionMult = 1 + (stage * 0.15); // Slightly more dilution for later rounds
      
      // Financial skill reduces dilution (5% reduction per point above 2)
      const financialMod = game.founderBonuses?.financial > 2 
        ? 1 - ((game.founderBonuses.financial - 2) * 0.05) 
        : 1;
      
      const cash = Math.round(inv.baseCash * cashMult * marketMod);
      const dilution = Math.round(inv.baseDilution * dilutionMult * financialMod);
      const newVal = Math.round(val * inv.valMult * (1 + stage * 0.1));
      
      return {
        id: inv.id,
        name: inv.name,
        title: inv.title,
        photo: inv.photo,
        cash: cash,
        dilution: dilution,
        newVal: newVal,
        personality: inv.personality,
        bonus: inv.bonus || {},
        isVC: inv.id.includes('seedvc') || inv.id.includes('seriesa') || inv.id.includes('growth')
      };
    });
  }

  acceptFunding(optionId) {
    const options = this.generateFundingOptions();
    const opt = options.find(o => o.id === optionId);
    if (!opt) return;
    
    // Play funding sound
    soundManager.playFunding();
    
    // Apply funding
    this.metrics.cash += opt.cash;
    this.metrics.equity -= opt.dilution;
    this.metrics.val = opt.newVal;
    this.lastRaiseTurn = this.turn;
    
    // Fundraising costs time and attention - costs 1 AP this quarter
    this.fundingAPCost = 1;
    
    // Check if this is follow-on from existing investor
    const isExistingInvestor = optionId === 'fof_existing' || optionId === 'fof_insideround';
    
    if (isExistingInvestor) {
      // Don't add new investor - just boost relationship with lead investor
      const leadInvestor = this.investors.find(inv => inv.isLead);
      if (leadInvestor) {
        leadInvestor.relationship = Math.min(5, leadInvestor.relationship + 1);
        this.log(`${leadInvestor.funder.name} doubled down on their investment. Relationship strengthened!`);
      }
    } else {
      // Find the investor from regular pool or VC unlocked pool
      let followOnInvestor = FOLLOW_ON_INVESTORS[this.fundingStage]?.find(f => f.id === optionId);
      if (!followOnInvestor) {
        followOnInvestor = FOLLOW_ON_INVESTORS.vc_unlocked?.find(f => f.id === optionId);
      }
      
      if (followOnInvestor) {
        // Check if this investor already exists (by name)
        const existingInvestor = this.investors.find(inv => inv.funder.name === followOnInvestor.name);
        
        if (existingInvestor) {
          // Already invested - just boost relationship
          existingInvestor.relationship = Math.min(5, existingInvestor.relationship + 1);
        } else {
          // Map follow-on investor to a funder-like structure for advice
          const pseudoFunder = {
            id: followOnInvestor.id,
            name: followOnInvestor.name,
            title: followOnInvestor.title,
            photo: followOnInvestor.photo,
            personality: followOnInvestor.personality
          };
          
          this.investors.push({
            funder: pseudoFunder,
            funderId: this.mapFollowOnToFunderType(followOnInvestor.id),
            relationship: 3,
            isLead: false,
            joinedTurn: this.turn
          });
        }
        
        // Regenerate advice to include new investor
        this.generateAllFunderAdvice();
        this.renderFunderAdvice();
      }
    }
    
    // Apply any bonuses from the investor
    Object.entries(opt.bonus).forEach(([k, v]) => {
      if (this.metrics[k] !== undefined) this.metrics[k] += v;
    });
    
    this.closeRaiseModal();
    this.update();
    this.renderBoardroom(); // Update boardroom display including AP to show fundraising cost
    
    const bonusText = Object.keys(opt.bonus).length > 0 
      ? ` ${Object.entries(opt.bonus).map(([k,v]) => `${v > 0 ? '+' : ''}${v} ${k}`).join(', ')}.`
      : '';
    this.log(`${opt.name} invested ¬£${opt.cash}k for ${opt.dilution}%. New val: ¬£${opt.newVal}k.${bonusText} (-1 AP for fundraising)`);
  }
  
  // Map follow-on investor types to funder personality types for advice generation
  mapFollowOnToFunderType(followOnId) {
    const mapping = {
      // Bootstrap follow-ons
      'fof_fff': 'operatorAngel', // F&F are like supportive operators
      'fof_microangel': 'techAngel', // Local entrepreneur, technical
      'fof_crowdfund': 'dragon', // Crowd wants visibility/growth
      // Angel follow-ons  
      'fof_existing': null, // Use existing investor's type
      'fof_superangel': 'tier1VC', // Super angels think like VCs
      'fof_seedvc': 'tier1VC', // Seed VCs are growth focused
      // VC follow-ons
      'fof_insideround': null, // Use existing
      'fof_seriesa': 'tier1VC', // Northstar = tier 1
      'fof_growth': 'tier1VC' // Velocity = aggressive growth
    };
    return mapping[followOnId] || 'techAngel';
  }

  closeRaiseModal() {
    document.getElementById("raiseModal").classList.add("hidden");
    document.getElementById("raiseModal").classList.remove("flex");
  }

  update() {
    document.getElementById("turnDisplay").textContent = `Q${this.turn}`;
    document.getElementById("headerCash").textContent = `¬£${this.metrics.cash}k`;
    document.getElementById("headerVal").textContent = `¬£${this.metrics.val}k`;
    document.getElementById("headerMilestones").textContent = `${this.completedMilestones.length}/3`;
    
    // Show extreme mode indicator
    const extremeIndicator = document.getElementById("extremeModeIndicator");
    if (this.extremeMode) {
      extremeIndicator.classList.remove("hidden");
    } else {
      extremeIndicator.classList.add("hidden");
    }
    
    // Show location in header
    if (this.location) {
      const locEl = document.getElementById("locationDisplay");
      locEl.textContent = `üìç ${this.location.name}`;
      locEl.classList.remove("hidden");
    }
    
    // Calculate and display runway with color coding
    const runway = this.metrics.burn > 0 ? Math.floor(this.metrics.cash / this.metrics.burn) : 99;
    const runwayEl = document.getElementById("headerRunway");
    runwayEl.textContent = `${runway}q`;
    if (runway <= 2) {
      runwayEl.className = "font-mono font-bold text-red-500 animate-pulse";
    } else if (runway <= 4) {
      runwayEl.className = "font-mono font-bold text-amber-400";
    } else {
      runwayEl.className = "font-mono font-bold text-emerald-400";
    }
    
    // Update funding card
    this.updateFundingCard(runway);
    
    document.getElementById("sciScore").textContent = Math.round(this.metrics.sci);
    document.getElementById("devScore").textContent = Math.round(this.metrics.dev);
    document.getElementById("mktScore").textContent = Math.round(this.metrics.mkt);
    document.getElementById("hrScore").textContent = Math.round(this.metrics.hr);
    
    document.getElementById("sciBar").style.width = Math.min(100, this.metrics.sci) + "%";
    document.getElementById("devBar").style.width = Math.min(100, this.metrics.dev) + "%";
    document.getElementById("mktBar").style.width = Math.min(100, this.metrics.mkt) + "%";
    document.getElementById("hrBar").style.width = Math.min(100, this.metrics.hr) + "%";
    
    document.getElementById("burnDisplay").textContent = `¬£${this.metrics.burn}k/q`;
    document.getElementById("equityDisplay").textContent = `${this.metrics.equity.toFixed(1)}%`;
    document.getElementById("staffDisplay").textContent = this.metrics.staff;
    document.getElementById("runwayDisplay").textContent = `${runway}q`;
    
    // Update staff section in AP tracker
    const staffCount = document.getElementById("staffCount");
    const staffAPBonusDisplay = document.getElementById("staffAPBonusDisplay");
    const staffAPValue = document.getElementById("staffAPValue");
    const staffBurnImpact = document.getElementById("staffBurnImpact");
    const staffIconsRow = document.getElementById("staffIconsRow");
    const staffProgressBar = document.getElementById("staffProgressBar");
    const staffTierCurrent = document.getElementById("staffTierCurrent");
    const staffTierNext = document.getElementById("staffTierNext");
    const integrationNotice = document.getElementById("integrationNotice");
    
    const currentStaff = this.metrics.staff;
    const bonus = this.getStaffAPBonus();
    const penalty = this.staffAPPenalty;
    
    if (staffCount) {
      staffCount.textContent = currentStaff;
    }
    
    // Render staff icons
    if (staffIconsRow) {
      let iconsHtml = '';
      const integratingCount = this.integratingStaff;
      for (let i = 0; i < currentStaff; i++) {
        const isIntegrating = i >= (currentStaff - integratingCount);
        if (isIntegrating) {
          iconsHtml += '<span class="w-5 h-5 rounded-full bg-amber-200 border-2 border-amber-400 flex items-center justify-center text-[10px]" title="Integrating">üë§</span>';
        } else {
          iconsHtml += '<span class="w-5 h-5 rounded-full bg-indigo-100 border-2 border-indigo-300 flex items-center justify-center text-[10px]">üë§</span>';
        }
      }
      // Show empty slots up to next tier
      const nextTier = currentStaff < 3 ? 3 : currentStaff < 6 ? 6 : currentStaff < 9 ? 9 : currentStaff;
      for (let i = currentStaff; i < nextTier && i < 12; i++) {
        iconsHtml += '<span class="w-5 h-5 rounded-full bg-slate-100 border-2 border-dashed border-slate-300 flex items-center justify-center text-[10px] text-slate-300">+</span>';
      }
      staffIconsRow.innerHTML = iconsHtml;
    }
    
    // Update burn impact display
    if (staffBurnImpact) {
      // Calculate staff portion of burn (¬£25k per staff member)
      const staffBurn = currentStaff * 25;
      staffBurnImpact.textContent = `¬£${staffBurn}k`;
    }
    
    // Check if staff bonus is unlocked (after first milestone)
    const staffUnlocked = this.completedMilestones.length > 0;
    
    // Update AP value display
    if (staffAPValue) {
      if (!staffUnlocked) {
        staffAPValue.textContent = 'üîí';
        staffAPValue.className = "text-2xl font-bold text-slate-400";
      } else {
        staffAPValue.textContent = `+${bonus}`;
        staffAPValue.className = "text-2xl font-bold text-indigo-600";
      }
    }
    
    // Update badge display
    if (staffAPBonusDisplay) {
      if (!staffUnlocked) {
        staffAPBonusDisplay.textContent = `üîí Locked`;
        staffAPBonusDisplay.className = "px-2 py-1 rounded-full text-xs font-bold bg-slate-200 text-slate-500";
      } else if (penalty > 0) {
        staffAPBonusDisplay.textContent = `+${bonus} AP (‚àí${penalty})`;
        staffAPBonusDisplay.className = "px-2 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-700";
      } else {
        staffAPBonusDisplay.textContent = `+${bonus} AP`;
        staffAPBonusDisplay.className = "px-2 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-700";
      }
    }
    
    // Update unlock notice in info panel
    const staffUnlockNotice = document.getElementById("staffUnlockNotice");
    if (staffUnlockNotice) {
      if (staffUnlocked) {
        staffUnlockNotice.classList.add("hidden");
      } else {
        staffUnlockNotice.classList.remove("hidden");
      }
    }
    
    // Calculate progress to next tier
    if (staffProgressBar && staffTierCurrent && staffTierNext) {
      let progress = 0;
      let currentTierName = "";
      let nextTierInfo = "";
      
      if (!staffUnlocked) {
        // Show locked state
        progress = 0;
        currentTierName = "üîí Complete M1 to unlock";
        nextTierInfo = "Staff AP bonus locked";
        staffProgressBar.className = "h-full bg-slate-300 transition-all rounded-full";
      } else if (currentStaff >= 9) {
        progress = 100;
        currentTierName = "Full capacity (+3 AP)";
        nextTierInfo = "Maximum reached";
        staffProgressBar.className = "h-full bg-gradient-to-r from-blue-400 to-indigo-500 transition-all rounded-full";
      } else if (currentStaff >= 6) {
        progress = ((currentStaff - 6) / 3) * 100;
        currentTierName = "Scaling team (+2 AP)";
        nextTierInfo = `${9 - currentStaff} more ‚Üí +3 AP`;
        staffProgressBar.className = "h-full bg-gradient-to-r from-blue-400 to-indigo-500 transition-all rounded-full";
      } else if (currentStaff >= 3) {
        progress = ((currentStaff - 3) / 3) * 100;
        currentTierName = "Growing team (+1 AP)";
        nextTierInfo = `${6 - currentStaff} more ‚Üí +2 AP`;
        staffProgressBar.className = "h-full bg-gradient-to-r from-blue-400 to-indigo-500 transition-all rounded-full";
      } else {
        progress = (currentStaff / 3) * 100;
        currentTierName = "Lean team (+0 AP)";
        nextTierInfo = `${3 - currentStaff} more ‚Üí +1 AP`;
        staffProgressBar.className = "h-full bg-gradient-to-r from-blue-400 to-indigo-500 transition-all rounded-full";
      }
      
      staffProgressBar.style.width = `${progress}%`;
      staffTierCurrent.textContent = currentTierName;
      staffTierNext.textContent = nextTierInfo;
    }
    
    if (integrationNotice) {
      if (this.staffAPPenalty > 0) {
        const disruptionText = document.getElementById("disruptionText");
        const disruptionPenalty = document.getElementById("disruptionPenalty");
        
        if (this.integratingStaff > 0) {
          disruptionText.textContent = `${this.integratingStaff} staff integrating`;
        } else {
          disruptionText.textContent = `Team reorganizing after changes`;
        }
        disruptionPenalty.textContent = this.staffAPPenalty;
        
        integrationNotice.classList.remove("hidden");
      } else {
        integrationNotice.classList.add("hidden");
      }
    }
    
    // Update hire/fire button states
    const hireBtn = document.getElementById("hireBtn");
    const fireBtn = document.getElementById("fireBtn");
    if (hireBtn) {
      const canHire = this.metrics.cash >= 50;
      hireBtn.disabled = !canHire;
      hireBtn.className = canHire 
        ? "group relative overflow-hidden rounded-lg border-2 border-emerald-300 bg-gradient-to-b from-white to-emerald-50 hover:from-emerald-50 hover:to-emerald-100 transition-all p-2"
        : "group relative overflow-hidden rounded-lg border-2 border-slate-200 bg-slate-100 cursor-not-allowed opacity-50 p-2";
    }
    if (fireBtn) {
      const canFire = this.metrics.staff > 0 && this.metrics.cash >= 40;
      fireBtn.disabled = !canFire;
      fireBtn.className = canFire
        ? "group relative overflow-hidden rounded-lg border-2 border-rose-300 bg-gradient-to-b from-white to-rose-50 hover:from-rose-50 hover:to-rose-100 transition-all p-2"
        : "group relative overflow-hidden rounded-lg border-2 border-slate-200 bg-slate-100 cursor-not-allowed opacity-50 p-2";
    }
    
    // Update milestone tracker (both sidebar and main)
    if (this.milestone) {
      const turnsLeft = this.milestone.deadline - this.turn;
      const urgencyClass = turnsLeft <= 1 ? "text-red-600" : turnsLeft <= 2 ? "text-amber-600" : "text-slate-500";
      const deadlineText = turnsLeft <= 0 ? "‚ö† OVERDUE!" : `Due Q${this.milestone.deadline} (${turnsLeft}q left)`;
      
      // Sidebar milestone (legacy)
      document.getElementById("milestoneLabel").textContent = this.milestone.name;
      document.getElementById("milestoneBar").style.width = this.milestoneProgress + "%";
      document.getElementById("milestoneProgress").textContent = this.milestoneProgress + "%";
      document.getElementById("milestoneDeadline").textContent = `Due Q${this.milestone.deadline}`;
      
      // Main milestone tracker at top
      document.getElementById("milestoneLabel2").textContent = this.milestone.name;
      document.getElementById("milestoneBar2").style.width = this.milestoneProgress + "%";
      document.getElementById("milestoneProgress2").textContent = this.milestoneProgress;
      document.getElementById("milestoneDeadline2").textContent = deadlineText;
      document.getElementById("milestoneDeadline2").className = `text-xs font-medium ${urgencyClass}`;
      
      // Show focus areas hint
      const focusLabels = { sci: "Research", dev: "Product", mkt: "Sales" };
      const focusAreas = this.milestone.focus.map(f => focusLabels[f] || f).join(" & ");
      document.getElementById("milestoneFocusAreas").textContent = focusAreas;
      document.getElementById("milestoneHint").classList.remove("hidden");
      
      // Update tracker border color based on progress
      const tracker = document.getElementById("milestoneTracker");
      if (this.milestoneProgress >= 100) {
        tracker.className = "bg-gradient-to-r from-emerald-50 to-green-50 rounded-xl shadow-sm p-4 border-2 border-emerald-400 mb-4";
      } else if (turnsLeft <= 1 && this.milestoneProgress < 80) {
        tracker.className = "bg-gradient-to-r from-red-50 to-orange-50 rounded-xl shadow-sm p-4 border-2 border-red-400 mb-4 animate-pulse";
      } else {
        tracker.className = "bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl shadow-sm p-4 border-2 border-amber-300 mb-4";
      }
    } else {
      document.getElementById("milestoneHint").classList.add("hidden");
    }
  }

  log(msg) {
    const div = document.getElementById("log");
    const p = document.createElement("p");
    p.innerHTML = `<span class="text-slate-400">Q${this.turn}</span> ${msg}`;
    div.prepend(p);
  }
  
  // Computed properties for quarter and year
  get quarter() {
    return ((this.turn - 1) % 4) + 1;
  }
  
  get year() {
    return Math.floor((this.turn - 1) / 4) + 1;
  }
  
  // Quarter transition animation system
  shouldShowTransition() {
    // Always show for first year (turns 1-4)
    if (this.turn <= 4) return true;
    // After first year, show ~50% of the time
    return Math.random() < 0.5;
  }
  
  showQuarterTransition(callback, isCelebration = false) {
    // Create transition overlay
    const overlay = document.createElement('div');
    overlay.id = 'quarterTransition';
    overlay.className = 'fixed inset-0 z-50 flex items-center justify-center bg-slate-900/90 cursor-pointer';
    overlay.onclick = () => this.skipTransition(callback);
    
    // Pick scene: celebration for milestones, random otherwise
    const sceneType = isCelebration ? 'celebration' : (Math.random() < 0.5 ? 'workday' : 'meeting');
    
    overlay.innerHTML = `
      <div class="text-center">
        <div class="bg-slate-800 rounded-2xl overflow-hidden shadow-2xl" style="width: 800px; max-width: 95vw;">
          ${this.getTransitionScene(sceneType)}
        </div>
        <p class="text-slate-400 text-sm mt-4">Click anywhere to skip</p>
      </div>
      <style>
        @keyframes walk-right { 0% { transform: translateX(-80px); } 100% { transform: translateX(750px); } }
        @keyframes walk-left { 0% { transform: translateX(750px) scaleX(-1); } 100% { transform: translateX(-80px) scaleX(-1); } }
        .walking-right { animation: walk-right 2.5s linear infinite; }
        .walking-left { animation: walk-left 3s linear infinite; }
        .walking-right-slow { animation: walk-right 4s linear infinite; }
        @keyframes bob-walk { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
        .walk-bob { animation: bob-walk 0.08s ease-in-out infinite; }
        @keyframes typing { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
        .typing { animation: typing 0.04s ease-in-out infinite; }
        @keyframes think-sway { 0%, 100% { transform: rotate(-3deg); } 50% { transform: rotate(3deg); } }
        .thinking { animation: think-sway 0.5s ease-in-out infinite; }
        @keyframes nod { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(4px); } }
        .nodding { animation: nod 0.375s ease-in-out infinite; }
        @keyframes gesture { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(-20deg); } 75% { transform: rotate(15deg); } }
        .gesturing { animation: gesture 0.2s ease-in-out infinite; transform-origin: bottom center; }
        @keyframes point { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(10deg); } }
        .pointing { animation: point 0.375s ease-in-out infinite; transform-origin: left center; }
        @keyframes pour { 0%, 80%, 100% { transform: rotate(0deg); } 40% { transform: rotate(-45deg); } }
        .pouring { animation: pour 0.75s ease-in-out infinite; transform-origin: bottom right; }
        @keyframes steam { 0% { transform: translateY(0); opacity: 0.8; } 100% { transform: translateY(-20px); opacity: 0; } }
        .steam { animation: steam 0.5s ease-out infinite; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
        .floating { animation: float 0.75s ease-in-out infinite; }
        @keyframes pulse { 0%, 100% { opacity: 0.5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.15); } }
        .pulsing { animation: pulse 0.375s ease-in-out infinite; }
        @keyframes screen-glow { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.7; } }
        .screen-glow { animation: screen-glow 0.5s ease-in-out infinite; }
        @keyframes write { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(10px); } }
        .writing { animation: write 0.5s ease-in-out infinite; }
        @keyframes chair-spin { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(8deg); } 75% { transform: rotate(-8deg); } }
        .chair-spin { animation: chair-spin 0.75s ease-in-out infinite; }
        @keyframes lean { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(5px); } }
        .leaning { animation: lean 0.5s ease-in-out infinite; }
        @keyframes high-five-l { 0%, 60%, 100% { transform: rotate(0deg); } 30% { transform: rotate(-35deg); } }
        @keyframes high-five-r { 0%, 60%, 100% { transform: rotate(0deg); } 30% { transform: rotate(35deg); } }
        .high-five-left { animation: high-five-l 0.5s ease-in-out infinite; transform-origin: bottom; }
        .high-five-right { animation: high-five-r 0.5s ease-in-out infinite; transform-origin: bottom; }
        @keyframes celebrate { 0%, 100% { transform: translateY(0) rotate(0deg); } 25% { transform: translateY(-10px) rotate(-5deg); } 75% { transform: translateY(-10px) rotate(5deg); } }
        .celebrating { animation: celebrate 0.125s ease-in-out infinite; }
      </style>
    `;
    
    document.body.appendChild(overlay);
    
    // Auto-advance after 7 seconds
    this.transitionTimeout = setTimeout(() => this.skipTransition(callback), 7000);
  }
  
  skipTransition(callback) {
    clearTimeout(this.transitionTimeout);
    const overlay = document.getElementById('quarterTransition');
    if (overlay) overlay.remove();
    if (callback) callback();
  }
  
  getTransitionScene(type) {
    if (type === 'celebration') return this.getCelebrationScene();
    if (type === 'meeting') return this.getMeetingScene();
    return this.getWorkdayScene();
  }
  
  getWorkdayScene() {
    return `
      <div class="h-96 bg-gradient-to-b from-amber-50 to-slate-100 relative overflow-hidden">
        <div class="absolute inset-x-0 top-0 h-64 bg-gradient-to-b from-slate-200 to-slate-100"></div>
        <div class="absolute top-6 right-12 w-36 h-28 bg-sky-200 border-4 border-amber-700 rounded shadow-inner">
          <div class="absolute inset-1 border border-amber-600 grid grid-cols-2">
            <div class="border-r border-amber-600"></div>
            <div></div>
          </div>
          <div class="absolute top-3 left-4 text-xl floating">‚òÅ</div>
          <div class="absolute top-6 right-3 text-base floating" style="animation-delay: 0.3s;">‚òÅ</div>
        </div>
        <div class="absolute top-6 left-6 px-3 py-1.5 bg-indigo-600 rounded text-white font-bold text-sm shadow">üöÄ ${this.company?.name || 'AIven'}</div>
        <div class="absolute top-6 left-36 w-14 h-12 bg-white rounded shadow border border-slate-200 flex items-center justify-center text-xl">üìà</div>
        <div class="absolute top-6 left-56 w-12 h-12 bg-white rounded-full border-2 border-slate-300 flex items-center justify-center text-xl">üïê</div>
        <div class="absolute bottom-0 left-0 right-0 h-8 bg-amber-200"></div>
        
        <!-- Bookshelf -->
        <div class="absolute top-20 left-6 w-20 h-32 bg-amber-800 rounded-sm shadow">
          <div class="absolute top-2 left-2 right-2 h-8 flex gap-1">
            <div class="w-3 h-full bg-blue-400 rounded-sm"></div>
            <div class="w-3 h-full bg-red-400 rounded-sm"></div>
            <div class="w-4 h-full bg-green-400 rounded-sm"></div>
            <div class="w-3 h-full bg-yellow-400 rounded-sm"></div>
          </div>
          <div class="absolute top-12 left-2 right-2 h-8 flex gap-1">
            <div class="w-4 h-full bg-purple-400 rounded-sm"></div>
            <div class="w-3 h-full bg-orange-400 rounded-sm"></div>
            <div class="w-3 h-full bg-pink-400 rounded-sm"></div>
          </div>
          <div class="absolute bottom-2 left-3 text-lg">üèÜ</div>
        </div>
        
        <!-- Coffee Station -->
        <div class="absolute bottom-8 right-4 w-24 h-28 bg-amber-700 rounded-t-lg shadow-md">
          <div class="absolute top-3 left-1/2 -translate-x-1/2 w-16 h-12 bg-slate-600 rounded">
            <div class="absolute top-1 left-1/2 -translate-x-1/2 w-8 h-4 bg-slate-800 rounded-t"></div>
            <div class="absolute bottom-1 left-1/2 -translate-x-1/2 w-3 h-4 bg-amber-900"></div>
          </div>
          <div class="absolute bottom-3 left-2 text-base">‚òï</div>
          <div class="absolute bottom-3 left-10 text-base">‚òï</div>
          <div class="absolute bottom-3 right-2 text-sm">ü•§</div>
          <div class="absolute -top-4 left-10 flex gap-1">
            <div class="w-1.5 h-5 bg-white/50 rounded-full blur-sm steam"></div>
            <div class="w-1.5 h-5 bg-white/50 rounded-full blur-sm steam" style="animation-delay: 0.2s;"></div>
          </div>
        </div>
        
        <!-- Person at coffee - Bald man -->
        <svg viewBox="0 0 50 80" class="absolute bottom-8 right-28 w-14 h-28">
          <ellipse cx="25" cy="16" rx="10" ry="12" fill="#6B4423"/>
          <ellipse cx="20" cy="14" rx="2" ry="2.5" fill="white"/>
          <ellipse cx="30" cy="14" rx="2" ry="2.5" fill="white"/>
          <circle cx="20" cy="14" r="1" fill="#2d1810"/>
          <circle cx="30" cy="14" r="1" fill="#2d1810"/>
          <path d="M20 24 Q25 28 30 24" stroke="#4A2F1F" fill="none" stroke-width="1.5"/>
          <path d="M14 30 L20 27 L30 27 L36 30 L36 60 L14 60 Z" fill="#dc2626"/>
          <path d="M22 27 L25 32 L28 27" fill="#b91c1c"/>
          <g class="pouring">
            <rect x="32" y="32" width="5" height="14" rx="2" fill="#dc2626"/>
            <ellipse cx="37" cy="48" rx="3" ry="2.5" fill="#6B4423"/>
            <rect x="35" y="44" width="6" height="8" rx="1" fill="#4a3728"/>
          </g>
          <rect x="10" y="32" width="5" height="16" rx="2" fill="#dc2626"/>
          <ellipse cx="12" cy="50" rx="3" ry="2.5" fill="#6B4423"/>
        </svg>
        
        <!-- Desk Row with people -->
        <div class="absolute bottom-8 left-32">
          <div class="w-36 h-16 bg-slate-300 rounded-t shadow-md"></div>
          <div class="absolute -top-14 left-3 w-14 h-11 bg-slate-800 rounded border border-slate-600">
            <div class="w-full h-full bg-blue-500/40 rounded screen-glow"></div>
          </div>
          <div class="absolute -top-14 left-20 w-14 h-11 bg-slate-800 rounded border border-slate-600">
            <div class="w-full h-full bg-green-500/40 rounded screen-glow" style="animation-delay: 0.2s;"></div>
          </div>
          <div class="absolute top-2 left-6 w-10 h-3 bg-slate-700 rounded-sm"></div>
          <div class="absolute top-2 left-22 w-10 h-3 bg-slate-700 rounded-sm"></div>
          <div class="absolute top-1 right-2 text-sm">‚òï</div>
          
          <!-- Person 1 - typing -->
          <svg viewBox="0 0 40 55" class="absolute -top-20 left-2 w-14 h-20">
            <ellipse cx="20" cy="10" rx="10" ry="9" fill="#1a1a1a"/>
            <ellipse cx="20" cy="7" rx="8" ry="6" fill="#2d2d2d"/>
            <ellipse cx="20" cy="15" rx="8" ry="9" fill="#8B5A2B"/>
            <circle cx="11" cy="17" r="1.5" fill="#FFD700"/>
            <circle cx="29" cy="17" r="1.5" fill="#FFD700"/>
            <path d="M16 21 Q20 24 24 21" stroke="#5C3D1E" fill="none" stroke-width="1"/>
            <path d="M10 26 L15 24 L25 24 L30 26 L30 44 L10 44 Z" fill="#2563eb"/>
            <path d="M17 24 L20 30 L23 24" fill="white"/>
            <rect x="6" y="30" width="4" height="10" rx="2" fill="#2563eb" class="typing"/>
            <rect x="30" y="30" width="4" height="10" rx="2" fill="#2563eb" class="typing" style="animation-delay: 0.02s"/>
          </svg>
          
          <!-- Person 2 - thinking -->
          <svg viewBox="0 0 40 55" class="absolute -top-20 left-20 w-14 h-20 chair-spin">
            <ellipse cx="20" cy="8" rx="8" ry="6" fill="#0a0a0a"/>
            <ellipse cx="20" cy="15" rx="8" ry="9" fill="#F5DEB3" class="thinking"/>
            <rect x="12" y="11" width="7" height="5" rx="1" fill="none" stroke="#333" stroke-width="1.5"/>
            <rect x="21" y="11" width="7" height="5" rx="1" fill="none" stroke="#333" stroke-width="1.5"/>
            <line x1="19" y1="13" x2="21" y2="13" stroke="#333" stroke-width="1"/>
            <circle cx="15" cy="13" r="0.8" fill="#2d1810"/>
            <circle cx="25" cy="13" r="0.8" fill="#2d1810"/>
            <path d="M17 21 L23 21" stroke="#8B7355" stroke-width="1.5"/>
            <path d="M10 26 L16 24 L24 24 L30 26 L30 44 L10 44 Z" fill="#6366f1"/>
          </svg>
          <div class="absolute -top-28 left-24 text-2xl pulsing">üí°</div>
        </div>
        
        <!-- Standing desk area -->
        <div class="absolute bottom-32 right-48 w-24 h-24 bg-slate-400 rounded-t shadow">
          <div class="absolute top-2 left-2 w-20 h-12 bg-slate-800 rounded border border-slate-600">
            <div class="w-full h-full bg-purple-500/40 rounded screen-glow" style="animation-delay: 0.4s;"></div>
          </div>
          <svg viewBox="0 0 40 55" class="absolute -top-10 left-6 w-12 h-18">
            <ellipse cx="20" cy="10" rx="10" ry="8" fill="#C41E3A"/>
            <path d="M10 12 Q8 24 13 34" stroke="#A01830" stroke-width="3" fill="none"/>
            <path d="M30 12 Q32 24 27 34" stroke="#A01830" stroke-width="3" fill="none"/>
            <ellipse cx="20" cy="16" rx="8" ry="9" fill="#FFE4C4"/>
            <path d="M16 22 Q20 25 24 22" stroke="#CC6666" fill="none" stroke-width="1"/>
            <path d="M12 28 L17 26 L23 26 L28 28 L28 46 L12 46 Z" fill="#10b981"/>
            <rect x="8" y="30" width="4" height="10" rx="2" fill="#10b981" class="typing"/>
            <rect x="28" y="30" width="4" height="10" rx="2" fill="#10b981" class="typing" style="animation-delay: 0.02s"/>
          </svg>
        </div>
        
        <!-- Walking people -->
        <div class="walking-right absolute bottom-8" style="left: -60px;">
          <svg viewBox="0 0 40 70" class="w-12 h-24 walk-bob">
            <ellipse cx="20" cy="10" rx="9" ry="7" fill="#1a1a1a"/>
            <ellipse cx="20" cy="16" rx="8" ry="9" fill="#C68642"/>
            <path d="M12 20 Q14 28 20 30 Q26 28 28 20" fill="#1a1a1a"/>
            <ellipse cx="16" cy="14" rx="1.5" ry="2" fill="white"/>
            <ellipse cx="24" cy="14" rx="1.5" ry="2" fill="white"/>
            <circle cx="16" cy="14" r="0.8" fill="#2d1810"/>
            <circle cx="24" cy="14" r="0.8" fill="#2d1810"/>
            <path d="M12 32 L17 30 L23 30 L28 32 L28 50 L12 50 Z" fill="#374151"/>
            <path d="M18 30 L20 34 L22 30" fill="white"/>
            <rect x="14" y="50" width="4" height="14" rx="2" fill="#1f2937"/>
            <rect x="22" y="50" width="4" height="14" rx="2" fill="#1f2937"/>
            <rect x="8" y="34" width="4" height="10" rx="2" fill="#374151"/>
            <rect x="28" y="34" width="4" height="10" rx="2" fill="#374151"/>
            <rect x="28" y="38" width="8" height="10" rx="1" fill="#1f2937"/>
          </svg>
        </div>
        <div class="walking-left absolute bottom-8" style="animation-delay: 1s;">
          <svg viewBox="0 0 40 70" class="w-12 h-24 walk-bob">
            <path d="M10 12 Q10 4 20 4 Q30 4 30 12 L30 24 Q27 25 24 23 L24 14 Q22 12 20 12 Q18 12 16 14 L16 23 Q13 25 10 24 Z" fill="#0a0a0a"/>
            <ellipse cx="20" cy="18" rx="8" ry="9" fill="#F5DEB3"/>
            <path d="M15 16 Q17 14 19 16 Q17 17 15 16" fill="white"/>
            <path d="M21 16 Q23 14 25 16 Q23 17 21 16" fill="white"/>
            <circle cx="17" cy="16" r="0.8" fill="#2d1810"/>
            <circle cx="23" cy="16" r="0.8" fill="#2d1810"/>
            <path d="M16 24 Q20 27 24 24" stroke="#CC8080" fill="none" stroke-width="1"/>
            <path d="M12 30 L17 28 L23 28 L28 30 L28 50 L12 50 Z" fill="white" stroke="#e5e7eb"/>
            <rect x="18" y="30" width="4" height="6" fill="#06b6d4"/>
            <rect x="14" y="50" width="4" height="14" rx="2" fill="#1e3a5f"/>
            <rect x="22" y="50" width="4" height="14" rx="2" fill="#1e3a5f"/>
            <rect x="6" y="34" width="4" height="10" rx="2" fill="white" stroke="#e5e7eb"/>
            <rect x="4" y="42" width="5" height="7" rx="1" fill="white" stroke="#ddd"/>
          </svg>
        </div>
        <div class="walking-right-slow absolute bottom-8" style="left: -40px; animation-delay: 2s;">
          <svg viewBox="0 0 40 70" class="w-12 h-24 walk-bob">
            <ellipse cx="20" cy="16" rx="10" ry="12" fill="#5C4033"/>
            <ellipse cx="16" cy="14" rx="2" ry="2.5" fill="white"/>
            <ellipse cx="24" cy="14" rx="2" ry="2.5" fill="white"/>
            <circle cx="16" cy="14" r="1" fill="#2d1810"/>
            <circle cx="24" cy="14" r="1" fill="#2d1810"/>
            <path d="M16 22 Q20 26 24 22" stroke="#3d2817" fill="none" stroke-width="1.5"/>
            <path d="M12 30 L17 28 L23 28 L28 30 L28 50 L12 50 Z" fill="#0891b2"/>
            <rect x="14" y="50" width="4" height="14" rx="2" fill="#374151"/>
            <rect x="22" y="50" width="4" height="14" rx="2" fill="#374151"/>
            <rect x="8" y="32" width="4" height="12" rx="2" fill="#0891b2"/>
            <rect x="28" y="32" width="4" height="12" rx="2" fill="#0891b2"/>
          </svg>
        </div>
        
        <div class="absolute bottom-8 left-6 text-3xl">ü™¥</div>
        <div class="absolute bottom-40 right-[55%] text-2xl">üåø</div>
        
        <div class="absolute bottom-2 left-0 right-0 text-center">
          <div class="text-slate-600 text-sm font-medium bg-white/80 inline-block px-4 py-1.5 rounded-full shadow">
            ‚òï Q${this.turn} ‚Üí Q${this.turn + 1}...
          </div>
        </div>
      </div>
    `;
  }
  
  getMeetingScene() {
    return `
      <div class="h-96 bg-gradient-to-b from-slate-100 to-slate-200 relative overflow-hidden">
        <div class="absolute inset-3 bg-gradient-to-b from-slate-50 to-slate-100 rounded-lg shadow-inner"></div>
        
        <!-- Whiteboard -->
        <div class="absolute top-4 left-1/2 -translate-x-1/2 w-72 h-40 bg-white border-4 border-slate-400 rounded shadow-lg">
          <div class="p-3">
            <div class="text-sm text-slate-600 font-bold mb-2">Q${this.turn + 1} PLANNING</div>
            <div class="flex gap-4">
              <div>
                <div class="text-xs text-blue-600 mb-1">Research</div>
                <div class="w-14 h-1.5 bg-blue-400 rounded mb-1"></div>
                <div class="w-12 h-1.5 bg-blue-300 rounded mb-1"></div>
                <div class="w-10 h-1.5 bg-blue-400 rounded"></div>
              </div>
              <div>
                <div class="text-xs text-emerald-600 mb-1">Product</div>
                <div class="w-12 h-1.5 bg-emerald-400 rounded mb-1"></div>
                <div class="w-14 h-1.5 bg-emerald-300 rounded mb-1"></div>
                <div class="w-10 h-1.5 bg-emerald-400 rounded"></div>
              </div>
              <div>
                <div class="text-xs text-fuchsia-600 mb-1">Sales</div>
                <div class="w-10 h-1.5 bg-fuchsia-400 rounded mb-1"></div>
                <div class="w-12 h-1.5 bg-fuchsia-300 rounded mb-1"></div>
                <div class="w-14 h-1.5 bg-fuchsia-400 rounded"></div>
              </div>
            </div>
            <div class="mt-3 flex gap-2">
              <div class="w-8 h-8 bg-yellow-100 rounded shadow-sm flex items-center justify-center text-base">üéØ</div>
              <div class="w-8 h-8 bg-blue-100 rounded shadow-sm flex items-center justify-center text-base">üìä</div>
              <div class="w-8 h-8 bg-green-100 rounded shadow-sm flex items-center justify-center text-base">üöÄ</div>
              <div class="w-8 h-8 bg-pink-100 rounded shadow-sm flex items-center justify-center text-base writing">‚úè</div>
            </div>
          </div>
        </div>
        
        <div class="absolute bottom-0 left-0 right-0 h-8 bg-slate-300 rounded-b-lg"></div>
        
        <!-- Table -->
        <div class="absolute bottom-24 left-1/2 -translate-x-1/2 w-80 h-12 bg-amber-700 rounded shadow-lg"></div>
        <div class="absolute bottom-8 left-28 w-3 h-16 bg-amber-800"></div>
        <div class="absolute bottom-8 right-28 w-3 h-16 bg-amber-800"></div>
        
        <!-- Presenter -->
        <svg viewBox="0 0 50 90" class="absolute bottom-8 left-6 w-14 h-28">
          <path d="M12 12 Q12 4 25 4 Q38 4 38 12 L38 24 Q35 25 32 23 L32 14 Q28 12 25 12 Q22 12 18 14 L18 23 Q15 25 12 24 Z" fill="#0a0a0a"/>
          <ellipse cx="25" cy="20" rx="10" ry="11" fill="#F5DEB3"/>
          <path d="M19 18 Q22 16 24 18 Q22 19 19 18" fill="white"/>
          <path d="M26 18 Q28 16 31 18 Q28 19 26 18" fill="white"/>
          <circle cx="21" cy="18" r="0.8" fill="#2d1810"/>
          <circle cx="29" cy="18" r="0.8" fill="#2d1810"/>
          <ellipse cx="25" cy="26" rx="3" ry="2" fill="#CC8080"/>
          <path d="M14 34 L20 31 L30 31 L36 34 L36 58 L14 58 Z" fill="white" stroke="#e5e7eb"/>
          <path d="M20 31 L25 40 L30 31" fill="#f3f4f6"/>
          <rect x="22" y="34" width="6" height="6" fill="#06b6d4"/>
          <path d="M22 36 Q18 42 20 48" stroke="#374151" stroke-width="2" fill="none"/>
          <circle cx="20" cy="50" r="2.5" fill="#374151"/>
          <g class="pointing">
            <rect x="34" y="36" width="5" height="16" rx="2" fill="white" stroke="#e5e7eb"/>
            <ellipse cx="44" cy="38" rx="3" ry="2.5" fill="#F5DEB3"/>
          </g>
          <rect x="10" y="38" width="5" height="14" rx="2" fill="white" stroke="#e5e7eb"/>
          <rect x="18" y="58" width="5" height="20" rx="2" fill="#1e3a5f"/>
          <rect x="27" y="58" width="5" height="20" rx="2" fill="#1e3a5f"/>
        </svg>
        
        <!-- Seated people with legs visible -->
        <svg viewBox="0 0 40 75" class="absolute bottom-8 left-28 w-12 h-24">
          <rect x="8" y="22" width="24" height="18" rx="2" fill="#4b5563"/>
          <ellipse cx="20" cy="10" rx="10" ry="8" fill="#1a1a1a"/>
          <ellipse cx="20" cy="7" rx="8" ry="5" fill="#2d2d2d"/>
          <ellipse cx="20" cy="16" rx="8" ry="9" fill="#8B5A2B" class="nodding"/>
          <circle cx="10" cy="18" r="1.5" fill="#FFD700"/>
          <circle cx="30" cy="18" r="1.5" fill="#FFD700"/>
          <path d="M16 22 Q20 25 24 22" stroke="#5C3D1E" fill="none" stroke-width="1"/>
          <path d="M10 26 L15 24 L25 24 L30 26 L30 42 L10 42 Z" fill="#2563eb"/>
          <path d="M17 24 L20 30 L23 24" fill="white"/>
          <rect x="14" y="42" width="5" height="20" rx="2" fill="#1e3a5f"/>
          <rect x="21" y="42" width="5" height="20" rx="2" fill="#1e3a5f"/>
        </svg>
        
        <svg viewBox="0 0 40 75" class="absolute bottom-8 left-48 w-12 h-24">
          <rect x="8" y="22" width="24" height="18" rx="2" fill="#4b5563"/>
          <ellipse cx="20" cy="8" rx="8" ry="5" fill="#0a0a0a"/>
          <ellipse cx="20" cy="16" rx="8" ry="9" fill="#F5DEB3"/>
          <rect x="12" y="12" width="7" height="5" rx="1" fill="none" stroke="#333" stroke-width="1"/>
          <rect x="21" y="12" width="7" height="5" rx="1" fill="none" stroke="#333" stroke-width="1"/>
          <line x1="19" y1="14" x2="21" y2="14" stroke="#333" stroke-width="1"/>
          <circle cx="15" cy="14" r="0.8" fill="#2d1810"/>
          <circle cx="25" cy="14" r="0.8" fill="#2d1810"/>
          <ellipse cx="20" cy="22" rx="2.5" ry="1.5" fill="#8B7355"/>
          <path d="M10 26 L15 24 L25 24 L30 26 L30 42 L10 42 Z" fill="#6366f1"/>
          <rect x="30" y="28" width="4" height="12" rx="2" fill="#6366f1" class="gesturing"/>
          <ellipse cx="36" cy="34" rx="3" ry="2.5" fill="#F5DEB3"/>
          <rect x="14" y="42" width="5" height="20" rx="2" fill="#374151"/>
          <rect x="21" y="42" width="5" height="20" rx="2" fill="#374151"/>
        </svg>
        
        <svg viewBox="0 0 40 75" class="absolute bottom-8 right-36 w-12 h-24 leaning">
          <rect x="8" y="22" width="24" height="18" rx="2" fill="#4b5563"/>
          <ellipse cx="20" cy="13" rx="10" ry="11" fill="#6B4423"/>
          <ellipse cx="16" cy="11" rx="1.5" ry="2" fill="white"/>
          <ellipse cx="24" cy="11" rx="1.5" ry="2" fill="white"/>
          <circle cx="16" cy="11" r="0.8" fill="#2d1810"/>
          <circle cx="24" cy="11" r="0.8" fill="#2d1810"/>
          <path d="M16 19 Q20 23 24 19" stroke="#4A2F1F" fill="none" stroke-width="1"/>
          <path d="M10 26 L15 24 L25 24 L30 26 L30 42 L10 42 Z" fill="#dc2626"/>
          <path d="M17 24 L20 29 L23 24" fill="#b91c1c"/>
          <rect x="14" y="42" width="5" height="20" rx="2" fill="#374151"/>
          <rect x="21" y="42" width="5" height="20" rx="2" fill="#374151"/>
        </svg>
        
        <svg viewBox="0 0 40 75" class="absolute bottom-8 right-16 w-12 h-24">
          <rect x="8" y="22" width="24" height="18" rx="2" fill="#4b5563"/>
          <ellipse cx="20" cy="10" rx="10" ry="7" fill="#C41E3A"/>
          <path d="M10 12 Q8 22 12 30" stroke="#A01830" stroke-width="3" fill="none"/>
          <path d="M30 12 Q32 22 28 30" stroke="#A01830" stroke-width="3" fill="none"/>
          <ellipse cx="20" cy="16" rx="8" ry="9" fill="#FFE4C4"/>
          <circle cx="15" cy="17" r="0.5" fill="#D2A679"/>
          <circle cx="25" cy="17" r="0.5" fill="#D2A679"/>
          <path d="M16 22 Q20 25 24 22" stroke="#CC6666" fill="none" stroke-width="1"/>
          <path d="M10 26 L15 24 L25 24 L30 26 L30 42 L10 42 Z" fill="#10b981"/>
          <rect x="30" y="30" width="4" height="10" rx="2" fill="#10b981"/>
          <rect x="34" y="38" width="7" height="10" rx="1" fill="white" stroke="#e5e7eb"/>
          <rect x="35" y="40" width="5" height="1" fill="#333" class="writing"/>
          <rect x="14" y="42" width="5" height="20" rx="2" fill="#374151"/>
          <rect x="21" y="42" width="5" height="20" rx="2" fill="#374151"/>
        </svg>
        
        <!-- Laptop and coffee on table -->
        <div class="absolute bottom-28 left-1/2 -translate-x-1/2 w-10 h-6 bg-slate-600 rounded-t">
          <div class="w-full h-full bg-blue-400/30 rounded-t screen-glow"></div>
        </div>
        <div class="absolute bottom-26 left-36 text-base">‚òï</div>
        <div class="absolute bottom-26 right-40 text-base">‚òï</div>
        
        <!-- Walking people -->
        <div class="walking-right absolute bottom-8" style="left: -50px; animation-duration: 3s;">
          <svg viewBox="0 0 40 70" class="w-10 h-20 walk-bob">
            <ellipse cx="20" cy="10" rx="9" ry="7" fill="#1a1a1a"/>
            <ellipse cx="20" cy="18" rx="9" ry="10" fill="#C68642"/>
            <path d="M12 22 Q14 30 20 32 Q26 30 28 22" fill="#1a1a1a"/>
            <path d="M12 34 L17 32 L23 32 L28 34 L28 50 L12 50 Z" fill="#374151"/>
            <path d="M18 32 L20 36 L22 32" fill="white"/>
            <rect x="14" y="50" width="4" height="14" rx="2" fill="#1f2937"/>
            <rect x="22" y="50" width="4" height="14" rx="2" fill="#1f2937"/>
            <rect x="28" y="42" width="6" height="8" rx="1" fill="white"/>
          </svg>
        </div>
        <div class="walking-left absolute bottom-8" style="animation-duration: 3.5s; animation-delay: 0.5s;">
          <svg viewBox="0 0 40 70" class="w-10 h-20 walk-bob">
            <ellipse cx="20" cy="12" rx="11" ry="9" fill="#C41E3A"/>
            <path d="M9 14 Q7 28 12 38" stroke="#A01830" stroke-width="4" fill="none"/>
            <path d="M31 14 Q33 28 28 38" stroke="#A01830" stroke-width="4" fill="none"/>
            <ellipse cx="20" cy="18" rx="8" ry="9" fill="#FFE4C4"/>
            <path d="M16 24 Q20 27 24 24" stroke="#CC6666" fill="none" stroke-width="1"/>
            <path d="M12 32 L17 30 L23 30 L28 32 L28 50 L12 50 Z" fill="#10b981"/>
            <rect x="14" y="50" width="4" height="14" rx="2" fill="#374151"/>
            <rect x="22" y="50" width="4" height="14" rx="2" fill="#374151"/>
            <rect x="4" y="42" width="5" height="7" rx="1" fill="white"/>
          </svg>
        </div>
        
        <div class="absolute bottom-2 left-0 right-0 text-center">
          <div class="text-slate-600 text-sm font-medium bg-white/80 inline-block px-4 py-1.5 rounded-full shadow">
            üìã Planning Q${this.turn + 1}...
          </div>
        </div>
      </div>
    `;
  }
  
  getCelebrationScene() {
    return `
      <div class="h-96 bg-gradient-to-b from-amber-50 to-orange-50 relative overflow-hidden">
        <div class="absolute top-8 left-[15%] text-3xl floating">üéä</div>
        <div class="absolute top-14 right-[15%] text-3xl floating" style="animation-delay: 0.2s;">üéâ</div>
        <div class="absolute top-6 left-[40%] text-2xl floating" style="animation-delay: 0.4s;">‚ú®</div>
        <div class="absolute top-16 left-[30%] text-xl floating" style="animation-delay: 0.15s;">‚≠ê</div>
        <div class="absolute top-10 right-[30%] text-2xl floating" style="animation-delay: 0.35s;">üéä</div>
        <div class="absolute top-20 right-[45%] text-xl floating" style="animation-delay: 0.5s;">‚ú®</div>
        <div class="absolute top-8 left-[55%] text-2xl floating" style="animation-delay: 0.25s;">üéâ</div>
        
        <div class="absolute top-4 left-1/2 -translate-x-1/2 px-6 py-2 bg-gradient-to-r from-emerald-500 to-green-500 rounded-lg text-white font-bold text-base shadow-lg">
          üöÄ MILESTONE ACHIEVED!
        </div>
        
        <div class="absolute top-20 left-1/2 -translate-x-1/2 text-6xl floating">üèÜ</div>
        
        <div class="absolute bottom-0 left-0 right-0 h-8 bg-amber-200"></div>
        
        <!-- High-fiving pair -->
        <div class="absolute bottom-8 left-1/2 -translate-x-10 flex items-end gap-2">
          <svg viewBox="0 0 45 80" class="w-14 h-24 celebrating">
            <ellipse cx="22" cy="12" rx="9" ry="7" fill="#0a0a0a"/>
            <ellipse cx="22" cy="18" rx="8" ry="9" fill="#F5DEB3"/>
            <rect x="14" y="14" width="7" height="5" rx="1" fill="none" stroke="#333" stroke-width="1"/>
            <rect x="23" y="14" width="7" height="5" rx="1" fill="none" stroke="#333" stroke-width="1"/>
            <line x1="21" y1="16" x2="23" y2="16" stroke="#333" stroke-width="1"/>
            <path d="M16 16 Q18 14 20 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
            <path d="M24 16 Q26 14 28 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
            <path d="M17 24 Q22 30 27 24" stroke="#8B7355" stroke-width="1.5" fill="white"/>
            <path d="M12 32 L18 29 L26 29 L32 32 L32 60 L12 60 Z" fill="#6366f1"/>
            <g class="high-five-left">
              <rect x="30" y="34" width="5" height="14" rx="2" fill="#6366f1"/>
              <ellipse cx="38" cy="36" rx="4" ry="5" fill="#F5DEB3"/>
            </g>
            <rect x="8" y="32" width="5" height="14" rx="2" fill="#6366f1" style="transform: rotate(-25deg); transform-origin: bottom;"/>
            <rect x="14" y="60" width="5" height="14" rx="2" fill="#374151"/>
            <rect x="25" y="60" width="5" height="14" rx="2" fill="#374151"/>
          </svg>
          <svg viewBox="0 0 45 80" class="w-14 h-24 celebrating" style="animation-delay: 0.05s;">
            <ellipse cx="22" cy="14" rx="10" ry="12" fill="#6B4423"/>
            <path d="M16 12 Q18 10 20 12" stroke="white" stroke-width="1.5" fill="none"/>
            <path d="M24 12 Q26 10 28 12" stroke="white" stroke-width="1.5" fill="none"/>
            <path d="M17 20 Q22 26 27 20" stroke="#4A2F1F" stroke-width="1.5" fill="white"/>
            <path d="M12 32 L18 29 L26 29 L32 32 L32 60 L12 60 Z" fill="#dc2626"/>
            <path d="M19 29 L22 34 L25 29" fill="#b91c1c"/>
            <g class="high-five-right">
              <rect x="8" y="34" width="5" height="14" rx="2" fill="#dc2626"/>
              <ellipse cx="6" cy="36" rx="4" ry="5" fill="#6B4423"/>
            </g>
            <rect x="30" y="32" width="5" height="14" rx="2" fill="#dc2626" style="transform: rotate(25deg); transform-origin: bottom;"/>
            <rect x="14" y="60" width="5" height="14" rx="2" fill="#374151"/>
            <rect x="25" y="60" width="5" height="14" rx="2" fill="#374151"/>
          </svg>
        </div>
        
        <!-- Cheering people on sides -->
        <svg viewBox="0 0 45 80" class="absolute bottom-8 left-10 w-14 h-24 celebrating" style="animation-delay: 0.1s;">
          <ellipse cx="22" cy="10" rx="12" ry="10" fill="#1a1a1a"/>
          <ellipse cx="22" cy="7" rx="10" ry="7" fill="#2d2d2d"/>
          <ellipse cx="22" cy="18" rx="9" ry="10" fill="#8B5A2B"/>
          <path d="M16 16 Q18 14 20 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
          <path d="M24 16 Q26 14 28 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
          <circle cx="11" cy="20" r="2" fill="#FFD700"/>
          <circle cx="33" cy="20" r="2" fill="#FFD700"/>
          <ellipse cx="22" cy="24" rx="4" ry="3" fill="#5C3D1E"/>
          <path d="M12 32 L18 29 L26 29 L32 32 L32 60 L12 60 Z" fill="#2563eb"/>
          <path d="M19 29 L22 36 L25 29" fill="white"/>
          <rect x="6" y="28" width="5" height="16" rx="2" fill="#2563eb" style="transform: rotate(-40deg); transform-origin: bottom;"/>
          <rect x="33" y="28" width="5" height="16" rx="2" fill="#2563eb" style="transform: rotate(40deg); transform-origin: bottom;"/>
          <ellipse cx="2" cy="20" rx="3" ry="4" fill="#8B5A2B"/>
          <ellipse cx="42" cy="20" rx="3" ry="4" fill="#8B5A2B"/>
          <rect x="14" y="60" width="5" height="14" rx="2" fill="#1e3a5f"/>
          <rect x="25" y="60" width="5" height="14" rx="2" fill="#1e3a5f"/>
        </svg>
        
        <svg viewBox="0 0 45 80" class="absolute bottom-8 right-10 w-14 h-24 celebrating" style="animation-delay: 0.08s;">
          <ellipse cx="22" cy="10" rx="11" ry="8" fill="#C41E3A"/>
          <path d="M11 12 Q9 26 14 36" stroke="#A01830" stroke-width="4" fill="none"/>
          <path d="M33 12 Q35 26 30 36" stroke="#A01830" stroke-width="4" fill="none"/>
          <ellipse cx="22" cy="18" rx="9" ry="10" fill="#FFE4C4"/>
          <circle cx="16" cy="19" r="0.8" fill="#D2A679"/>
          <circle cx="28" cy="19" r="0.8" fill="#D2A679"/>
          <path d="M16 16 Q18 14 20 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
          <path d="M24 16 Q26 14 28 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
          <ellipse cx="22" cy="24" rx="4" ry="3" fill="#CC6666"/>
          <path d="M12 32 L18 29 L26 29 L32 32 L32 60 L12 60 Z" fill="#10b981"/>
          <rect x="6" y="28" width="5" height="16" rx="2" fill="#10b981" style="transform: rotate(-45deg); transform-origin: bottom;"/>
          <rect x="33" y="28" width="5" height="16" rx="2" fill="#10b981" style="transform: rotate(45deg); transform-origin: bottom;"/>
          <ellipse cx="1" cy="18" rx="3" ry="4" fill="#FFE4C4"/>
          <ellipse cx="43" cy="18" rx="3" ry="4" fill="#FFE4C4"/>
          <rect x="14" y="60" width="5" height="14" rx="2" fill="#374151"/>
          <rect x="25" y="60" width="5" height="14" rx="2" fill="#374151"/>
        </svg>
        
        <!-- Lab coat woman clapping -->
        <svg viewBox="0 0 45 80" class="absolute bottom-8 left-32 w-14 h-24">
          <path d="M10 14 Q10 6 22 6 Q34 6 34 14 L34 26 Q31 27 28 25 L28 16 Q25 14 22 14 Q19 14 16 16 L16 25 Q13 27 10 26 Z" fill="#0a0a0a"/>
          <ellipse cx="22" cy="20" rx="8" ry="9" fill="#F5DEB3"/>
          <path d="M17 18 Q19 16 21 18 Q19 19 17 18" fill="white"/>
          <path d="M23 18 Q25 16 27 18 Q25 19 23 18" fill="white"/>
          <circle cx="19" cy="18" r="0.8" fill="#2d1810"/>
          <circle cx="25" cy="18" r="0.8" fill="#2d1810"/>
          <path d="M18 25 Q22 29 26 25" stroke="#CC8080" stroke-width="1.5" fill="none"/>
          <path d="M10 32 L16 29 L28 29 L34 32 L34 60 L10 60 Z" fill="white" stroke="#e5e7eb"/>
          <path d="M16 29 L22 38 L28 29" fill="#f3f4f6"/>
          <rect x="19" y="32" width="6" height="7" fill="#06b6d4"/>
          <g class="gesturing">
            <rect x="8" y="34" width="4" height="12" rx="2" fill="white" stroke="#e5e7eb"/>
            <rect x="32" y="34" width="4" height="12" rx="2" fill="white" stroke="#e5e7eb"/>
            <ellipse cx="19" cy="48" rx="4" ry="3" fill="#F5DEB3"/>
            <ellipse cx="25" cy="48" rx="4" ry="3" fill="#F5DEB3"/>
          </g>
          <rect x="14" y="60" width="5" height="14" rx="2" fill="#1e3a5f"/>
          <rect x="25" y="60" width="5" height="14" rx="2" fill="#1e3a5f"/>
        </svg>
        
        <!-- South Asian man cheering -->
        <svg viewBox="0 0 45 80" class="absolute bottom-8 right-32 w-14 h-24 celebrating" style="animation-delay: 0.12s;">
          <ellipse cx="22" cy="10" rx="10" ry="7" fill="#1a1a1a"/>
          <ellipse cx="22" cy="18" rx="9" ry="10" fill="#C68642"/>
          <path d="M14 22 Q16 30 22 32 Q28 30 30 22" fill="#1a1a1a"/>
          <path d="M16 16 Q18 14 20 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
          <path d="M24 16 Q26 14 28 16" stroke="#2d1810" stroke-width="1.5" fill="none"/>
          <path d="M12 34 L18 31 L26 31 L32 34 L32 60 L12 60 Z" fill="#374151"/>
          <path d="M19 31 L22 36 L25 31" fill="white"/>
          <rect x="6" y="32" width="5" height="16" rx="2" fill="#374151" style="transform: rotate(-35deg); transform-origin: bottom;"/>
          <rect x="33" y="32" width="5" height="16" rx="2" fill="#374151" style="transform: rotate(35deg); transform-origin: bottom;"/>
          <ellipse cx="3" cy="24" rx="3" ry="4" fill="#C68642"/>
          <ellipse cx="41" cy="24" rx="3" ry="4" fill="#C68642"/>
          <rect x="14" y="60" width="5" height="14" rx="2" fill="#1f2937"/>
          <rect x="25" y="60" width="5" height="14" rx="2" fill="#1f2937"/>
        </svg>
        
        <div class="absolute bottom-2 left-0 right-0 text-center">
          <div class="text-slate-600 text-sm font-medium bg-white/80 inline-block px-4 py-1.5 rounded-full shadow">
            üéâ Great work team!
          </div>
        </div>
      </div>
    `;
  }

  // ===== YOUR JOURNEY - Comprehensive Case Study Generator =====
  
  // Log a journey event for the narrative
  logJourneyEvent(type, data) {
    this.journeyEvents.push({
      quarter: this.turn,
      year: Math.ceil(this.turn / 4),
      type: type,
      data: data,
      metrics: { ...this.metrics },
      timestamp: Date.now()
    });
    
    // Track peak valuation
    if (this.metrics.val > this.peakValuation) {
      this.peakValuation = this.metrics.val;
    }
    
    // Track lowest cash
    if (this.metrics.cash < this.lowestCash) {
      this.lowestCash = this.metrics.cash;
    }
  }
  
  // Track decision patterns for leadership style analysis
  trackDecisionPattern(domain, choiceIdx, event) {
    if (!event || !event.event || !event.event.choices) return;
    
    const choice = event.event.choices[choiceIdx];
    if (!choice) return;
    
    // Track AP investment per domain
    this.domainInvestments[domain] = (this.domainInvestments[domain] || 0) + (choice.ap || 0);
    
    // Track if player followed funder advice
    const advice = this.funderAdvices.find(a => a.domain === domain);
    if (advice) {
      if (advice.recommendedChoice === choiceIdx) {
        this.funderAdviceFollowed++;
      } else {
        this.funderAdviceIgnored++;
      }
    }
    
    // Track aggressive vs conservative (based on AP cost - higher AP = more aggressive)
    if (choice.ap >= 4) {
      this.aggressiveChoices++;
    } else if (choice.ap <= 2) {
      this.conservativeChoices++;
    }
    
    // Store the decision for Critical Decisions section
    if (!this.criticalDecisions) this.criticalDecisions = [];
    if (choice.ap >= 3) { // Only track significant decisions
      this.criticalDecisions.push({
        quarter: this.turn,
        domain: domain,
        situation: event.event.intro,
        choice: choice.text,
        ap: choice.ap
      });
    }
  }
  
  // Save quarter summary for narrative
  saveQuarterSummary() {
    const decisions = Object.entries(this.choices).map(([domain, choiceIdx]) => {
      const eventData = this.currentEvents[domain];
      if (eventData && eventData.event && eventData.event.choices && eventData.event.choices[choiceIdx]) {
        // Track decision pattern
        this.trackDecisionPattern(domain, choiceIdx, eventData);
        
        return {
          domain: domain,
          intro: eventData.event.intro,
          choice: eventData.event.choices[choiceIdx].text,
          reaction: eventData.event.choices[choiceIdx].reaction,
          ap: eventData.event.choices[choiceIdx].ap || 0
        };
      }
      return null;
    }).filter(Boolean);
    
    this.quarterSummaries.push({
      quarter: this.turn,
      year: Math.ceil(this.turn / 4),
      decisions: decisions,
      metrics: { ...this.metrics },
      milestone: this.milestone ? { ...this.milestone } : null,
      milestoneProgress: this.milestoneProgress,
      staff: this.metrics.staff,
      cash: this.metrics.cash,
      valuation: this.metrics.val,
      runway: this.metrics.burn > 0 ? Math.floor(this.metrics.cash / this.metrics.burn) : 99
    });
  }
  
  // Determine leadership style archetype
  getLeadershipArchetype() {
    const totalAdvice = this.funderAdviceFollowed + this.funderAdviceIgnored;
    const followRate = totalAdvice > 0 ? (this.funderAdviceFollowed / totalAdvice) : 0.5;
    const totalRisk = this.aggressiveChoices + this.conservativeChoices;
    const riskRate = totalRisk > 0 ? (this.aggressiveChoices / totalRisk) : 0.5;
    
    // Determine dominant domain
    const domains = Object.entries(this.domainInvestments).sort((a, b) => b[1] - a[1]);
    const topDomain = domains[0]?.[0] || 'research';
    
    // Archetypes based on patterns
    if (topDomain === 'research' && riskRate > 0.5) {
      return {
        title: "The Visionary Scientist",
        description: "A research-first leader who prioritized breakthrough science and wasn't afraid to bet big on technical moonshots, even when the path forward was uncertain."
      };
    } else if (topDomain === 'research' && riskRate <= 0.5) {
      return {
        title: "The Methodical Researcher",
        description: "A careful, evidence-driven leader who built the company on solid scientific foundations, preferring proven approaches over risky experiments."
      };
    } else if (topDomain === 'marketing' && riskRate > 0.5) {
      return {
        title: "The Growth Hacker",
        description: "An aggressive market-focused leader who believed that speed and customer traction would win the day, willing to sacrifice technical depth for commercial momentum."
      };
    } else if (topDomain === 'marketing' && riskRate <= 0.5) {
      return {
        title: "The Customer Champion",
        description: "A market-oriented leader who let customer needs guide every decision, building a company that truly understood its users."
      };
    } else if (topDomain === 'dev' && riskRate > 0.5) {
      return {
        title: "The Product Visionary",
        description: "A builder at heart who believed great products speak for themselves, investing heavily in creating something users would love."
      };
    } else if (topDomain === 'dev' && riskRate <= 0.5) {
      return {
        title: "The Pragmatic Builder",
        description: "A practical leader focused on shipping reliable products, knowing that sustainable progress beats flashy launches."
      };
    } else if (followRate > 0.7) {
      return {
        title: "The Collaborative Leader",
        description: "A team player who valued investor relationships and stakeholder input, building consensus before making major moves."
      };
    } else if (followRate < 0.3) {
      return {
        title: "The Independent Founder",
        description: "A conviction-driven leader who trusted their own judgment over external advice, for better or worse."
      };
    } else {
      return {
        title: "The Balanced Strategist",
        description: "A versatile leader who adapted their approach to circumstances, balancing technical depth with market awareness."
      };
    }
  }
  
  // Generate "The Story" section
  generateStorySection() {
    const companyName = this.company?.name || "The Startup";
    const companyId = this.company?.id || "aether";
    const locationName = this.location?.name || "the UK";
    const funderName = this.funder?.name || "early investors";
    
    // Company-specific opening hooks
    const companyHooks = {
      aether: "AI could fundamentally transform how we understand protein structures, with implications for drug discovery that could affect millions of lives",
      vanguard: "autonomous robots could revolutionize warehouse logistics, transforming supply chains and reshaping how goods move through the economy",
      quant: "machine learning could decode market patterns invisible to human traders, creating opportunities in financial markets that traditional analysts simply couldn't see",
      dream: "AI could understand and generate creative content, opening new possibilities for entertainment, education, and human expression",
      cyber: "AI-powered security could stay ahead of evolving threats, protecting organizations from attacks that legacy systems simply couldn't detect",
      terra: "satellite imagery combined with AI could unlock insights about our planet that would transform agriculture, urban planning, and environmental protection",
      legal: "natural language processing could democratize access to legal expertise, helping ordinary people navigate complex systems that had previously required expensive professionals",
      edu: "adaptive learning systems could personalize education at scale, giving every student the equivalent of a dedicated tutor"
    };
    
    const hook = companyHooks[companyId] || "AI could fundamentally transform entire industries, creating opportunities for those bold enough to pursue them";
    
    let story = `${companyName} emerged from a simple but powerful observation: ${hook}. `;
    
    if (locationName === "Oxford" || locationName === "Cambridge") {
      story += `Founded in ${locationName}'s thriving ${companyId === 'aether' ? 'life sciences' : 'research'} ecosystem, the company bet that deep technical expertise combined with ambitious goals could carve out a defensible position in an increasingly crowded AI landscape. `;
      story += `The founding team made a deliberate choice to start in ${locationName} rather than London. The decision prioritized access to world-class research talent and proximity to ${companyId === 'aether' ? 'pharmaceutical giants' : 'industry leaders'} over the networking density of the capital. This choice would prove significant-it shaped not just who they could hire, but how the company thought about problems.`;
    } else if (locationName === "London") {
      story += `Founded in London's vibrant tech scene, the company positioned itself at the intersection of capital, talent, and opportunity. `;
      story += `The choice of London was strategic: access to diverse talent pools, proximity to major ${companyId === 'quant' ? 'financial institutions' : 'clients'}, and the energy of Europe's largest startup ecosystem. The city's pace would set the tempo for everything that followed.`;
    } else if (locationName === "Manchester" || locationName === "Leeds" || locationName === "Bristol" || locationName === "Edinburgh") {
      story += `Founded in ${locationName}, the company took a different path from the London-centric startup playbook. `;
      story += `The decision to build outside the capital was deliberate-lower costs meant longer runway, and the local talent pool, while smaller, proved fiercely loyal. It was a bet that great companies could be built anywhere, and ${locationName}'s growing tech scene would provide everything needed to succeed.`;
    } else {
      story += `Founded in ${locationName}, the company set out to prove that breakthrough AI could come from anywhere, not just the usual tech hubs. `;
    }
    
    return story;
  }
  
  // Generate "Strategic Approach" section
  generateStrategicApproach() {
    const companyId = this.company?.id || "aether";
    const companyName = this.company?.name || "The Startup";
    const totalAdvice = this.funderAdviceFollowed + this.funderAdviceIgnored;
    const followRate = totalAdvice > 0 ? (this.funderAdviceFollowed / totalAdvice) : 0.5;
    const totalRisk = this.aggressiveChoices + this.conservativeChoices;
    const riskRate = totalRisk > 0 ? (this.aggressiveChoices / totalRisk) : 0.5;
    
    const domains = Object.entries(this.domainInvestments).sort((a, b) => b[1] - a[1]);
    const topDomain = domains[0]?.[0] || 'research';
    const secondDomain = domains[1]?.[0] || 'dev';
    
    // Company-specific domain narratives
    const domainNarratives = {
      research: {
        aether: "When faced with trade-offs between speed-to-market and technical depth, the team consistently chose depth. This wasn't recklessness-it was a calculated bet that in AI for life sciences, superficial solutions would eventually be exposed, while genuine breakthroughs would compound.",
        quant: "When faced with trade-offs between rapid deployment and model robustness, the team consistently chose robustness. They understood that in financial markets, a model that works 99% of the time but fails catastrophically during volatility is worthless.",
        cyber: "When faced with trade-offs between feature velocity and security depth, the team consistently chose depth. They knew that in cybersecurity, a single vulnerability could undermine everything else.",
        default: "When faced with trade-offs between speed-to-market and technical depth, the team consistently chose depth. This wasn't recklessness-it was a calculated bet that in AI, superficial solutions would eventually be exposed, while genuine breakthroughs would compound."
      },
      dev: {
        vanguard: "The focus on product quality meant that every robot shipped had to meet exacting standards. The team believed that in hardware-software integration, reputation is everything-a single failure in the field could undo years of credibility building.",
        dream: "The focus on user experience meant that every creative tool had to feel magical, not just functional. The team believed that in creative applications, delight was a feature, and anything that felt clunky would be abandoned.",
        default: "The focus on product quality meant that every feature shipped had to meet a high bar. The team believed that in a crowded market, the product itself was the best marketing-word of mouth from delighted users would outperform any advertising spend."
      },
      marketing: {
        edu: "The emphasis on market presence reflected a belief that in education, relationships with institutions mattered more than raw technology. The team invested heavily in understanding procurement cycles and building trusted relationships with decision-makers.",
        legal: "The emphasis on market presence reflected understanding that law firms buy on reputation and referral. The team invested heavily in thought leadership and case studies before competitors could establish themselves.",
        default: "The emphasis on market presence reflected a belief that technology alone doesn't win-you have to own the customer relationship. The team invested heavily in understanding customer needs and building the brand before competitors could establish themselves."
      },
      hr: {
        default: "The focus on team culture proved prescient. By investing early in the right people and the right environment, the company built an organization that could execute under pressure and adapt to changing circumstances."
      }
    };
    
    let approach = `The leadership approach that emerged was distinctly ${topDomain === 'research' ? 'research' : topDomain === 'dev' ? 'product' : topDomain === 'marketing' ? 'market' : 'people'}-centric. `;
    approach += (domainNarratives[topDomain]?.[companyId] || domainNarratives[topDomain]?.default || domainNarratives.research.default) + " ";
    
    // Risk appetite with specific examples
    if (riskRate > 0.6) {
      approach += `Risk appetite ran high. The team allocated significant resources to ambitious ${topDomain === 'research' ? 'research directions' : 'initiatives'}, accepting that some would fail entirely. This approach created tension with investors who preferred more predictable progress, but the founders held firm, believing that the upside from a genuine breakthrough would dwarf the cost of failed experiments. `;
    } else if (riskRate < 0.4) {
      approach += `The approach to risk was notably conservative. Rather than swinging for the fences, the team focused on steady, measurable progress-each quarter building on the last. This patience sometimes frustrated investors eager for dramatic growth, but it meant the company never faced an existential crisis from a failed moonshot. `;
    } else {
      approach += `The team maintained a balanced approach to risk, knowing when to push aggressively and when to consolidate gains. They weren't afraid to make bold bets, but they sized those bets carefully to ensure the company could survive if things went wrong. `;
    }
    
    // Investor relationship with more texture
    if (followRate > 0.6) {
      approach += `The relationship with ${this.funder?.name || 'investors'} evolved into something genuinely collaborative. Rather than treating board meetings as reporting exercises, the team engaged investors as thought partners, incorporating their pattern recognition from dozens of similar companies while maintaining conviction on technical direction. This balance proved crucial when the company needed to raise additional capital-the trust built over quarters of honest dialogue translated into strong terms.`;
    } else if (followRate < 0.4) {
      approach += `The relationship with ${this.funder?.name || 'investors'} was more independent than collaborative. The founders believed they understood the ${companyId === 'aether' ? 'science' : companyId === 'quant' ? 'markets' : 'technology'} better than anyone else and weren't afraid to overrule investor concerns when they disagreed. This independence came at a cost in relationship terms, but it allowed the company to pursue its vision without compromise-for better or worse.`;
    } else {
      approach += `The relationship with ${this.funder?.name || 'investors'} struck a pragmatic balance. The team listened carefully to investor input, implemented suggestions when they made sense, and pushed back firmly when they didn't. Neither party got everything they wanted, but the tension proved productive-each perspective sharpened the other's thinking.`;
    }
    
    return approach;
  }
  
  // Generate "The Journey" section
  generateJourneySection() {
    const companyName = this.company?.name || "The Startup";
    const companyId = this.company?.id || "aether";
    const milestones = this.completedMilestones || [];
    const funderName = this.funder?.name || "investors";
    let journey = "";
    
    // Company-specific early challenges
    const earlyChallengePhrases = {
      aether: "The scientific challenges proved thornier than anticipated, with initial approaches hitting dead ends that required fundamental rethinking. ",
      vanguard: "The hardware-software integration proved more complex than expected, with early prototypes revealing gaps between simulation and reality. ",
      quant: "Market conditions tested every assumption, with initial models failing to account for edge cases that only became apparent in live trading. ",
      dream: "User expectations evolved faster than the technology, forcing constant iteration on what \"good enough\" actually meant. ",
      cyber: "The threat landscape shifted continuously, requiring the team to balance defensive capability with the need to ship product. ",
      terra: "Data quality issues emerged that hadn't been apparent in early experiments, requiring significant preprocessing work. ",
      legal: "Regulatory complexity varied wildly across use cases, making it harder than expected to build generalizable solutions. ",
      edu: "Measuring learning outcomes proved surprisingly difficult, complicating efforts to demonstrate the system's effectiveness. "
    };
    
    // Early phase
    journey += `The early months were consumed by the race toward proof of concept. `;
    journey += earlyChallengePhrases[companyId] || "Initial approaches required iteration before finding the right path. ";
    
    // Add early critical decisions for texture
    const earlyDecisions = (this.criticalDecisions || []).filter(d => d.quarter <= 4);
    if (earlyDecisions.length > 0) {
      const keyDecision = earlyDecisions.sort((a, b) => (b.ap || 0) - (a.ap || 0))[0];
      const situationIntro = keyDecision.situation?.split('.')[0]?.toLowerCase() || 'the team faced a strategic crossroads';
      journey += `A defining early choice came when ${situationIntro}. The founders chose to "${keyDecision.choice}", a decision that would shape the company's trajectory. `;
    }
    
    // Calculate and include lowest cash point if it was close
    const lowestCashQuarter = this.quarterSummaries?.reduce((min, q) => (!min || q.cash < min.cash) ? q : min, null);
    if (lowestCashQuarter && lowestCashQuarter.cash < 100 && lowestCashQuarter.cash > 0) {
      journey += `Cash burned while the team iterated, at one point dropping to just ¬£${lowestCashQuarter.cash}k in Quarter ${lowestCashQuarter.quarter}-close enough to the edge that every decision carried existential weight. But `;
    } else if (this.quarterSummaries?.some(q => q.cash < 150)) {
      journey += `Cash burned while the team iterated, and there were moments when the runway felt uncomfortably short. But `;
    }
    
    // First milestone
    const firstMilestoneEvent = this.journeyEvents.find(e => e.type === 'milestone' && e.data.milestoneNumber === 1);
    if (firstMilestoneEvent) {
      journey += `the breakthrough came in Quarter ${firstMilestoneEvent.quarter} when a novel approach finally yielded results that exceeded expectations. This first milestone unlocked everything that followed. `;
    }
    
    // Validation and funding
    const fundingEvents = this.journeyEvents.filter(e => e.type === 'funding' && e.quarter > 1);
    if (fundingEvents.length > 0) {
      const mainRaise = fundingEvents[0];
      journey += `Validation from early partners provided both revenue and credibility, making the subsequent funding round significantly easier. The ¬£${Math.round(mainRaise.data.amount)}k from ${mainRaise.data.funderName} came at terms that reflected genuine confidence rather than desperation. `;
    }
    
    // Shocks and challenges with richer detail
    const shocks = this.journeyEvents.filter(e => e.type === 'shock');
    if (shocks.length > 0) {
      journey += `Not everything went smoothly. `;
      const negativeShock = shocks.find(s => s.data.type === 'negative');
      if (negativeShock) {
        journey += `Quarter ${negativeShock.quarter} brought the "${negativeShock.data.headline}"-a wave of ${negativeShock.data.text?.includes('investor') ? 'investor hesitation' : 'market uncertainty'} that spooked some customers and investors. The team's response was instructive: rather than retreating into defensive positioning, they ${this.aggressiveChoices > this.conservativeChoices ? 'doubled down on their approach' : 'adapted their messaging carefully'}, confident that their actual results would speak louder than market sentiment. The bet paid off; customers who conducted due diligence quickly distinguished ${companyName}'s genuine capabilities from vaporware competitors. `;
      } else {
        const positiveShock = shocks.find(s => s.data.type === 'positive');
        if (positiveShock) {
          journey += `Quarter ${positiveShock.quarter} brought an unexpected tailwind: "${positiveShock.data.headline}". The team moved quickly to capitalize on the fortunate timing. `;
        }
      }
    }
    
    // Add mid-game pivotal decisions
    const midDecisions = (this.criticalDecisions || []).filter(d => d.quarter > 4 && d.quarter <= 8);
    if (midDecisions.length > 0 && milestones.length >= 1) {
      const pivotalDecision = midDecisions.sort((a, b) => (b.ap || 0) - (a.ap || 0))[0];
      if (pivotalDecision) {
        journey += `A pivotal moment came in Quarter ${pivotalDecision.quarter}: ${pivotalDecision.situation?.split('.')[0] || 'the team faced another crossroads'}. They chose to "${pivotalDecision.choice}". `;
      }
    }
    
    // Later milestones with company-specific language
    if (milestones.length >= 2) {
      const laterMilestoneNarratives = {
        aether: "Clinical partnerships validated the commercial model, and the regulatory pathway milestone demonstrated that the science could survive contact with real-world constraints.",
        vanguard: "Deployment partnerships validated the commercial model, and the manufacturing milestone demonstrated that the technology could scale beyond prototype.",
        quant: "Institutional partnerships validated the commercial model, and the regulatory compliance milestone opened doors to larger mandates.",
        dream: "Enterprise partnerships validated the commercial model, and the platform stability milestone demonstrated readiness for scale.",
        cyber: "Enterprise deployments validated the commercial model, and the certification milestone opened doors to regulated industries.",
        terra: "Agricultural partnerships validated the commercial model, and the prediction accuracy milestone built credibility with skeptical customers.",
        legal: "Law firm partnerships validated the commercial model, and the compliance milestone demonstrated readiness for sensitive work.",
        edu: "Institutional partnerships validated the commercial model, and the outcomes milestone provided evidence for wider adoption."
      };
      
      journey += `The second and third milestones came with increasing momentum. ${milestones.length >= 3 ? (laterMilestoneNarratives[companyId] || laterMilestoneNarratives['aether']) : 'Each achievement built credibility that made the next step easier.'} `;
    } else if (milestones.length === 1) {
      journey += `With the first milestone complete, the path forward seemed clearer-though significant challenges remained.`;
    }
    
    return journey;
  }
  
  // Get defining moments for the journey with rich descriptions
  getDefiningMoments() {
    let moments = [];
    const companyId = this.company?.id || "aether";
    const companyName = this.company?.name || "The Startup";
    const topDomain = Object.entries(this.domainInvestments).sort((a, b) => b[1] - a[1])[0]?.[0] || 'research';
    
    // Company-specific milestone language
    const milestoneDescriptions = {
      1: {
        aether: "The breakthrough in protein structure prediction validated months of painstaking research and opened doors to pharmaceutical partnerships that had previously seemed out of reach.",
        vanguard: "The first robot successfully completed its warehouse tasks without human intervention-a milestone that proved the core technology worked and attracted serious commercial interest.",
        quant: "The trading model's first profitable quarter exceeded expectations, demonstrating that the AI could identify genuine market inefficiencies rather than just overfitting historical patterns.",
        dream: "The creative AI generated content that users genuinely loved, proving that machine learning could enhance rather than replace human creativity.",
        cyber: "The security system detected and blocked its first real attack, validating the approach and building confidence with enterprise customers who had been skeptical of AI claims.",
        terra: "Satellite analysis predictions matched ground-truth data with remarkable accuracy, convincing agricultural clients that the technology could genuinely improve their yields.",
        legal: "The contract analysis tool successfully identified a material error that human lawyers had missed, demonstrating real value beyond mere document processing.",
        edu: "Student outcome data showed measurable improvement compared to control groups, providing the evidence needed to convince cautious educational institutions."
      },
      2: {
        aether: "The clinical partnership brought not just revenue but validation from experts who understood the deep scientific challenges being addressed.",
        default: "This commercial milestone validated the business model and provided both revenue momentum and market credibility that accelerated subsequent deals."
      },
      3: {
        default: "The final milestone demonstrated that the company could execute at scale, proving that early success wasn't a fluke and the technology could handle real-world complexity."
      }
    };
    
    // Milestones with rich context
    this.journeyEvents.filter(e => e.type === 'milestone').forEach(e => {
      const milestoneNum = e.data.milestoneNumber;
      let description = "";
      
      if (milestoneNum === 1) {
        description = milestoneDescriptions[1][companyId] || milestoneDescriptions[1]['aether'];
      } else if (milestoneNum === 2) {
        description = milestoneDescriptions[2][companyId] || milestoneDescriptions[2]['default'];
      } else {
        description = milestoneDescriptions[3]['default'];
      }
      
      // Use actual milestone name if available
      const title = e.data.name || `Milestone ${milestoneNum} Complete`;
      
      moments.push({
        quarter: e.quarter,
        title: title,
        description: description,
        type: 'milestone'
      });
    });
    
    // Funding rounds with specific investor context
    this.journeyEvents.filter(e => e.type === 'funding' && e.quarter > 1).forEach(e => {
      const terms = e.data.dilution > 20 ? "demanding" : e.data.dilution > 15 ? "reasonable" : "favorable";
      const phase = e.data.stage === 'Series A' ? 'aggressive scaling and market expansion' : 'continued product development and team growth';
      
      moments.push({
        quarter: e.quarter,
        title: `${e.data.stage || 'Funding Round'} Closed`,
        description: `Raised ¬£${Math.round(e.data.amount)}k from ${e.data.funderName} at ${terms} terms, providing the runway needed for ${phase}. The investment signaled growing market confidence in the company's trajectory.`,
        type: 'funding'
      });
    });
    
    // Significant shocks with detailed context
    this.journeyEvents.filter(e => e.type === 'shock').forEach(e => {
      const wasAggressive = this.aggressiveChoices > this.conservativeChoices;
      let description = "";
      
      if (e.data.type === 'positive') {
        description = `${e.data.text || 'Favorable market conditions emerged'} The team moved quickly to capitalize on the opportunity, ${wasAggressive ? 'accelerating plans that were already ambitious' : 'adjusting strategy to take advantage of the tailwind'}.`;
      } else {
        description = `${e.data.text || 'Market headwinds created unexpected challenges.'} Rather than retreating, the team ${wasAggressive ? 'doubled down on their conviction, betting that substance would prevail over sentiment' : 'adapted carefully, protecting core strengths while weathering the storm'}.`;
      }
      
      moments.push({
        quarter: e.quarter,
        title: e.data.headline || 'Market Shift',
        description: description,
        type: e.data.type === 'positive' ? 'opportunity' : 'challenge'
      });
    });
    
    // Cash crises with dramatic context
    this.quarterSummaries.filter(q => q.cash < 50 && q.cash > 0).forEach(q => {
      moments.push({
        quarter: q.quarter,
        title: "Runway Crisis",
        description: `With just ¬£${q.cash}k remaining, the company faced an existential choice. Every expenditure was scrutinized, every hire questioned. The pressure forced clarity about what truly mattered-and what could wait.`,
        type: 'crisis'
      });
    });
    
    return moments.sort((a, b) => a.quarter - b.quarter).slice(0, 5);
  }
  
  // Get critical decisions
  getCriticalDecisions() {
    if (!this.criticalDecisions) return [];
    
    // Get most significant decisions (highest AP cost), max 4
    return this.criticalDecisions
      .sort((a, b) => b.ap - a.ap)
      .slice(0, 4)
      .map(d => ({
        quarter: d.quarter,
        domain: d.domain.charAt(0).toUpperCase() + d.domain.slice(1),
        situation: d.situation,
        choice: d.choice
      }));
  }
  
  // Generate what worked / what didn't
  generateWhatWorkedDidnt() {
    const companyId = this.company?.id || "aether";
    const domains = Object.entries(this.domainInvestments).sort((a, b) => b[1] - a[1]);
    const topDomain = domains[0]?.[0] || 'research';
    const bottomDomain = domains[domains.length - 1]?.[0] || 'marketing';
    
    const totalAdvice = this.funderAdviceFollowed + this.funderAdviceIgnored;
    const followRate = totalAdvice > 0 ? (this.funderAdviceFollowed / totalAdvice) : 0.5;
    
    const success = this.completedMilestones.length >= 3;
    const cashCrises = this.quarterSummaries.filter(q => q.cash < 50).length;
    
    let worked = [];
    let didnt = [];
    
    // What worked - domain specific with richer detail
    if (topDomain === 'research') {
      worked.push(`Research-first strategy created genuine technical moat that competitors ${success ? 'couldn\'t replicate' : 'found difficult to match'}`);
    } else if (topDomain === 'dev') {
      worked.push(`Product focus delivered quality that ${success ? 'users loved and recommended' : 'earned user appreciation'}`);
    } else if (topDomain === 'marketing') {
      worked.push("Market-driven approach built strong customer relationships early");
    } else if (topDomain === 'hr') {
      worked.push("Investment in team culture attracted and retained top talent");
    }
    
    if (followRate > 0.5) {
      worked.push("Collaborative investor relationships built trust that improved subsequent funding terms");
    }
    
    if (this.location?.name === "Oxford" || this.location?.name === "Cambridge") {
      worked.push(`${this.location.name} location provided access to exceptional ${topDomain === 'research' ? 'scientific' : 'technical'} talent`);
    } else if (this.location?.name === "London") {
      worked.push("London base enabled rapid networking and client access");
    } else {
      worked.push(`${this.location?.name || 'Regional'} location kept costs manageable while building the team`);
    }
    
    // What didn't work - more specific
    if (this.quarterSummaries.some(q => q.cash < 100)) {
      didnt.push(`Initial ${companyId === 'aether' ? 'algorithm approaches' : 'product iterations'} required multiple pivots before finding the right path`);
    }
    
    if (bottomDomain === 'marketing' && topDomain !== 'marketing') {
      didnt.push("Sales capability lagged behind technical progress, slowing early revenue growth");
    } else if (bottomDomain === 'research' && topDomain !== 'research') {
      didnt.push("Technical depth sometimes sacrificed for speed to market");
    }
    
    if (this.quarterSummaries.length > 0) {
      const avgStaff = this.quarterSummaries.reduce((s, q) => s + (q.staff || 5), 0) / this.quarterSummaries.length;
      if (avgStaff < 6) {
        didnt.push("Conservative hiring meant some opportunities moved slower than ideal");
      }
    }
    
    if (followRate < 0.4) {
      didnt.push("Tension with investors created friction that consumed management attention");
    }
    
    // Check for excessive passing/skipping
    if (this.totalPasses > this.turn * 1.5) {
      didnt.push("Too many decisions were deferred or skipped, slowing progress across all areas");
    }
    
    // Ensure at least 3 items each with meaningful content
    if (worked.length < 3) worked.push(`Team maintained focus and conviction through ${success ? 'challenges' : 'difficult periods'}`);
    if (didnt.length < 3) didnt.push("Some early assumptions proved wrong and required course correction");
    
    return { worked: worked.slice(0, 3), didnt: didnt.slice(0, 3) };
  }
  
  // Generate outcome section with rich detail
  generateOutcomeSection() {
    const companyName = this.company?.name || "The Startup";
    const companyId = this.company?.id || "aether";
    const milestones = this.completedMilestones.length;
    const quarters = this.turn;
    const val = this.metrics.val;
    const equity = this.metrics.equity;
    const staff = this.metrics.staff;
    const success = milestones >= 3;
    const topDomain = Object.entries(this.domainInvestments).sort((a, b) => b[1] - a[1])[0]?.[0] || 'research';
    
    let outcome = "";
    
    if (success) {
      outcome += `${companyName} achieved all three milestones in ${quarters} quarters-a genuine accomplishment in a domain where most startups fail. `;
      outcome += `The final position reflects both success and trade-offs: a ¬£${(val/1000).toFixed(1)}M valuation validates the approach, while ${equity.toFixed(1)}% founder ownership means the team maintained meaningful control despite raising external capital. `;
      outcome += `The ${staff}-person team assembled by the end represents ${staff > 8 ? 'ambitious' : 'careful rather than aggressive'} hiring. Each addition was deliberate, prioritizing cultural fit and technical excellence over rapid scaling. This approach kept burn rate manageable and team dynamics healthy, even as expectations grew. `;
      outcome += `Perhaps most importantly, the company ends this phase with genuine ${topDomain === 'research' ? 'technical differentiation' : topDomain === 'marketing' ? 'market position' : 'product quality'}. The ${topDomain === 'research' ? 'research-first strategy created intellectual property' : topDomain === 'marketing' ? 'market-driven approach built customer relationships' : 'product focus delivered quality'} that competitors cannot easily replicate, providing a foundation for whatever comes next-whether that's continued independent growth, strategic partnership, or acquisition.`;
    } else if (this.metrics.cash <= 0) {
      outcome += `${companyName}'s journey ended after ${quarters} quarters when the company ran out of runway. `;
      outcome += `With ${milestones} milestone${milestones !== 1 ? 's' : ''} completed, the team had shown promise but ultimately couldn't sustain operations long enough to reach profitability or secure the next funding round. `;
      outcome += `This outcome, while disappointing, is far from unusual-the majority of startups fail, and those that do often fail for the same reason: cash ran out before product-market fit was achieved. `;
      outcome += `The lessons learned here will prove valuable for future ventures. Several team members have developed skills and networks that will serve them well, and the technical work may yet find a home through acqui-hire or IP sale.`;
    } else if (this.consecutiveHighPassQuarters >= 5) {
      outcome += `${companyName}'s journey ended after ${quarters} quarters when the board lost confidence in the founder's commitment. `;
      outcome += `Quarter after quarter of inaction-skipping decisions, avoiding tough calls-sent a clear message to investors and team alike: the founder had mentally checked out. `;
      outcome += `In startups, momentum is everything. A CEO who won't make decisions creates a leadership vacuum that talented people and patient capital simply won't tolerate. `;
      outcome += `The company may yet survive under new leadership, but this particular chapter has closed.`;
    } else {
      outcome += `${companyName} reached a crossroads after ${quarters} quarters with ${milestones} milestone${milestones !== 1 ? 's' : ''} completed. `;
      outcome += `While not achieving all objectives, the team built something of value-a ¬£${(val/1000).toFixed(1)}M enterprise with real technology and customer relationships. `;
      outcome += `The story isn't over. This foundation could support a pivot, a merger, or a fresh attempt with new capital and hard-won lessons about what works in this market.`;
    }
    
    return outcome;
  }
  
  // Generate lessons section with rich reflections
  generateLessonsSection() {
    const companyName = this.company?.name || 'The Startup';
    const companyId = this.company?.id || 'aether';
    const locationName = this.location?.name || 'the UK';
    const topDomain = Object.entries(this.domainInvestments).sort((a, b) => b[1] - a[1])[0]?.[0] || 'research';
    const success = this.completedMilestones.length >= 3;
    const riskRate = (this.aggressiveChoices + 1) / (this.aggressiveChoices + this.conservativeChoices + 1);
    const totalAdvice = this.funderAdviceFollowed + this.funderAdviceIgnored;
    const followRate = totalAdvice > 0 ? (this.funderAdviceFollowed / totalAdvice) : 0.5;
    
    let lessons = "";
    
    lessons += `The ${companyName} journey ${success ? 'validates' : 'illustrates'} several principles while complicating others. `;
    
    // Domain-specific lessons
    if (topDomain === 'research') {
      lessons += `The research-centric approach ${success ? 'worked here' : 'showed promise'}, but it required patient capital and a market that valued genuine technical depth. In faster-moving consumer markets, the same approach might have been fatal. `;
    } else if (topDomain === 'marketing') {
      lessons += `The market-first approach ${success ? 'proved effective' : 'had merit'}, though it meant constantly balancing customer demands against technical capabilities. The tension was productive, but exhausting. `;
    } else if (topDomain === 'dev') {
      lessons += `The product-centric approach ${success ? 'delivered results' : 'showed potential'}, validating the belief that quality compounds over time. But it also meant saying no to opportunities that might have accelerated growth. `;
    }
    
    // Risk lessons
    if (riskRate > 0.5) {
      lessons += `The decision to embrace risk ${success ? 'paid off' : 'was a calculated gamble'}, but this outcome shouldn't be over-learned. High-variance strategies sometimes produce spectacular results; other times they produce spectacular failures. What mattered here was that the risks were calculated and the team had enough runway to survive the experiments that didn't work. `;
    } else {
      lessons += `The conservative approach to risk ${success ? 'provided stability' : 'may have limited upside'}. In a market that rewards bold moves, measured progress has its own risks. `;
    }
    
    // Investor relationship lessons
    if (followRate > 0.6) {
      lessons += `The collaborative investor relationship proved valuable, but it was built through consistent honesty, including about setbacks. Trust accumulated over time through a pattern of transparent communication, not through any single moment of openness. `;
    }
    
    // Location lessons
    lessons += `Finally, the ${locationName} ${locationName === 'London' ? '' : 'location '}choice illustrates how early decisions cascade through a company's life. `;
    if (locationName === "Oxford" || locationName === "Cambridge") {
      lessons += `Access to ${topDomain === 'research' ? 'research' : 'technical'} talent shaped hiring, which shaped culture, which shaped strategic choices. `;
    }
    lessons += `There's no single "right" answer to ${locationName === 'London' ? 'whether to base in London' : 'location decisions'}-but there are answers that align with a company's genuine strengths.`;
    
    return lessons;
  }
  
  // Show the journey modal
  showResearchModal() {
    const modal = document.getElementById('researchModal');
    if (modal) {
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    }
  }
  
  hideResearchModal() {
    const modal = document.getElementById('researchModal');
    if (modal) {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    }
  }
  
  showJourneyModal() {
    const modal = document.getElementById('journeyModal');
    const content = document.getElementById('journeyContent');
    
    if (!modal || !content) return;
    
    const archetype = this.getLeadershipArchetype();
    const success = this.completedMilestones.length >= 3;
    const whatWorked = this.generateWhatWorkedDidnt();
    const moments = this.getDefiningMoments();
    const decisions = this.getCriticalDecisions();
    
    // Calculate scores (0-100)
    const sciScore = Math.min(100, Math.round((this.metrics.sci || 50) * 1.2));
    const devScore = Math.min(100, Math.round((this.metrics.dev || 50) * 1.2));
    const mktScore = Math.min(100, Math.round((this.metrics.mkt || 50) * 1.2));
    const hrScore = Math.min(100, Math.round((this.metrics.hr || 50) * 1.2));
    
    let html = `
      <div class="space-y-6">
        <!-- Header -->
        <div class="text-center border-b pb-6">
          <div class="text-xs uppercase tracking-wider text-slate-400 mb-1">THE AI STARTUP GAME</div>
          <h1 class="text-3xl font-bold text-slate-800 mb-1">Your Entrepreneurial Journey</h1>
          <div class="text-2xl font-bold text-indigo-600">${this.company?.name || 'Your Startup'}</div>
          <div class="text-slate-500 text-sm mt-2">A management case study from your startup simulation</div>
          <div class="mt-3 inline-block px-4 py-2 rounded-full text-sm font-bold ${success ? 'bg-emerald-100 text-emerald-700' : 'bg-amber-100 text-amber-700'}">
            ${success ? 'SUCCESS' : 'JOURNEY ENDED'} ¬∑ ${this.completedMilestones.length}/3 milestones ¬∑ ${this.turn} quarters ¬∑ ¬£${this.metrics.val}k valuation
          </div>
        </div>
        
        <!-- Leadership Style -->
        <div class="bg-gradient-to-r from-slate-50 to-indigo-50 rounded-xl p-5">
          <h2 class="text-xl font-bold text-slate-800 mb-1">${archetype.title}</h2>
          <div class="text-xs uppercase tracking-wider text-slate-400 mb-3">Leadership Style</div>
          
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm mb-4">
            <div><span class="text-slate-500">Valuation:</span> <span class="font-bold">¬£${this.metrics.val}k</span></div>
            <div><span class="text-slate-500">Equity:</span> <span class="font-bold">${this.metrics.equity.toFixed(1)}%</span></div>
            <div><span class="text-slate-500">Team:</span> <span class="font-bold">${this.metrics.staff} people</span></div>
            <div><span class="text-slate-500">Cash:</span> <span class="font-bold">¬£${this.metrics.cash}k</span></div>
          </div>
          
          <p class="text-slate-600 text-sm mb-4">${archetype.description}</p>
          
          <!-- Score Bars -->
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <div>
              <div class="flex justify-between text-xs mb-1"><span class="text-slate-500">Science</span><span class="font-bold">${sciScore}</span></div>
              <div class="h-2 bg-slate-200 rounded-full overflow-hidden"><div class="h-full bg-emerald-500 rounded-full" style="width: ${sciScore}%"></div></div>
            </div>
            <div>
              <div class="flex justify-between text-xs mb-1"><span class="text-slate-500">Product</span><span class="font-bold">${devScore}</span></div>
              <div class="h-2 bg-slate-200 rounded-full overflow-hidden"><div class="h-full bg-sky-500 rounded-full" style="width: ${devScore}%"></div></div>
            </div>
            <div>
              <div class="flex justify-between text-xs mb-1"><span class="text-slate-500">Sales</span><span class="font-bold">${mktScore}</span></div>
              <div class="h-2 bg-slate-200 rounded-full overflow-hidden"><div class="h-full bg-fuchsia-500 rounded-full" style="width: ${mktScore}%"></div></div>
            </div>
            <div>
              <div class="flex justify-between text-xs mb-1"><span class="text-slate-500">Culture</span><span class="font-bold">${hrScore}</span></div>
              <div class="h-2 bg-slate-200 rounded-full overflow-hidden"><div class="h-full bg-amber-500 rounded-full" style="width: ${hrScore}%"></div></div>
            </div>
          </div>
        </div>
        
        <!-- The Story -->
        <div>
          <h3 class="text-lg font-bold text-slate-800 mb-2">The Story</h3>
          <p class="text-slate-600 text-sm leading-relaxed">${this.generateStorySection()}</p>
        </div>
        
        <!-- Strategic Approach -->
        <div>
          <h3 class="text-lg font-bold text-slate-800 mb-2">Strategic Approach</h3>
          <p class="text-slate-600 text-sm leading-relaxed">${this.generateStrategicApproach()}</p>
        </div>
        
        <!-- The Journey -->
        <div>
          <h3 class="text-lg font-bold text-slate-800 mb-2">The Journey</h3>
          <p class="text-slate-600 text-sm leading-relaxed">${this.generateJourneySection()}</p>
        </div>
        
        <!-- Defining Moments -->
        ${moments.length > 0 ? `
        <div>
          <h3 class="text-lg font-bold text-slate-800 mb-3">Defining Moments</h3>
          <div class="space-y-3">
            ${moments.map(m => `
              <div class="flex gap-3 text-sm">
                <div class="w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 ${m.type === 'milestone' ? 'bg-emerald-100 text-emerald-600' : m.type === 'funding' ? 'bg-sky-100 text-sky-600' : m.type === 'crisis' ? 'bg-red-100 text-red-600' : 'bg-amber-100 text-amber-600'}">
                  Q${m.quarter}
                </div>
                <div>
                  <div class="font-medium text-slate-800">${m.title}</div>
                  <div class="text-slate-500 text-xs">${m.description}</div>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
        ` : ''}
        
        <!-- Critical Decisions -->
        ${decisions.length > 0 ? `
        <div>
          <h3 class="text-lg font-bold text-slate-800 mb-3">Critical Decisions</h3>
          <div class="space-y-3">
            ${decisions.map(d => `
              <div class="bg-slate-50 rounded-lg p-3">
                <div class="flex items-center gap-2 mb-1">
                  <span class="text-xs font-bold text-slate-400">Q${d.quarter}</span>
                  <span class="text-xs font-bold text-indigo-600">${d.domain}</span>
                </div>
                <div class="text-xs text-slate-500 mb-1">${d.situation}</div>
                <div class="text-sm font-medium text-slate-800">‚Üí "${d.choice}"</div>
              </div>
            `).join('')}
          </div>
        </div>
        ` : ''}
        
        <!-- What Worked / What Didn't -->
        <div class="grid md:grid-cols-2 gap-4">
          <div class="bg-emerald-50 rounded-lg p-4">
            <h4 class="font-bold text-emerald-800 mb-2">What Worked</h4>
            <ul class="text-sm text-emerald-700 space-y-1">
              ${whatWorked.worked.map(w => `<li>‚Ä¢ ${w}</li>`).join('')}
            </ul>
          </div>
          <div class="bg-amber-50 rounded-lg p-4">
            <h4 class="font-bold text-amber-800 mb-2">What Didn't</h4>
            <ul class="text-sm text-amber-700 space-y-1">
              ${whatWorked.didnt.map(w => `<li>‚Ä¢ ${w}</li>`).join('')}
            </ul>
          </div>
        </div>
        
        <!-- The Outcome -->
        <div>
          <h3 class="text-lg font-bold text-slate-800 mb-2">The Outcome</h3>
          <p class="text-slate-600 text-sm leading-relaxed">${this.generateOutcomeSection()}</p>
        </div>
        
        <!-- Lessons -->
        <div>
          <h3 class="text-lg font-bold text-slate-800 mb-2">Lessons & Reflections</h3>
          <p class="text-slate-600 text-sm leading-relaxed">${this.generateLessonsSection()}</p>
        </div>
        
        <!-- Footer -->
        <div class="border-t pt-4 text-center text-xs text-slate-400">
          <p class="font-medium">The AI Startup Game</p>
          <p>Created by Ammon Salter with Stefano Baruffaldi & Federico Bignone</p>
          <p>Part of the ESRC-funded project "Profiting from Science" [ES/X003949/1]</p>
          <p>¬© 2025 ¬∑ Licensed under CC BY-NC-SA 4.0</p>
        </div>
        
        <!-- Actions -->
        <div class="flex justify-center gap-4 pt-2">
          <button onclick="game.downloadJourneyPDF()" class="px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2">
            <span>üìÑ</span> Download PDF
          </button>
          <button onclick="document.getElementById('journeyModal').classList.add('hidden')" class="px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-lg font-medium transition-colors">
            Close
          </button>
        </div>
      </div>
    `;
    
    content.innerHTML = html;
    modal.classList.remove('hidden');
    modal.classList.add('flex');
  }
  
  // Download journey as PDF - Professional format matching case study template
  downloadJourneyPDF() {
    try {
      const { jsPDF } = window.jspdf;
      if (!jsPDF) {
        alert('PDF library not loaded. Please refresh the page and try again.');
        return;
      }
      const doc = new jsPDF({ format: 'a4', unit: 'mm' });
    
    const pageWidth = 210;
    const pageHeight = 297;
    const margin = 20;
    const contentWidth = pageWidth - 2 * margin;
    let y = margin;
    let pageNum = 1;
    
    const companyName = this.company?.name || 'Your Startup';
    const companyId = this.company?.id || 'aether';
    const archetype = this.getLeadershipArchetype();
    const success = this.completedMilestones.length >= 3;
    const failure = this.metrics.cash <= 0;
    const whatWorked = this.generateWhatWorkedDidnt();
    const moments = this.getDefiningMoments();
    const decisions = this.getCriticalDecisions();
    
    // Score calculations
    const sciScore = Math.min(99, Math.max(10, Math.round((this.metrics.sci || 50) * 1.2)));
    const devScore = Math.min(99, Math.max(10, Math.round((this.metrics.dev || 50) * 1.2)));
    const mktScore = Math.min(99, Math.max(10, Math.round((this.metrics.mkt || 50) * 1.2)));
    const hrScore = Math.min(99, Math.max(10, Math.round((this.metrics.hr || 50) * 1.2)));
    
    // Helper: Add page header (for pages 2+)
    const addPageHeader = () => {
      doc.setFontSize(9);
      doc.setTextColor(120);
      doc.text(`The AI Startup Game - ${companyName}`, margin, 12);
      doc.text(`Page ${pageNum}`, pageWidth - margin, 12, { align: 'right' });
      doc.setDrawColor(220);
      doc.line(margin, 15, pageWidth - margin, 15);
    };
    
    // Helper: Check page break and add header
    const checkPageBreak = (neededSpace = 30) => {
      if (y > pageHeight - neededSpace) {
        doc.addPage();
        pageNum++;
        addPageHeader();
        y = 25;
        return true;
      }
      return false;
    };
    
    // Helper: Add wrapped text with proper page breaks
    const addWrappedText = (text, x, startY, maxWidth, lineHeight = 5) => {
      const lines = doc.splitTextToSize(text, maxWidth);
      let currentY = startY;
      lines.forEach((line) => {
        if (currentY > pageHeight - 20) {
          doc.addPage();
          pageNum++;
          addPageHeader();
          currentY = 25;
        }
        doc.text(line, x, currentY);
        currentY += lineHeight;
      });
      return currentY;
    };
    
    // Helper: Draw score bar in "78 Science" format like the example
    const drawScoreBar = (x, y, score, label, color) => {
      const barWidth = 30;
      const barHeight = 4;
      
      // Score number first
      doc.setFontSize(11);
      doc.setFont(undefined, 'bold');
      doc.setTextColor(60);
      doc.text(String(score), x, y);
      
      // Label after score
      doc.setFontSize(10);
      doc.setFont(undefined, 'normal');
      doc.setTextColor(100);
      doc.text(label, x + 12, y);
      
      // Bar below
      const barYPos = y + 3;
      doc.setFillColor(230, 230, 230);
      doc.roundedRect(x, barYPos, barWidth, barHeight, 1.5, 1.5, 'F');
      doc.setFillColor(...color);
      doc.roundedRect(x, barYPos, barWidth * (score / 100), barHeight, 1.5, 1.5, 'F');
    };
    
    // ===== PAGE 1: Title Page =====
    
    // Small header
    doc.setFontSize(11);
    doc.setTextColor(100);
    doc.text('THE AI STARTUP GAME', pageWidth / 2, y, { align: 'center' });
    y += 12;
    
    // Main title
    doc.setFontSize(32);
    doc.setTextColor(30);
    doc.text('Your Entrepreneurial Journey', pageWidth / 2, y, { align: 'center' });
    y += 14;
    
    // Company name
    doc.setFontSize(24);
    doc.setTextColor(79, 70, 229);
    doc.text(companyName, pageWidth / 2, y, { align: 'center' });
    y += 10;
    
    // Subtitle
    doc.setFontSize(11);
    doc.setTextColor(100);
    doc.text('A management case study from your startup simulation', pageWidth / 2, y, { align: 'center' });
    y += 12;
    
    // Status badge
    doc.setFontSize(11);
    doc.setFont(undefined, 'bold');
    if (success) {
      doc.setTextColor(22, 163, 74);
      doc.text(`SUCCESS`, pageWidth / 2, y, { align: 'center' });
    } else if (failure) {
      doc.setTextColor(220, 38, 38);
      doc.text(`GAME OVER`, pageWidth / 2, y, { align: 'center' });
    } else {
      doc.setTextColor(161, 98, 7);
      doc.text(`JOURNEY ENDED`, pageWidth / 2, y, { align: 'center' });
    }
    y += 6;
    doc.setFont(undefined, 'normal');
    doc.setTextColor(100);
    doc.text(`${this.completedMilestones.length}/3 milestones ‚Ä¢ ${this.turn} quarters ‚Ä¢ ¬£${this.metrics.val.toLocaleString()}k valuation`, pageWidth / 2, y, { align: 'center' });
    y += 18;
    
    // ===== Leadership Style Box =====
    const boxTop = y;
    const boxHeight = 52;
    doc.setFillColor(248, 250, 252);
    doc.setDrawColor(226, 232, 240);
    doc.roundedRect(margin, boxTop, contentWidth, boxHeight, 3, 3, 'FD');
    
    y = boxTop + 10;
    
    // Archetype title
    doc.setFontSize(18);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(30);
    doc.text(archetype.title, margin + 8, y);
    y += 5;
    
    // Label
    doc.setFontSize(8);
    doc.setFont(undefined, 'normal');
    doc.setTextColor(150);
    doc.text('LEADERSHIP STYLE', margin + 8, y);
    y += 8;
    
    // Final Position section
    doc.setFontSize(8);
    doc.setTextColor(100);
    doc.text('FINAL POSITION', margin + 8, y);
    y += 5;
    
    doc.setFontSize(10);
    doc.setTextColor(30);
    doc.text(`Valuation: ¬£${this.metrics.val.toLocaleString()}k`, margin + 8, y);
    doc.text(`Equity retained: ${this.metrics.equity.toFixed(1)}%`, margin + 70, y);
    y += 5;
    doc.text(`Team size: ${this.metrics.staff} people`, margin + 8, y);
    doc.text(`Cash remaining: ¬£${this.metrics.cash}k`, margin + 70, y);
    y += 8;
    
    // Description
    doc.setFontSize(10);
    doc.setTextColor(60);
    const descLines = doc.splitTextToSize(archetype.description, contentWidth - 16);
    descLines.forEach(line => {
      doc.text(line, margin + 8, y);
      y += 4.5;
    });
    
    y = boxTop + boxHeight + 10;
    
    // Score bars row - format: "78 Science" with bar below
    const barY = y;
    drawScoreBar(margin, barY, sciScore, 'Science', [34, 197, 94]);
    drawScoreBar(margin + 42, barY, devScore, 'Product', [59, 130, 246]);
    drawScoreBar(margin + 84, barY, mktScore, 'Sales', [168, 85, 247]);
    drawScoreBar(margin + 126, barY, hrScore, 'Culture', [251, 146, 60]);
    
    y = barY + 18;
    
    // ===== The Story =====
    doc.setFontSize(14);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(30);
    doc.text('The Story', margin, y);
    doc.setFont(undefined, 'normal');
    y += 7;
    
    doc.setFontSize(10);
    doc.setTextColor(60);
    y = addWrappedText(this.generateStorySection() || 'The startup journey began with a vision to transform the industry.', margin, y, contentWidth, 5);
    y += 8;
    
    // ===== Strategic Approach =====
    checkPageBreak(50);
    doc.setFontSize(14);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(30);
    doc.text('Strategic Approach', margin, y);
    doc.setFont(undefined, 'normal');
    y += 7;
    
    doc.setFontSize(10);
    doc.setTextColor(60);
    y = addWrappedText(this.generateStrategicApproach() || 'The team developed a strategic approach balancing technical depth with market awareness.', margin, y, contentWidth, 5);
    y += 8;
    
    // ===== The Journey =====
    checkPageBreak(50);
    doc.setFontSize(14);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(30);
    doc.text('The Journey', margin, y);
    doc.setFont(undefined, 'normal');
    y += 7;
    
    doc.setFontSize(10);
    doc.setTextColor(60);
    y = addWrappedText(this.generateJourneySection() || 'The company navigated challenges and milestones on the path to building something meaningful.', margin, y, contentWidth, 5);
    y += 8;
    
    // ===== Defining Moments =====
    if (moments.length > 0) {
      checkPageBreak(60);
      doc.setFontSize(14);
      doc.setFont(undefined, 'bold');
      doc.setTextColor(30);
      doc.text('Defining Moments', margin, y);
      doc.setFont(undefined, 'normal');
      y += 10;
      
      moments.forEach(m => {
        checkPageBreak(25);
        // Quarter badge
        doc.setFontSize(11);
        doc.setFont(undefined, 'bold');
        doc.setTextColor(79, 70, 229);
        doc.text(`Q${m.quarter || '?'}`, margin, y);
        
        // Title
        doc.setTextColor(30);
        doc.text(m.title || 'Milestone', margin + 12, y);
        doc.setFont(undefined, 'normal');
        y += 5;
        
        // Description - full text, no truncation
        doc.setFontSize(9);
        doc.setTextColor(100);
        const descText = m.description || 'A significant moment in the company journey.';
        const momentLines = doc.splitTextToSize(descText, contentWidth - 12);
        momentLines.forEach(line => {
          if (y > pageHeight - 20) {
            doc.addPage();
            pageNum++;
            addPageHeader();
            y = 25;
          }
          doc.text(line, margin + 12, y);
          y += 4;
        });
        y += 5;
      });
      y += 4;
    }
    
    // ===== Critical Decisions =====
    if (decisions.length > 0) {
      checkPageBreak(60);
      doc.setFontSize(14);
      doc.setFont(undefined, 'bold');
      doc.setTextColor(30);
      doc.text('Critical Decisions', margin, y);
      doc.setFont(undefined, 'normal');
      y += 5;
      
      doc.setFontSize(9);
      doc.setTextColor(100);
      doc.text('The choices that shaped the company\'s trajectory:', margin, y);
      y += 10;
      
      decisions.forEach(d => {
        checkPageBreak(30);
        
        // Quarter and domain
        doc.setFontSize(11);
        doc.setFont(undefined, 'bold');
        doc.setTextColor(79, 70, 229);
        doc.text(`Quarter ${d.quarter || '?'}`, margin, y);
        doc.setTextColor(100);
        doc.text(d.domain || 'Decision', margin + 25, y);
        doc.setFont(undefined, 'normal');
        y += 6;
        
        // Situation - full text
        doc.setFontSize(9);
        doc.setTextColor(80);
        const sitText = d.situation || 'A strategic decision point.';
        const sitLines = doc.splitTextToSize(sitText, contentWidth);
        sitLines.forEach(line => {
          if (y > pageHeight - 25) {
            doc.addPage();
            pageNum++;
            addPageHeader();
            y = 25;
          }
          doc.text(line, margin, y);
          y += 4;
        });
        y += 1;
        
        // Choice
        doc.setTextColor(30);
        const choiceText = d.choice || 'Made a decision';
        doc.text(`‚Üí "${choiceText}"`, margin, y);
        y += 10;
      });
      y += 4;
    }
    
    // ===== What Worked / What Didn't =====
    checkPageBreak(60);
    
    const colWidth = (contentWidth - 10) / 2;
    
    // Headers
    doc.setFontSize(12);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(22, 163, 74);
    doc.text('What Worked', margin, y);
    doc.setTextColor(180, 83, 9);
    doc.text("What Didn't", margin + colWidth + 10, y);
    doc.setFont(undefined, 'normal');
    y += 8;
    
    // Items
    doc.setFontSize(9);
    const startY = y;
    let leftY = y;
    let rightY = y;
    
    // Left column (What Worked)
    doc.setTextColor(22, 163, 74);
    (whatWorked.worked || []).forEach(item => {
      const lines = doc.splitTextToSize(`‚Ä¢ ${item || 'Good decision'}`, colWidth);
      lines.forEach(line => {
        if (leftY > pageHeight - 20) {
          // Would need page break - simplified handling
        }
        doc.text(line, margin, leftY);
        leftY += 4;
      });
      leftY += 2;
    });
    
    // Right column (What Didn't)
    doc.setTextColor(180, 83, 9);
    (whatWorked.didnt || []).forEach(item => {
      const lines = doc.splitTextToSize(`‚Ä¢ ${item || 'Room for improvement'}`, colWidth);
      lines.forEach(line => {
        doc.text(line, margin + colWidth + 10, rightY);
        rightY += 4;
      });
      rightY += 2;
    });
    
    y = Math.max(leftY, rightY) + 8;
    
    // ===== The Outcome =====
    checkPageBreak(50);
    doc.setFontSize(14);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(30);
    doc.text('The Outcome', margin, y);
    doc.setFont(undefined, 'normal');
    y += 7;
    
    doc.setFontSize(10);
    doc.setTextColor(60);
    y = addWrappedText(this.generateOutcomeSection() || 'The journey reached a conclusion with lessons learned and foundations laid.', margin, y, contentWidth, 5);
    y += 8;
    
    // ===== Lessons & Reflections =====
    checkPageBreak(50);
    doc.setFontSize(14);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(30);
    doc.text('Lessons & Reflections', margin, y);
    doc.setFont(undefined, 'normal');
    y += 7;
    
    doc.setFontSize(10);
    doc.setTextColor(60);
    y = addWrappedText(this.generateLessonsSection() || 'Every startup journey offers lessons that inform future ventures.', margin, y, contentWidth, 5);
    y += 15;
    
    // ===== Footer =====
    checkPageBreak(40);
    
    doc.setDrawColor(200);
    doc.line(margin, y, pageWidth - margin, y);
    y += 10;
    
    doc.setFontSize(11);
    doc.setFont(undefined, 'bold');
    doc.setTextColor(30);
    doc.text('The AI Startup Game', pageWidth / 2, y, { align: 'center' });
    doc.setFont(undefined, 'normal');
    y += 6;
    
    doc.setFontSize(9);
    doc.setTextColor(100);
    doc.text('Created by Ammon Salter with Stefano Baruffaldi & Federico Bignone', pageWidth / 2, y, { align: 'center' });
    y += 5;
    doc.text('Part of the ESRC-funded project "Profiting from Science" [ES/X003949/1]', pageWidth / 2, y, { align: 'center' });
    y += 5;
    doc.text('¬© 2025 Salter, Baruffaldi & Bignone', pageWidth / 2, y, { align: 'center' });
    y += 5;
    doc.text('Licensed under CC BY-NC-SA 4.0', pageWidth / 2, y, { align: 'center' });
    y += 8;
    
    doc.setTextColor(150);
    const dateStr = new Date().toLocaleDateString('en-GB', { day: '2-digit', month: 'long', year: 'numeric' });
    doc.text(`Generated ${dateStr}`, pageWidth / 2, y, { align: 'center' });
    
    // Save the PDF
    const filename = success ? `Journey_${companyName.replace(/[^a-z0-9]/gi, '_')}_Success.pdf` : `Journey_${companyName.replace(/[^a-z0-9]/gi, '_')}.pdf`;
    doc.save(filename);
    
    } catch (error) {
      console.error('PDF generation error:', error);
      alert('Error generating PDF: ' + error.message + '\n\nPlease try again or check the browser console for details.');
    }
  }
}

// Global sound toggle function
function toggleSound() {
  const enabled = soundManager.toggle();
  document.getElementById("soundIcon").textContent = enabled ? "üîä" : "üîá";
}

const game = new Game();
</script>

</body>
</html>

